-- Filter sql script package generated by Filter Generator v2.0.0.0.

-- Temporary variables
DECLARE @TestCommandLineId INT
DECLARE @FilterId INT
DECLARE @GathererTypeId INT
DECLARE @ParentLogNodeId INT
DECLARE @ParentNodes TABLE(ParentNodeId INT NOT NULL, Depth INT NOT NULL);

-- Disable real-time filtering for RC builds with revision number less than 12617.
DECLARE @BuildNumber INT
DECLARE @BuildRevision INT
SELECT TOP 1 @BuildNumber = BuildNumber, @BuildRevision = Revision FROM RmsVersion ORDER BY Major DESC, Minor DESC, BuildNumber DESC, Revision DESC
IF (@BuildNumber > 8400 OR (@BuildNumber = 8400 AND @BuildRevision >= 12617))
	ALTER TABLE TaskResult ENABLE TRIGGER RealTimeFilterJobForTaskResult
ELSE
	ALTER TABLE TaskResult DISABLE TRIGGER RealTimeFilterJobForTaskResult


-- Deactivating all existing filters. All relevant filters will be re-activated as they're inserted or updated.
UPDATE Filter SET [Status] = 0

-- Inserting filter 5984 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%RtcHckTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%RtcHckTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5984 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5984, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: Win.MBN.GSM.TestCSConnectivity fails because RTCServer - corenet.cloudapp.net is not avaliable anymore.', 'HCK Errata: Win.MBN.GSM.TestCSConnectivity fails because RTCServer - corenet.cloudapp.net is not avaliable anymore.', 'This is an acceptable failure', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows v6.3 Client x86","Windows v6.3 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'RtcHckTest::CHckTest::MbbGsmBasicTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Application did not connect on time', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5973 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%INFGate.exe /N%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%INFGate.exe /N%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5973 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5973, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: INF Syntax Test is failing for invalid language ID', 'This test is can not recognize the language ID of Serbian-Latin (0x241a) and it is failing due to this language ID.

This test should pass as the language ID is valid as per the "Windows Language Code Identifier Reference" document.', 'Fixed with tests bundled with RS1 release', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '^.*241a is not a valid LanguageID.*$', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5971 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DelPort.exe _PortName_'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DelPort.exe _PortName_')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5971 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5971, 3, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'Errata: Remove Delport fails on Devmode Corruptor and Print Driver Stress Test', 'Task "Delete Port" may fail for test "Print Driver Stress Test".', 'This is an acceptable failure, and does not impact the overall test results. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5970 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'INFGate.exe /N'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('INFGate.exe /N')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5970 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5970, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: INF Syntax Test failing for invalid language ID', 'This test is can not recognize the language ID of Serbian-Latin (0x241a) and it is failing due to this language ID.

This test should pass as the language ID is valid as per the "Windows Language Code Identifier Reference" document.', 'Fixed with tests bundled with RS1 release', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '^.*241a is not a valid LanguageID.*$', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5964 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:D3DConf_12_0_ResourceBindingAdditional::IndexBufferFormatAndStripCut'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:D3DConf_12_0_ResourceBindingAdditional::IndexBufferFormatAndStripCut')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5964 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5964, 9, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Test [D3D12 - Index Buffer Format and Strip Cut] fails on specific hardware.', 'Test [D3D12 - Index Buffer Format and Strip Cut] fails on specific hardware.', 'These failures are acceptable. ', '2026-12-31T13:24:01')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/DeviceID[contains(.,''PCI\VEN_1002'') and (contains(.,''DEV_9874'') or contains(.,''DEV_98C0'') or contains(.,''DEV_98CD'') or contains(.,''DEV_98E4'') or contains(.,''DEV_67A2'') or contains(.,''DEV_6980'') or contains(.,''DEV_6981'') or contains(.,''DEV_6985'') or contains(.,''DEV_6986'') or contains(.,''DEV_6987'') or contains(.,''DEV_699F'') or contains(.,''DEV_6985'') or contains(.,''DEV_6995'') or contains(.,''DEV_67B0'') or contains(.,''DEV_67B1'') or contains(.,''DEV_67B8'') or contains(.,''DEV_67B9'') or contains(.,''DEV_67BA'') or contains(.,''DEV_67BE'') or contains(.,''DEV_6930'') or contains(.,''DEV_6938'') or contains(.,''DEV_6939'') or contains(.,''DEV_6900'') or contains(.,''DEV_6901'') or contains(.,''DEV_6902'') or contains(.,''DEV_6903'') or contains(.,''DEV_6907'') or contains(.,''DEV_6920'') or contains(.,''DEV_6921'') or contains(.,''DEV_67A0'') or contains(.,''DEV_67A1'') or contains(.,''DEV_6929'') or contains(.,''DEV_692B'') or contains(.,''DEV_692F'') or contains(.,''DEV_7300'') or contains(.,''DEV_67DF'') or contains(.,''DEV_67EF'') or contains(.,''DEV_67FF'') or contains(.,''DEV_67C0'') or contains(.,''DEV_67C1'') or contains(.,''DEV_67C2'') or contains(.,''DEV_67C4'') or contains(.,''DEV_67C7'') or contains(.,''DEV_67E0'') or contains(.,''DEV_67E3'') or contains(.,''DEV_67E8'') or contains(.,''DEV_67EB'') or contains(.,''DEV_699F'') or contains(.,''DEV_694C'') or contains(.,''DEV_6FDF'') or contains(.,''DEV_694E''))])  ')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 10240])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_ResourceBindingAdditional..IndexBufferFormatAndStripCut', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*SUCCEEDED.*0x80004005.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-12-31T13:24:01' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5963 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5963 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5963, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, '[WDDM2 - Page Fault Test - Induce Fault [9|11|12]] test failures', 'Test [WDDM2 - Page Fault Test - Induce Fault [9|11|12]] fails on specific hardware.', 'These failures are acceptable. ', '2027-06-30T11:37:47')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/DeviceID[contains(.,''PCI\VEN_1002'') and (contains(.,''DEV_6790'') or contains(.,''DEV_6792'') or contains(.,''DEV_6798'') or contains(.,''DEV_6799'') or contains(.,''DEV_679A'') or contains(.,''DEV_679B'') or contains(.,''DEV_679E'') or contains(.,''DEV_6806'') or contains(.,''DEV_6808'') or contains(.,''DEV_6809'') or contains(.,''DEV_6810'') or contains(.,''DEV_6811'') or contains(.,''DEV_6818'') or contains(.,''DEV_6819'') or contains(.,''DEV_6828'') or contains(.,''DEV_6835'') or contains(.,''DEV_6837'') or contains(.,''DEV_6838'') or contains(.,''DEV_6839'') or contains(.,''DEV_683B'') or contains(.,''DEV_683D'') or contains(.,''DEV_683F'') or contains(.,''DEV_6800'') or contains(.,''DEV_6801'') or contains(.,''DEV_6820'') or contains(.,''DEV_6821'') or contains(.,''DEV_6822'') or contains(.,''DEV_6823'') or contains(.,''DEV_6824'') or contains(.,''DEV_6825'') or contains(.,''DEV_6826'') or contains(.,''DEV_6827'') or contains(.,''DEV_682A'') or contains(.,''DEV_682B'') or contains(.,''DEV_682C'') or contains(.,''DEV_682D'') or contains(.,''DEV_682F'') or contains(.,''DEV_6830'') or contains(.,''DEV_6831'') or contains(.,''DEV_684C'') or contains(.,''DEV_6780'') or contains(.,''DEV_6784'') or contains(.,''DEV_6788'') or contains(.,''DEV_678A'') or contains(.,''DEV_1305'') or contains(.,''DEV_1306'') or contains(.,''DEV_1307'') or contains(.,''DEV_1309'') or contains(.,''DEV_130A'') or contains(.,''DEV_130C'') or contains(.,''DEV_130D'') or contains(.,''DEV_130E'') or contains(.,''DEV_130F'') or contains(.,''DEV_1310'') or contains(.,''DEV_1311'') or contains(.,''DEV_1313'') or contains(.,''DEV_1315'') or contains(.,''DEV_1318'') or contains(.,''DEV_131C'') or contains(.,''DEV_131D'') or contains(.,''DEV_130B'') or contains(.,''DEV_1312'') or contains(.,''DEV_1316'') or contains(.,''DEV_1317'') or contains(.,''DEV_131B'') or contains(.,''DEV_9830'') or contains(.,''DEV_9831'') or contains(.,''DEV_9832'') or contains(.,''DEV_9833'') or contains(.,''DEV_9834'') or contains(.,''DEV_9835'') or contains(.,''DEV_9836'') or contains(.,''DEV_9837'') or contains(.,''DEV_9838'') or contains(.,''DEV_9839'') or contains(.,''DEV_983D'') or contains(.,''DEV_9850'') or contains(.,''DEV_9851'') or contains(.,''DEV_9852'') or contains(.,''DEV_9853'') or contains(.,''DEV_9854'') or contains(.,''DEV_9855'') or contains(.,''DEV_9856'') or contains(.,''DEV_9857'') or contains(.,''DEV_9858'') or contains(.,''DEV_9859'') or contains(.,''DEV_985A'') or contains(.,''DEV_985B'') or contains(.,''DEV_985C'') or contains(.,''DEV_985D'') or contains(.,''DEV_985E'') or contains(.,''DEV_985F'') or contains(.,''DEV_9920'') or contains(.,''DEV_9922'') or contains(.,''DEV_9923'') or contains(.,''DEV_9924'') or contains(.,''DEV_6610'') or contains(.,''DEV_6611'') or contains(.,''DEV_6613'') or contains(.,''DEV_6617'') or contains(.,''DEV_6631'') or contains(.,''DEV_6650'') or contains(.,''DEV_6651'') or contains(.,''DEV_6658'') or contains(.,''DEV_665C'') or contains(.,''DEV_665D'') or contains(.,''DEV_665F'') or contains(.,''DEV_6600'') or contains(.,''DEV_6601'') or contains(.,''DEV_6602'') or contains(.,''DEV_6603'') or contains(.,''DEV_6606'') or contains(.,''DEV_6607'') or contains(.,''DEV_6620'') or contains(.,''DEV_6621'') or contains(.,''DEV_6623'') or contains(.,''DEV_6604'') or contains(.,''DEV_6605'') or contains(.,''DEV_6646'') or contains(.,''DEV_6647'') or contains(.,''DEV_6640'') or contains(.,''DEV_6641'') or contains(.,''DEV_6660'') or contains(.,''DEV_6663'') or contains(.,''DEV_6664'') or contains(.,''DEV_6665'') or contains(.,''DEV_6667'') or contains(.,''DEV_666F'') or contains(.,''DEV_6608'') or contains(.,''DEV_6649''))])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64","Windows v10.0 Client x64","Windows v10.0 Client x86","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VidMm..PageFault..InduceFault.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreEqual.Flush.pDevice., D3DERR_DEVICELOST. - Values .0x0, 0x88760868.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual.Flush.pRenderTarget, pContext., S_OK. - Values .0x0, 0x0.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED.pDevice..CreateCommittedResource..heapProperties, D3D12_HEAP_FLAG_NONE, .resourceDesc, D3D12_RESOURCE_STATE_COMMON, nullptr, IID_PPV_ARGS..pResource......Value .0x887a0005.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-06-30T11:37:47' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5915 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging devfund.memorytest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging devfund.memorytest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5915 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5915, 7, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HCK Driver Memory test fails with no log file', 'Win8.1 memory test fails to produce log files', 'Ignore missing log file errors', '2023-10-09T19:30:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T19:30:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5912 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:D3DConf_12_0_TimingData::CopyTimestamps'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:D3DConf_12_0_TimingData::CopyTimestamps')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5912 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5912, 5, 0, 1, 1, 1, 0, 0, @TestCommandLineId, '[D3D12 - Copy Timestamps] failures', 'Test [D3D12 - Copy Timestamps] fails on specific hardware.', 'These failures are acceptable. ', '2025-10-31T17:57:52')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/DeviceID[contains(.,''PCI\VEN_1002'') and (contains(.,''DEV_6790'') or contains(.,''DEV_6792'') or contains(.,''DEV_6798'') or contains(.,''DEV_6799'') or contains(.,''DEV_679A'') or contains(.,''DEV_679B'') or contains(.,''DEV_679E'') or contains(.,''DEV_6806'') or contains(.,''DEV_6808'') or contains(.,''DEV_6809'') or contains(.,''DEV_6810'') or contains(.,''DEV_6811'') or contains(.,''DEV_6818'') or contains(.,''DEV_6819'') or contains(.,''DEV_6828'') or contains(.,''DEV_6835'') or contains(.,''DEV_6837'') or contains(.,''DEV_6838'') or contains(.,''DEV_6839'') or contains(.,''DEV_683B'') or contains(.,''DEV_683D'') or contains(.,''DEV_683F'') or contains(.,''DEV_6800'') or contains(.,''DEV_6801'') or contains(.,''DEV_6820'') or contains(.,''DEV_6821'') or contains(.,''DEV_6822'') or contains(.,''DEV_6823'') or contains(.,''DEV_6824'') or contains(.,''DEV_6825'') or contains(.,''DEV_6826'') or contains(.,''DEV_6827'') or contains(.,''DEV_682A'') or contains(.,''DEV_682B'') or contains(.,''DEV_682C'') or contains(.,''DEV_682D'') or contains(.,''DEV_682F'') or contains(.,''DEV_6830'') or contains(.,''DEV_6831'') or contains(.,''DEV_684C'') or contains(.,''DEV_6780'') or contains(.,''DEV_6784'') or contains(.,''DEV_6788'') or contains(.,''DEV_678A''))])  ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64","Windows v10.0 Client x64","Windows v10.0 Client x86","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_TimingData..CopyTimestamps', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsGreaterThanOrEqual.RuntimeEvent.GpuTime, .UINT64.Results.StartTime.QuadPart.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_TimingData..CopyTimestamps', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsGreaterThanOrEqual.RuntimeEvent.GpuEndTime, .UINT64.Results.StartTime.QuadPart.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-31T17:57:52' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5862 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11filter.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11filter.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5862 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5862, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK; WGF11 Filter may fail with color missmatch', 'The WGF11 Filter set of tests may fail due to pixel color mismatches.', 'This is an interim Filter. All Color Mismatch failures in the WGF11 Filter xxx tests are waived.', '2030-10-31T16:57:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg', '.*Color mismatch*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-10-31T16:57:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5849 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogo.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogo.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5849 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5849, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Secure Boot Logo Test failure with ConfirmSetOfLargeVariable or Confirm64KilobytesOfUnauthenticatedVariableStorage', 'The test "Secure Boot Logo Test" may fail with one of the following errors:

getSize
GetVariable failed with status 0xC0000005
VariableName "testKilobyte10

Test creation of testLargeVariable
Insufficient Variable Storage - SetVariable failed with status 0xC0000454 STATUS_INSUFFICIENT_NVRAM_RESOURCES (EFI_OUT_OF_RESOURCES)
Try rebooting your system to allow the firmware to reclaim unused space.  The test should pass on its first execution after a reboot.  If this error appears on the first test execution after a reboot, your firmware has a bug.
VariableName "testLargeVariable"
VendorGuid   77fa9abd-0359-4d32-bd60-28f4e78f784b
Attributes   0x00000007
DataSize     0x00008000

', 'These failures are caused by a test errata and are waived by this filter. ', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Tests.Confirm64KilobytesOfUnauthenticatedVariableStorage', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*GetVariable.*0xC0000005\nVariableName "testKilobyte\d{1,3}', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'Microsoft.UefiSecureBootLogo.Tests.ConfirmSetOfLargeVariable', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SetVariable failed with status 0xC0000454 .*STATUS_INSUFFICIENT_NVRAM_RESOURCES \(EFI_OUT_OF_RESOURCES\).*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5826 v26.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_TestExe_ -%s98wtt.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_TestExe_ -%s98wtt.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5826 AND Version = 26
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5826, 26, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UAA falsely fail Intel SST audio, since it''s not UAA compliant implmentation', 'UAA test falsely fail Intel SST audio, since it''s not UAA compliant implmentation', 'Per Device.Audio.Base.HardwareArchitecture requirement, Audio codec is no longer required to be UAA compliant as long as the PnP ID of the audio device is NOT compatible with any of the audio class driver packaged in Windows.
', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"PCI\VEN_8086&DEV_9D70") or starts-with(.,"PCI\VEN_8086&DEV_9D71") or starts-with(.,"PCI\VEN_8086&DEV_9D72") or starts-with(.,"PCI\VEN_8086&DEV_9D73") or starts-with(.,"PCI\VEN_8086&DEV_9D74") or starts-with(.,"PCI\VEN_8086&DEV_9D75") or starts-with(.,"PCI\VEN_8086&DEV_9D76") or starts-with(.,"PCI\VEN_8086&DEV_9D77") or starts-with(.,"PCI\VEN_8086&DEV_A170") or starts-with(.,"PCI\VEN_8086&DEV_A171") or starts-with(.,"PCI\VEN_8086&DEV_A172") or starts-with(.,"PCI\VEN_8086&DEV_A173") or starts-with(.,"PCI\VEN_8086&DEV_A174") or starts-with(.,"PCI\VEN_8086&DEV_A175") or starts-with(.,"PCI\VEN_8086&DEV_A176") or starts-with(.,"PCI\VEN_8086&DEV_A177") or starts-with(.,"PCI\VEN_8086&DEV_A34F") or starts-with(.,"PCI\VEN_8086&DEV_A34E") or starts-with(.,"PCI\VEN_8086&DEV_A34D") or starts-with(.,"PCI\VEN_8086&DEV_A34C") or starts-with(.,"PCI\VEN_8086&DEV_A34B") or starts-with(.,"PCI\VEN_8086&DEV_A34A") or starts-with(.,"PCI\VEN_8086&DEV_A349") or starts-with(.,"PCI\VEN_8086&DEV_A348") or starts-with(.,"PCI\VEN_8086&DEV_9DC8") or starts-with(.,"PCI\VEN_8086&DEV_98C8") or starts-with(.,"PCI\VEN_8086&DEV_1A98") or starts-with(.,"PCI\VEN_8086&DEV_0A98") or starts-with(.,"PCI\VEN_8086&DEV_A2F0") or starts-with(.,"PCI\VEN_8086&DEV_A2CF") or starts-with(.,"PCI\VEN_8086&DEV_A2CE") or starts-with(.,"PCI\VEN_8086&DEV_A2CD") or starts-with(.,"PCI\VEN_8086&DEV_A2CC") or starts-with(.,"PCI\VEN_8086&DEV_A2CB") or starts-with(.,"PCI\VEN_8086&DEV_A2CA") or starts-with(.,"PCI\VEN_8086&DEV_A2C9") or starts-with(.,"PCI\VEN_8086&DEV_A2C8") or starts-with(.,"PCI\VEN_8086&DEV_9D71") or starts-with(.,"PCI\VEN_8086&DEV_5A98") or starts-with(.,"PCI\VEN_8086&DEV_3198") or contains(.,''VEN_10EC&DEV_0225'') or contains(.,''VEN_10EC&DEV_0295'') or contains(.,''VEN_10EC&DEV_0299'') or contains(.,"VEN_8086&DEV_280F") or contains(.,''VEN_8086&DEV_280B'') or contains(.,''VEN_8086&DEV_2812'') or contains(.,''VEN_8086&DEV_2816'') or contains(.,''VEN_8086&DEV_281A'') or contains(.,''VEN_8086&DEV_2815'') or contains(.,''VEN_8086&DEV_281C'') or contains(.,''VEN_8086&DEV_2819'') or contains(.,''VEN_8086&DEV_2814'') or contains(.,''VEN_8086&DEV_2818'') or contains(.,''VEN_8086&DEV_281D'') or contains(.,''VEN_8086&DEV_7A50'') or contains(.,''VEN_8086&DEV_0222'') or contains(.,''VEN_8086&DEV_51CA'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5744 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% %microsoft.dxgi.swapchain.rendering.tests.dll /name:CSwapChainsTest::TestCreateSwapChainForCoreWindow_Overlapped_WoW64'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% %microsoft.dxgi.swapchain.rendering.tests.dll /name:CSwapChainsTest::TestCreateSwapChainForCoreWindow_Overlapped_WoW64')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5744 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5744, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: Test for Overlapped Swap Chain Blending  (Wow64) failure', 'Test for Overlapped Swap Chain Blending  (Wow64) fails
', 'The test will be updated at a later date. This waiver waives all failures in this test. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5569 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe E2EBdeWlkTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe E2EBdeWlkTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5569 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5569, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Bitlocker NonAOAC tests are not designed for AOAC machines but are inadvertently mapped to them', 'Bitlocker NonAOAC tests are not designed for AOAC machines but are inadvertently mapped to them.  As a result, a cleanup task for this test attempts to enable a clear key when it has already been enabled.', 'This errata will filter such failures and change the result to a pass.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/RUNTIME_BLOCK/IsAOAC[.="true"])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Adding.+clear key protector', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Adding.+clear key protector', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Error Text: Device encryption is currently blocked by this PC''s configuration.', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error Text: Device encryption is currently blocked by this PC''s configuration.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WlkTest_PreCheck::WlkTest_VerifySystemIsNonAOAC', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'The Device is an AOAC Device', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Due to a technical limitation, this test is erroneously mapped to this machine', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WlkTest_DecryptOSVolume::I_DecryptOSVolume', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'FVE is OFF', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Initializing device encryption', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WlkTest_DecryptOSVolume::I_DecryptOSVolume', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'FVE is OFF', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Verifying if the volume is initialized', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4933 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11filter.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11filter.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4933 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4933, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'wgf11tiledresources MIN/MAX filtering', 'Tiled Resource MIN/MAX filtering may fail in some cases ', 'Failures waived at this time. ', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002&'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_MAG_LINEAR_MIP_POINT', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_POINT_MAG_LINEAR_MIP_POINT', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_MAG_MIP_LINEAR', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_LINEAR_MAG_MIP_POINT', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_ANISOTROPIC', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 994 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%mpioinstallfiltr.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%mpioinstallfiltr.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 994 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(994, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Failing to get HBA device instance on certain HBAs', 'Failed to recognize HDLM DSM', 'Structural change to installpnpfiltr.cpp', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["Device.Storage.Hd.Mpio.BasicFunction"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Install/Remove Pnpfiltr Driver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'For non-iSCSI test environment, please make sure at least two HBA ports are connected to the storage target', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Fail to collect MPIO environment information', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to get HBA device instances', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 836 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'powershell .\InternalUsbIdle.ps1'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('powershell .\InternalUsbIdle.ps1')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 836 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(836, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Internal Card Reader fails to go to Selective Suspend', 'USB Internal Device Idle test fail on Internal card reader. For this type of hardware it is not possible to support USB Selective Suspend using inbox driver.
', 'Manual Errata 836 is available so long as the device is a "USB Mass Storage Device" and in USB\Class_08. 
If this applies please list errata 836 in the submission readme.
', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'InternalUsbIdle', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!', 'Error: Device .* is internal, not a hub, and did not selective suspend', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 802 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'NetMediaLogoTests.exe NETMEDIA_0143'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('NetMediaLogoTests.exe NETMEDIA_0143')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 802 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(802, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Network Media: Event-01 spacing failures', 'The test verifies for DMR event spacing to be less than 200ms. The events generated by the device are not received by the test in real time. So this test fails sometimes', 'Filter out the Event spacing failures as these tests have already been covered by the CTT tests which are a prerequisite for the NMD HCK tests', '3013-03-01T11:46:06')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows 8 Client ARM","Windows 7 Client x86","Windows 7 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*NETMEDIA 0143', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*The difference between the events should be > 200 milli seconds', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '3013-03-01T11:46:06' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 693 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%xHCITransferspeed.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%xHCITransferspeed.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 693 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(693, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'xHCI Transfer Speed Test fails for xHCI with no exposed ports', 'xHCI Transfer Speed Test fails for xHCI controller with no exposed ports.  The user cannot attach a SuperMUTT to a port of the controller to test.', 'The test will be updated to accomodate these types of controllers.', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'BUSES_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('BUSES_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'BUSES_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(boolean(BUSES_BLOCK/Devnode/DeviceId[contains(.,''VEN_1022'') and contains(.,''DEV_7812'')]) or boolean(BUSES_BLOCK/Devnode/DeviceId[contains(.,''VEN_1022'') and contains(.,''DEV_7814'')]))', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Max Throughput 0.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 648 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_TestExe_ -c _TestPro_ -l "s98wtt.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_TestExe_ -c _TestPro_ -l "s98wtt.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 648 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(648, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UAA Test: Output Payload Capability is not equal to 0x003c', 'HDAudio 047-A DCN has changed to allow registers to set any value on reset. Thus, this test case is no longer valid', 'Filter covers failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows 8 Client x86","Windows 8 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '^Controller Tests\\Testing controller''s registers for read Write property$', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Output Payload Capability\s+= 0x0078', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL : Output Payload Capability\s+is not equal to\s+0x003c', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5978 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%devfundinftest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%devfundinftest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5978 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5978, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Device Driver Inf Verification Test failing with language ID 241A', 'Chkinf does not recognize 241A as a valid language ID and fails any INF that specifies it.', 'Ignore the language ID error for language 241A', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*241A is not a valid LanguageID.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 484 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'powershell .\StressReset.ps1 /scenario "copyoffload"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('powershell .\StressReset.ps1 /scenario "copyoffload"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 484 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(484, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Offload Reset Logo  test fails in RRTI List ID and WUT-with-Unmap unit tests', 'Filter to mask below failures:
(a) RRTI Invalid list identifier test
(b) Write Using Token Modify Source Token area before data transfer by trimming source area
(c) Write Using Token Modify Source Token area during data transfer by trimming source area

(a) and (c) are not really applicable.
(b) sends UNMAP without regards to Maximum Unmap LBA count which causes the error.', 'The issue is investigated and corrected. It will be available in future releases.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Write Using Token Exceed ODX limit test', 'Write Using Token Exceed ODX limit test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Logging an Error', 'AdditionalSenseCodeQualifier: 0x4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Write Using Token Modify Source Token area before data transfer by writing to source area', 'Write Using Token Modify Source Token area before data transfer by writing to source area', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Assertion: Write Using Token Modify Source Token area before data transfer by trimming source area', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Assertion: Write Using Token Modify Source Token area during data transfer by trimming source area', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'ASSERTION: Receive Token Invalid list identifier test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Write Using Token Modify Source Token area before data transfer by another WUT command to source area', 'Write Using Token Modify Source Token area before data transfer by another WUT command to source area', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Write Using Token with more LBAs than availabe in ROD', 'Write Using Token with more LBAs than availabe in ROD', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Write Using Token Exceed ODX limit test', 'Write Using Token Exceed ODX limit test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Logging an Error', 'AdditionalSenseCodeQualifier: 0x0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 471 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe RadioLogoTest.dll /name:RadioMgrLogoTests::VerifyAirplaneModePreviousState'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe RadioLogoTest.dll /name:RadioMgrLogoTests::VerifyAirplaneModePreviousState')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 471 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(471, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Radio Manager - Verify Radio State - VerifyAirplaneModePreviousState tests fail when Wireless Page is not already loaded', 'Partner is consistently hitting a timing issue when running the WHCK Tests without first loading the Wireless UI Page in the PC Settings App. ', 'This failure has been debugged by both Dev and Test and has been deemed a bug in the WHCK Tests themselves. The resolution is to filter out the failing tests of VerifyAirplaneModePreviousStateOn and VerifyAirplaneModePreviousStateOff', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["System.Client.RadioManagement.RadioMaintainsState"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=RadioMgrLogoTests::VerifyAirplaneModePreviousStateOn', 'RadioMgrLogoTests::VerifyAirplaneModePreviousStateOn', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=RadioMgrLogoTests::VerifyAirplaneModePreviousStateOff', 'RadioMgrLogoTests::VerifyAirplaneModePreviousStateOff', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 403 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 403 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(403, 9, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Hardware Issue', 'Fixed in newer hardware avalable today', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false or contains(.,''DEV_0190'') or contains(.,''DEV_0191'') or contains(.,''DEV_0192'') or contains(.,''DEV_0193'') or contains(.,''DEV_0194'') or contains(.,''DEV_0195'') or contains(.,''DEV_0196'') or contains(.,''DEV_0197'') or contains(.,''DEV_0198'') or contains(.,''DEV_0199'') or contains(.,''DEV_019A'') or contains(.,''DEV_019B'') or contains(.,''DEV_019C'') or contains(.,''DEV_019D'') or contains(.,''DEV_019E'') or contains(.,''DEV_019F'') or contains(.,''DEV_0400'') or contains(.,''DEV_0401'') or contains(.,''DEV_0402'') or contains(.,''DEV_0403'') or contains(.,''DEV_0404'') or contains(.,''DEV_0405'') or contains(.,''DEV_0406'') or contains(.,''DEV_0407'') or contains(.,''DEV_0408'') or contains(.,''DEV_0409'') or contains(.,''DEV_040A'') or contains(.,''DEV_040B'') or contains(.,''DEV_040C'') or contains(.,''DEV_040D'') or contains(.,''DEV_040E'') or contains(.,''DEV_040F'') or contains(.,''DEV_0410'') or contains(.,''DEV_0411'') or contains(.,''DEV_0412'') or contains(.,''DEV_0413'') or contains(.,''DEV_0414'') or contains(.,''DEV_0415'') or contains(.,''DEV_0416'') or contains(.,''DEV_0417'') or contains(.,''DEV_0418'') or contains(.,''DEV_0419'') or contains(.,''DEV_041A'') or contains(.,''DEV_041B'') or contains(.,''DEV_041C'') or contains(.,''DEV_041D'') or contains(.,''DEV_041E'') or contains(.,''DEV_041F'') or contains(.,''DEV_0420'') or contains(.,''DEV_0421'') or contains(.,''DEV_0422'') or contains(.,''DEV_0423'') or contains(.,''DEV_0424'') or contains(.,''DEV_0425'') or contains(.,''DEV_0426'') or contains(.,''DEV_0427'') or contains(.,''DEV_0428'') or contains(.,''DEV_0429'') or contains(.,''DEV_042A'') or contains(.,''DEV_042B'') or contains(.,''DEV_042C'') or contains(.,''DEV_042D'') or contains(.,''DEV_042E'') or contains(.,''DEV_042F'') or contains(.,''DEV_05E0'') or contains(.,''DEV_05E1'') or contains(.,''DEV_05E2'') or contains(.,''DEV_05E3'') or contains(.,''DEV_05E4'') or contains(.,''DEV_05E5'') or contains(.,''DEV_05E6'') or contains(.,''DEV_05E7'') or contains(.,''DEV_05E8'') or contains(.,''DEV_05E9'') or contains(.,''DEV_05EA'') or contains(.,''DEV_05EB'') or contains(.,''DEV_05EC'') or contains(.,''DEV_05ED'') or contains(.,''DEV_05EE'') or contains(.,''DEV_05EF'') or contains(.,''DEV_05F0'') or contains(.,''DEV_05F1'') or contains(.,''DEV_05F2'') or contains(.,''DEV_05F3'') or contains(.,''DEV_05F4'') or contains(.,''DEV_05F5'') or contains(.,''DEV_05F6'') or contains(.,''DEV_05F7'') or contains(.,''DEV_05F8'') or contains(.,''DEV_05F9'') or contains(.,''DEV_05FA'') or contains(.,''DEV_05FB'') or contains(.,''DEV_05FC'') or contains(.,''DEV_05FD'') or contains(.,''DEV_05FE'') or contains(.,''DEV_05FF'') or contains(.,''DEV_0600'') or contains(.,''DEV_0601'') or contains(.,''DEV_0602'') or contains(.,''DEV_0603'') or contains(.,''DEV_0604'') or contains(.,''DEV_0605'') or contains(.,''DEV_0606'') or contains(.,''DEV_0607'') or contains(.,''DEV_0608'') or contains(.,''DEV_0609'') or contains(.,''DEV_060A'') or contains(.,''DEV_060B'') or contains(.,''DEV_060C'') or contains(.,''DEV_060D'') or contains(.,''DEV_060E'') or contains(.,''DEV_060F'') or contains(.,''DEV_0610'') or contains(.,''DEV_0611'') or contains(.,''DEV_0612'') or contains(.,''DEV_0613'') or contains(.,''DEV_0614'') or contains(.,''DEV_0615'') or contains(.,''DEV_0616'') or contains(.,''DEV_0617'') or contains(.,''DEV_0618'') or contains(.,''DEV_0619'') or contains(.,''DEV_061A'') or contains(.,''DEV_061B'') or contains(.,''DEV_061C'') or contains(.,''DEV_061D'') or contains(.,''DEV_061E'') or contains(.,''DEV_061F'') or contains(.,''DEV_0620'') or contains(.,''DEV_0621'') or contains(.,''DEV_0622'') or contains(.,''DEV_0623'') or contains(.,''DEV_0624'') or contains(.,''DEV_0625'') or contains(.,''DEV_0626'') or contains(.,''DEV_0627'') or contains(.,''DEV_0628'') or contains(.,''DEV_0629'') or contains(.,''DEV_062A'') or contains(.,''DEV_062B'') or contains(.,''DEV_062C'') or contains(.,''DEV_062D'') or contains(.,''DEV_062E'') or contains(.,''DEV_062F'') or contains(.,''DEV_0630'') or contains(.,''DEV_0631'') or contains(.,''DEV_0632'') or contains(.,''DEV_0633'') or contains(.,''DEV_0634'') or contains(.,''DEV_0635'') or contains(.,''DEV_0636'') or contains(.,''DEV_0637'') or contains(.,''DEV_0638'') or contains(.,''DEV_0639'') or contains(.,''DEV_063A'') or contains(.,''DEV_063B'') or contains(.,''DEV_063C'') or contains(.,''DEV_063D'') or contains(.,''DEV_063E'') or contains(.,''DEV_063F'') or contains(.,''DEV_0640'') or contains(.,''DEV_0641'') or contains(.,''DEV_0642'') or contains(.,''DEV_0643'') or contains(.,''DEV_0644'') or contains(.,''DEV_0645'') or contains(.,''DEV_0646'') or contains(.,''DEV_0647'') or contains(.,''DEV_0648'') or contains(.,''DEV_0649'') or contains(.,''DEV_064A'') or contains(.,''DEV_064B'') or contains(.,''DEV_064C'') or contains(.,''DEV_064D'') or contains(.,''DEV_064E'') or contains(.,''DEV_064F'') or contains(.,''DEV_0650'') or contains(.,''DEV_0651'') or contains(.,''DEV_0652'') or contains(.,''DEV_0653'') or contains(.,''DEV_0654'') or contains(.,''DEV_0655'') or contains(.,''DEV_0656'') or contains(.,''DEV_0657'') or contains(.,''DEV_0658'') or contains(.,''DEV_0659'') or contains(.,''DEV_065A'') or contains(.,''DEV_065B'') or contains(.,''DEV_065C'') or contains(.,''DEV_065D'') or contains(.,''DEV_065E'') or contains(.,''DEV_065F'') or contains(.,''DEV_06C0'') or contains(.,''DEV_06C1'') or contains(.,''DEV_06C2'') or contains(.,''DEV_06C3'') or contains(.,''DEV_06C4'') or contains(.,''DEV_06C5'') or contains(.,''DEV_06C6'') or contains(.,''DEV_06C7'') or contains(.,''DEV_06C8'') or contains(.,''DEV_06C9'') or contains(.,''DEV_06CA'') or contains(.,''DEV_06CB'') or contains(.,''DEV_06CC'') or contains(.,''DEV_06CD'') or contains(.,''DEV_06CE'') or contains(.,''DEV_06CF'') or contains(.,''DEV_06D0'') or contains(.,''DEV_06D1'') or contains(.,''DEV_06D2'') or contains(.,''DEV_06D3'') or contains(.,''DEV_06D4'') or contains(.,''DEV_06D5'') or contains(.,''DEV_06D6'') or contains(.,''DEV_06D7'') or contains(.,''DEV_06D8'') or contains(.,''DEV_06D9'') or contains(.,''DEV_06DA'') or contains(.,''DEV_06DB'') or contains(.,''DEV_06DC'') or contains(.,''DEV_06DD'') or contains(.,''DEV_06DE'') or contains(.,''DEV_06DF'') or contains(.,''DEV_06E0'') or contains(.,''DEV_06E1'') or contains(.,''DEV_06E2'') or contains(.,''DEV_06E3'') or contains(.,''DEV_06E4'') or contains(.,''DEV_06E5'') or contains(.,''DEV_06E6'') or contains(.,''DEV_06E7'') or contains(.,''DEV_06E8'') or contains(.,''DEV_06E9'') or contains(.,''DEV_06EA'') or contains(.,''DEV_06EB'') or contains(.,''DEV_06EC'') or contains(.,''DEV_06ED'') or contains(.,''DEV_06EE'') or contains(.,''DEV_06EF'') or contains(.,''DEV_06F0'') or contains(.,''DEV_06F1'') or contains(.,''DEV_06F2'') or contains(.,''DEV_06F3'') or contains(.,''DEV_06F4'') or contains(.,''DEV_06F5'') or contains(.,''DEV_06F6'') or contains(.,''DEV_06F7'') or contains(.,''DEV_06F8'') or contains(.,''DEV_06F9'') or contains(.,''DEV_06FA'') or contains(.,''DEV_06FB'') or contains(.,''DEV_06FC'') or contains(.,''DEV_06FD'') or contains(.,''DEV_06FE'') or contains(.,''DEV_06FF'') or contains(.,''DEV_0840'') or contains(.,''DEV_0841'') or contains(.,''DEV_0842'') or contains(.,''DEV_0843'') or contains(.,''DEV_0844'') or contains(.,''DEV_0845'') or contains(.,''DEV_0846'') or contains(.,''DEV_0847'') or contains(.,''DEV_0848'') or contains(.,''DEV_0849'') or contains(.,''DEV_084A'') or contains(.,''DEV_084B'') or contains(.,''DEV_084C'') or contains(.,''DEV_084D'') or contains(.,''DEV_084E'') or contains(.,''DEV_084F'') or contains(.,''DEV_0850'') or contains(.,''DEV_0851'') or contains(.,''DEV_0852'') or contains(.,''DEV_0853'') or contains(.,''DEV_0854'') or contains(.,''DEV_0855'') or contains(.,''DEV_0856'') or contains(.,''DEV_0857'') or contains(.,''DEV_0858'') or contains(.,''DEV_0859'') or contains(.,''DEV_085A'') or contains(.,''DEV_085B'') or contains(.,''DEV_085C'') or contains(.,''DEV_085D'') or contains(.,''DEV_085E'') or contains(.,''DEV_085F'') or contains(.,''DEV_0860'') or contains(.,''DEV_0861'') or contains(.,''DEV_0862'') or contains(.,''DEV_0863'') or contains(.,''DEV_0864'') or contains(.,''DEV_0865'') or contains(.,''DEV_0866'') or contains(.,''DEV_0867'') or contains(.,''DEV_0868'') or contains(.,''DEV_0869'') or contains(.,''DEV_086A'') or contains(.,''DEV_086B'') or contains(.,''DEV_086C'') or contains(.,''DEV_086D'') or contains(.,''DEV_086E''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'FloatArith\\sqrt', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'InstMod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0.[x|y|z]=3.4028235e\+038', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0Mod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 354 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_TestExe_ -c _TestPro_ -l "s98wtt.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_TestExe_ -c _TestPro_ -l "s98wtt.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 354 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(354, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Input and Output Stream Descriptor Size Must Be Read Only', 'The FIFO size for Input and Output Stream Descriptors should be read only. This issue is fixed in HLK but still present in the HCK. ', 'Filter Covers failure', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Controller Tests\\Testing controller''s registers for read Write property', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Assertion Testing for Read Only: FAILED\.\s+(Input|Output) Stream Descriptor FIFO Size register of the (Input|Output)_Stream_Descriptor #\d table must be read-only', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 227 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 227 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(227, 7, 2, 1, 0, 1, 0, 0, @TestCommandLineId, 'AutoTriage: Device Fundamentals tests may be marked as failed due to unexpected reboots during test runs', 'This autotriage filter contains information to help troubleshoot "Task cancelled because of an unexpected reboot" failure commonly seen during Device Fundamentals test runs. This note only applies if you see "Task cancelled because of an unexpected reboot" message if you click on "Error" button, after right clicking on the failing task in HCK Studio.', 'This failure is usually seen for the following three reasons:

1. Test causes the system to bugcheck due to a driver bug

WHCK configures test systems to automatically reboot if they bugcheck. If the system bugchecks when the test is still running, WHCK marks the test as failed and reports "Task cancelled because of an unexpected reboot" error.

If you see this error, please run the test with the system connected to a Kernel Debugger. If the system is connected to a Kernel Debugger at the time of the crash, the system will automatically break into the debugger. The crash can then be analyzed from the debugger. Please review MSDN documentation if you need help setting up a Windows Kernel Debugger.

You may find the following Kernel Debugging commands to be useful:

a. Set symbol path to Microsoft public symbol server path .sympath SRV*f:\localsymbols*http://msdl.microsoft.com/download/symbols

b. Load symbols .reload

c. Run !analyze command to identify the faulting component !analyze -v

d. Save the dump file .dump /f c:\memorydump.dmp

Save the dump file and have your driver developer investigate the dump as the bugcheck might be due to a bug in your driver. You may also open a support case with the WDK Support team if you need help fixing bugs in your driver.

If !analyze -v output identifies that the faulting component is a Microsoft component, you may contact WHCK CSS to have the bugcheck investigated by our Support team.

NOTE: Please only contact WHCK CSS after confirming that the bugcheck is due to a bug in a Microsoft component. Otherwise, you may be charged for the Support cost.

2. Test system does not properly support sleep/resume transitions due to BIOS issues.

Try updgrading BIOS on the test system, or try running the tests on different test systems.
', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows XP x86","Windows XP x64","Windows Server 2003 x86","Windows Server 2003 x64","Windows Vista Client x86","Windows Vista Client x64","Windows Server 2008 x86","Windows Server 2008 x64","Windows 7 Client x86","Windows 7 Client x64","Windows Server 2008 Release 2 x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Client ARM","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 195 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXVAHDVideoProcessing.exe VideoProcessing%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXVAHDVideoProcessing.exe VideoProcessing%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 195 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(195, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DXVA High Definition Video Processing  failing due to lumakey and other filter issues for some YUV and P8 input formats', 'The DXVA High Definition Video Processing - VideoProcessing test might fail in AI44, IA44, and P8 input surfaces. This is due to the YUV input surfaces allocated using DXVAHD Video Surface type causes invalid RGB output surface data during surface differentiation. Failures are identified by containing one of the following as a message:
INPUTFORMAT: D3DFMT_YUY2 or
INPUTFORMAT: D3DFMT_AI44 or
INPUTFORMAT: D3DFMT_IA44 or
INPUTFORMAT: D3DFMT_P8 or
INPUTFORMAT: D3DFMT_A8P8 and

PSNR level for channel R is outside the tolerable threshold or
PSNR level for channel G is outside the tolerable threshold or
PSNR level for channel B is outside the tolerable threshold or
', 'These failures are acceptable.
', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VideoProcessing', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'INPUTFORMAT: D3DFMT_YUY2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.* PSNR level for channel .* is outside the tolerable threshold', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'INPUTFORMAT:  D3DFMT_A8P8', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.* PSNR level for channel .* is outside the tolerable threshold', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'INPUTFORMAT: D3DFMT_P8', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.* PSNR level for channel .* is outside the tolerable threshold', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'INPUTFORMAT: D3DFMT_IA44', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.* PSNR level for channel .* is outside the tolerable threshold', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'INPUTFORMAT: D3DFMT_AI44', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.* PSNR level for channel .* is outside the tolerable threshold', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 155 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 155 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(155, 5, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Hardware Contingency', 'Fixed in a future revision of the hardware.', '2050-12-31T12:40:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false  or contains(.,''DEV_1200'') or contains(.,''DEV_1201'') or contains(.,''DEV_1202'') or contains(.,''DEV_1203'') or contains(.,''DEV_1204'') or contains(.,''DEV_1205'') or contains(.,''DEV_1206'') or contains(.,''DEV_1207'') or contains(.,''DEV_1208'') or contains(.,''DEV_1209'') or contains(.,''DEV_120A'') or contains(.,''DEV_120B'') or contains(.,''DEV_120C'') or contains(.,''DEV_120D'') or contains(.,''DEV_120E'') or contains(.,''DEV_120F'') or contains(.,''DEV_1210'') or contains(.,''DEV_1211'') or contains(.,''DEV_1212'') or contains(.,''DEV_1213'') or contains(.,''DEV_1214'') or contains(.,''DEV_1215'') or contains(.,''DEV_1216'') or contains(.,''DEV_1217'') or contains(.,''DEV_1218'') or contains(.,''DEV_1219'') or contains(.,''DEV_121A'') or contains(.,''DEV_121B'') or contains(.,''DEV_121C'') or contains(.,''DEV_121D'') or contains(.,''DEV_121E'') or contains(.,''DEV_121F'') or contains(.,''DEV_1220'') or contains(.,''DEV_1221'') or contains(.,''DEV_1222'') or contains(.,''DEV_1223'') or contains(.,''DEV_1224'') or contains(.,''DEV_1225'') or contains(.,''DEV_1226'') or contains(.,''DEV_1227'') or contains(.,''DEV_1228'') or contains(.,''DEV_1229'') or contains(.,''DEV_122A'') or contains(.,''DEV_122B'') or contains(.,''DEV_122C'') or contains(.,''DEV_122D'') or contains(.,''DEV_122E'') or contains(.,''DEV_122F'') or contains(.,''DEV_1230'') or contains(.,''DEV_1231'') or contains(.,''DEV_1232'') or contains(.,''DEV_1233'') or contains(.,''DEV_1234'') or contains(.,''DEV_1235'') or contains(.,''DEV_1236'') or contains(.,''DEV_1237'') or contains(.,''DEV_1238'') or contains(.,''DEV_1239'') or contains(.,''DEV_123A'') or contains(.,''DEV_123B'') or contains(.,''DEV_123C'') or contains(.,''DEV_123D'') or contains(.,''DEV_123E'') or contains(.,''DEV_123F'') or contains(.,''DEV_1240'') or contains(.,''DEV_1241'') or contains(.,''DEV_1242'') or contains(.,''DEV_1243'') or contains(.,''DEV_1244'') or contains(.,''DEV_1245'') or contains(.,''DEV_1246'') or contains(.,''DEV_1247'') or contains(.,''DEV_1248'') or contains(.,''DEV_1249'') or contains(.,''DEV_124A'') or contains(.,''DEV_124B'') or contains(.,''DEV_124C'') or contains(.,''DEV_124D'') or contains(.,''DEV_124E'') or contains(.,''DEV_124F'') or contains(.,''DEV_1250'') or contains(.,''DEV_1251'') or contains(.,''DEV_1252'') or contains(.,''DEV_1253'') or contains(.,''DEV_1254'') or contains(.,''DEV_1255'') or contains(.,''DEV_1256'') or contains(.,''DEV_1257'') or contains(.,''DEV_1258'') or contains(.,''DEV_1259'') or contains(.,''DEV_125A'') or contains(.,''DEV_125B'') or contains(.,''DEV_125C'') or contains(.,''DEV_125D'') or contains(.,''DEV_125E'') or contains(.,''DEV_125F'') or contains(.,''DEV_1260'') or contains(.,''DEV_1261'') or contains(.,''DEV_1262'') or contains(.,''DEV_1263'') or contains(.,''DEV_1264'') or contains(.,''DEV_1265'') or contains(.,''DEV_1266'') or contains(.,''DEV_1267'') or contains(.,''DEV_1268'') or contains(.,''DEV_1269'') or contains(.,''DEV_126A'') or contains(.,''DEV_126B'') or contains(.,''DEV_126C'') or contains(.,''DEV_126D'') or contains(.,''DEV_126E'') or contains(.,''DEV_126F'') or contains(.,''DEV_1270'') or contains(.,''DEV_1271'') or contains(.,''DEV_1272'') or contains(.,''DEV_1273'') or contains(.,''DEV_1274'') or contains(.,''DEV_1275'') or contains(.,''DEV_1276'') or contains(.,''DEV_1277'') or contains(.,''DEV_1278'') or contains(.,''DEV_1279'') or contains(.,''DEV_127A'') or contains(.,''DEV_127B'') or contains(.,''DEV_127C'') or contains(.,''DEV_127D'') or contains(.,''DEV_127E'') or contains(.,''DEV_127F''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', 'ResourceAccess\\sample_c.*min_lod', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'MipLevel=5', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'ResourceMinLODOffset=0.\d', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', 'ResourceAccess\\gather4.*_c', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'ResourceMinLOD=10', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Unexpected quad for 0, 0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T12:40:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 134 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'detectvm%-t'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('detectvm%-t')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 134 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(134, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DetectVM fails on physical systems', 'DetectVM is intended to be executed within a VM. Current behavior is that the test will fail on a native system (i.e. without the presence of the hypervisor). ', 'Pass the test if run on a native system.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["System.Server.SVVP"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["System.Server.SVVP.SVVP"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'DetectVM: No hypervisor detected.', 'UserText', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 132 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_PnPDTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_PnPDTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 132 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(132, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'PnP Driver Test - Insufficient resources error - EDT device opened , but request failed Win32=1450', '"Plug and Play Driver Test (Certification)" sends hundreds of IRP_MJ_CREATE requests in a sequence before it sends hundreds of IRP_MJ_CLOSE requests. This results in “insufficient resources” errors when devices with protocols defining open handle limitations reach their limitation.  Test will fail with “EDT device opened , but request failed Win32=1450 - Insufficient system resources exist to complete the requested service” error message.

', 'This filter will resolve the issue described. There are no plans to fix this issue in the test. ', '2026-10-13T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPTryStopAndRestartDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=DevfundTests.PNPDTest.PNPTryStopAndRestartDevice', '.*EDT device opened , but request failed.*Insufficient system resources exist to complete the requested service.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPTryStopDeviceRequestNewResourcesAndRestartDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=DevfundTests.PNPDTest.PNPTryStopDeviceRequestNewResourcesAndRestartDevice', '.*EDT device opened , but request failed.*Insufficient system resources exist to complete the requested service.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPDisableAndEnableDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=DevfundTests.PNPDTest.PNPDisableAndEnableDevice', '.*EDT device opened , but request failed.*Insufficient system resources exist to complete the requested service.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPTryStopDeviceAndFailRestart', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=DevfundTests.PNPDTest.PNPTryStopDeviceAndFailRestart', '.*EDT device opened , but request failed.*Insufficient system resources exist to complete the requested service.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-10-13T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 115 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGIPresentRate.exe FSSequential FSDiscard%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGIPresentRate.exe FSSequential FSDiscard%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 115 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(115, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DXGI Presentation Rate (32-bit) test fails with in Execute D3D Framework Test task with the message "GetFrameStatistics failed with error DXGI_ERROR_UNSUPPORTED because swap chain is not full-screen".', 'The DXGI Presentation Rate (32-bit) test fails with in Execute D3D Framework Test task with the message "GetFrameStatistics failed with error DXGI_ERROR_UNSUPPORTED because swap chain is not full-screen". The test fails to go to full screen causing the GetFrameStats failure.   This is likely caused by a timing problem with full screen transitions.

', 'This is an acceptable failure.', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!End Test:Title=FSDiscard', 'FSDiscard', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'GetFrameStatistics failed with error DXGI_ERROR_UNSUPPORTED because swap chain is not full-screen', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!End Test:Title=FSSequential', 'FSSequential', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'GetFrameStatistics failed with error DXGI_ERROR_UNSUPPORTED because swap chain is not full-screen', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 114 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ShellRunner.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ShellRunner.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 114 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(114, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '5 Tests in the Device.Graphics feature area may incorrectly fail the Execute Test task', 'Five tests in the Device.Graphics feature area may incorrectly fail the Execute Test with the message:
“ERROR: Test case failed with error code DDERR_GENERIC; check log for exact cause of failure” for test cases that contain “AES128” in the case name. The test jobs affected are: DX11 Video Content Protection FeatureLevel 11, 
DX11 Video Content Protection FeatureLevel 9, 
DX11 Video Decode FeatureLevel 11, 
DX11 Video Decode FeatureLevel 9, and 
AES 128 And Session key Refresh.', 'This issue is an acceptable failure at this time.', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DXVA2.0 Decoder\/Display Tests\\CryptoSession Tests\\.*AES128.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndMsg', 'ERROR: Test case failed with error code DDERR_GENERIC; check log for exact cause of failure.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 49 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 49 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(49, 8, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Hardware Contingency', 'Fixed in a future revision of the hardware.', '2050-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false or contains(.,''DEV_06C0'') or contains(.,''DEV_06C1'') or contains(.,''DEV_06C2'') or contains(.,''DEV_06C3'') or contains(.,''DEV_06C4'') or contains(.,''DEV_06C5'') or contains(.,''DEV_06C6'') or contains(.,''DEV_06C7'') or contains(.,''DEV_06C8'') or contains(.,''DEV_06C9'') or contains(.,''DEV_06CA'') or contains(.,''DEV_06CB'') or contains(.,''DEV_06CC'') or contains(.,''DEV_06CD'') or contains(.,''DEV_06CE'') or contains(.,''DEV_06CF'') or contains(.,''DEV_06D0'') or contains(.,''DEV_06D1'')  or contains(.,''DEV_06D2'') or contains(.,''DEV_06D3'') or contains(.,''DEV_06D4'') or contains(.,''DEV_06D5'') or contains(.,''DEV_06D6'') or contains(.,''DEV_06D7'')  or contains(.,''DEV_06D8'') or contains(.,''DEV_06D9'') or contains(.,''DEV_06DA'') or contains(.,''DEV_06DB'') or contains(.,''DEV_06DC'') or contains(.,''DEV_06DD'') or contains(.,''DEV_06DE'') or contains(.,''DEV_06DF'') or contains(.,''DEV_0E20'') or contains(.,''DEV_0E21'') or contains(.,''DEV_0E22'') or contains(.,''DEV_0E23'') or contains(.,''DEV_0E24'') or contains(.,''DEV_0E25'') or contains(.,''DEV_0E26'') or contains(.,''DEV_0E27'') or contains(.,''DEV_0E28'') or contains(.,''DEV_0E29'') or contains(.,''DEV_0E2A'') or contains(.,''DEV_0E2B'') or contains(.,''DEV_0E2C'') or contains(.,''DEV_0E2D'') or contains(.,''DEV_0E2E'') or contains(.,''DEV_0E2F'') or contains(.,''DEV_0E30'') or contains(.,''DEV_0E31'') or contains(.,''DEV_0E32'') or contains(.,''DEV_0E33'') or contains(.,''DEV_0E34'') or contains(.,''DEV_0E35'') or contains(.,''DEV_0E36'') or contains(.,''DEV_0E37'') or contains(.,''DEV_0E38'') or contains(.,''DEV_0E39'') or contains(.,''DEV_0E3A'') or contains(.,''DEV_0E3B'') or contains(.,''DEV_0E3C'') or contains(.,''DEV_0E3D'') or contains(.,''DEV_0E3E'') or contains(.,''DEV_0E3F'') or contains(.,''DEV_0DE0'') or contains(.,''DEV_0DE1'') or contains(.,''DEV_0DE2'') or contains(.,''DEV_0DE3'') or contains(.,''DEV_0DE4'') or contains(.,''DEV_0DE5'') or contains(.,''DEV_0DE6'') or contains(.,''DEV_0DE7'') or contains(.,''DEV_0DE8'') or contains(.,''DEV_0DE9'') or contains(.,''DEV_0DEA'') or contains(.,''DEV_0DEB'') or contains(.,''DEV_0DEC'') or contains(.,''DEV_0DED'') or contains(.,''DEV_0DEE'') or contains(.,''DEV_0DEF'') or contains(.,''DEV_0DF0'') or contains(.,''DEV_0DF1'') or contains(.,''DEV_0DF2'') or contains(.,''DEV_0DF3'') or contains(.,''DEV_0DF4'') or contains(.,''DEV_0DF5'') or contains(.,''DEV_0DF6'') or contains(.,''DEV_0DF7'') or contains(.,''DEV_0DF8'') or contains(.,''DEV_0DF9'') or contains(.,''DEV_0DFA'') or contains(.,''DEV_0DFB'') or contains(.,''DEV_0DFC'') or contains(.,''DEV_0DFD'') or contains(.,''DEV_0DFE'') or contains(.,''DEV_0DFF'') or contains(.,''DEV_0DC0'') or contains(.,''DEV_0DC1'') or contains(.,''DEV_0DC2'') or contains(.,''DEV_0DC3'') or contains(.,''DEV_0DC4'') or contains(.,''DEV_0DC5'') or contains(.,''DEV_0DC6'') or contains(.,''DEV_0DC7'') or contains(.,''DEV_0DC8'') or contains(.,''DEV_0DC9'') or contains(.,''DEV_0DCA'') or contains(.,''DEV_0DCB'') or contains(.,''DEV_0DCC'') or contains(.,''DEV_0DCD'') or contains(.,''DEV_0DCE'') or contains(.,''DEV_0DCF'') or contains(.,''DEV_0DD0'') or contains(.,''DEV_0DD1'') or contains(.,''DEV_0DD2'') or contains(.,''DEV_0DD3'') or contains(.,''DEV_0DD4'') or contains(.,''DEV_0DD5'') or contains(.,''DEV_0DD6'') or contains(.,''DEV_0DD7'') or contains(.,''DEV_0DD8'') or contains(.,''DEV_0DD9'') or contains(.,''DEV_0DDA'') or contains(.,''DEV_0DDB'') or contains(.,''DEV_0DDC'') or contains(.,''DEV_0DDD'') or contains(.,''DEV_0DDE'') or contains(.,''DEV_0DDF'') or contains(.,''DEV_0DC0'')  or contains(.,''DEV_0DC1'')  or contains(.,''DEV_0DC2'')  or contains(.,''DEV_0DC3'')  or contains(.,''DEV_0DC4'')  or contains(.,''DEV_0DC5'')  or contains(.,''DEV_0DC6'')  or contains(.,''DEV_0DC7'')  or contains(.,''DEV_0DC8'')  or contains(.,''DEV_0DC9'')  or contains(.,''DEV_0DCA'')  or contains(.,''DEV_0DCB'')  or contains(.,''DEV_0DCC'')  or contains(.,''DEV_0DCD'')  or contains(.,''DEV_0DCE'')  or contains(.,''DEV_0DCF'')  or contains(.,''DEV_0DD0'')  or contains(.,''DEV_0DD1'')  or contains(.,''DEV_0DD2'')  or contains(.,''DEV_0DD3'')  or contains(.,''DEV_0DD4'')  or contains(.,''DEV_0DD5'')  or contains(.,''DEV_0DD6'')  or contains(.,''DEV_0DD7'')  or contains(.,''DEV_0DD8'')  or contains(.,''DEV_0DD9'')  or contains(.,''DEV_0DDA'')  or contains(.,''DEV_0DDB'')  or contains(.,''DEV_0DDC'')  or contains(.,''DEV_0DDD'')  or contains(.,''DEV_0DDE'')  or contains(.,''DEV_0DDF'')  or contains(.,''DEV_0DE0'')  or contains(.,''DEV_0DE1'')  or contains(.,''DEV_0DE2'')  or contains(.,''DEV_0DE3'')  or contains(.,''DEV_0DE4'')  or contains(.,''DEV_0DE5'')  or contains(.,''DEV_0DE6'')  or contains(.,''DEV_0DE7'')  or contains(.,''DEV_0DE8'')  or contains(.,''DEV_0DE9'')  or contains(.,''DEV_0DEA'')  or contains(.,''DEV_0DEB'')  or contains(.,''DEV_0DEC'')  or contains(.,''DEV_0DED'')  or contains(.,''DEV_0DEE'')  or contains(.,''DEV_0DEF'')  or contains(.,''DEV_0DF0'')  or contains(.,''DEV_0DF1'')  or contains(.,''DEV_0DF2'')  or contains(.,''DEV_0DF3'')  or contains(.,''DEV_0DF4'')  or contains(.,''DEV_0DF5'')  or contains(.,''DEV_0DF6'')  or contains(.,''DEV_0DF7'')  or contains(.,''DEV_0DF8'')  or contains(.,''DEV_0DF9'')  or contains(.,''DEV_0DFA'')  or contains(.,''DEV_0DFB'')  or contains(.,''DEV_0DFC'')  or contains(.,''DEV_0DFD'')  or contains(.,''DEV_0DFE'')  or contains(.,''DEV_0DFF'')  or contains(.,''DEV_0E20'')  or contains(.,''DEV_0E21'')  or contains(.,''DEV_0E22'')  or contains(.,''DEV_0E23'')  or contains(.,''DEV_0E24'')  or contains(.,''DEV_0E25'')  or contains(.,''DEV_0E26'')  or contains(.,''DEV_0E27'')  or contains(.,''DEV_0E28'')  or contains(.,''DEV_0E29'')  or contains(.,''DEV_0E2A'')  or contains(.,''DEV_0E2B'')  or contains(.,''DEV_0E2C'')  or contains(.,''DEV_0E2D'')  or contains(.,''DEV_0E2E'')  or contains(.,''DEV_0E2F'')  or contains(.,''DEV_0E30'')  or contains(.,''DEV_0E31'')  or contains(.,''DEV_0E32'')  or contains(.,''DEV_0E33'')  or contains(.,''DEV_0E34'')  or contains(.,''DEV_0E35'')  or contains(.,''DEV_0E36'')  or contains(.,''DEV_0E37'')  or contains(.,''DEV_0E38'')  or contains(.,''DEV_0E39'')  or contains(.,''DEV_0E3A'')  or contains(.,''DEV_0E3B'')  or contains(.,''DEV_0E3C'')  or contains(.,''DEV_0E3D'')  or contains(.,''DEV_0E3E'')  or contains(.,''DEV_0E3F'') )])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', 'ResourceAccess\\sample_c.*min_lod', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'MipLevel=5', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'ResourceMinLODOffset=0.\d', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', 'ResourceAccess\\gather4.*_c', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'ResourceMinLOD=10', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Unexpected quad for 0, 0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48, 1, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Hardware Contingency', 'Fixed in a future revision of the hardware.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false or contains(.,''DEV_06C0'') or contains(.,''DEV_06C1'') or contains(.,''DEV_06C2'') or contains(.,''DEV_06C3'') or contains(.,''DEV_06C4'') or contains(.,''DEV_06C5'') or contains(.,''DEV_06C6'') or contains(.,''DEV_06C7'') or contains(.,''DEV_06C8'') or contains(.,''DEV_06C9'') or contains(.,''DEV_06CA'') or contains(.,''DEV_06CB'') or contains(.,''DEV_06CC'') or contains(.,''DEV_06CD'') or contains(.,''DEV_06CE'') or contains(.,''DEV_06CF'') or contains(.,''DEV_06D0'') or contains(.,''DEV_06D1'')  or contains(.,''DEV_06D2'') or contains(.,''DEV_06D3'') or contains(.,''DEV_06D4'') or contains(.,''DEV_06D5'') or contains(.,''DEV_06D6'') or contains(.,''DEV_06D7'')  or contains(.,''DEV_06D8'') or contains(.,''DEV_06D9'') or contains(.,''DEV_06DA'') or contains(.,''DEV_06DB'') or contains(.,''DEV_06DC'') or contains(.,''DEV_06DD'') or contains(.,''DEV_06DE'') or contains(.,''DEV_06DF'') or contains(.,''DEV_0E20'') or contains(.,''DEV_0E21'') or contains(.,''DEV_0E22'') or contains(.,''DEV_0E23'') or contains(.,''DEV_0E24'') or contains(.,''DEV_0E25'') or contains(.,''DEV_0E26'') or contains(.,''DEV_0E27'') or contains(.,''DEV_0E28'') or contains(.,''DEV_0E29'') or contains(.,''DEV_0E2A'') or contains(.,''DEV_0E2B'') or contains(.,''DEV_0E2C'') or contains(.,''DEV_0E2D'') or contains(.,''DEV_0E2E'') or contains(.,''DEV_0E2F'') or contains(.,''DEV_0E30'') or contains(.,''DEV_0E31'') or contains(.,''DEV_0E32'') or contains(.,''DEV_0E33'') or contains(.,''DEV_0E34'') or contains(.,''DEV_0E35'') or contains(.,''DEV_0E36'') or contains(.,''DEV_0E37'') or contains(.,''DEV_0E38'') or contains(.,''DEV_0E39'') or contains(.,''DEV_0E3A'') or contains(.,''DEV_0E3B'') or contains(.,''DEV_0E3C'') or contains(.,''DEV_0E3D'') or contains(.,''DEV_0E3E'') or contains(.,''DEV_0E3F'') or contains(.,''DEV_0DE0'') or contains(.,''DEV_0DE1'') or contains(.,''DEV_0DE2'') or contains(.,''DEV_0DE3'') or contains(.,''DEV_0DE4'') or contains(.,''DEV_0DE5'') or contains(.,''DEV_0DE6'') or contains(.,''DEV_0DE7'') or contains(.,''DEV_0DE8'') or contains(.,''DEV_0DE9'') or contains(.,''DEV_0DEA'') or contains(.,''DEV_0DEB'') or contains(.,''DEV_0DEC'') or contains(.,''DEV_0DED'') or contains(.,''DEV_0DEE'') or contains(.,''DEV_0DEF'') or contains(.,''DEV_0DF0'') or contains(.,''DEV_0DF1'') or contains(.,''DEV_0DF2'') or contains(.,''DEV_0DF3'') or contains(.,''DEV_0DF4'') or contains(.,''DEV_0DF5'') or contains(.,''DEV_0DF6'') or contains(.,''DEV_0DF7'') or contains(.,''DEV_0DF8'') or contains(.,''DEV_0DF9'') or contains(.,''DEV_0DFA'') or contains(.,''DEV_0DFB'') or contains(.,''DEV_0DFC'') or contains(.,''DEV_0DFD'') or contains(.,''DEV_0DFE'') or contains(.,''DEV_0DFF'') or contains(.,''DEV_0DC0'') or contains(.,''DEV_0DC1'') or contains(.,''DEV_0DC2'') or contains(.,''DEV_0DC3'') or contains(.,''DEV_0DC4'') or contains(.,''DEV_0DC5'') or contains(.,''DEV_0DC6'') or contains(.,''DEV_0DC7'') or contains(.,''DEV_0DC8'') or contains(.,''DEV_0DC9'') or contains(.,''DEV_0DCA'') or contains(.,''DEV_0DCB'') or contains(.,''DEV_0DCC'') or contains(.,''DEV_0DCD'') or contains(.,''DEV_0DCE'') or contains(.,''DEV_0DCF'') or contains(.,''DEV_0DD0'') or contains(.,''DEV_0DD1'') or contains(.,''DEV_0DD2'') or contains(.,''DEV_0DD3'') or contains(.,''DEV_0DD4'') or contains(.,''DEV_0DD5'') or contains(.,''DEV_0DD6'') or contains(.,''DEV_0DD7'') or contains(.,''DEV_0DD8'') or contains(.,''DEV_0DD9'') or contains(.,''DEV_0DDA'') or contains(.,''DEV_0DDB'') or contains(.,''DEV_0DDC'') or contains(.,''DEV_0DDD'') or contains(.,''DEV_0DDE'') or contains(.,''DEV_0DDF'') or contains(.,''DEV_0DC0'')  or contains(.,''DEV_0DC1'')  or contains(.,''DEV_0DC2'')  or contains(.,''DEV_0DC3'')  or contains(.,''DEV_0DC4'')  or contains(.,''DEV_0DC5'')  or contains(.,''DEV_0DC6'')  or contains(.,''DEV_0DC7'')  or contains(.,''DEV_0DC8'')  or contains(.,''DEV_0DC9'')  or contains(.,''DEV_0DCA'')  or contains(.,''DEV_0DCB'')  or contains(.,''DEV_0DCC'')  or contains(.,''DEV_0DCD'')  or contains(.,''DEV_0DCE'')  or contains(.,''DEV_0DCF'')  or contains(.,''DEV_0DD0'')  or contains(.,''DEV_0DD1'')  or contains(.,''DEV_0DD2'')  or contains(.,''DEV_0DD3'')  or contains(.,''DEV_0DD4'')  or contains(.,''DEV_0DD5'')  or contains(.,''DEV_0DD6'')  or contains(.,''DEV_0DD7'')  or contains(.,''DEV_0DD8'')  or contains(.,''DEV_0DD9'')  or contains(.,''DEV_0DDA'')  or contains(.,''DEV_0DDB'')  or contains(.,''DEV_0DDC'')  or contains(.,''DEV_0DDD'')  or contains(.,''DEV_0DDE'')  or contains(.,''DEV_0DDF'')  or contains(.,''DEV_1080'')  or contains(.,''DEV_1081'')  or contains(.,''DEV_1082'')  or contains(.,''DEV_1083'')  or contains(.,''DEV_1084'')  or contains(.,''DEV_1085'')  or contains(.,''DEV_1086'')  or contains(.,''DEV_1087'')  or contains(.,''DEV_1088'')  or contains(.,''DEV_1089'')  or contains(.,''DEV_108A'')  or contains(.,''DEV_108B'')  or contains(.,''DEV_108C'')  or contains(.,''DEV_108D'')  or contains(.,''DEV_108E'')  or contains(.,''DEV_108F'')  or contains(.,''DEV_1090'')  or contains(.,''DEV_1091'')  or contains(.,''DEV_1092'')  or contains(.,''DEV_1093'')  or contains(.,''DEV_1094'')  or contains(.,''DEV_1095'')  or contains(.,''DEV_1096'')  or contains(.,''DEV_1097'')  or contains(.,''DEV_1098'')  or contains(.,''DEV_1099'')  or contains(.,''DEV_109A'')  or contains(.,''DEV_109B'')  or contains(.,''DEV_109C'')  or contains(.,''DEV_109D'')  or contains(.,''DEV_109E'')  or contains(.,''DEV_109F'')  or contains(.,''DEV_0DE0'')  or contains(.,''DEV_0DE1'')  or contains(.,''DEV_0DE2'')  or contains(.,''DEV_0DE3'')  or contains(.,''DEV_0DE4'')  or contains(.,''DEV_0DE5'')  or contains(.,''DEV_0DE6'')  or contains(.,''DEV_0DE7'')  or contains(.,''DEV_0DE8'')  or contains(.,''DEV_0DE9'')  or contains(.,''DEV_0DEA'')  or contains(.,''DEV_0DEB'')  or contains(.,''DEV_0DEC'')  or contains(.,''DEV_0DED'')  or contains(.,''DEV_0DEE'')  or contains(.,''DEV_0DEF'')  or contains(.,''DEV_0DF0'')  or contains(.,''DEV_0DF1'')  or contains(.,''DEV_0DF2'')  or contains(.,''DEV_0DF3'')  or contains(.,''DEV_0DF4'')  or contains(.,''DEV_0DF5'')  or contains(.,''DEV_0DF6'')  or contains(.,''DEV_0DF7'')  or contains(.,''DEV_0DF8'')  or contains(.,''DEV_0DF9'')  or contains(.,''DEV_0DFA'')  or contains(.,''DEV_0DFB'')  or contains(.,''DEV_0DFC'')  or contains(.,''DEV_0DFD'')  or contains(.,''DEV_0DFE'')  or contains(.,''DEV_0DFF'')  or contains(.,''DEV_0E20'')  or contains(.,''DEV_0E21'')  or contains(.,''DEV_0E22'')  or contains(.,''DEV_0E23'')  or contains(.,''DEV_0E24'')  or contains(.,''DEV_0E25'')  or contains(.,''DEV_0E26'')  or contains(.,''DEV_0E27'')  or contains(.,''DEV_0E28'')  or contains(.,''DEV_0E29'')  or contains(.,''DEV_0E2A'')  or contains(.,''DEV_0E2B'')  or contains(.,''DEV_0E2C'')  or contains(.,''DEV_0E2D'')  or contains(.,''DEV_0E2E'')  or contains(.,''DEV_0E2F'')  or contains(.,''DEV_0E30'')  or contains(.,''DEV_0E31'')  or contains(.,''DEV_0E32'')  or contains(.,''DEV_0E33'')  or contains(.,''DEV_0E34'')  or contains(.,''DEV_0E35'')  or contains(.,''DEV_0E36'')  or contains(.,''DEV_0E37'')  or contains(.,''DEV_0E38'')  or contains(.,''DEV_0E39'')  or contains(.,''DEV_0E3A'')  or contains(.,''DEV_0E3B'')  or contains(.,''DEV_0E3C'')  or contains(.,''DEV_0E3D'')  or contains(.,''DEV_0E3E'')  or contains(.,''DEV_0E3F'') )])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows Server 2008 Release 2 x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', 'ResourceAccess\\sample_c.*min_lod', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'MipLevel=5', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'ResourceMinLODOffset=0.\d', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', 'ResourceAccess\\gather4.*_c', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'ResourceMinLOD=10', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Unexpected quad for 0, 0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2993 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11SharedResources.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11SharedResources.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2993 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2993, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'WGF11SharedResources: test leaks devices which leads to device creation errors - part 1 (Blocked cases)', 'The test leaks devices in the ShareFromCompBuff\ToDX11 group. This can lead the test to run the system out of memory or hit other device limits, blocking further execution of the test.', 'This issue will be fixed by the RTM version of the HCK.', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '(ShareFromCompBuff\\ToDX11|ShareDX11FL9)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title', '.*SetupTestCase.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2979 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2979 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2979, 8, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Hardware Issue', 'Fixed in newer hardware avalable today', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false  or contains(.,''DEV_1340'') or contains(.,''DEV_1341'') or contains(.,''DEV_1342'') or contains(.,''DEV_1343'') or contains(.,''DEV_1344'') or contains(.,''DEV_1345'') or contains(.,''DEV_1346'') or contains(.,''DEV_1347'') or contains(.,''DEV_1348'') or contains(.,''DEV_1349'') or contains(.,''DEV_134A'') or contains(.,''DEV_134B'') or contains(.,''DEV_134C'') or contains(.,''DEV_134D'') or contains(.,''DEV_134E'') or contains(.,''DEV_134F'') or contains(.,''DEV_1350'') or contains(.,''DEV_1351'') or contains(.,''DEV_1352'') or contains(.,''DEV_1353'') or contains(.,''DEV_1354'') or contains(.,''DEV_1355'') or contains(.,''DEV_1356'') or contains(.,''DEV_1357'') or contains(.,''DEV_1358'') or contains(.,''DEV_1359'') or contains(.,''DEV_135A'') or contains(.,''DEV_135B'') or contains(.,''DEV_135C'') or contains(.,''DEV_135D'') or contains(.,''DEV_135E'') or contains(.,''DEV_135F'') or contains(.,''DEV_1360'') or contains(.,''DEV_1361'') or contains(.,''DEV_1362'') or contains(.,''DEV_1363'') or contains(.,''DEV_1364'') or contains(.,''DEV_1365'') or contains(.,''DEV_1366'') or contains(.,''DEV_1367'') or contains(.,''DEV_1368'') or contains(.,''DEV_1369'') or contains(.,''DEV_136A'') or contains(.,''DEV_136B'') or contains(.,''DEV_136C'') or contains(.,''DEV_136D'') or contains(.,''DEV_136E'') or contains(.,''DEV_136F'') or contains(.,''DEV_1370'') or contains(.,''DEV_1371'') or contains(.,''DEV_1372'') or contains(.,''DEV_1373'') or contains(.,''DEV_1374'') or contains(.,''DEV_1375'') or contains(.,''DEV_1376'') or contains(.,''DEV_1377'') or contains(.,''DEV_1378'') or contains(.,''DEV_1379'') or contains(.,''DEV_137A'') or contains(.,''DEV_137B'') or contains(.,''DEV_137C'') or contains(.,''DEV_137D'') or contains(.,''DEV_137E'') or contains(.,''DEV_137F'') or contains(.,''DEV_1740'') or contains(.,''DEV_1741'') or contains(.,''DEV_1742'') or contains(.,''DEV_1743'') or contains(.,''DEV_1744'') or contains(.,''DEV_1745'') or contains(.,''DEV_1746'') or contains(.,''DEV_1747'') or contains(.,''DEV_1748'') or contains(.,''DEV_1749'') or contains(.,''DEV_174A'') or contains(.,''DEV_174B'') or contains(.,''DEV_174C'') or contains(.,''DEV_174D'') or contains(.,''DEV_174E'') or contains(.,''DEV_174F'') or contains(.,''DEV_1750'') or contains(.,''DEV_1751'') or contains(.,''DEV_1752'') or contains(.,''DEV_1753'') or contains(.,''DEV_1754'') or contains(.,''DEV_1755'') or contains(.,''DEV_1756'') or contains(.,''DEV_1757'') or contains(.,''DEV_1758'') or contains(.,''DEV_1759'') or contains(.,''DEV_175A'') or contains(.,''DEV_175B'') or contains(.,''DEV_175C'') or contains(.,''DEV_175D'') or contains(.,''DEV_175E'') or contains(.,''DEV_175F'') or contains(.,''DEV_1760'') or contains(.,''DEV_1761'') or contains(.,''DEV_1762'') or contains(.,''DEV_1763'') or contains(.,''DEV_1764'') or contains(.,''DEV_1765'') or contains(.,''DEV_1766'') or contains(.,''DEV_1767'') or contains(.,''DEV_1768'') or contains(.,''DEV_1769'') or contains(.,''DEV_176A'') or contains(.,''DEV_176B'') or contains(.,''DEV_176C'') or contains(.,''DEV_176D'') or contains(.,''DEV_176E'')  or contains(.,''DEV_176F'') or contains(.,''DEV_1770'') or contains(.,''DEV_1771'') or contains(.,''DEV_1772'') or contains(.,''DEV_1773'') or contains(.,''DEV_1774'') or contains(.,''DEV_1775'') or contains(.,''DEV_1776'') or contains(.,''DEV_1777'') or contains(.,''DEV_1778'') or contains(.,''DEV_1779'') or contains(.,''DEV_177A'') or contains(.,''DEV_177B'') or contains(.,''DEV_177C'') or contains(.,''DEV_177D'') or contains(.,''DEV_177E'') or contains(.,''DEV_177F''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'FloatArith\\sqrt', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Tilte', 'InstMod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0.[x|y|z]=3.4028235e\+038', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0Mod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2949 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[[]WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[[]queryTestDeviceID] /script:{[[]TestScript]}%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[[]WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[[]queryTestDeviceID] /script:{[[]TestScript]}%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2949 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2949, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Miniport must support at least 8 RSS Queues (reported in NumberOfReceiveQueues.)', 'Under HCK 2.1 the test is incorrectly requiring that Server 2008 NICs of 1 and 10Gb parts support a Server 2012 requirement for a greater number of RSS Queues.
The failing test is "NDISTest 6.0 - [1 Machine] - 1c_Mini6RSSOids". The failure is that the device reports fewer RSS Queues than required by Windows Blue.', 'Issue Eratta to Server 2008RN NICs of 1Gb and 10Gb parts for HCK 2.1.', '2023-11-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Verifying OID_GEN_RECEIVE_SCALE_CAPABILITIES response', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Miniport must support at least [2-8] .* Actual reported value [1-4]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-11-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2933 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11interfaces.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11interfaces.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2933 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2933, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WGF11Interfaces fails due to OOM errors in Create Shader test cases this is tracking the failures themselves not Blocked cases', 'The WGF11Interfaces test focuses on covering hidden buffer information that is provided to the driver through the DDI, which includes interface types and resource locations. The test use dynamic linking and it creates a class linkage object.
Later the test would create various shaders and pass this class linkage object as a parameter to the various shaders.
and the test aborts after shader linkage object going OOM. Note, that this behavior is only present on wddm1.3 drivers and not on wddm1.2 drivers.
Its likely that the runtime allocates memory for the shader linkage object which later OOMs so someone from MS runtime team should have an initial look at it.', 'Fix is needed in the OS to resolve the OOM during shader linkage object allocations in the runtime.', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Client ARM","Windows v6.3 Server x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Client ARM","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup:UserText=IndexingResources\\ConstantBuffers', 'IndexingResources\\ConstantBuffers', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTestGroup:UserText=IndexingResources\\ConstantBuffers', 'CResourceIndexing::CreateShaders().*HR.*E_OUTOFMEMORY.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Test Initialization', 'Test Initialization', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Test group had aborts.', 'Test group had aborts.', 'Title', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=Test group had aborts.', '.*Test group had aborts but no failures. This test case is a place-holder failure for WTT.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2908 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2908 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2908, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: NDISTest 6.5 - [2 Machine] - QosEts fails with Traffic Class 1 was expected to overutilize its allocation (device-specific)', 'The NDISTest 6.5 - [2 Machine] - QosEts test may fail on HCK (Win 8.1) for some configurations with the error ''Traffic Class 1 was expected to overutilize its allocation''. ', 'This issue is being investigated by Microsoft.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100."]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[TC Underutilization\] Analyzing Traffic Results:', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Traffic Class \d* was expected to overutilize its allocation of ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2905 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%runusbtest.ps1%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%runusbtest.ps1%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2905 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2905, 2, 1, 1, 0, 1, 0, 0, @TestCommandLineId, '8.1 USB3Insertion on Win8', 'USB devices tested on Windows 8 for USB 3 Insertion fail on test startup.', 'Test device on release version of HCK 8.1 or on 8.1 system.', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'Terminating: Program ''Usb3Insertion.exe'' failed to run: The specified executable is not a valid application for this OS platform.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2901 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_DevicePathExerciser_WLK.dll%Query%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_DevicePathExerciser_WLK.dll%Query%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2901 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2901, 6, 2, 1, 0, 1, 0, 0, @TestCommandLineId, 'Manual Errata: DQT_DevFund_Fuzz-AutoTriage/Manual-DF - Fuzz Query and Set File Information Test (Certification) test may fail incorrectly when it fails due to timeout', '"DF - Fuzz Query and Set File Information Test (Certification)" and "DF - Fuzz Query and Set Security Test (Certification)" tests in HCK are configured to automatically fail if the tests do not finish running after three hours. When the test finds too many attack surfaces to test or if the system is slow in performance, the test may take longer than three hours to complete causing false failures.', 'There are two Concurrent Hardware and Operating System (CHAOS) tests in HCK: one in the "Certification" category and one in the "Reliability" category. If you submit passing results for any of the two CHAOS tests, then failures seen for "DF - Fuzz Query and Set ...." tests will be waived. Please refer to manual errata #2901 in a README.txt file with your submission.

Note that if CHAOS test also fails, then this manual errata does NOT apply. 

To summarize, you may qualify for manual errata #2901 if:

1. "DF - Fuzz Query and Set ..." tests fail because of timeout
    - See “Test was cancelled because it ran too long” section of the following page for information on how to identify test failures caused by test timeout:
http://msdn.microsoft.com/en-us/library/windows/hardware/dn247432.aspx

2. CHAOS (Reliability) test passes OR CHAOS (Certification) test passes
    - Please make sure to submit passing results for one of these two CHAOS tests with your submission', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2899 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '% -c _TestPro_ -l "s98wtt_u.dll"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('% -c _TestPro_ -l "s98wtt_u.dll"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2899 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2899, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Lullaby Test: OS Erratum for HFP HCK Failures', 'Some devices might take longer to connect to a system coming out of certain power states. When the issue happens specific error codes are produced by the system, namely AUDCLNT_E_DEVICE_INVALIDATED or ERROR_NOT_READY', 'Filter out failures happening on Bluetooth devices and causing AUDCLNT_E_DEVICE_INVALIDATED or ERROR_NOT_READY', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Lullaby Test\\', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'PnP ID\s+=\s+BTH', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '(AUDCLNT_E_DEVICE_INVALIDATED|ERROR_NOT_READY)', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2881 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_ChaosTest_WLK.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_ChaosTest_WLK.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2881 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2881, 5, 2, 1, 0, 1, 0, 0, @TestCommandLineId, 'Devfund-CHAOS-AutoTriage/Manual- CHAOS (Certification) test may fail incorrectly when it fails due to timeout', 'Concurrent Hardware and Operating System (CHAOS) (Certification) test in HCK is configured to automatically fail if the test does not finish running after three hours. In two cases, the test may take longer than three hours to complete causing false failures; these two cases are 1) when there is more than one device sharing the same PNP hardware ID as the test device and/or 2) when the test finds abnormally high number of attack surfaces to test on a single device.', 'There is a Reliability (level) 3 version of CHAOS test in HCK called Concurrent Hardware and Operating System (CHAOS) (Reliability) test in HCK. This test has a longer timeout (8 hours) than the Certification version of the test. Hence, if this test passes for you, then you may use manual errata # 2881 to have the failure caused by test timeout manually overturned. Please refer to this manual errata # in a README.txt file with your submission.

Note that if CHAOS (Reliability) test also fails, then this manual errata  does NOT apply. 

To summarize, you may qualify for manual errata #2881 if:

1. CHAOS (Certification) test fails because of timeout
    - See “Test was cancelled because it ran too long” section of the following page for information on how to identify test failures caused by test timeout:
http://msdn.microsoft.com/en-us/library/windows/hardware/dn247432.aspx

2. CHAOS (Reliability) test passes
    - Please make sure to submit results for this test with your submission', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2880 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%runusbtest.ps1%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%runusbtest.ps1%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2880 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2880, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Device.Connectivity.UsbDevices: The S4 test from the USB Device Connection S3+S4 fails with the error message: "Error forced hub driver to retry enumeration.', 'The device is expected to enumerate completely within 5 seconds. The device reported a different device descriptor when the system resumed from hibernate. Therefore it had to be fully re-enumerated, which is a bad user experience but still acceptable in this circumstance.', 'This is an acceptable error.', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceId[contains(.,''USB\VID_1409&PID_0'') or contains(.,''USB\VID_1409&PID_100'') or contains(.,''USB\VID_1409&PID_1040'') or contains(.,''USB\VID_1409&PID_11'') or contains(.,''USB\VID_1409&PID_12'') or contains(.,''USB\VID_1409&PID_14'') or contains(.,''USB\VID_1409&PID_15'') or contains(.,''USB\VID_1409&PID_16'') or contains(.,''USB\VID_1409&PID_2130'') or contains(.,''USB\VID_1409&PID_2140'') or contains(.,''USB\VID_1409&PID_22'') or contains(.,''USB\VID_1409&PID_23'') or contains(.,''USB\VID_1409&PID_2410'') or contains(.,''USB\VID_1409&PID_26'') or contains(.,''USB\VID_1409&PID_30'') or contains(.,''USB\VID_1409&PID_53'') or contains(.,''USB\VID_1409&PID_8000'') or contains(.,''USB\VID_1409&PID_C00'') or contains(.,''USB\VID_1409&PID_C00'') or contains(.,''USB\VID_1409&PID_F000'') or contains(.,''USB\VID_1409&PID_FFFF'') or contains(.,''USB\VID_1519&PID_F214'') or contains(.,''USB\VID_0837&PID_003D'') or contains(.,''USB\VID_1724&PID_035B'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'S4', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Error forced hub driver to retry enumeration. See ETL log for more information', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2817 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'PnPModeSwitch.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('PnPModeSwitch.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2817 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2817, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK\HCK: WDDM PnPStopModeSwitch Test may fail on some systems with very slow PnPStop', 'The test fails on some systems with very slow PnPStop.', 'Skip the test on those systems with very slow PnPStop.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Root Node/CheckForStartedIHVDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Root Node/CheckForStartedIHVDevice|||Need a stoppable driver loaded for the test to execute.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Root Node/CheckForStartedIHVDevice|||Need a stoppable driver loaded for the test to execute.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/CheckForStartedIHVDevice.Postwalk', 'Title', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2795 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%usbnum.exe /d [[]queryVID][[]queryPID]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%usbnum.exe /d [[]queryVID][[]queryPID]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2795 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2795, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB Serial Number test fails due to blank serial number', 'USB Serial Number test fails due to blank serial number', 'Hardware is required to be fixed in the future', '2025-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'USBnum Test 1\.1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vid = (1ADB, Pid = 0300)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Serial number is required for this device class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2793 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TDRWatch.exe [TDRArgs] [TDR_GUID]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TDRWatch.exe [TDRArgs] [TDR_GUID]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2793 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2793, 4, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'The GetRenderTargetData - Backbuffer and Render Target test may fail without a log from the test or the TDRWATCH task when testing a specific device.', 'The GetRenderTargetData - Backbuffer and Render Target test may fail without a log from the test or the TDRWATCH task when testing a specific device. This issue has been troubleshot and determined to be a problem with the test.', 'This issue is an acceptable for a specific device.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[(@WDK=''WDKDeviceID'') and (starts-with(.,''PCI\VEN_10DE'')) or (starts-with(.,''PCI\VEN_8086''))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2719 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11interfaces.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11interfaces.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2719 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2719, 3, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'WGF11Interfaces fails due to OOM errors in Create Shader test cases', 'The WGF11Interfaces test focuses on covering hidden buffer information that is provided to the driver through the DDI, which includes interface types and resource locations. The test use dynamic linking and it creates a class linkage object.
Later the test would create various shaders and pass this class linkage object as a parameter to the various shaders.
and the test aborts after shader linkage object going OOM. Note, that this behavior is only present on wddm1.3 drivers and not on wddm1.2 drivers.
Its likely that the runtime allocates memory for the shader linkage object which later OOMs so someone from MS runtime team should have an initial look at it.', 'Fix is needed in the OS to resolve the OOM during shader linkage object allocations in the runtime.', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Client ARM","Windows v6.3 Server x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Client ARM"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup:UserText=IndexingResources\\ConstantBuffers', 'IndexingResources\\ConstantBuffers', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTestGroup:UserText=IndexingResources\\ConstantBuffers', 'CResourceIndexing::CreateShaders().*HR.*E_OUTOFMEMORY.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Test Initialization', 'Test Initialization', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Test group had aborts.', 'Test group had aborts.', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', '.*Test group had aborts but no failures. This test case is a place-holder failure for WTT.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2657 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_PnPDTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_PnPDTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2657 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2657, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DQT-Devfund-PnPDTest-"Failed to open EDT device" error may be seen during PNP tests when testing some root enumerated devices', 'PNP tests need a test filter to be installed as an upper filter on the device stack. This isn''t allowed on some software device stacks. Our tests fail with "Failed to open EDT device" error message when testing these devices.
Note: This was Errata 2715', 'This filter will be used to resolve the issue.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/Enumerator[.=''ROOT''])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9419"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Failed to open.*EDT.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2699 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'AutoShell.exe MemoryTrimwlk.xml'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('AutoShell.exe MemoryTrimwlk.xml')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2699 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2699, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DXGI Trim AutoMemoryBenchmark failures in Memory_DX10Trim waived', 'The Trim memory test has an issue where it doesn''t accurately track all memory, resulting in a score that is incorrectly higher by several MB. Results that have a final score of below 20 MB will be treated as a pass.', 'This is an acceptable failure', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Memory_DX10Trim', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Result', 'Result', 'Score##1073776712##([0-9]{1,8}$)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Memory_DX10Trim', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Result', 'Result', 'Score##2147553424##([0-9]{1,8}$)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2688 v17.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11TiledResources%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11TiledResources%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2688 AND Version = 17
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2688, 17, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Hardware filter', 'Direct3D Tiled Resources, section 7.2: “Texture filtering with a footprint that straddles NULL and non-NULL tiles contributes (0,0,0,0) for texels on NULL tiles into the overall filter operation”.  In order to see this problem, end-users would have to use an application that uses the Tiled Resources feature together with the Linear filtering mode and also have some unmapped tiles.', 'Covered by contingency', '2050-12-31T14:03:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002&'') and (contains(.,''DEV_67C4'') or contains(.,''DEV_699F'') or contains(.,''DEV_6981'') or contains(.,''DEV_6987'') or contains(.,''DEV_6980'') or contains(.,''DEV_6985'') or contains(.,''DEV_6986'') or contains(.,''DEV_6995'') or contains(.,''DEV_6997'') or contains(.,''099F'') or contains(.,''6649'') or contains(.,''98E4'') or contains(.,''6650'') or contains(.,''6651'') or contains(.,''6658'') or contains(.,''6980'') or contains(.,''6981'') or contains(.,''6986'') or contains(.,''6987'') or contains(.,''699F'') or contains(.,''665C'') or contains(.,''6985'') or contains(.,''6995'') or contains(.,''665D'') or contains(.,''6610'') or contains(.,''6611'') or contains(.,''6613'') or contains(.,''6631'') or contains(.,''6680'') or contains(.,''9850'') or contains(.,''9851'') or contains(.,''9852'') or contains(.,''9853'') or contains(.,''98B0'') or contains(.,''98B1'') or contains(.,''9870'') or contains(.,''9830'') or contains(.,''9831'') or contains(.,''9832'') or contains(.,''9833'') or contains(.,''9834'') or contains(.,''9835'') or contains(.,''9836'') or contains(.,''9837'') or contains(.,''9838'') or contains(.,''9839'') or contains(.,''983A'') or contains(.,''983B'') or contains(.,''983C'') or contains(.,''983D'') or contains(.,''983E'') or contains(.,''983F'') or contains(.,''1304'') or contains(.,''1305'') or contains(.,''1306'') or contains(.,''1307'') or contains(.,''1309'') or contains(.,''130A'') or contains(.,''130B'') or contains(.,''130C'') or contains(.,''130D'') or contains(.,''130E'') or contains(.,''130F'') or contains(.,''1310'') or contains(.,''1311'') or contains(.,''1313'') or contains(.,''1315'') or contains(.,''1318'') or contains(.,''131B'') or contains(.,''131C'') or contains(.,''131D'') or contains(.,''1312'') or contains(.,''1316'') or contains(.,''1317'') or contains(.,''9854'') or contains(.,''9855'') or contains(.,''9856'') or contains(.,''9857'') or contains(.,''9858'') or contains(.,''9859'') or contains(.,''985A'') or contains(.,''985B'') or contains(.,''985C'') or contains(.,''985D'') or contains(.,''985E'') or contains(.,''985F'') or contains(.,''9920'') or contains(.,''6604'') or contains(.,''6605'') or contains(.,''6646'') or contains(.,''6647'') or contains(.,''6600'') or contains(.,''6601'') or contains(.,''6602'') or contains(.,''6603'') or contains(.,''6606'') or contains(.,''6607'') or contains(.,''6608'')or contains(.,''6620'') or contains(.,''6621'') or contains(.,''6623'') or contains(.,''6640'') or contains(.,''6641'') or contains(.,''6660'') or contains(.,''6663'') or contains(.,''6664'') or contains(.,''6665'') or contains(.,''6667'') or contains(.,''666F'') or contains(.,''67A0'') or contains(.,''67A1'') or contains(.,''67A2'') or contains(.,''67B0'') or contains(.,''67B1'') or contains(.,''67B8'') or contains(.,''67B9'') or contains(.,''67BA'') or contains(.,''67BE'') or contains(.,''6920'') or contains(.,''6938'') or contains(.,''6939'') or contains(.,''6920'') or contains(.,''6938'') or contains(.,''6939'') or contains(.,''6921'') or contains(.,''6900'') or contains(.,''6901'') or contains(.,''6902'') or contains(.,''6903'') or contains(.,''692B'') or contains(.,''9874'') or contains(.,''665F'') or contains(.,''6929'') or contains(.,''7300'') or contains(.,''67DF'') or contains(.,''67FF'')  or contains(.,''67EF'') or contains(.,''DEV_699F''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Filter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'TiledResourcesTier\=2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'observed 0x........\, Expected 0x........', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'MinMaxFilter=MAXIMUM_MIN_MAG_MIP_LINEAR', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T14:03:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 2670 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2670 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(2670, 5, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'AutoTriage: : Plug and Play Driver test performs IO on storage not attached to device under test', 'The Plug and Play Driver test runs PNP operations against storage devices that may not be connected to the device under test. This may add inappropriate failure points to the test. If the failure is on a storage device that is not attached to the Device Under Test, Manual Errata ID 2670 can be applied.
', 'The erratum will be available until the test is updated.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', '.*PNPDTest.*PNPSurpriseRemoveAndRestartDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'WDTF_PNP\s*:\s*Target: .* STORAGE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Failed to receive IRP_MN_REMOVE_DEVICE after receiving IRP_MN_SURPRISE_REMOVAL', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', '.*ConcurrentIO.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', '.*Open.*Generic volume.*C.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', '.*Device Status.*4180000a.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1595 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Pshader3.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Pshader3.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1595 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1595, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Pixel Shaders ver 2.0 extended, 2.x, and 3.0 fetches wrong texel failing cubemap texture', 'The cubemap''s 2x2 mip level cases end up falling on odd pixel boundaries in the render target. Some IHV calculate LOD once per quad, instead of per pixel like refrast. In this case, if the quads start at even pixel boundaries it can cause the LOD calculation to happen on "dummy" pixels where the data is extrapolated. This can cause the wrong LOD to be selected and thus cause the rendered result to not match refrast.', 'This is only valid for D3D9 HW. The test may be updated in the future to ensure that the rendered results always show up on even pixel boundaries so this issue is avoided.', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup:UserText', 'PShader.*_Cubes.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*(texld|texldb).*level = 5.*', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title', 'Image conformance of.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1409 v13.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_PnPDTest%.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_PnPDTest%.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1409 AND Version = 13
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1409, 13, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Devfund PNP surprise remove  for approved SOC critical devices', 'Devfund PNP surprise remove requirement is waived for approved SOC critical devices', 'This filter resolves surprise remove test failures for these approved devices', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(
//Devnode/HardwareID[.=''ACPI\INT3396''] or
//Devnode/HardwareID[.=''ACPI\INT33FC''] or
//Devnode/HardwareID[.=''ACPI\INT33BD''] or
//Devnode/HardwareID[.=''ACPI\INT33FD''] or
//Devnode/HardwareID[.=''ACPI\INT33F4''] or
//Devnode/HardwareID[.=''ACPI\INT33F5''] or
//Devnode/HardwareID[.=''ACPI\VEN_8086&DEV_0F41''] or
//Devnode/HardwareID[.=''ACPI\INT33FE''] or
//Devnode/HardwareID[.=''ACPI\INT33FF''] or
//Devnode/HardwareID[.=''ACPI\AMD0001''] or
//Devnode/HardwareID[.=''ACPI\AMD0002''] or
//Devnode/HardwareID[.=''ACPI\AMD0003''] or
//Devnode/HardwareID[.=''ACPI\AMD0004''] or
//Devnode/HardwareID[.=''ACPI\AMD0005''] or
//Devnode/HardwareID[.=''ACPI\AMD0006''] or
//Devnode/HardwareID[.=''ACPI\AMD0007''] or
//Devnode/HardwareID[.=''ACPI\AMD0008''] or
//Devnode/HardwareID[.=''ACPI\VEN_8086&DEV_22C1''] or
//Devnode/HardwareID[.=''ACPI\INT34D3''] or
//Devnode/HardwareID[.=''ACPI\AMD0009''])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', 'DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', '.*Skipping Surprise Remove test case on.*as the device or one of it''s descendants is marked as a SOC critical device.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1408 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_PnPDTest%.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_PnPDTest%.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1408 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1408, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Devfund PNP surprise remove for approved SOC critical devices', 'Devfund PNP surprise remove requirement is waived for approved SOC critical devices', 'This filter resolves surprise remove test failures for these approved devices', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(
//Devnode/HardwareID[.=''ACPI\INT33C7''] or 
//Devnode/HardwareID[.=''ACPI\INT33A1''] or
//Devnode/HardwareID[.=''ACPI\INT3437'']
)')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', 'DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', '.*Skipping Surprise Remove test case on.*as the device or one of it''s descendants is marked as a SOC critical device.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1406 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cscript [[]SystemDrive]\Sparta_Test\TCP\RSC.wsf%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cscript [[]SystemDrive]\Sparta_Test\TCP\RSC.wsf%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1406 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1406, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Network/LAN: Run RSC Tests fails with Failed to coalesce packets', 'Run RSC Tests may fail with the error ''Failed to coalesce packets''. There is apparently a conflict between the driver, which indicates the packets are coalesced, and the statitics, which don''t add up. ', 'The error will be filtered until the test is updated.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Server x64","Windows v6.3 Server x64","Windows 8 Client x64","Windows v6.3 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Variation', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'AutoSrv service is not responding', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Script initialization', 'Script initialization', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Script initialization', 'AutoSrv service is not responding', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Test failed--sev1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Variation', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Failed to coalesce packets', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Coalesce all data packets', 'Coalesce all data packets', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Coalesce all data packets', 'Failed to coalesce packets', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Test failed--sev1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1398 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11filter.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11filter.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1398 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1398, 7, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Contingency107202', 'Fixed in future hardware', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false or contains(.,''DEV_0190'')or contains(.,''DEV_0191'') or contains(.,''DEV_0192'') or contains(.,''DEV_0193'') or contains(.,''DEV_0194'') or contains(.,''DEV_0195'') or contains(.,''DEV_0196'') or contains(.,''DEV_0197'') or contains(.,''DEV_0198'') or contains(.,''DEV_0199'') or contains(.,''DEV_019A'') or contains(.,''DEV_019B'') or contains(.,''DEV_019C'') or contains(.,''DEV_019D'') or contains(.,''DEV_019E'') or contains(.,''DEV_019F'') or contains(.,''DEV_0400'') or contains(.,''DEV_0401'') or contains(.,''DEV_0402'') or contains(.,''DEV_0403'') or contains(.,''DEV_0404'') or contains(.,''DEV_0405'') or contains(.,''DEV_0406'') or contains(.,''DEV_0407'') or contains(.,''DEV_0408'') or contains(.,''DEV_0409'') or contains(.,''DEV_040A'') or contains(.,''DEV_040B'') or contains(.,''DEV_040C'') or contains(.,''DEV_040D'') or contains(.,''DEV_040E'') or contains(.,''DEV_040F'') or contains(.,''DEV_0420'') or contains(.,''DEV_0421'') or contains(.,''DEV_0422'') or contains(.,''DEV_0423'') or contains(.,''DEV_0424'') or contains(.,''DEV_0425'') or contains(.,''DEV_0426'') or contains(.,''DEV_0427'') or contains(.,''DEV_0428'') or contains(.,''DEV_0429'') or contains(.,''DEV_042A'') or contains(.,''DEV_042B'') or contains(.,''DEV_042C'') or contains(.,''DEV_042D'') or contains(.,''DEV_042E'') or contains(.,''DEV_042F'') or contains(.,''DEV_0600'') or contains(.,''DEV_0601'') or contains(.,''DEV_0602'') or contains(.,''DEV_0603'') or contains(.,''DEV_0604'') or contains(.,''DEV_0605'') or contains(.,''DEV_0606'') or contains(.,''DEV_0607'') or contains(.,''DEV_0608'') or contains(.,''DEV_0609'') or contains(.,''DEV_060A'') or contains(.,''DEV_060B'') or contains(.,''DEV_060C'') or contains(.,''DEV_060D'') or contains(.,''DEV_060E'') or contains(.,''DEV_060F'') or contains(.,''DEV_0610'') or contains(.,''DEV_0611'') or contains(.,''DEV_0612'') or contains(.,''DEV_0613'') or contains(.,''DEV_0614'') or contains(.,''DEV_0615'') or contains(.,''DEV_0616'') or contains(.,''DEV_0617'') or contains(.,''DEV_0618'') or contains(.,''DEV_0619'') or contains(.,''DEV_061A'') or contains(.,''DEV_061B'') or contains(.,''DEV_061C'') or contains(.,''DEV_061D'') or contains(.,''DEV_061E'') or contains(.,''DEV_061F'') or contains(.,''DEV_0620'') or contains(.,''DEV_0621'') or contains(.,''DEV_0622'') or contains(.,''DEV_0623'') or contains(.,''DEV_0624'') or contains(.,''DEV_0625'') or contains(.,''DEV_0626'') or contains(.,''DEV_0627'') or contains(.,''DEV_0628'') or contains(.,''DEV_0629'') or contains(.,''DEV_062A'') or contains(.,''DEV_062B'') or contains(.,''DEV_062C'') or contains(.,''DEV_062D'') or contains(.,''DEV_062E'') or contains(.,''DEV_062F'') or contains(.,''DEV_0630'') or contains(.,''DEV_0631'') or contains(.,''DEV_0632'') or contains(.,''DEV_0633'') or contains(.,''DEV_0634'') or contains(.,''DEV_0635'') or contains(.,''DEV_0636'') or contains(.,''DEV_0637'') or contains(.,''DEV_0638'') or contains(.,''DEV_0639'') or contains(.,''DEV_063A'') or contains(.,''DEV_063B'') or contains(.,''DEV_063C'') or contains(.,''DEV_063D'') or contains(.,''DEV_063E'') or contains(.,''DEV_063F'') or contains(.,''DEV_0640'') or contains(.,''DEV_0641'') or contains(.,''DEV_0642'') or contains(.,''DEV_0643'') or contains(.,''DEV_0644'') or contains(.,''DEV_0645'') or contains(.,''DEV_0646'') or contains(.,''DEV_0647'') or contains(.,''DEV_0648'') or contains(.,''DEV_0649'') or contains(.,''DEV_064A'') or contains(.,''DEV_064B'') or contains(.,''DEV_064C'') or contains(.,''DEV_064D'') or contains(.,''DEV_064E'') or contains(.,''DEV_064F'') or contains(.,''DEV_0650'') or contains(.,''DEV_0651'') or contains(.,''DEV_0652'') or contains(.,''DEV_0653'') or contains(.,''DEV_0654'') or contains(.,''DEV_0655'') or contains(.,''DEV_0656'') or contains(.,''DEV_0657'') or contains(.,''DEV_0658'') or contains(.,''DEV_0659'') or contains(.,''DEV_065A'') or contains(.,''DEV_065B'') or contains(.,''DEV_065C'') or contains(.,''DEV_065D'') or contains(.,''DEV_065E'') or contains(.,''DEV_065F'') or contains(.,''DEV_06E0'') or contains(.,''DEV_06E1'') or contains(.,''DEV_06E2'') or contains(.,''DEV_06E3'') or contains(.,''DEV_06E4'') or contains(.,''DEV_06E5'') or contains(.,''DEV_06E6'') or contains(.,''DEV_06E7'') or contains(.,''DEV_06E8'') or contains(.,''DEV_06E9'') or contains(.,''DEV_06EA'') or contains(.,''DEV_06EB'') or contains(.,''DEV_06EC'') or contains(.,''DEV_06ED'') or contains(.,''DEV_06EE'') or contains(.,''DEV_06EF'') or contains(.,''DEV_06F0'') or contains(.,''DEV_06F1'') or contains(.,''DEV_06F2'') or contains(.,''DEV_06F3'') or contains(.,''DEV_06F4'') or contains(.,''DEV_06F5'') or contains(.,''DEV_06F6'') or contains(.,''DEV_06F7'') or contains(.,''DEV_06F8'') or contains(.,''DEV_06F9'') or contains(.,''DEV_06FA'') or contains(.,''DEV_06FB'') or contains(.,''DEV_06FC'') or contains(.,''DEV_06FD'') or contains(.,''DEV_06FE'') or contains(.,''DEV_06FF'') or contains(.,''DEV_0410'') or contains(.,''DEV_0411'') or contains(.,''DEV_0412'') or contains(.,''DEV_0413'') or contains(.,''DEV_0414'') or contains(.,''DEV_0415'') or contains(.,''DEV_0416'') or contains(.,''DEV_0417'') or contains(.,''DEV_0418'') or contains(.,''DEV_0419'') or contains(.,''DEV_041A'') or contains(.,''DEV_041B'') or contains(.,''DEV_041C'') or contains(.,''DEV_041D'') or contains(.,''DEV_041E'') or contains(.,''DEV_041F'') or contains(.,''DEV_05E0'') or contains(.,''DEV_05E1'') or contains(.,''DEV_05E2'') or contains(.,''DEV_05E3'') or contains(.,''DEV_05E4'') or contains(.,''DEV_05E5'') or contains(.,''DEV_05E6'') or contains(.,''DEV_05E7'') or contains(.,''DEV_05E8'') or contains(.,''DEV_05E9'') or contains(.,''DEV_05EA'') or contains(.,''DEV_05EB'') or contains(.,''DEV_05EC'') or contains(.,''DEV_05ED'') or contains(.,''DEV_05EE'') or contains(.,''DEV_05EF'') or contains(.,''DEV_05F0'') or contains(.,''DEV_05F1'') or contains(.,''DEV_05F2'') or contains(.,''DEV_05F3'') or contains(.,''DEV_05F4'') or contains(.,''DEV_05F5'') or contains(.,''DEV_05F6'') or contains(.,''DEV_05F7'') or contains(.,''DEV_05F8'') or contains(.,''DEV_05F9'') or contains(.,''DEV_05FA'') or contains(.,''DEV_05FB'') or contains(.,''DEV_05FC'') or contains(.,''DEV_05FD'') or contains(.,''DEV_05FE'') or contains(.,''DEV_05FF'') or contains(.,''DEV_0840'') or contains(.,''DEV_0841'') or contains(.,''DEV_0842'') or contains(.,''DEV_0843'') or contains(.,''DEV_0844'') or contains(.,''DEV_0845'') or contains(.,''DEV_0846'') or contains(.,''DEV_0847'') or contains(.,''DEV_0848'') or contains(.,''DEV_0849'') or contains(.,''DEV_084A'') or contains(.,''DEV_084B'') or contains(.,''DEV_084C'') or contains(.,''DEV_084D'') or contains(.,''DEV_084E'') or contains(.,''DEV_084F'') or contains(.,''DEV_0850'') or contains(.,''DEV_0851'') or contains(.,''DEV_0852'') or contains(.,''DEV_0853'') or contains(.,''DEV_0854'') or contains(.,''DEV_0855'') or contains(.,''DEV_0856'') or contains(.,''DEV_0857'') or contains(.,''DEV_0858'') or contains(.,''DEV_0859'') or contains(.,''DEV_085A'') or contains(.,''DEV_085B'') or contains(.,''DEV_085C'') or contains(.,''DEV_085D'') or contains(.,''DEV_085E'') or contains(.,''DEV_085F'') or contains(.,''DEV_0860'') or contains(.,''DEV_0861'') or contains(.,''DEV_0862'') or contains(.,''DEV_0863'') or contains(.,''DEV_0864'') or contains(.,''DEV_0865'') or contains(.,''DEV_0866'') or contains(.,''DEV_0867'') or contains(.,''DEV_0868'') or contains(.,''DEV_0869'') or contains(.,''DEV_086A'') or contains(.,''DEV_086B'') or contains(.,''DEV_086C'') or contains(.,''DEV_086D'') or contains(.,''DEV_086E'') or contains(.,''DEV_086F'') or contains(.,''DEV_0870'') or contains(.,''DEV_0871'') or contains(.,''DEV_0872'') or contains(.,''DEV_0873'') or contains(.,''DEV_0874'') or contains(.,''DEV_0875'') or contains(.,''DEV_0876'') or contains(.,''DEV_0877'') or contains(.,''DEV_0878'') or contains(.,''DEV_0879'') or contains(.,''DEV_087A'') or contains(.,''DEV_087B'') or contains(.,''DEV_087C'') or contains(.,''DEV_087D'') or contains(.,''DEV_087E'') or contains(.,''DEV_087F'') or contains(.,''DEV_08A0'') or contains(.,''DEV_08A1'') or contains(.,''DEV_08A2'') or contains(.,''DEV_08A3'') or contains(.,''DEV_08A4'') or contains(.,''DEV_08A5'') or contains(.,''DEV_08A6'') or contains(.,''DEV_08A7'') or contains(.,''DEV_08A8'') or contains(.,''DEV_08A9'') or contains(.,''DEV_08AA'') or contains(.,''DEV_08AB'') or contains(.,''DEV_08AC'') or contains(.,''DEV_08AD'') or contains(.,''DEV_08AE'') or contains(.,''DEV_08AF'') or contains(.,''DEV_08B0'') or contains(.,''DEV_08B1'') or contains(.,''DEV_08B2'') or contains(.,''DEV_08B3'') or contains(.,''DEV_08B4'') or contains(.,''DEV_08B5'') or contains(.,''DEV_08B6'') or contains(.,''DEV_08B7'') or contains(.,''DEV_08B8'') or contains(.,''DEV_08B9'') or contains(.,''DEV_08BA'') or contains(.,''DEV_08BB'') or contains(.,''DEV_08BC'') or contains(.,''DEV_08BD'') or contains(.,''DEV_08BE'') or contains(.,''DEV_08BF'') or contains(.,''DEV_0A20'') or contains(.,''DEV_0A21'') or contains(.,''DEV_0A22'') or contains(.,''DEV_0A23'') or contains(.,''DEV_0A24'') or contains(.,''DEV_0A25'') or contains(.,''DEV_0A26'') or contains(.,''DEV_0A27'') or contains(.,''DEV_0A28'') or contains(.,''DEV_0A29'') or contains(.,''DEV_0A2A'') or contains(.,''DEV_0A2B'') or contains(.,''DEV_0A2C'') or contains(.,''DEV_0A2D'') or contains(.,''DEV_0A2E'') or contains(.,''DEV_0A2F'') or contains(.,''DEV_0A30'') or contains(.,''DEV_0A31'') or contains(.,''DEV_0A32'') or contains(.,''DEV_0A33'') or contains(.,''DEV_0A34'') or contains(.,''DEV_0A35'') or contains(.,''DEV_0A36'') or contains(.,''DEV_0A37'') or contains(.,''DEV_0A38'') or contains(.,''DEV_0A39'') or contains(.,''DEV_0A3A'') or contains(.,''DEV_0A3B'') or contains(.,''DEV_0A3C'') or contains(.,''DEV_0A3D'') or contains(.,''DEV_0A3E'') or contains(.,''DEV_0A3F'')  or contains(.,''DEV_0A60'') or contains(.,''DEV_0A61'') or contains(.,''DEV_0A62'') or contains(.,''DEV_0A63'') or contains(.,''DEV_0A64'') or contains(.,''DEV_0A65'') or contains(.,''DEV_0A66'') or contains(.,''DEV_0A67'') or contains(.,''DEV_0A68'') or contains(.,''DEV_0A69'') or contains(.,''DEV_0A6A'') or contains(.,''DEV_0A6B'') or contains(.,''DEV_0A6C'') or contains(.,''DEV_0A6D'') or contains(.,''DEV_0A6E'') or contains(.,''DEV_0A6F'') or contains(.,''DEV_0A70'') or contains(.,''DEV_0A71'') or contains(.,''DEV_0A72'') or contains(.,''DEV_0A73'') or contains(.,''DEV_0A74'') or contains(.,''DEV_0A75'') or contains(.,''DEV_0A76'') or contains(.,''DEV_0A77'') or contains(.,''DEV_0A78'') or contains(.,''DEV_0A79'') or contains(.,''DEV_0A7A'') or contains(.,''DEV_0A7B'') or contains(.,''DEV_0A7C'') or contains(.,''DEV_0A7D'') or contains(.,''DEV_0A7E'') or contains(.,''DEV_0A7F'') or contains(.,''DEV_0CA0'') or contains(.,''DEV_0CA1'') or contains(.,''DEV_0CA2'') or contains(.,''DEV_0CA3'') or contains(.,''DEV_0CA4'') or contains(.,''DEV_0CA5'') or contains(.,''DEV_0CA6'') or contains(.,''DEV_0CA7'') or contains(.,''DEV_0CA8'') or contains(.,''DEV_0CA9'') or contains(.,''DEV_0CAA'') or contains(.,''DEV_0CAB'') or contains(.,''DEV_0CAC'') or contains(.,''DEV_0CAD'') or contains(.,''DEV_0CAE'') or contains(.,''DEV_0CAF'') or contains(.,''DEV_0CB0'') or contains(.,''DEV_0CB1'') or contains(.,''DEV_0CB2'') or contains(.,''DEV_0CB3'') or contains(.,''DEV_0CB4'') or contains(.,''DEV_0CB5'') or contains(.,''DEV_0CB6'') or contains(.,''DEV_0CB7'') or contains(.,''DEV_0CB8'') or contains(.,''DEV_0CB9'') or contains(.,''DEV_0CBA'') or contains(.,''DEV_0CBB'') or contains(.,''DEV_0CBC'') or contains(.,''DEV_0CBD'') or contains(.,''DEV_0CBE'') or contains(.,''DEV_0CBF'') or contains(.,''DEV_10C5''))])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows Server 2008 Release 2 x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Filter\\Mip\\.*\\Cube', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Best_Mip = [^0]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1356 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11SharedResources.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11SharedResources.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1356 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1356, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: WGF11SharedResources:Random failures with wrong VerifyTex2D  results', 'Random failures with wrong VerifyTex2D  results. Seems to be caused by some timing issue.
', 'Apply errata filter to the random failures.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', '(ShareFrom.*\\To.*|ShareDX11FL9)', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'GroupRollup:Failed=(1|2|3|4|5|6)', '(ShareFrom.*\\To.*|ShareDX11FL9)', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'GroupRollup:Failed=(1|2|3|4|5|6)', '.*SharedResourcesTest::VerifyTex2D.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', '(ShareFrom.*\\To.*|ShareDX11FL9)', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'GroupRollup:Failed=(1|2|3|4|5|6)', '(ShareFrom.*\\To.*|ShareDX11FL9)', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'GroupRollup:Failed=(1|2|3|4|5|6)', 'SharedResourcesTest::ExecuteTestCase\(\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1349 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_TestExe_ -c _TestPro_ -l "s98wtt.dll"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_TestExe_ -c _TestPro_ -l "s98wtt.dll"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1349 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1349, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UAA test is checking for 30us for a stream stopping. The HDAudio Spec says that it needs to be with in 40us.', 'UAA test is checking for 30us for a stream stopping. The HDAudio Spec says that it needs to be with in 40us.', 'Filter will cover failure until the test is changed.', '2025-06-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Controller Tests\\Testing controller''s DMA Reset Timing', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Engine \d \(1-based\) took 3\d(|\.\d+) microseconds to enter reset; hdaudbus\.sys will give up after 40 microseconds so we require reset to enter in 30 microseconds or less', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1146 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_PCIRootPortSurpriseRemoveTest_WLK.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_PCIRootPortSurpriseRemoveTest_WLK.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1146 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1146, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'PCI Root Port Surprise Remove may fail inappropriately with "CWDTFEDTImpl::SetTarget()"', 'The ''PCI Root Port Surprice Remove'' test may fail with "CWDTFEDTImpl::SetTarget() error determining if EDT is supported for the target device" error when testing devices that are downstream from VPCI bus adapter (Microsoft Hyper-V Virtual PCI Bus - vpci.sys).', 'Refer to manual errata #1146 in a README.txt file with your submission to have your submission accepted if this test failed and your test device is downstream from ''Microsoft Hyper-V Virtual PCI Bus'' device. To clarify, this  manual errata ONLY applies when:<br xmlns="http://www.w3.org/1999/xhtml"></br>

"TestTextLog.log" for the "Run Test" task of "PCI Root Port Surprise Remove Test (PCI Devices Only)" fails with the following error message AND contains "Microsoft Hyper-V Virtual PCI Bus" printed in the logs: (You can get to this log file by right clicking on the "Run Test" task in the "Results" tab, clicking on "Additional Files" option, and browsing to "TestTextLog.log" file). <br xmlns="http://www.w3.org/1999/xhtml"></br>

WDTF_TARGET               : INFO  :  - GetRelations("parent/","")<br xmlns="http://www.w3.org/1999/xhtml"></br>
WDTF_TARGET               : INFO  :          Target: Microsoft Hyper-V Virtual PCI Bus VMBUS\{44C4F61D-4444-4400-9D52-802E27EDE19F}\{1446E75F-EEA7-4C34-BECC-405BC14290BD} <br xmlns="http://www.w3.org/1999/xhtml"></br>
WDTF_TARGET               : INFO  :  - HasInterface("EDT")<br xmlns="http://www.w3.org/1999/xhtml"></br>
WDTF_TARGET               : INFO  :          Target: Microsoft Hyper-V Virtual PCI Bus VMBUS\{44C4F61D-4444-4400-9D52-802E27EDE19F}\{1446E75F-EEA7-4C34-BECC-405BC14290BD} <br xmlns="http://www.w3.org/1999/xhtml"></br>
WDTF_EDT                  : ERROR : CWDTFEDTImpl::SetTarget() error determining if EDT is supported for the target device. HRESULT=0x800F020B - The device instance does not exist in the hardware tree.<br xmlns="http://www.w3.org/1999/xhtml"></br>', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Microsoft.DevfundTests.PciRootPortSurpriseRemove.EnableEnhancedDeviceTestingSupport', 'Microsoft.DevfundTests.PciRootPortSurpriseRemove.EnableEnhancedDeviceTestingSupport', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Microsoft.DevfundTests.PciRootPortSurpriseRemove.EnableEnhancedDeviceTestingSupport', '.*error determining if EDT is supported for the target device.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1002 v14.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1002 AND Version = 14
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1002, 14, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Hardware Issue', 'Fixed in newer hardware avalable today', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false or contains(.,''DEV_1083'') or contains(.,''DEV_1084'') or contains(.,''DEV_1085'') or contains(.,''DEV_1086'') or contains(.,''DEV_1087'') or contains(.,''DEV_1088'') or contains(.,''DEV_1089'') or contains(.,''DEV_108A'') or contains(.,''DEV_108B'') or contains(.,''DEV_108C'') or contains(.,''DEV_108D'') or contains(.,''DEV_108E'') or contains(.,''DEV_108F'') or contains(.,''DEV_1090'') or contains(.,''DEV_1091'') or contains(.,''DEV_1092'') or contains(.,''DEV_1093'') or contains(.,''DEV_1094'') or contains(.,''DEV_1095'') or contains(.,''DEV_1096'') or contains(.,''DEV_1097'') or contains(.,''DEV_1098'') or contains(.,''DEV_1099'') or contains(.,''DEV_109A'') or contains(.,''DEV_109B'') or contains(.,''DEV_109C'') or contains(.,''DEV_109D'') or contains(.,''DEV_109E'') or contains(.,''DEV_109F'') or contains(.,''DEV_10C5'') or contains(.,''DEV_1140'') or contains(.,''DEV_1141'') or contains(.,''DEV_1142'') or contains(.,''DEV_1143'') or contains(.,''DEV_1144'') or contains(.,''DEV_1145'') or contains(.,''DEV_1146'') or contains(.,''DEV_1147'') or contains(.,''DEV_1148'') or contains(.,''DEV_1149'') or contains(.,''DEV_114A'') or contains(.,''DEV_114B'') or contains(.,''DEV_114C'') or contains(.,''DEV_114D'') or contains(.,''DEV_114E'') or contains(.,''DEV_114F'') or contains(.,''DEV_1150'') or contains(.,''DEV_1151'') or contains(.,''DEV_1152'') or contains(.,''DEV_1153'') or contains(.,''DEV_1154'') or contains(.,''DEV_1155'') or contains(.,''DEV_1156'') or contains(.,''DEV_1157'') or contains(.,''DEV_1158'') or contains(.,''DEV_1159'') or contains(.,''DEV_115A'') or contains(.,''DEV_115B'') or contains(.,''DEV_115C'') or contains(.,''DEV_115D'') or contains(.,''DEV_115E'') or contains(.,''DEV_115F'') or contains(.,''DEV_1160'') or contains(.,''DEV_1161'') or contains(.,''DEV_1162'') or contains(.,''DEV_1163'') or contains(.,''DEV_1164'') or contains(.,''DEV_1165'') or contains(.,''DEV_1166'') or contains(.,''DEV_1167'') or contains(.,''DEV_1168'') or contains(.,''DEV_1169'') or contains(.,''DEV_116A'') or contains(.,''DEV_116B'') or contains(.,''DEV_116C'') or contains(.,''DEV_116D'') or contains(.,''DEV_116E'') or contains(.,''DEV_116F'') or contains(.,''DEV_1170'') or contains(.,''DEV_1171'') or contains(.,''DEV_1172'') or contains(.,''DEV_1173'') or contains(.,''DEV_1174'') or contains(.,''DEV_1175'') or contains(.,''DEV_1176'') or contains(.,''DEV_1177'') or contains(.,''DEV_1178'') or contains(.,''DEV_1179'') or contains(.,''DEV_117A'') or contains(.,''DEV_117B'') or contains(.,''DEV_117C'') or contains(.,''DEV_117D'') or contains(.,''DEV_117E'') or contains(.,''DEV_117F'') or contains(.,''DEV_1180'') or contains(.,''DEV_1181'') or contains(.,''DEV_1182'') or contains(.,''DEV_1183'') or contains(.,''DEV_1184'') or contains(.,''DEV_1185'') or contains(.,''DEV_1186'') or contains(.,''DEV_1187'') or contains(.,''DEV_1188'') or contains(.,''DEV_1189'') or contains(.,''DEV_118A'') or contains(.,''DEV_118B'') or contains(.,''DEV_118C'') or contains(.,''DEV_118D'') or contains(.,''DEV_118E'') or contains(.,''DEV_118F'') or contains(.,''DEV_1190'') or contains(.,''DEV_1191'') or contains(.,''DEV_1192'') or contains(.,''DEV_1193'') or contains(.,''DEV_1194'') or contains(.,''DEV_1195'') or contains(.,''DEV_1196'') or contains(.,''DEV_1197'') or contains(.,''DEV_1198'') or contains(.,''DEV_1199'') or contains(.,''DEV_119A'') or contains(.,''DEV_119B'') or contains(.,''DEV_119C'') or contains(.,''DEV_119D'') or contains(.,''DEV_119E'') or contains(.,''DEV_119F'') or contains(.,''DEV_11A0'') or contains(.,''DEV_11A1'') or contains(.,''DEV_11A2'') or contains(.,''DEV_11A3'') or contains(.,''DEV_11A4'') or contains(.,''DEV_11A5'') or contains(.,''DEV_11A6'') or contains(.,''DEV_11A7'') or contains(.,''DEV_11A8'') or contains(.,''DEV_11A9'') or contains(.,''DEV_11AA'') or contains(.,''DEV_11AB'') or contains(.,''DEV_11AC'') or contains(.,''DEV_11AD'') or contains(.,''DEV_11AE'') or contains(.,''DEV_11AF'') or contains(.,''DEV_11B0'') or contains(.,''DEV_11B1'') or contains(.,''DEV_11B2'') or contains(.,''DEV_11B3'') or contains(.,''DEV_11B4'') or contains(.,''DEV_11B5'') or contains(.,''DEV_11B6'') or contains(.,''DEV_11B7'') or contains(.,''DEV_11B8'') or contains(.,''DEV_11B9'') or contains(.,''DEV_11BA'') or contains(.,''DEV_11BB'') or contains(.,''DEV_11BC'') or contains(.,''DEV_11BD'') or contains(.,''DEV_11BE'') or contains(.,''DEV_11BF'') or contains(.,''DEV_1200'') or contains(.,''DEV_1201'') or contains(.,''DEV_1202'') or contains(.,''DEV_1203'') or contains(.,''DEV_1204'') or contains(.,''DEV_1205'') or contains(.,''DEV_1206'') or contains(.,''DEV_1207'') or contains(.,''DEV_1208'') or contains(.,''DEV_1209'') or contains(.,''DEV_120A'') or contains(.,''DEV_120B'') or contains(.,''DEV_120C'') or contains(.,''DEV_120D'') or contains(.,''DEV_120E'') or contains(.,''DEV_120F'') or contains(.,''DEV_1210'') or contains(.,''DEV_1211'') or contains(.,''DEV_1212'') or contains(.,''DEV_1213'') or contains(.,''DEV_1214'') or contains(.,''DEV_1215'') or contains(.,''DEV_1216'') or contains(.,''DEV_1217'') or contains(.,''DEV_1218'') or contains(.,''DEV_1219'') or contains(.,''DEV_121A'') or contains(.,''DEV_121B'') or contains(.,''DEV_121C'') or contains(.,''DEV_121D'') or contains(.,''DEV_121E'') or contains(.,''DEV_121F'') or contains(.,''DEV_1220'') or contains(.,''DEV_1221'') or contains(.,''DEV_1222'') or contains(.,''DEV_1223'') or contains(.,''DEV_1224'') or contains(.,''DEV_1225'') or contains(.,''DEV_1226'') or contains(.,''DEV_1227'') or contains(.,''DEV_1228'') or contains(.,''DEV_1229'') or contains(.,''DEV_122A'') or contains(.,''DEV_122B'') or contains(.,''DEV_122C'') or contains(.,''DEV_122D'') or contains(.,''DEV_122E'') or contains(.,''DEV_122F'') or contains(.,''DEV_1230'') or contains(.,''DEV_1231'') or contains(.,''DEV_1232'') or contains(.,''DEV_1233'') or contains(.,''DEV_1234'') or contains(.,''DEV_1235'') or contains(.,''DEV_1236'') or contains(.,''DEV_1237'') or contains(.,''DEV_1238'') or contains(.,''DEV_1239'') or contains(.,''DEV_123A'') or contains(.,''DEV_123B'') or contains(.,''DEV_123C'') or contains(.,''DEV_123D'') or contains(.,''DEV_123E'') or contains(.,''DEV_123F'') or contains(.,''DEV_1240'') or contains(.,''DEV_1241'') or contains(.,''DEV_1242'') or contains(.,''DEV_1243'') or contains(.,''DEV_1244'') or contains(.,''DEV_1245'') or contains(.,''DEV_1246'') or contains(.,''DEV_1247'') or contains(.,''DEV_1248'') or contains(.,''DEV_1249'') or contains(.,''DEV_124A'') or contains(.,''DEV_124B'') or contains(.,''DEV_124C'') or contains(.,''DEV_124D'') or contains(.,''DEV_124E'') or contains(.,''DEV_124F'') or contains(.,''DEV_1250'') or contains(.,''DEV_1251'') or contains(.,''DEV_1252'') or contains(.,''DEV_1253'') or contains(.,''DEV_1254'') or contains(.,''DEV_1255'') or contains(.,''DEV_1256'') or contains(.,''DEV_1257'') or contains(.,''DEV_1258'') or contains(.,''DEV_1259'') or contains(.,''DEV_125A'') or contains(.,''DEV_125B'') or contains(.,''DEV_125C'') or contains(.,''DEV_125D'') or contains(.,''DEV_125E'') or contains(.,''DEV_125F'') or contains(.,''DEV_1260'') or contains(.,''DEV_1261'') or contains(.,''DEV_1262'') or contains(.,''DEV_1263'') or contains(.,''DEV_1264'') or contains(.,''DEV_1265'') or contains(.,''DEV_1266'') or contains(.,''DEV_1267'') or contains(.,''DEV_1268'') or contains(.,''DEV_1269'') or contains(.,''DEV_126A'') or contains(.,''DEV_126B'') or contains(.,''DEV_126C'') or contains(.,''DEV_126D'') or contains(.,''DEV_126E'') or contains(.,''DEV_126F'') or contains(.,''DEV_1270'') or contains(.,''DEV_1271'') or contains(.,''DEV_1272'') or contains(.,''DEV_1273'') or contains(.,''DEV_1274'') or contains(.,''DEV_1275'') or contains(.,''DEV_1276'') or contains(.,''DEV_1277'') or contains(.,''DEV_1278'') or contains(.,''DEV_1279'') or contains(.,''DEV_127A'') or contains(.,''DEV_127B'') or contains(.,''DEV_127C'') or contains(.,''DEV_127D'') or contains(.,''DEV_127E'') or contains(.,''DEV_127F'')  or contains(.,''DEV_1000'')  or contains(.,''DEV_1001'')  or contains(.,''DEV_1002'')  or contains(.,''DEV_1003'')  or contains(.,''DEV_1004'')  or contains(.,''DEV_1005'')  or contains(.,''DEV_1006'')  or contains(.,''DEV_1007'')  or contains(.,''DEV_1008'')  or contains(.,''DEV_1009'')  or contains(.,''DEV_100A'')  or contains(.,''DEV_100B'')  or contains(.,''DEV_100C'')  or contains(.,''DEV_100D'')  or contains(.,''DEV_100E'')  or contains(.,''DEV_100F'')  or contains(.,''DEV_1010'')  or contains(.,''DEV_1011'')  or contains(.,''DEV_1012'')  or contains(.,''DEV_1013'')  or contains(.,''DEV_1014'')  or contains(.,''DEV_1015'')  or contains(.,''DEV_1016'')  or contains(.,''DEV_1017'')  or contains(.,''DEV_1018'')  or contains(.,''DEV_1019'')  or contains(.,''DEV_101A'')  or contains(.,''DEV_101B'')  or contains(.,''DEV_101C'')  or contains(.,''DEV_101D'')  or contains(.,''DEV_101E'')  or contains(.,''DEV_101F'')  or contains(.,''DEV_1020'')  or contains(.,''DEV_1021'')  or contains(.,''DEV_1022'')  or contains(.,''DEV_1023'')  or contains(.,''DEV_1024'')  or contains(.,''DEV_1025'')  or contains(.,''DEV_1026'')  or contains(.,''DEV_1027'')  or contains(.,''DEV_1028'')  or contains(.,''DEV_1029'')  or contains(.,''DEV_102A'')  or contains(.,''DEV_102B'')  or contains(.,''DEV_102C'')  or contains(.,''DEV_102D'')  or contains(.,''DEV_102E'')  or contains(.,''DEV_102F'')  or contains(.,''DEV_1030'')  or contains(.,''DEV_1031'')  or contains(.,''DEV_1032'')  or contains(.,''DEV_1033'')  or contains(.,''DEV_1034'')  or contains(.,''DEV_1035'')  or contains(.,''DEV_1036'')  or contains(.,''DEV_1037'')  or contains(.,''DEV_1038'')  or contains(.,''DEV_1039'')  or contains(.,''DEV_103A'')  or contains(.,''DEV_103B'')  or contains(.,''DEV_103C'')  or contains(.,''DEV_103D'')  or contains(.,''DEV_103E'')  or contains(.,''DEV_103F'')  or contains(.,''DEV_11C0'')  or contains(.,''DEV_11C1'')  or contains(.,''DEV_11C2'')  or contains(.,''DEV_11C3'')  or contains(.,''DEV_11C4'')  or contains(.,''DEV_11C5'')  or contains(.,''DEV_11C6'')  or contains(.,''DEV_11C7'')  or contains(.,''DEV_11C8'')  or contains(.,''DEV_11C9'')  or contains(.,''DEV_11CA'')  or contains(.,''DEV_11CB'')  or contains(.,''DEV_11CC'')  or contains(.,''DEV_11CD'')  or contains(.,''DEV_11CE'')  or contains(.,''DEV_11CF'')  or contains(.,''DEV_11D0'')  or contains(.,''DEV_11D1'')  or contains(.,''DEV_11D2'')  or contains(.,''DEV_11D3'')  or contains(.,''DEV_11D4'')  or contains(.,''DEV_11D5'')  or contains(.,''DEV_11D6'')  or contains(.,''DEV_11D7'')  or contains(.,''DEV_11D8'')  or contains(.,''DEV_11D9'')  or contains(.,''DEV_11DA'')  or contains(.,''DEV_11DB'')  or contains(.,''DEV_11DC'')  or contains(.,''DEV_11DD'')  or contains(.,''DEV_11DE'')  or contains(.,''DEV_11DF'')  or contains(.,''DEV_11E0'')  or contains(.,''DEV_11E1'')  or contains(.,''DEV_11E2'')  or contains(.,''DEV_11E3'')  or contains(.,''DEV_11E4'')  or contains(.,''DEV_11E5'')  or contains(.,''DEV_11E6'')  or contains(.,''DEV_11E7'')  or contains(.,''DEV_11E8'')  or contains(.,''DEV_11E9'')  or contains(.,''DEV_11EA'')  or contains(.,''DEV_11EB'')  or contains(.,''DEV_11EC'')  or contains(.,''DEV_11ED'')  or contains(.,''DEV_11EE'')  or contains(.,''DEV_11EF'')  or contains(.,''DEV_11F0'')  or contains(.,''DEV_11F1'')  or contains(.,''DEV_11F2'')  or contains(.,''DEV_11F3'')  or contains(.,''DEV_11F4'')  or contains(.,''DEV_11F5'')  or contains(.,''DEV_11F6'')  or contains(.,''DEV_11F7'')  or contains(.,''DEV_11F8'')  or contains(.,''DEV_11F9'')  or contains(.,''DEV_11FA'')  or contains(.,''DEV_11FB'')  or contains(.,''DEV_11FC'')  or contains(.,''DEV_11FD'')  or contains(.,''DEV_11FE'')  or contains(.,''DEV_11FF'')  or contains(.,''DEV_104A'')  or contains(.,''DEV_104B'')  or contains(.,''DEV_104C'')  or contains(.,''DEV_104D'')  or contains(.,''DEV_104E'')  or contains(.,''DEV_104F'')  or contains(.,''DEV_1040'')  or contains(.,''DEV_1041'')  or contains(.,''DEV_1042'')  or contains(.,''DEV_1043'')  or contains(.,''DEV_1044'')  or contains(.,''DEV_1045'')  or contains(.,''DEV_1046'')  or contains(.,''DEV_1047'')  or contains(.,''DEV_1048'')  or contains(.,''DEV_1049'')  or contains(.,''DEV_1050'')  or contains(.,''DEV_1051'')  or contains(.,''DEV_1052'')  or contains(.,''DEV_1053'')  or contains(.,''DEV_1054'')  or contains(.,''DEV_1055'')  or contains(.,''DEV_1056'')  or contains(.,''DEV_1057'')  or contains(.,''DEV_1058'')  or contains(.,''DEV_1059'')  or contains(.,''DEV_105A'')  or contains(.,''DEV_105B'')  or contains(.,''DEV_105C'')  or contains(.,''DEV_105D'')  or contains(.,''DEV_105E'')  or contains(.,''DEV_105F'')  or contains(.,''DEV_1070'')  or contains(.,''DEV_1071'')  or contains(.,''DEV_1072'')  or contains(.,''DEV_1073'')  or contains(.,''DEV_1074'')  or contains(.,''DEV_1075'')  or contains(.,''DEV_1076'')  or contains(.,''DEV_1077'')  or contains(.,''DEV_1078'')  or contains(.,''DEV_1079'')  or contains(.,''DEV_107A'')  or contains(.,''DEV_107B'')  or contains(.,''DEV_107C'')  or contains(.,''DEV_107D'')  or contains(.,''DEV_107E'')  or contains(.,''DEV_107F'')  or contains(.,''DEV_1280'') or contains(.,''DEV_1281'') or contains(.,''DEV_1282'') or contains(.,''DEV_1283'') or contains(.,''DEV_1284'') or contains(.,''DEV_1285'')  or contains(.,''DEV_1286'') or contains(.,''DEV_1287'') or contains(.,''DEV_1288'') or contains(.,''DEV_1289'') or contains(.,''DEV_128A'') or contains(.,''DEV_128B'')  or contains(.,''DEV_128C'') or contains(.,''DEV_128D'') or contains(.,''DEV_128E'') or contains(.,''DEV_128F'') or contains(.,''DEV_1290'') or contains(.,''DEV_1291'')  or contains(.,''DEV_1292'') or contains(.,''DEV_1293'') or contains(.,''DEV_1294'') or contains(.,''DEV_1295'') or contains(.,''DEV_1296'') or contains(.,''DEV_1297'') or contains(.,''DEV_1298'') or contains(.,''DEV_1299'') or contains(.,''DEV_129A'') or contains(.,''DEV_129B'') or contains(.,''DEV_129C'') or contains(.,''DEV_129D'')  or contains(.,''DEV_129E'') or contains(.,''DEV_129F'') or contains(.,''DEV_12A0'') or contains(.,''DEV_12A1'') or contains(.,''DEV_12A2'') or contains(.,''DEV_12A3'')  or contains(.,''DEV_12A4'') or contains(.,''DEV_12A5'') or contains(.,''DEV_12A6'') or contains(.,''DEV_12A7'') or contains(.,''DEV_12A8'') or contains(.,''DEV_12A9'')  or contains(.,''DEV_12AA'') or contains(.,''DEV_12AB'') or contains(.,''DEV_12AC'') or contains(.,''DEV_12AD'') or contains(.,''DEV_12AE'') or contains(.,''DEV_12AF'')  or contains(.,''DEV_12B0'') or contains(.,''DEV_12B1'') or contains(.,''DEV_12B2'') or contains(.,''DEV_12B3'') or contains(.,''DEV_12B4'') or contains(.,''DEV_12B5'')  or contains(.,''DEV_12B6'') or contains(.,''DEV_12B7'') or contains(.,''DEV_12B8'') or contains(.,''DEV_12B9'') or contains(.,''DEV_12BA'') or contains(.,''DEV_12BB'')  or contains(.,''DEV_12BC'') or contains(.,''DEV_12BD'') or contains(.,''DEV_12BE'') or contains(.,''DEV_12BF'')     or contains(.,''DEV_1380'') or contains(.,''DEV_1381'') or contains(.,''DEV_1382'') or contains(.,''DEV_1383'') or contains(.,''DEV_1384'') or contains(.,''DEV_1385'') or contains(.,''DEV_1386'') or contains(.,''DEV_1387'') or contains(.,''DEV_1388'') or contains(.,''DEV_1389'') or contains(.,''DEV_138A'') or contains(.,''DEV_138B'') or contains(.,''DEV_138C'') or contains(.,''DEV_138D'') or contains(.,''DEV_138E'') or contains(.,''DEV_138F'') or contains(.,''DEV_1390'') or contains(.,''DEV_1391'') or contains(.,''DEV_1392'') or contains(.,''DEV_1393'') or contains(.,''DEV_1394'') or contains(.,''DEV_1395'') or contains(.,''DEV_1396'') or contains(.,''DEV_1397'') or contains(.,''DEV_1398'') or contains(.,''DEV_1399'') or contains(.,''DEV_139A'') or contains(.,''DEV_139B'') or contains(.,''DEV_139C'') or contains(.,''DEV_139D'') or contains(.,''DEV_139E'') or contains(.,''DEV_139F'') or contains(.,''DEV_13A0'') or contains(.,''DEV_13A1'') or contains(.,''DEV_13A2'') or contains(.,''DEV_13A3'') or contains(.,''DEV_13A4'') or contains(.,''DEV_13A5'') or contains(.,''DEV_13A6'') or contains(.,''DEV_13A7'') or contains(.,''DEV_13A8'') or contains(.,''DEV_13A9'') or contains(.,''DEV_13AA'') or contains(.,''DEV_13AB'') or contains(.,''DEV_13AC'') or contains(.,''DEV_13AD'') or contains(.,''DEV_13AE'') or contains(.,''DEV_13AF'') or contains(.,''DEV_13B0'') or contains(.,''DEV_13B1'') or contains(.,''DEV_13B2'') or contains(.,''DEV_13B3'') or contains(.,''DEV_13B4'') or contains(.,''DEV_13B5'') or contains(.,''DEV_13B6'') or contains(.,''DEV_13B7'') or contains(.,''DEV_13B8'') or contains(.,''DEV_13B9'') or contains(.,''DEV_13BA'') or contains(.,''DEV_13BB'') or contains(.,''DEV_13BC'') or contains(.,''DEV_13BD'') or contains(.,''DEV_13BE'') or contains(.,''DEV_13BF'') or contains(.,''DEV_1780'') or contains(.,''DEV_1781'') or contains(.,''DEV_1782'') or contains(.,''DEV_1783'') or contains(.,''DEV_1784'') or contains(.,''DEV_1785'') or contains(.,''DEV_1786'') or contains(.,''DEV_1787'') or contains(.,''DEV_1788'') or contains(.,''DEV_1789'') or contains(.,''DEV_178A'') or contains(.,''DEV_178B'') or contains(.,''DEV_178C'') or contains(.,''DEV_178D'') or contains(.,''DEV_178E'') or contains(.,''DEV_178F'') or contains(.,''DEV_1790'') or contains(.,''DEV_1791'') or contains(.,''DEV_1792'') or contains(.,''DEV_1793'') or contains(.,''DEV_1794'') or contains(.,''DEV_1795'') or contains(.,''DEV_1796'') or contains(.,''DEV_1797'') or contains(.,''DEV_1798'') or contains(.,''DEV_1799'') or contains(.,''DEV_179A'') or contains(.,''DEV_179B'') or contains(.,''DEV_179C'') or contains(.,''DEV_179D'') or contains(.,''DEV_179E'') or contains(.,''DEV_179F'') or contains(.,''DEV_17A0'') or contains(.,''DEV_17A1'') or contains(.,''DEV_17A2'') or contains(.,''DEV_17A3'') or contains(.,''DEV_17A4'') or contains(.,''DEV_17A5'') or contains(.,''DEV_17A6'') or contains(.,''DEV_17A7'') or contains(.,''DEV_17A8'') or contains(.,''DEV_17A9'') or contains(.,''DEV_17AA'') or contains(.,''DEV_17AB'') or contains(.,''DEV_17AC'') or contains(.,''DEV_17AD'') or contains(.,''DEV_17AE'') or contains(.,''DEV_17AF'') or contains(.,''DEV_17B0'') or contains(.,''DEV_17B1'') or contains(.,''DEV_17B2'') or contains(.,''DEV_17B3'') or contains(.,''DEV_17B4'') or contains(.,''DEV_17B5'') or contains(.,''DEV_17B6'') or contains(.,''DEV_17B7'') or contains(.,''DEV_17B8'') or contains(.,''DEV_17B9'') or contains(.,''DEV_17BA'') or contains(.,''DEV_17BB'') or contains(.,''DEV_17BC'') or contains(.,''DEV_17BD'') or contains(.,''DEV_17BE'') or contains(.,''DEV_17BF'')  )])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'FloatArith\\sqrt', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Tilte', 'InstMod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0.[x|y|z]=3.4028235e\+038', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0Mod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 1001 v10.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1001 AND Version = 10
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(1001, 10, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Hardware Issue', 'Fixed in newer hardware avalable today', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false or contains(.,''DEV_086F'') or contains(.,''DEV_0870'') or contains(.,''DEV_0871'') or contains(.,''DEV_0872'') or contains(.,''DEV_0873'') or contains(.,''DEV_0874'') or contains(.,''DEV_0875'') or contains(.,''DEV_0876'') or contains(.,''DEV_0877'') or contains(.,''DEV_0878'') or contains(.,''DEV_0879'') or contains(.,''DEV_087A'') or contains(.,''DEV_087B'') or contains(.,''DEV_087C'') or contains(.,''DEV_087D'') or contains(.,''DEV_087E'') or contains(.,''DEV_087F'') or contains(.,''DEV_08A0'') or contains(.,''DEV_08A1'') or contains(.,''DEV_08A2'') or contains(.,''DEV_08A3'') or contains(.,''DEV_08A4'') or contains(.,''DEV_08A5'') or contains(.,''DEV_08A6'') or contains(.,''DEV_08A7'') or contains(.,''DEV_08A8'') or contains(.,''DEV_08A9'') or contains(.,''DEV_08AA'') or contains(.,''DEV_08AB'') or contains(.,''DEV_08AC'') or contains(.,''DEV_08AD'') or contains(.,''DEV_08AE'') or contains(.,''DEV_08AF'') or contains(.,''DEV_08B0'') or contains(.,''DEV_08B1'') or contains(.,''DEV_08B2'') or contains(.,''DEV_08B3'') or contains(.,''DEV_08B4'') or contains(.,''DEV_08B5'') or contains(.,''DEV_08B6'') or contains(.,''DEV_08B7'') or contains(.,''DEV_08B8'') or contains(.,''DEV_08B9'') or contains(.,''DEV_08BA'') or contains(.,''DEV_08BB'') or contains(.,''DEV_08BC'') or contains(.,''DEV_08BD'') or contains(.,''DEV_08BE'') or contains(.,''DEV_08BF'') or contains(.,''DEV_0A20'') or contains(.,''DEV_0A21'') or contains(.,''DEV_0A22'') or contains(.,''DEV_0A23'') or contains(.,''DEV_0A24'') or contains(.,''DEV_0A25'') or contains(.,''DEV_0A26'') or contains(.,''DEV_0A27'') or contains(.,''DEV_0A28'') or contains(.,''DEV_0A29'') or contains(.,''DEV_0A2A'') or contains(.,''DEV_0A2B'') or contains(.,''DEV_0A2C'') or contains(.,''DEV_0A2D'') or contains(.,''DEV_0A2E'') or contains(.,''DEV_0A2F'') or contains(.,''DEV_0A30'') or contains(.,''DEV_0A31'') or contains(.,''DEV_0A32'') or contains(.,''DEV_0A33'') or contains(.,''DEV_0A34'') or contains(.,''DEV_0A35'') or contains(.,''DEV_0A36'') or contains(.,''DEV_0A37'') or contains(.,''DEV_0A38'') or contains(.,''DEV_0A39'') or contains(.,''DEV_0A3A'') or contains(.,''DEV_0A3B'') or contains(.,''DEV_0A3C'') or contains(.,''DEV_0A3D'') or contains(.,''DEV_0A3E'') or contains(.,''DEV_0A3F'') or contains(.,''DEV_0A60'') or contains(.,''DEV_0A61'') or contains(.,''DEV_0A62'') or contains(.,''DEV_0A63'') or contains(.,''DEV_0A64'') or contains(.,''DEV_0A65'') or contains(.,''DEV_0A66'') or contains(.,''DEV_0A67'') or contains(.,''DEV_0A68'') or contains(.,''DEV_0A69'') or contains(.,''DEV_0A6A'') or contains(.,''DEV_0A6B'') or contains(.,''DEV_0A6C'') or contains(.,''DEV_0A6D'') or contains(.,''DEV_0A6E'') or contains(.,''DEV_0A6F'') or contains(.,''DEV_0A70'') or contains(.,''DEV_0A71'') or contains(.,''DEV_0A72'') or contains(.,''DEV_0A73'') or contains(.,''DEV_0A74'') or contains(.,''DEV_0A75'') or contains(.,''DEV_0A76'') or contains(.,''DEV_0A77'') or contains(.,''DEV_0A78'') or contains(.,''DEV_0A79'') or contains(.,''DEV_0A7A'') or contains(.,''DEV_0A7B'') or contains(.,''DEV_0A7C'') or contains(.,''DEV_0A7D'') or contains(.,''DEV_0A7E'') or contains(.,''DEV_0A7F'') or contains(.,''DEV_0CA0'') or contains(.,''DEV_0CA1'') or contains(.,''DEV_0CA2'') or contains(.,''DEV_0CA3'') or contains(.,''DEV_0CA4'') or contains(.,''DEV_0CA5'') or contains(.,''DEV_0CA6'') or contains(.,''DEV_0CA7'') or contains(.,''DEV_0CA8'') or contains(.,''DEV_0CA9'') or contains(.,''DEV_0CAA'') or contains(.,''DEV_0CAB'') or contains(.,''DEV_0CAC'') or contains(.,''DEV_0CAD'') or contains(.,''DEV_0CAE'') or contains(.,''DEV_0CAF'') or contains(.,''DEV_0CB0'') or contains(.,''DEV_0CB1'') or contains(.,''DEV_0CB2'') or contains(.,''DEV_0CB3'') or contains(.,''DEV_0CB4'') or contains(.,''DEV_0CB5'') or contains(.,''DEV_0CB6'') or contains(.,''DEV_0CB7'') or contains(.,''DEV_0CB8'') or contains(.,''DEV_0CB9'') or contains(.,''DEV_0CBA'') or contains(.,''DEV_0CBB'') or contains(.,''DEV_0CBC'') or contains(.,''DEV_0CBD'') or contains(.,''DEV_0CBE'') or contains(.,''DEV_0CBF'') or contains(.,''DEV_0DC0'') or contains(.,''DEV_0DC1'') or contains(.,''DEV_0DC2'') or contains(.,''DEV_0DC3'') or contains(.,''DEV_0DC4'') or contains(.,''DEV_0DC5'') or contains(.,''DEV_0DC6'') or contains(.,''DEV_0DC7'') or contains(.,''DEV_0DC8'') or contains(.,''DEV_0DC9'') or contains(.,''DEV_0DCA'') or contains(.,''DEV_0DCB'') or contains(.,''DEV_0DCC'') or contains(.,''DEV_0DCD'') or contains(.,''DEV_0DCE'') or contains(.,''DEV_0DCF'') or contains(.,''DEV_0DD0'') or contains(.,''DEV_0DD1'') or contains(.,''DEV_0DD2'') or contains(.,''DEV_0DD3'') or contains(.,''DEV_0DD4'') or contains(.,''DEV_0DD5'') or contains(.,''DEV_0DD6'') or contains(.,''DEV_0DD7'') or contains(.,''DEV_0DD8'') or contains(.,''DEV_0DD9'') or contains(.,''DEV_0DDA'') or contains(.,''DEV_0DDB'') or contains(.,''DEV_0DDC'') or contains(.,''DEV_0DDD'') or contains(.,''DEV_0DDE'') or contains(.,''DEV_0DDF'') or contains(.,''DEV_0DE0'') or contains(.,''DEV_0DE1'') or contains(.,''DEV_0DE2'') or contains(.,''DEV_0DE3'') or contains(.,''DEV_0DE4'') or contains(.,''DEV_0DE5'') or contains(.,''DEV_0DE6'') or contains(.,''DEV_0DE7'') or contains(.,''DEV_0DE8'') or contains(.,''DEV_0DE9'') or contains(.,''DEV_0DEA'') or contains(.,''DEV_0DEB'') or contains(.,''DEV_0DEC'') or contains(.,''DEV_0DED'') or contains(.,''DEV_0DEE'') or contains(.,''DEV_0DEF'') or contains(.,''DEV_0DF0'') or contains(.,''DEV_0DF1'') or contains(.,''DEV_0DF2'') or contains(.,''DEV_0DF3'') or contains(.,''DEV_0DF4'') or contains(.,''DEV_0DF5'') or contains(.,''DEV_0DF6'') or contains(.,''DEV_0DF7'') or contains(.,''DEV_0DF8'') or contains(.,''DEV_0DF9'') or contains(.,''DEV_0DFA'') or contains(.,''DEV_0DFB'') or contains(.,''DEV_0DFC'') or contains(.,''DEV_0DFD'') or contains(.,''DEV_0DFE'') or contains(.,''DEV_0DFF'') or contains(.,''DEV_0E20'') or contains(.,''DEV_0E21'') or contains(.,''DEV_0E22'') or contains(.,''DEV_0E23'') or contains(.,''DEV_0E24'') or contains(.,''DEV_0E25'') or contains(.,''DEV_0E26'') or contains(.,''DEV_0E27'') or contains(.,''DEV_0E28'') or contains(.,''DEV_0E29'') or contains(.,''DEV_0E2A'') or contains(.,''DEV_0E2B'') or contains(.,''DEV_0E2C'') or contains(.,''DEV_0E2D'') or contains(.,''DEV_0E2E'') or contains(.,''DEV_0E2F'') or contains(.,''DEV_0E30'') or contains(.,''DEV_0E31'') or contains(.,''DEV_0E32'') or contains(.,''DEV_0E33'') or contains(.,''DEV_0E34'') or contains(.,''DEV_0E35'') or contains(.,''DEV_0E36'') or contains(.,''DEV_0E37'') or contains(.,''DEV_0E38'') or contains(.,''DEV_0E39'') or contains(.,''DEV_0E3A'') or contains(.,''DEV_0E3B'') or contains(.,''DEV_0E3C'') or contains(.,''DEV_0E3D'') or contains(.,''DEV_0E3E'') or contains(.,''DEV_0E3F'') or contains(.,''DEV_0FC0'') or contains(.,''DEV_0FC1'') or contains(.,''DEV_0FC2'') or contains(.,''DEV_0FC3'') or contains(.,''DEV_0FC4'') or contains(.,''DEV_0FC5'') or contains(.,''DEV_0FC6'') or contains(.,''DEV_0FC7'') or contains(.,''DEV_0FC8'') or contains(.,''DEV_0FC9'') or contains(.,''DEV_0FCA'') or contains(.,''DEV_0FCB'') or contains(.,''DEV_0FCC'') or contains(.,''DEV_0FCD'') or contains(.,''DEV_0FCE'') or contains(.,''DEV_0FCF'') or contains(.,''DEV_0FD0'') or contains(.,''DEV_0FD1'') or contains(.,''DEV_0FD2'') or contains(.,''DEV_0FD3'') or contains(.,''DEV_0FD4'') or contains(.,''DEV_0FD5'') or contains(.,''DEV_0FD6'') or contains(.,''DEV_0FD7'') or contains(.,''DEV_0FD8'') or contains(.,''DEV_0FD9'') or contains(.,''DEV_0FDA'') or contains(.,''DEV_0FDB'') or contains(.,''DEV_0FDC'') or contains(.,''DEV_0FDD'') or contains(.,''DEV_0FDE'') or contains(.,''DEV_0FDF'') or contains(.,''DEV_0FE0'') or contains(.,''DEV_0FE1'') or contains(.,''DEV_0FE2'') or contains(.,''DEV_0FE3'') or contains(.,''DEV_0FE4'') or contains(.,''DEV_0FE5'') or contains(.,''DEV_0FE6'') or contains(.,''DEV_0FE7'') or contains(.,''DEV_0FE8'') or contains(.,''DEV_0FE9'') or contains(.,''DEV_0FEA'') or contains(.,''DEV_0FEB'') or contains(.,''DEV_0FEC'') or contains(.,''DEV_0FED'') or contains(.,''DEV_0FEE'') or contains(.,''DEV_0FEF'') or contains(.,''DEV_0FF0'') or contains(.,''DEV_0FF1'') or contains(.,''DEV_0FF2'') or contains(.,''DEV_0FF3'') or contains(.,''DEV_0FF4'') or contains(.,''DEV_0FF5'') or contains(.,''DEV_0FF6'') or contains(.,''DEV_0FF7'') or contains(.,''DEV_0FF8'') or contains(.,''DEV_0FF9'') or contains(.,''DEV_0FFA'') or contains(.,''DEV_0FFB'') or contains(.,''DEV_0FFC'') or contains(.,''DEV_0FFD'') or contains(.,''DEV_0FFE'') or contains(.,''DEV_0FFF'') or contains(.,''DEV_1080'') or contains(.,''DEV_1081'') or contains(.,''DEV_1082''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'FloatArith\\sqrt', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'InstMod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0.[x|y|z]=3.4028235e\+038', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Title', 'Src0Mod=NONE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 723 v11.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Drvinstall -c MS_Coalesce -d coalesce -uinst'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Drvinstall -c MS_Coalesce -d coalesce -uinst')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 723 AND Version = 11
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(723, 11, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'Run RSC Test fails due to hang during the "Uninstall RSC light-weight filter" operation (device-specific)', 'This network adapter has been found to hang during the "Uninstall RSC light-weight filter" phase of the "Run RSC Test".  Aborting the process causes the test to register as a failed test. ', 'This is a known issue with the test. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 174 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXVAHDVideoProcessing.exe VideoProcessing [[]MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXVAHDVideoProcessing.exe VideoProcessing [[]MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 174 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(174, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'The DXVA High Definition Video Processing - Video Processing test produces incorrect saturating levels', 'The DXVA High Definition Video Processing - Video Processing
test may incorrectly fail surface compare for test cases that set saturation levels. Failures are identified by containing the following:
StreamStateFilterDataSaturation_Enabled = True', 'These failures are acceptable.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'TestParameter', 'EndTest:Result=Fail', 'StreamStateFilterDataSaturation_Enable=true', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7023 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7023 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7023, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: TPM 2.0 - Stress test fails incorrectly mark P224 curve as failing if it is not supported.', 'The TPM 2.0 - Stress test incorrectly mark P224 curve as failing if it is not supported.', 'To be fixed in a future release of the HLK.', '2030-07-01T16:35:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '224.*\n.*command.*CreatePrimary', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestCreateEccPrimary failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'WHCK TPM 2.0 Hardware Interface test profile MinTpmAdmin in stress mode failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T16:35:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7022 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%wavetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%wavetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7022 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7022, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wave Test failure with Bluetooth HFP devices', 'This error is associated with the validation that all capture endpoints support raw mode.  This requirement is new for RS1.  The test checked that Bluetooth capture endpoints also support raw mode, but there are few devices that do, and they are not integrated into the system, so they should not gate compatibility.', 'This erratum will overturn failures associated with the external bluetooth audioo capture devices that do no support raw mode.  The test is fixed in future releases.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS1 OneCoreUAP","Windows v10.0 Client x64 RS1 OneCoreUAP","Windows v10.0 Client ARM RS1 OneCoreUAP","Windows v10.0 Client ARM64 RS1 OneCoreUAP","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS1 Mobile","Windows v10.0 Client ARM RS1 Mobile","Windows v10.0 Client ARM64 RS1 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TAEF_Capture_VerifyRawOrDefaultProcessingSupported', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'bthhfenum', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'does not support Raw mode; Capture supports for Raw Mode is required', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7014 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %mfcaptureenginehlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %mfcaptureenginehlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7014 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7014, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MFCaptureEngine API tests incorrectly assume that a capture device is exposed by the Audio Codec', 'These tests assume that an audio capture device will always be exposed by the Codec driver. This is not the case for some devices, which are render only.', 'For RS1, RS2, RS3, these tests will not apply to audio devices that are render only. Erratum will be applied. ', '2030-06-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS1 OneCore","Windows v10.0 Client x64 RS1 OneCore","Windows v10.0 Client ARM RS1 OneCore","Windows v10.0 Client ARM64 RS1 OneCore","Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Client x86 RS1 OneCoreUAP","Windows v10.0 Client x64 RS1 OneCoreUAP","Windows v10.0 Client ARM RS1 OneCoreUAP","Windows v10.0 Client ARM64 RS1 OneCoreUAP","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Mobile","Windows v10.0 Client ARM RS1 Mobile","Windows v10.0 Client ARM64 RS1 Mobile","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS2 OneCore","Windows v10.0 Client x64 RS2 OneCore","Windows v10.0 Client ARM RS2 OneCore","Windows v10.0 Client ARM64 RS2 OneCore","Windows v10.0 Server x64 RS2 OneCore","Windows v10.0 Client x86 RS2 OneCoreUAP","Windows v10.0 Client x64 RS2 OneCoreUAP","Windows v10.0 Client ARM RS2 OneCoreUAP","Windows v10.0 Client ARM64 RS2 OneCoreUAP","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x86 RS2 Mobile","Windows v10.0 Client ARM RS2 Mobile","Windows v10.0 Client ARM64 RS2 Mobile","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Server x64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'MFCaptureEngine API Test', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'No cameras available', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'MFCaptureEngine API Test', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'No audio capture devices available', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7013 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestAudioCapture%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestAudioCapture%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7013 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7013, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MediaCapture API tests incorrectly assume that a capture device is exposed by the Audio Codec', 'These tests assume that an audio capture device will always be exposed by the Codec driver, or be present on the system. This is not the case for some devices, which are render only. ', 'For RS1, RS2, RS3, these tests will not apply to audio devices that are render only or systems that have no capture capability. Erratum will be applied. ', '2030-06-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS1 OneCore","Windows v10.0 Client x64 RS1 OneCore","Windows v10.0 Client ARM RS1 OneCore","Windows v10.0 Client ARM64 RS1 OneCore","Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Client x86 RS1 OneCoreUAP","Windows v10.0 Client x64 RS1 OneCoreUAP","Windows v10.0 Client ARM RS1 OneCoreUAP","Windows v10.0 Client ARM64 RS1 OneCoreUAP","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Mobile","Windows v10.0 Client ARM RS1 Mobile","Windows v10.0 Client ARM64 RS1 Mobile","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS2 OneCore","Windows v10.0 Client x64 RS2 OneCore","Windows v10.0 Client ARM RS2 OneCore","Windows v10.0 Client ARM64 RS2 OneCore","Windows v10.0 Server x64 RS2 OneCore","Windows v10.0 Client x86 RS2 OneCoreUAP","Windows v10.0 Client x64 RS2 OneCoreUAP","Windows v10.0 Client ARM RS2 OneCoreUAP","Windows v10.0 Client ARM64 RS2 OneCoreUAP","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x86 RS2 Mobile","Windows v10.0 Client ARM RS2 Mobile","Windows v10.0 Client ARM64 RS2 Mobile","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Server x64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest=TestAudioCapture', 'TestAudioCapture', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'No Capture Device available', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 6998 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 6998 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(6998, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK ERRATA: NDISTest 6.5 - [2 Machine] - QosEts fails with Traffic Class 1 was expected to overutilize its allocation', 'The NDISTest 6.5 - [2 Machine] - QosEts test may fail on Windows Server 2016 for some configurations with the error ''Traffic Class 1 was expected to overutilize its allocation''. ', 'This issue is being investigated by Microsoft.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Server x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[TC Underutilization\] Analyzing Traffic Results:', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Traffic Class \d* was expected to overutilize its allocation of ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[TC Verification\] Analyzing Traffic Results:', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Traffic test was unable to achieve the minimum satisfactory total link utilization of', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Traffic Class \d* throughput differs from its allocation by more than the maximum allowance', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[TC Verification\] Analyzing Traffic Results:', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Traffic test was unable to achieve the minimum satisfactory total link utilization of', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[TC Verification\] Analyzing Traffic Results:', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Traffic Class \d*''s throughput differs from its allocation by more than the maximum allowance', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5955 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%devfund.memorytest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%devfund.memorytest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5955 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5955, 4, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency: Driver Issue', 'Driver Memory Test will fail for certain kinds of GPUs. ', 'These failures are acceptable at this time. ', '2030-04-13T09:51:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft\.WindowsLogoKits\.DevFund.MemoryTest\.DriverNonPagedPoolUsage', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Graphics driver nvlddmkm.sys used ([0-9]|[1-9][0-9]{1,6}|[1-5][0-9]{7}|6[0-6][0-9]{6}|670[0-9]{5}|6710[0-7][0-9]{3}|67108[0-7][0-9]{2}|671088[0-5][0-9]|6710886[0-4])\..* KB non-paged pool.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-04-13T09:51:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5944 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5944 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5944, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: TPM Stress Test {Curve} should be returned for not supporting certain ECC curves. Instead, {Value} is returned.- Delayed Enforcement', '{Curve} should be returned for not supporting certain ECC curves. Instead, {Value} is returned.', 'Fix the TPM to return the proper error.', '2029-07-01T15:02:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Client ARM","Windows v10.0 Server x64","Windows v10.0 Mobile ARM","Windows v10.0 Mobile ARM64","Windows v10.0 Mobile x86","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client ARM TH1 Full","Windows v10.0 Client ARM TH2 Full","Windows v10.0 Client ARM RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Mobile ARM TH1 Mobile","Windows v10.0 Mobile ARM TH2 Mobile","Windows v10.0 Mobile ARM RS1 Mobile","Windows v10.0 Mobile ARM64 TH1 Mobile","Windows v10.0 Mobile ARM64 TH2 Mobile","Windows v10.0 Mobile ARM64 RS1 Mobile","Windows v10.0 Mobile x86 TH1 Mobile","Windows v10.0 Mobile x86 TH2 Mobile","Windows v10.0 Mobile x86 RS1 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TestCreateEccPrimary', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TestCreateEccPrimary failed.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'WHCK TPM 2.0 Hardware Interface test profile MinTpmAdmin in stress mode failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'TestCreateEccPrimary : Ecc.SigningLeaf.Sha.SchemeEcdsa.TpmEccNistP384.Sha;\nTPM Error: Value. Error {Value} was returned instead of {Curve} for command Create.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'WHCK TPM 2.0 Hardware Interface test profile MinTpmAdmin in stress mode failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TestCreateEccPrimary', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TestCreateEccPrimary failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TestCreateEccPrimary', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-01T15:02:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5906 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PingPongResetTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PingPongResetTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5906 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5906, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Optional server tests in QFE14', 'New optional tests in QFE14, they are not required to pass

•         Bus Reset Test
•         Lun Reset TestFWith Outstanding IO - All Disks
•         Lun Reset Test With Outstanding IO - Single Disk
•         Lun Reset Test Without Outstanding IO - All Disks
•         Lun Reset Test Without Outstanding IO - Single Disk', 'N/A', '2028-10-02T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-10-02T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5874 v17.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5874 AND Version = 17
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5874, 17, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA :  40Gig Ethernet Adapters may fail to achieve the minimum satisfactory total link utilization as NDIS Test is not able to generate enough traffic.', 'Network adapters with link speeds of 40Gig or higher may fail NDIS QoS tests because NDIS test is not able to generate enough traffic for the NICs to utilize their bandwidth.
', 'This is an acceptable failure.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"
PCI\VEN_8086&DEV_1580") or contains(.,"PCI\VEN_8086&DEV_1583") or contains(.,"PCI\VEN_8086&DEV_1584") or contains(.,"PCI\VEN_8086&DEV_1587") or contains(.,"PCI\VEN_8086&DEV_1588") or contains(.,"PCI\VEN_8086&DEV_1592") or contains(.,"PCI\VEN_8086&DEV_1593") or contains(.,"PCI\VEN_8086&DEV_158A") or contains(.,"PCI\VEN_14E4&DEV_1614") or contains(.,"PCI\VEN_14e4&DEV_16f0") or contains(.,"PCI\VEN_14e4&DEV_16f1") or contains(.,"PCI\VEN_14e4&DEV_d802") or contains(.,"PCI\VEN_14e4&DEV_d804") or contains(.,"PCI\VEN_14e4&DEV_d81") or contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_14E4&DEV_175") or contains(.,"MLX4\CONNECTX-3PRO_ETH") or contains(.,"PCI\VEN_15B3&DEV_101B") or contains(.,"PCI\VEN_15B3&DEV_1017") or contains(.,"PCI\VEN_8086&DEV_124C") or contains(.,"PCI\VEN_8086&DEV_124E") or contains(.,"PCI\VEN_8086&DEV_124F") or contains(.,"PCI\VEN_8086&DEV_151D") or contains(.,"PCI\VEN_8086&DEV_124D") or contains(.,"PCI\VEN_8086&DEV_1599") or contains(.,"PCI\VEN_8086&DEV_188A") or contains(.,"PCI\VEN_8086&DEV_188B") or contains(.,"PCI\VEN_8086&DEV_188C") or contains(.,"PCI\VEN_8086&DEV_188D") or contains(.,"PCI\VEN_8086&DEV_188E") or contains(.,"PCI\VEN_14E4&DEV_16D7") or contains(.,"PCI\VEN_15B3&DEV_101D")])
')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","8.100.9600","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Analyzing Traffic Results: \d ETS Traffic Classes, \d Strict Priority Traffic Classes\z', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Traffic test was unable to achieve the minimum satisfactory total link utilization of \d?\d%.*Measured Link Utilization.*%', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\AAnalyzing Traffic results\z', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '\ABasic traffic test was unable to achieve the minimum satisfactory link utilization of \d?\d%.* Measured Link Utilization.*%\z', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5871 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'AudioLogo.exe -c [TestPro] -l "s98wtt_u.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('AudioLogo.exe -c [TestPro] -l "s98wtt_u.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5871 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5871, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Workaround for running tests on Linked Display capable device', 'These workaround steps apply only to system and device submissions in the scenario where graphic component provides Linked Display capability. When the graphic component is configured as Linked Display mode, it may expose multiple audio endpoints that may not be all reachable. Therefore, it is not possible to connect all available audio endpoints simultaneously during test', 'WORKAROUND: Disable Linked Display Capability and rerun this test
When testing a system or device with Linked Display capability, it is acceptable to disable Linked Display capability as a workaround to avoid the expected error message: "FAIL: Endpoint (Digital Audio (HDMI) (X- High Definition Audio Device)) in unplugged (0x00000008)".  Upon disabling the Linked Display capability, all Compatibility tests are expected to be fully passing without any failures.  If you apply the workaround and the test is still failing, this Errata does not apply.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'Generic\\Verify all endpoints available', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'FAIL: Endpoint', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'HDMI', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'is unplugged \(0x00000008\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5868 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'graphicshdmitest.exe -c logo_win7_graphicshdmitest.pro -l "s98wtt_u.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('graphicshdmitest.exe -c logo_win7_graphicshdmitest.pro -l "s98wtt_u.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5868 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5868, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Workaround for running tests on Linked Display capable device', 'These workaround steps apply only to system and device submissions in the scenario where graphic component provides Linked Display capability. When the graphic component is configured as Linked Display mode, it may expose multiple audio endpoints that may not be all reachable. Therefore, it is not possible to connect all available audio endpoints simultaneously during test', 'WORKAROUND: Disable Linked Display Capability and rerun this test
When testing a system or device with Linked Display capability, it is acceptable to disable Linked Display capability as a workaround to avoid the expected error message: "FAIL: node X has nothing plugged in.  Plug in and rerun the test".  Upon disabling the Linked Display capability, all Compatibility tests are expected to be fully passing without any failures.  If you apply the workaround and the test is still failing, this Errata does not apply.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '=WTT-Logger', 'Enumerate Audio HDMI pin complexes', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'FAIL: node ', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'has nothing plugged in. Plug in and rerun the test', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5866 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[TestExe] -c [TestPro] -l "s98wtt.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[TestExe] -c [TestPro] -l "s98wtt.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5866 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5866, 3, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Workaround for running tests on Linked Display capable device', 'These workaround steps apply only to system and device submissions in the scenario where graphic component provides Linked Display capability. When the graphic component is configured as Linked Display mode, it may expose multiple audio endpoints that may not be all reachable. Therefore, it is not possible to connect all available audio endpoints simultaneously during test', 'WORKAROUND: Disable Linked Display Capability and rerun this test
When testing a system or device with Linked Display capability, it is acceptable to disable Linked Display capability as a workaround to avoid the expected error message: "Error: HDMI is unplugged and user canceled test. Failing Test".  Upon disabling the Linked Display capability, all Compatibility tests are expected to be fully passing without any failures.  If you apply the workaround and the test is still failing, this Errata does not apply.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows 8 Server x64","Windows v6.3 Server x64","Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'Codec Tests\\ValidateHDMI', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error: HDMI is unplugged and user canceled test. Failing Test.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5839 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %devfund%.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %devfund%.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5839 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5839, 7, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'PCI Root Port Surprise Remove Test (PCI devices only) (Reliability) test failed for BSOD with IRQL_NOT_LESS_OR_EQUAL.in  dxgkrnl.sys (DeviceSpecific)', 'This is due to dxgkrnl unregister and set hRuntimePowerManager==NULL without first disabling the component idle timer', 'This is an acceptable failure and it will be fixed in a later release, If you believe that you are facing the same issue reported here please open a case with CSS for verification.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(boolean(Devnode[contains(.,''VEN_1002'')]))')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"Display") or contains(.,"HDAudio")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5812 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%KmLogTransform.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%KmLogTransform.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5812 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5812, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK: PCI Hardware Compliance Test For Systems waived entirly', 'Job is being depreciated for OS''s covered by the HCK. ', 'All failures to be waived. ', '2023-10-10T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', '.*', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-10T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5797 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TDRWatch.exe [TDRArgs] [TDR_GUID]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TDRWatch.exe [TDRArgs] [TDR_GUID]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5797 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5797, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: TDRWatch test failures due to ForcedModeEnumeration under hypervisor', 'TDRWatch test failures due to ForcedModeEnumeration under hypervisor', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''VEN_10DE&DEV_15F8'') or contains(.,''VEN_10DE&DEV_15F9'') or contains(.,''VEN_10DE&DEV_1B38'') or contains(.,''VEN_10DE&DEV_1BB3'') or contains(.,''VEN_10DE&DEV_1BB4'') or contains(.,''VEN_10DE&DEV_0FE5'') or contains(.,''VEN_10DE&DEV_0FE6'') or contains(.,''VEN_10DE&DEV_0FE7'') or contains(.,''VEN_10DE&DEV_0FF5'') or contains(.,''VEN_10DE&DEV_0FF6'') or contains(.,''VEN_10DE&DEV_0FF7'') or contains(.,''VEN_10DE&DEV_118B'') or contains(.,''VEN_10DE&DEV_118C'') or contains(.,''VEN_10DE&DEV_118D'') or contains(.,''VEN_10DE&DEV_11B0'') or contains(.,''VEN_10DE&DEV_11B1'') or contains(.,''VEN_10DE&DEV_13F2'') or contains(.,''VEN_10DE&DEV_13F3'') or contains(.,''VEN_10DE&DEV_1614'') or contains(.,''VEN_10DE&DEV_1613'') or contains(.,''VEN_10DE&DEV_13F8'') or contains(.,''VEN_10DE&DEV_13BD'') or contains(.,''VEN_10DE&DEV_1DB1'') or contains(.,''VEN_10DE&DEV_1DB3'') or contains(.,''VEN_10DE&DEV_1DB4'') or contains(.,''VEN_10DE&DEV_1DB5'') or contains(.,''VEN_10DE&DEV_1DB6'') or contains(.,''VEN_10DE&DEV_1EB8'') or contains(.,''VEN_10DE&DEV_1E30'') or contains(.,''VEN_10DE&DEV_2235'') or contains(.,''VEN_10DE&DEV_2236'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ForcedModeEnumeration_Count', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ForcedModeEnumeration_Happened', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5795 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'alphabld.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('alphabld.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5795 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5795, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Alpha Blending - FALSE-TRUE 2-10-10-10 failures due to Precsion change', 'When running the subtests similar to the following:

Separate, Op:Add, Circles:192
Op:Add, Mesh:192, Triangles:128
Separate, Op:Add, Mesh:0, Triangles:192
Separate, Op:RevSubtract, Mesh:128, Triangles:64
Op:RevSubtract, Mesh:128, Triangles:64

These tests will fail with a message similar to:

Image conformance of 45.53% was less than the required 85.00%. ', 'This errata was granted because the behavior is a bug within the test.', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Op:Add', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Op:RevSubtract', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5755 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WrapIFSTests.cmd [NTFS_DRIVE_LETTER] [CNTFS_DRIVE_LETTER] [FAT_DRIVE_LETTER] [FAT32_DRIVE_LETTER] [EXFAT_DRIVE_LETTER] [UDF_DRIVE_LETTER]  [REFS_DRIVE_LETTER]  [WTTRunWorkingDir]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WrapIFSTests.cmd [NTFS_DRIVE_LETTER] [CNTFS_DRIVE_LETTER] [FAT_DRIVE_LETTER] [FAT32_DRIVE_LETTER] [EXFAT_DRIVE_LETTER] [UDF_DRIVE_LETTER]  [REFS_DRIVE_LETTER]  [WTTRunWorkingDir]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5755 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5755, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: IFS test failure with QFE013', 'IFS test failures due to QFE013', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["8.100.9600.26984","8.100.9600.27024"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Status       :C000001E \(IFSTEST_TEST_NTAPI_FAILURE_CODE\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Status       :C0000046 \(IFSTEST_TEST_PENDING_IO_TIMEOUT\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Status       :C000005E \(IFSTEST_TEST_QUOTA_TEST_NOT_RUN\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5722 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Nike.exe -0 0 -1 0 -2 0 -3 0 -4 0 -5 0 -6 0 -7 3 -8 3'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Nike.exe -0 0 -1 0 -2 0 -3 0 -4 0 -5 0 -6 0 -7 3 -8 3')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5722 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5722, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'System Transcode Faster Than Real Time on AC Power on Hybrid systems. Test is failing to use hardware encoder on hybrid systems.', 'System Transcode Faster Than Real Time on AC Power on Hybrid systems. Test is failing to use hardware encoder on hybrid systems.', 'This is an acceptable failure. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_8086&DEV_191B") or contains(.,"VEN_10DE&DEV_1347") or contains(.,"VEN_8086&DEV_1916") or contains(.,"VEN_8086&DEV_19")])
')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Client ARM","Windows v10.0 Server x64","Windows v10.0 Mobile ARM","Windows v10.0 Mobile ARM64","Windows v10.0 Mobile x86","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Client ARM","Windows v6.3 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client ARM TH1 Full","Windows v10.0 Client ARM TH2 Full","Windows v10.0 Client ARM RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Mobile ARM TH1 Mobile","Windows v10.0 Mobile ARM TH2 Mobile","Windows v10.0 Mobile ARM RS1 Mobile","Windows v10.0 Mobile ARM64 TH1 Mobile","Windows v10.0 Mobile ARM64 TH2 Mobile","Windows v10.0 Mobile ARM64 RS1 Mobile","Windows v10.0 Mobile x86 TH1 Mobile","Windows v10.0 Mobile x86 TH2 Mobile","Windows v10.0 Mobile x86 RS1 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Transcode VC1 720p to H264 720p 7 mbps', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', '0x80071069', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', '0xC00D36B9', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'FAIL to Launch Trancoder hr', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5711 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'lullaby2.exe -c [TestPro] -l "s98wtt_u.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('lullaby2.exe -c [TestPro] -l "s98wtt_u.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5711 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5711, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Lullaby Test falsely fail device with AUDCLNT_E_UNSUPPORTED_FORMAT', 'The Lullaby test is failing with AUDCLNT_E_DEVICE_INVALIDATED or AUDCLNT_E_UNSUPPORTED_FORMAT.', 'This is an acceptable failure until the test is updated. ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Lullaby Test\\.*\\WASAPI Capture Sync', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Failed IAudioStreamingCapture::Initialize\(\):(AUDCLNT_E_DEVICE_INVALIDATED|AUDCLNT_E_UNSUPPORTED_FORMAT)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Failed Creating capturer for device under test :(AUDCLNT_E_DEVICE_INVALIDATED|AUDCLNT_E_UNSUPPORTED_FORMAT)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Lullaby Test\\.*\\WASAPI Render Sync', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Failed CreateAudioStreamingRender\(hr = AUDCLNT_E_DEVICE_INVALIDATED\) after .* seconds', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Failed IAudioStreamingRender::Initialize\(\) \(hr = (AUDCLNT_E_DEVICE_INVALIDATED|AUDCLNT_E_UNSUPPORTED_FORMAT)\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Failed Create Rendering Device \(hr = (AUDCLNT_E_DEVICE_INVALIDATED|AUDCLNT_E_UNSUPPORTED_FORMAT)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Lullaby Test\\.*\\WASAPI Render Offload Sync', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Failed CreateAudioStreamingRender\(hr = AUDCLNT_E_DEVICE_INVALIDATED\) after .* seconds', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Failed IAudioStreamingRender::Initialize\(\) \(hr = (AUDCLNT_E_DEVICE_INVALIDATED|AUDCLNT_E_UNSUPPORTED_FORMAT)\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Failed Create Rendering Device \(hr = (AUDCLNT_E_DEVICE_INVALIDATED|AUDCLNT_E_UNSUPPORTED_FORMAT)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5695 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%hardwaresecuritytest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%hardwaresecuritytest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5695 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5695, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HSTI SKL Subtest Failure', 'Skylake and Kabylake has DMA busses which are incorrectly detected as being insecure.', 'Temporary exception until test is updated.', '2030-06-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Mobile x86","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Mobile x86 TH1 Mobile","Windows v10.0 Mobile x86 TH2 Mobile","Windows v10.0 Mobile x86 RS1 Mobile","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS2 Mobile","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.CS.HardwareSecurity.Tests.ProbeForInsecureDirectMemoryAccessBusses', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Root.*PCI\\VEN_8086.DEV_9D1[0123456789AB].*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*ISA.*PCI\\VEN_8086&DEV_9D4[68].*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*ISA.*PCI\\VEN_8086&DEV_A154|A116.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*PCI\\VEN_8086&DEV_15D3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5658 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5658 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5658, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wave Test may falsely fail Bluetooth audio device', 'Wave Test may falsely fail Bluetooth audio device', 'Wave test will be updated in the future update', '2030-06-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', '.*ResetPin.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'Data[Id]: Bluetooth.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', '.*ChangeAudioFormat.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'Data[Id]: Bluetooth.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', '.*PinStateChanges.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'Data[Id]: Bluetooth.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', '.*StreamingMultiThread.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'Data[Id]: Bluetooth.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5655 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe E2EBdeWlkTest.dll /select:"@Name=''*BeforeShutdown*'' And @Name=''*TpmAndRPTest_AOAC_PCR7*''" /enablewttlogging /appendwttlogging /inproc'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe E2EBdeWlkTest.dll /select:"@Name=''*BeforeShutdown*'' And @Name=''*TpmAndRPTest_AOAC_PCR7*''" /enablewttlogging /appendwttlogging /inproc')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5655 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5655, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Bitlocker Tpm And Recovery Password tests for AOAC...: Incorrectly mapped to run on NonAOAC machines. Alternate Failure 1', 'Bitlocker AOAC tests are being incorrectly mapped to NonAOAC machines.  ', 'Please disregard failure of Bitlocker AOAC tests on NonAOAC machines.   Submit the test package with the failed tests and they will be manually waived. This filter overturns one task in this job, the other task that fail won''t be filtered but are also covered by this errata. Those tasks are:<br xmlns="http://www.w3.org/1999/xhtml" />
Remove ReportDEHardwareCompliant<br xmlns="http://www.w3.org/1999/xhtml" />
Remove UserAdvanceStartup Setting<br xmlns="http://www.w3.org/1999/xhtml" />
Remove Existing Protectors<br xmlns="http://www.w3.org/1999/xhtml" />
Reboot<br xmlns="http://www.w3.org/1999/xhtml" />
Check if machine entered recovery <br xmlns="http://www.w3.org/1999/xhtml" />
Hibernate and wake up if SOC<br xmlns="http://www.w3.org/1999/xhtml" />
Check if machine entered recovery; Print test results<br xmlns="http://www.w3.org/1999/xhtml" />', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/RUNTIME_BLOCK/IsAOAC[.="false"])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', '.*This PC does not meet the hardware requirements to support device encryption.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5608 v12.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%uefisecurebootlogo.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%uefisecurebootlogo.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5608 AND Version = 12
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5608, 12, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: Secure Boot Logo Test fails due to DBX is not upto date', 'Secure Boot Logo Test fails with OutOfBoxVerifyRevocationSignatures error.', 'Update the bios to use the Windows 10 Revocation List', '2027-01-11T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Tests.OutOfBoxVerifyDBXDefault', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The signature below does not match any signatures in the database', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'All the signatures can be found in "dbxDefault".', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Tests.OutOfBoxVerifyRevocationSignatures', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The signature below does not match any signatures in the database', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Cannot find all the revocation signatures in dbx', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Tests.OutOfBoxVerifyDBXDefault', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The signature below does not match any signatures in the database', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Tests.OutOfBoxVerifyRevocationSignatures', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The signature below does not match any signatures in the database', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-11T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5592 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'HCK[_]NetIso[_]Tests.Exe /runtests'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('HCK[_]NetIso[_]Tests.Exe /runtests')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5592 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5592, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'AppContainer_Tests Variation 10 Failure: Traffic unexpectedly blocked HCK', 'AppContainer_Tests variation 10 fails with: [FAIL] Traffic was unexpectedly blocked.

This tests runs the HCK_NetIso_Tests.exe as an appContainer with the InternetClient Capability.  IPv6 TCP traffic is sent out the Sparta interface, and is expected to succeed.', 'The errors will be filtered until the test is updated', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=Traffic test variation 10', 'Traffic was unexpectedly blocked', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5534 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%RegCbTestCtrl.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%RegCbTestCtrl.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5534 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5534, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Registry Callback Tests: Tc_SetKeySecurity_Bypass does not expect the new RegNtPreQueryKeyName and RegNtPostQueryKeyName callback types', 'The RegNtPreQueryKeyName and RegNtPostQueryKeyName callback types were newly added in Windows 10 but the registry callback test was not updated.
The Tc_SetKeySecurity_Bypass test does not expect these callback types and fails as a result.
', 'This filter will detect cases where Tc_SetKeySecurity_Bypass has failed due to these unexpected registry callback types and correct them.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Tc_SetKeySecurity_Bypass\s*-\s*entering', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TcCheckNotificationRecords - [FAIL] Results for Callback 1 do not match what we expected', 'TcCheckNotificationRecords - Results for Callback 1', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Callback 1: \(\d+\) RegNtPreSetKeySecurity\s+\(0x26\)', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Callback 1: \(\d+\) RegNtPostSetKeySecurity\s+\(0x27\)', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TcCheckNotificationRecords - [FAIL] Results for Callback 2 do not match what we expected', 'TcCheckNotificationRecords - Results for Callback 2', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 5

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 5
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Callback 2: \(\d+\) RegNtPreSetKeySecurity\s+\(0x26\)', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 6

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 6
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TcCheckNotificationRecords - [FAIL] Results for Callback 3 do not match what we expected', 'TcCheckNotificationRecords - Results for Callback 3', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 7

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 7
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Callback 3: \(\d+\) RegNtPreSetKeySecurity\s+\(0x26\)', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 8

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 8
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Callback 3: \(\d+\) RegNtPostSetKeySecurity\s+\(0x27\)', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 8

	DELETE FROM @ParentNodes WHERE Depth >= 7

	DELETE FROM @ParentNodes WHERE Depth >= 6

	DELETE FROM @ParentNodes WHERE Depth >= 5

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5533 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe E2EBdeWlkTest.dll /Name:*WlkTest_VerifySystemIsAOAC* /enablewttlogging /appendwttlogging /inproc%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe E2EBdeWlkTest.dll /Name:*WlkTest_VerifySystemIsAOAC* /enablewttlogging /appendwttlogging /inproc%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5533 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5533, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: Bitlocker AOAC tests do not apply to NonAOAC machines.  Some NonAOAC machines will fail due to no TPMv2.', 'Bitlocker AOAC tests are being incorrectly mapped to NonAOAC machines.  NonAOAC machines that lack a TPMv2 will fail on this task.', 'Please disregard failure of Bitlocker AOAC tests on NonAOAC machines.   Submit the test package with the failed tests and they will be manually waived.', '2025-07-01T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/RUNTIME_BLOCK/IsAOAC[.="false"])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'The Device is not an AOAC Device', 'UserText', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-07-01T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5531 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe /auto /client /dvi /u /target:Miniport%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe /auto /client /dvi /u /target:Miniport%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5531 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5531, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: NDISTest 6.0 - [1 Machine] - 1c_Mini6RSSOids test requirement of 8 RSS queue default is not needed in some scenarios where the port/queue count exceeds core count', 'Due to an issue in the OS queue management, it may not be optimal for the default *NumRssQueues to be 8. As a workaround, it is acceptable in verified configurations / devices to lower the default to 2 or more. This is a device-specific erratum.', 'Please open a support case with Microsoft HCK support if you are encountering this issue, and have reason for a lower default RSS queue count.', '2023-11-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//NetworkAdapter/linkspeed[.=(''1410065408'') or contains(.,''10000000000'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying OID_GEN_RECEIVE_SCALE_CAPABILITIES response', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Miniport must support at least 8 RSS Queues.*Actual reported value (2|3|4|5|6|7)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-11-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5520 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'nvmeshim.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('nvmeshim.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5520 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5520, 5, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'NVMe Secure Erase Per Namespace Outside of Specifications', 'Storage device fail to meet NVMe requirement', 'Future release of the hardware should address this issue properly.', '2030-10-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//HardwareID[contains(.,''PCI\VEN_8086&DEV_0953'') or contains(., ''PCI\VEN_8086&DEV_0A53'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Assertion: Controller Identify Data', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!Msg', 'SecureEraseApplyToAll', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Secure Erase shall be per namespace', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-10-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5460 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te.exe VerifyDeviceDriverSupport.dll /inproc /enablewttlogging /select:"@Name=''*VerifyDeviceCount''"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te.exe VerifyDeviceDriverSupport.dll /inproc /enablewttlogging /select:"@Name=''*VerifyDeviceCount''"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5460 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5460, 5, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'Verify Graphics Device Count is One is being removed from the playlist', 'The Verify Graphics Device Count is one job is mapped to a requirement that is not part of the Windows 10 compatibilty program.', 'The test will be removed from the playlist. ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063","10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5453 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5453 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5453, 2, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency: VMware, Inc -  vmxnet3 Ethernet Adapter - where VMware is failing the NDISTest 6.5 - [2 Machine] - PM_PowerStateTransition', 'Failing the NDISTest 6.5 - [2 Machine] - PM_PowerStateTransition due to the following failures:
Error 11/27/2014 8:04:17.751 PM Expected 1 MediaStateUnknown status notification on system sleep, got 2 NDIS_STATUS_LINK_STATE notifications 
Error 11/27/2014 8:04:17.754 PM Expected 1 MediaStateConnected status notification on resume from sleep, got 0 NDIS_STATUS_LINK_STATE notifications ', 'This issue will be fixed in any future products.', '2023-12-30T16:05:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_15AD&DEV_07B0")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows 8 Client x86","Windows 8 Client x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows 8 Server x64","Windows Server 2008 Release 2 x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'checking for link state notification on resume', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Expected 1 MediaStateUnknown status notification on system sleep, got 2 NDIS_STATUS_LINK_STATE notifications', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Expected 1 MediaStateConnected status notification on resume from sleep', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'checking for link state notification on resume', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Expected 1 MediaStateUnknown status notification on system sleep', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Expected 1 MediaStateUnknown status notification on system sleep', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:05:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5451 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%winsockfunctional -protocol ip -t "Winsock API\Current Protocols (IPv4/IPv6)\BVT" -l wsf[_]cli[_][nw][ao][tw][i6][v4]% -r -c -dontdisable%-ipsec -notrace%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%winsockfunctional -protocol ip -t "Winsock API\Current Protocols (IPv4/IPv6)\BVT" -l wsf[_]cli[_][nw][ao][tw][i6][v4]% -r -c -dontdisable%-ipsec -notrace%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5451 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5451, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK/HLK: ERRATA : Winsock Core Functional Test may fail due to incorrect config assumptions', 'Winsock Core Functional Test may fail due to incorrect config assumptions', 'The error will be filtered until the test is updated.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows v10.0 Server x64","Windows v10.0 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'fnShell variation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*\+VAR\+SEV1    14 : fnShell variation.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Winsock API\\Current Protocols.*AsyncSelect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*\+TEST\+SEV1.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5443 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5443 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5443, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: NDIS6.5 ConfigCheck fails with miniport NDIS version mismatch', 'The NDIS6.5 ConfigCheck may fail with "The miniport stack minimum NDIS major verion is less than the miniport NDIS version.".', 'This is considered an acceptable failure at this time. ', '2030-06-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows 8 Client x64","Windows 8 Client x86","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 15063 Enterprise","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Validate NDIS stack minimum version is >= miniport NDIS version', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'The miniport stack minimum NDIS major version is less than the miniport NDIS version.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify that USB driver on Vista uses Kernel Mode Driver Framework', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'USB drivers on Vista must use Kernel Mode Driver Framework \(Kmdf\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Validate NDIS stack minimum version is >= miniport NDIS version', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'The miniport stack minimum NDIS major verion is less than the miniport NDIS version.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5442 v11.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5442 AND Version = 11
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5442, 11, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: NDIS 6.0 Tests fail with LibProtocolDriver: Install protocol driver failed.', 'The following HLK NDIS 6.0 Tests may fail with "LibProtocolDriver: Install protocol driver failed.":

NDISTest 6.0 - [1 Machine] - 1c_64BitOIDs
NDISTest 6.0 - [1 Machine] - 1c_Mini6PerfSend
NDISTest 6.0 - [1 Machine] - 1c_Mini6RSSOids
NDISTest 6.0 - [1 Machine] - 1c_Mini6Send
NDISTest 6.0 - [2 Machine] - 2c_Mini6CheckConnections
NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecv
NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv
NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv (Multi-Group Win8+)
NDISTest 6.0 - [2 Machine] - 2c_Mini6SendRecvReply
NDISTest 6.0 - [2 Machine] - 2c_Mini6Stress
NDISTest 6.0 - [2 Machine] - 2c_Mini6Performance
', 'This is considered an acceptable failure at this time. ', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Client x86 19H1 Full","Windows v10.0 Client x64 19H1 Full","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x86 Mn Full","Windows v10.0 Client x64 Mn Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', '(1c_64bitoids|1c_mini6perfsend|1c_mini6rssoids|1c_mini6send|2c_mini6checkconnections|2c_mini6sendrecv|2c_mini6rsssendrecv|2c_mini6sendrecvreply|2c_mini6stress|2c_mini6performance)', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', '(Setting up Test Adapter|Querying RSS processor information|Setting up Support Adapter EndPoints|Restoring any changed bind status of Protocols|Setting up additional Test EndPoint|Setting up Sending Adapter)', 'Title', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'LibProtocolDriver: Install protocol driver failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Unable to create Library Open object!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Failed to create open on Test adapter', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Failed to create open on Support adapter', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'LibProtocolDriver: Failed to uninstall protocol driver with error 0x80071a90', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'LibProtocolDriver: Failed to uninstall protocol driver with error 0x80071a90', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Unable to create additional receiving opens', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Verifing script completed successfully...', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Script was terminated abnormally!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5416 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGIPresent.exe WinPresent WinpresentSmallWindow FSPresent FSpresentRotation FSPresentMulti%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGIPresent.exe WinPresent WinpresentSmallWindow FSPresent FSpresentRotation FSPresentMulti%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5416 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5416, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DXGI Presentation testing - Other - multihead (wow64) - DXGI Presentation test fails in some specific cases', 'DXGI Presentation test fails in some specific cases. Issue is still being investigates', 'Issuing errata to unblock IHVs', '2030-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*WinPresent*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*FAIL*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*PerformPresent on swap chain failed*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*GetDisplaySurfaceData on swap chain failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*WinPresentSmallWindow*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.* EnumerateDisplayDevices on device 6 failed*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*GetDisplaySurfaceData on swap chain failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*failed*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*FSPresent*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*CreateDeviceAndSwapChain failed*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*FSPresentRotation*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*CreateDeviceAndSwapChain failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5413 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault9'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault9')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5413 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5413, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: WDDM2 - Page Fault Test - Induce Fault 9 Test fails', 'WDDM2 - Page Fault Test - Induce Fault 9 Test fails
', 'The test will be updated at a later date. This waiver waives all failures in this test. ', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:UserText', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5407 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'crash.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('crash.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5407 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5407, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'CRASH - Display Stress 4-hour WDDM terminating early on Windows 10', 'A pop up message appears during the test, a referral was returned from server. The message covered by this waiver is: System was found to have rebooted unexpectedly,', 'Problem with sub-tets logging failures when their windows got sent a Quit message, which make sense for tests were being terminated early.  ', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '.*System was found to have rebooted unexpectedly*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5393 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault11'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault11')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5393 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5393, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: WDDM2 - Page Fault Test - Induce Fault 11 Test fails', 'WDDM2 - Page Fault Test - Induce Fault 11 Test fails
', 'The test will be updated at a later date. This waiver waives all failures in this test. ', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'IsGreaterThanOrEqual.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5392 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault12'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pagefault.dll /name:VidMm::PageFault::InduceFault12')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5392 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5392, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: WDDM2 - Page Fault Test - Induce Fault 12 Test fails', 'WDDM2 - Page Fault Test - Induce Fault 12 Test fails
', 'The test will be updated at a later date. This waiver waives all failures in this test. ', '2030-06-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'IsGreaterThanOrEqual.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5387 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'registry.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('registry.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5387 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5387, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Registry Validation test is failing because windows version  was not revved up to 10.', 'Registry Validation test is failing because windows version  was not revved up to 10. IHVs will have to change their UMD file versions to match. This will be fixed in later HLK builds', 'Test needs to use updated Windows version.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText', '.*Invalid*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5386 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'registry.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('registry.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5386 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5386, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Registry Validation test is failing because windows version  was not revved up to 10.', 'Registry Validation test is failing because windows version  was not revved up to 10. IHVs will have to change their UMD file versions to match. This will be fixed in later HLK builds', 'Test needs to use updated Windows version.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText', '.*Invalid*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5384 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'D3D9OverlayTest.exe PresentEx%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('D3D9OverlayTest.exe PresentEx%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5384 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5384, 3, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK: D3D9 Overlay - PresentEx - fails, test issu', 'D3D9 Overlay test is failing in HLK. Needs more time for investigation', 'Issuing errata to unblock IHVs', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) > 9600])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*PresentEx*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'EndTest', 'EndTest:Result', '.*Blocked*', 'Result', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5356 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TE.exe /enablewttlogging /appendwttlogging Devfund_PnPDTest_WLK.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TE.exe /enablewttlogging /appendwttlogging Devfund_PnPDTest_WLK.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5356 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5356, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK ERRATA: Failing the DF - PNP Rebalance Fail Restart Device Test (Certification) & Surprise Remove Device Test (Certification) running on QFE12.', 'After investigating the failures seen in these tests:
DF - PNP Rebalance Fail Restart Device Test (Certification)
DF - PNP Surprise Remove Device Test (Certification)

It has been confirmed that QFE12 is broken.', 'This is an acceptable failure until QFE12 is fixed. ', '2026-10-13T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '''DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice''.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Failed to open the EDT device Win32=1 - Incorrect function.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Failed to receive IRP_MN_REMOVE_DEVICE after receiving IRP_MN_SURPRISE_REMOVAL.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPTryStopDeviceAndFailRestart', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPTryStopDeviceAndFailRestart', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device is not started.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to open the EDT device Win32=1 - Incorrect function.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device is reporting a problem code', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Problem Code=16', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 5

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 5
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'DN_DRIVER_LOADED DN_DISABLEABLE DN_NT_ENUMERATOR DN_NT_DRIVER', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 5

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPTryStopDeviceRequestNewResourcesAndRestartDevice', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPTryStopAndRestartDevice', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-10-13T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5346 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11shader5x.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11shader5x.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5346 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5346, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: Graphics\WGF11Shader5x” test failure with LoadStore\store_structured task', 'This is due to test is doing out of bound TGSM access', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LoadStore\\store_structured', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ShaderStage = COMPUTE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'UseTGSM = true', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'BufStride = 32', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'SrcAddressSwizzle = yyyy', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 5

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 5
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CStore_structured::AnalyzeResult\(\) failed at pixel', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 5

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LoadStore\\store_structured', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ShaderStage = COMPUTE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'UseTGSM = true', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'BufStride = 32', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'SrcAddressSwizzle = zzzz', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 5

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 5
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CStore_structured::AnalyzeResult\(\) failed at pixel', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 6

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 6
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CStore_structured::AnalyzeResult\(\) has additional failures', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 6

	DELETE FROM @ParentNodes WHERE Depth >= 5

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LoadStore\\store_structured', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ShaderStage = COMPUTE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'UseTGSM = true', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'BufStride = 32', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'SrcAddressSwizzle = xxxx', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 5

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 5
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CStore_structured::AnalyzeResult\(\) failed at pixel', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 5

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LoadStore\\store_structured', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ShaderStage = COMPUTE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'UseTGSM = true', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'BufStride = 32', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'SrcAddressSwizzle = zzzz', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 5

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 5
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CStore_structured::AnalyzeResult\(\) failed at pixel', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 5

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LoadStore\\store_structured', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ShaderStage = COMPUTE', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'UseTGSM = true', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'BufStride = 32', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'SrcAddressSwizzle = wwww', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 5

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 5
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CStore_structured::AnalyzeResult\(\) failed at pixel', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 5

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5345 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%pttest2.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%pttest2.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5345 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5345, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'PrintTicketTest: On Windows 8, WHCK 2.x/PrintTicket Test error due to unsupported JobPasscode print schema', 'The Print Ticket Test will fail drivers that have a JobPasscode feature in the GPD.', 'This will be filtered to not be considered an error.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["Device.Imaging.Printer.Base"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Print Schema Conformance Test - Ver 6.3.9600.16384', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.JobPasscode.', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PTMergeAndValidate\-DeltaPTs\+DeltaPTs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'JobPasscode', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'RunSchemaConformanceTestOnPrintTicket', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5342 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'kstoptest_TestSuffix_.exe -c _TestPro_ -l "s98wtt.dll"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('kstoptest_TestSuffix_.exe -c _TestPro_ -l "s98wtt.dll"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5342 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5342, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KS Topology incorrectly fail mux''d render endpoint', 'With the most recent change of the Windows Hardware Compatibility Requirement - Audio.Device.Base.Endpoint. Mux''d render is only required for the devices running Windows Mobile.', 'Filter covers failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x64","Windows v6.3 Client x86","Windows 7 Client x86","Windows 7 Client x64","Windows 8 Client x86","Windows 8 Client x64","Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Pins\\Check KSPROPERTY_JACK_DESCRIPTION', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Jacks have intersecting channel mappings.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5341 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5341 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5341, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [1 Machine] - PM_Requirements fails due to the RNDIS miniport NDIS 6.0 driver doesn’t support SS but states it is NDIS 6.30', 'When run "NDISTest 6.5 - [1 Machine] - PM_Requirements" on a RNDIS USB device which loads the inbox driver pair: rndismp6.sys and usb80236.sys in Windows 8 and later system, the test case may fail due to the rndismp6.sys and usb80236.sys do not support "NDIS No Pause On Suspend" and "NDIS Selective Suspend" but states it is a NDIS 6.30 driver.', 'The failure is an acceptable failure at this time.', '2025-03-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"USB\VID_17EF&PID_B001") or contains(.,"USB\VID_05C6&PID_9091") or contains(., "USB\VID_1508&PID_1001") or contains(.,"USB\VID_0550&PID_0250")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063","10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Verify power management support', 'Verify power management support', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Verify power management support for RNDIS', '.*does not indicate support for power management.  It is required for this device.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Verify No-Pause-On-Suspend', 'Verify No-Pause-On-Suspend', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Verify No-Pause-On-Suspend for RNDIS', '.*does not indicate support for No-Pause-On-Suspend.  It is required for certification.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Verify USB Selective Suspend', 'Verify USB Selective Suspend', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Verify USB Selective Suspend for RNDIS', '.*does not indicate support for USB Selective Suspend.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5293 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGISwap.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGISwap.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5293 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5293, 2, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Hardwar failure', 'Hardware Contingency', 'To be fixed in an upcommnig hardware release.', '2026-12-31T18:17:56')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002&amp;'') and (false or contains(.,''DEV_9874'') or contains(.,''DEV_98E4'') or contains(.,''DEV_9874''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'ModeDesc.Format = R16G16B16A16_FLOAT', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-12-31T18:17:56' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5270 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%_with_io_beforeandafter%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%_with_io_beforeandafter%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5270 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5270, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: SysFund: Sleep_PNP_DisableEnable_With_IO_Before_And_After fails with CSmartCardReaderImpl::IsAthenaT0() - Failed to reset card reader Win32=1112 - No media in drive (device-specific)', 'The System Sleep and PNP test may fail when testing a system with the error ''no media in drive'' if the target is a contactless Smartcard Reader. This filter is device-specific. ', 'If you are failing the test with a contactless Smartcard Reader, please open a support case with Microsoft HCK Support to verify if your Device ID should be added to the filter.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', '.*ERROR : CSmartCardReaderImpl::IsAthenaT0\(\).*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5251 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Cmd.Exe%Teredo_WLK.WSF%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Cmd.Exe%Teredo_WLK.WSF%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5251 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5251, 8, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'ERRATA: TransitionTechnologies_Tests logs a failure due a test case or configuration command\script is running on Windows 7 that it shouldn’t (driver-specific)', 'The TransitionTechnologies_Tests may fail on Windows 7 or Server 2008 R2 due to an issue with the underlying Sparta binaries. The APIs are called in a manner that is not compatible with those OS versinos.', 'The errors will be filtered until the test is updated.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Driver/FileName[(.=''mfewfpk.sys'') or (.=''serreswfp.sys'') or (.=''bxnd60a.sys'') or (.=''epfwwfp.sys'') or (.=''epfwwfpr.sys'') or (.=''jnprns.sys'') or (.=''klwtp.sys'') or (.=''klwtpsm.sys'') or (.=''klwtpks.sys'') or (.=''klwtpaa.sys'') or (.=''klwtpes.sys'') or (.=''vmwvudpd.sys'') or starts-with(.,''acsock'') or (.=''klips.sys'') or (.=''klncap.sys'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', 'Variation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'CreateInterface: Driver interface returned nothing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5248 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'nvmeshim.exe /DriveNumber [StorageDriveNumber] /DriveLetter [StorageDriveLetter]: /operation [Operation] /scenario [Scenario] /verbosity 4 /Duration [Duration]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('nvmeshim.exe /DriveNumber [StorageDriveNumber] /DriveLetter [StorageDriveLetter]: /operation [Operation] /scenario [Scenario] /verbosity 4 /Duration [Duration]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5248 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5248, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata:NVMe IO test generating Data corruption and timeout failures in the test log on Systems with CPUs >4', 'This is due to testing a system with greater than 4 CPUs', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'PROCESSOR_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('PROCESSOR_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'PROCESSOR_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//NumberOfProcessors["([5-9]|[1-9][0-9]|[1-9][0-9][0-9])"])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Alternating pattern with verification,', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5241 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd /c Te.exe Utility_DeviceStatusCheck.wsc%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd /c Te.exe Utility_DeviceStatusCheck.wsc%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5241 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5241, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata:Sleep and PNP test is failing due to a failure with the Device Status Check task on a virtual optical drive with No Media is Present error', 'Sleep and PNP test is failing due to a failure with the Device Status Check task on a virtual optical drive with No Media is Present error', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x64","Windows 8 Client x86","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows 8 Server x64","Windows Server 2008 x64","Windows v6.3 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDTF_TEST\s+: Device Status Check', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'NECVMWar VMware IDE CDR00 ATA Device ', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'ERROR : No Media is present in the optical media device', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR : Device not configured properly for basic testing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDTF_TEST\s+: Device Status Check', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'NECVMWar VMware IDE CDR00 ATA Device ', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR : No Media is present in the optical media device', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDTF_TEST\s+: Device Status Check', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'iDRAC Virtual CD USB Device', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'ERROR : No Media is present in the optical media device', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'ERROR : Device not configured properly for basic testing', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Media not present in the drive', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5229 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGIGammaVM.exe [[]MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGIGammaVM.exe [[]MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5229 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5229, 4, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HCK Errata: DXGI Gamma Ramps failure due to access violation', 'DXGI Gamma Ramps failure due to access violation', 'This is an acceptable failure', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Curve', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5228 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'configdisplay.exe -d2%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('configdisplay.exe -d2%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5228 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5228, 3, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'HCK Errata: DXGI Gamma Ramps failure due to access violation', 'DXGI Gamma Ramps failure due to access violation', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ConfigDisplay', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5226 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGIGammaVM.exe [[]MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGIGammaVM.exe [[]MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5226 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5226, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: DXGI Gamma Ramps failure due to access violation', 'DXGI Gamma Ramps failure due to access violation', 'This is an acceptable failure', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test group had aborts.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Test group had aborts but no failures', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5207 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'RegCbTestCtrl.exe -regr'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('RegCbTestCtrl.exe -regr')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5207 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5207, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Failing the Registry Callback Tests due to "Tc_SaveRestoreReplace - one or more failures above"', 'The Registry Callback Tests fails due to "Tc_SaveRestoreReplace - one or more failures above".  When the partner''s driver .sys are enabled, they combine to produce enough extra registry activity during this test to overwhelm the 64-entry buffer and cause the test driver to overwrite its records of the first few callbacks it received. The test then fails because the test driver didn’t have records of operations the test control program expected it to have.', 'This is an acceptable failure until the test is updated.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Driver/FileName[contains(.,"klif.sys") or contains(.,"klifsm.sys") or contains(.,"klifks.sys") or contains(.,"klifaa.sys") or contains(.,"klifes.sys") or contains(.,"klifsdk.sys") or contains(.,"klbackupflt.sys") or contains(.,"klfle.sys")])
')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'Results for Callback \d do not match what we expected', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Tc_SaveRestoreReplace *.\-*.\ one or more failures above', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Tc_SaveRestoreReplace *.\-*.\ one or more failures above', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5203 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11timingdata.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11timingdata.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5203 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5203, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'ERRATA: Graphics: D3D11 WGF11TimingData HW FL* tests fail due to missing perf DLLs', 'The D3D11 WGF11TimingData HW FL* and D3D11 WGF11TimingData HW FL9.* tests may fail incorrectly on HCK QFE010 and QFE011 due to missing performance DLL files. 
', 'Test failures will be filtered until the test is updated.', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', '.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '!Msg', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5202 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%/target:Filter%Filter Service Name%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%/target:Filter%Filter Service Name%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5202 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5202, 4, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'HCK NDIS Test 6.5 LWF Logo Test fails to execute on x64 machines due to unsigned NMPCL630.SYS test miniport driver', 'This is a known issue that is introduced with QFE 11.', 'This is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Driver/FileName[contains(.,"jnprns.sys")or contains(.,"klim6.sys") or contains(.,"klwfp.sys") or contains(.,"klwtp.sys")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["8.100.9600.26846"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x64","Windows v6.3 Client x64","Windows 8 Client x64","Windows v6.3 Server x64","Windows 8 Server x64","Windows Server 2008 Release 2 x64"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5188 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11timingdata.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11timingdata.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5188 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5188, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: Graphics: D3D11 WGF11TimingData HW FL* tests fail due to missing perf DLLs', 'The D3D11 WGF11TimingData HW FL* and D3D11 WGF11TimingData HW FL9.* tests may fail incorrectly on HCK QFE010 and QFE011 due to missing performance DLL files. 
', 'Test failures will be filtered until the test is updated.', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', '.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '!Msg', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5184 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'registry.exe -M:%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('registry.exe -M:%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5184 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5184, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM Display driver is failing the Registry Validation test due to Invalid driver version information detected', 'On Win7 or Win8.x (not Win10) this test does not understand driver version numbering for unified drivers while attempting to validate the primary adapter on the system because WDDM 2.0 was introduced in Win10.', 'This is an acceptable failure', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows 8.1 Server x64","Windows v6.3 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows Server 2008 Release 2 x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Device\(0\): Invalid driver version information detected.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Invalid driver version information detected', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5157 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging DevFundInfTest.dll /p:"WDKInfPath=[WDKInfPath]" /p:"FullDriverInf=[FullDriverInf]" /p:"queryIsInbox=[queryIsInbox]"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging DevFundInfTest.dll /p:"WDKInfPath=[WDKInfPath]" /p:"FullDriverInf=[FullDriverInf]" /p:"queryIsInbox=[queryIsInbox]"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5157 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5157, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata:  CHKINF utility is run against the driver’s INF file, it reports errors on VD3D display drivers', 'The CHKINF complains about the use of the DELFLG_IN_USE1 flag. According to MSDN , the flag is valid:
 
0x00010000 (DELFLG_IN_USE1)
 
(Windows 2000 or later versions of Windows) This flag is a high-word version of the DELFLG_IN_USE flag, and it has the same purpose and effect. This flag should be used in only for installations on NT-based systems.
', 'This is an acceptable failure for now', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevFund.DevFundProperInfTest.ExecuteCheckInf', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', '|Bad value for flags \(81920\) in vd3d.Display.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '|Bad value for flags \(81920\) in vd3d.DispWow', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5122 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging multiphaseresume.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging multiphaseresume.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5122 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5122, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: MultiPhaseResume test failed:NoMultiPhaseResumeReason code: 4 & System does not support Multi-Phase Resume', 'MultiPhaseResume test may fail with an error on certain systems: "NoMultiPhaseResumeReason code: 4 ; System does not support Multi-Phase Resume". This occurs because the test is not compatible with some hardware designs.', 'The erratum will be applied until the test is fixed.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//RUNTIME_BLOCK//smbiosModel[contains(.,"T300")])
')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows v6.3 Client x64","Windows v6.3 Client x86"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest:Title=MultiPhaseResume::MultiPhaseResumeTestClass.*', 'MultiPhaseResume::MultiPhaseResumeTestClass.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'NoMultiPhaseResumeReason code:.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'System does not support Multi-Phase Resume: New Crashdump Driver not supporting the feature', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5112 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%HAPTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%HAPTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5112 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5112, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: Hardware Offload of Audio Processing test fails on MIDI-only devices when no endpoints are found', 'The Hardware Offload of Audio Processing Test may fail when testing MIDI-only devices when no audio endpoints are found. This failure is expected, as MIDI-only devices do not have audio endpoints.
', 'The errors will be filtered until the test is updated.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''MIDI'')] or //Devnode/Description[contains(.,''MIDI'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Render offload paths found: 0', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'IsTrue\(nMatchingEndpoints[eRender] > 0 || nMatchingEndpoints[eCapture] > 0\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5106 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5106 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5106, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency: Device.Network.LAN.GRE.GREPacketTaskOffloads', 'Hardware Contingency', 'To be fixed in next revision of the hardware. ', '2029-10-31T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[(@WDK=''WDKDeviceID'') and (starts-with(.,''PCI\VEN_8086&DEV_1563'') or contains(.,''PCI\VEN_8086&DEV_15AA'') or contains(.,''PCI\VEN_8086&DEV_15AB'') or contains(.,''PCI\VEN_8086&DEV_15AC'') or contains(.,''PCI\VEN_8086&DEV_15AD'') or contains(.,''PCI\VEN_8086&DEV_15AE'') or contains(.,''PCI\VEN_8086&DEV_15C2'') or contains(.,''PCI\VEN_8086&DEV_15C3'') or contains(.,''PCI\VEN_8086&DEV_15C4'') or contains(.,''PCI\VEN_8086&DEV_15C6'') or contains(.,''PCI\VEN_8086&DEV_15C7'') or contains(.,''PCI\VEN_8086&DEV_15C8'') or contains(.,''PCI\VEN_8086&DEV_15CA'') or contains(.,''PCI\VEN_8086&DEV_15CE'') or contains(.,''PCI\VEN_8086&DEV_15CC'') or contains(.,''PCI\VEN_8086&DEV_15D1''))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Test_OffloadParity::ValidateParity: Feature GRE::VMQ::Outer does not have parity between IPv4 and IPv6', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Test_OffloadParity::ValidateParity: Feature GRE::TransmitChecksum::Outer does not have parity between IPv4 and IPv6', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'OneQueueOneFilterIpv6GreEncap Encap:YES Vlan:YES: received less than the expected percentage of packets sent', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'OneQueueOneFilterIpv6GreEncap Encap:YES Vlan:NO: received less than the expected percentage of packets sent', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', '9 total breakpoints were hit in the protocol driver while this test was executing', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Test_OffloadParity::ValidateParity: Feature GRE::ReceiveChecksum::Outer does not have parity between IPv4 and IPv6', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Test_OffloadParity::ValidateParity: Feature GRE::LSOv2::Outer does not have parity between IPv4 and IPv6', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'FAILED: EncapsulatedPacketTaskOffloadGre.TransmitChecksumOffloadSupported test. Miniport reported 0x7, we expected it to contain the following bits 0xF', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-10-31T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5062 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'kstoptest[[]TestSuffix].exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('kstoptest[[]TestSuffix].exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5062 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5062, 6, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'ERRATA: KS Topology test fails on MIDI driver that exposes KSCATEGORY_AUDIO interfaces', 'The KS Tolopogy test may fail on MIDI drivers that expose KSCATEGORY_AUDIO interfaces. Since these interfaces are exposed, the test attempts to check for support of KSPROPERTY_AUDIOSIGNALPROCESSING_MODES, which does not apply to MIDI drivers.', 'This is a limitation of the test.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '^KS Topology Filters\\KS Pins\\Check Processing Modes$', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Device Name = ', 'Device Name = .*MIDI', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'KSPROPERTY_AUDIOSIGNALPROCESSING_MODES is required but not supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Filter: ', 'Filter: .*MIDI', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'KSPROPERTY_AUDIOSIGNALPROCESSING_MODES is required but not supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5059 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'move Logs Logs'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('move Logs Logs')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5059 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5059, 4, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HCK Errata: KB2929158 v1.0 doesn’t update ProximityService.dll and causes WHCK WFD Proximity related test cases fails on 32-bit Win8.1', 'IgnoreFailAndContinue tasks should not rollup results.', 'The cleanup tasks failing without logs will be filtered.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 17083])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5058 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11TiledResources.exe [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11TiledResources.exe [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5058 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5058, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WGF11 TiledResources failed with render target to be cleared', 'DepthStencilView is creating new render targets for each test case and renders to them without performing a Clear() operation', 'Fix expected at nex QFE release', '2050-12-31T11:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DepthStencilView', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Rendered image using tiled depth buffer doesn''t match rendered image using non-tiled depth buffer.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'LargeAddress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'CreateTexture2D\(\) unexpectedly failed with error code E_OUTOFMEMORY \(0x8007000e\).*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T11:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5029 v10.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /script:{[TestScript]}'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /script:{[TestScript]}')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5029 AND Version = 10
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5029, 10, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: LAN 2c_mini6rsssendrecv hash type enforcement (Device Specific)', 'The errata only covers test cases when hash information is set for a lesser hash type than the traffic being sent (meaning the traffic being tested is TCP traffic but the hash type is IP-only).', 'If you feel that you are failing due to the hash type, please open a Support Incident with CSS for verification.', '2031-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Miniport did not use the correct hash type or function', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Miniport did not indicate all received net buffers on the expected processor', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Miniport did not use RSS when it was expected to', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Miniport computed incorrect hash value for some net buffers', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 5026 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PciHct.WTL%KmLogProviders.etl'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PciHct.WTL%KmLogProviders.etl')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5026 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(5026, 2, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency: Hardware Issue', 'Hardware Issue: Legacy product doesn''t support AER', 'Fixed in newer hardware product
      ', '2030-12-31T15:10:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'') and (false or contains(.,''DEV_019D'') or contains(.,''DEV_019E'') or contains(.,''DEV_040A'') or contains(.,''DEV_040D'') or contains(.,''DEV_040E'') or contains(.,''DEV_040F'') or contains(.,''DEV_042F'') or contains(.,''DEV_05E7'') or contains(.,''DEV_05F9'') or contains(.,''DEV_05FD'') or contains(.,''DEV_05FE'') or contains(.,''DEV_05FF'') or contains(.,''DEV_0619'') or contains(.,''DEV_061A'')  or contains(.,''DEV_061B'') or contains(.,''DEV_061C'') or contains(.,''DEV_061D'') or contains(.,''DEV_0638'') or contains(.,''DEV_0658'') or contains(.,''DEV_0659'') or contains(.,''DEV_065C'') or contains(.,''DEV_06F8'') or contains(.,''DEV_06F9'') or contains(.,''DEV_06FA'') or contains(.,''DEV_06FB'') or contains(.,''DEV_06FD'') or contains(.,''DEV_06FF'') or contains(.,''DEV_087A'')  or contains(.,''DEV_0A38'') or contains(.,''DEV_0A3C'') or contains(.,''DEV_0A78'') or contains(.,''DEV_10D8'') or contains(.,''DEV_06D1'') or contains(.,''DEV_06D2'') or contains(.,''DEV_06D8'') or contains(.,''DEV_06D9'') or contains(.,''DEV_06DC'') or contains(.,''DEV_06DD'') or contains(.,''DEV_06DE'') or contains(.,''DEV_06DF'') or contains(.,''DEV_0DD8'') or contains(.,''DEV_0DF8'')  or contains(.,''DEV_0DF9'') or contains(.,''DEV_0DFA'') or contains(.,''DEV_0E3A'') or contains(.,''DEV_0E3B'') or contains(.,''DEV_107C'') or contains(.,''DEV_107D'') or contains(.,''DEV_1091'') or contains(.,''DEV_1094'') or contains(.,''DEV_1096'') or contains(.,''DEV_109B''))])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*PCI Function.*', '.*PCI Function.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg', '5C55A8B9-BA51-46C7-9BEB-BB4A5EB5BEA6', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T15:10:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4975 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /script:{[TestScript]}'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /script:{[TestScript]}')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4975 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4975, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.0 - [1 Machine] - 1c_WMICoverage due to: Unable to query error = 0x80041008', 'The 1c_wmicoverage test is too strict on private WMI providers and provides little value. ', 'This is an acceptable failure. ', '2030-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Obtaining class name for', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to obtain class name from guid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_TRANSMIT_BUFFER_SPACE', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_RECEIVE_BUFFER_SPACE', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MAXIMUM_SEND_PACKETS', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_HARDWARE_STATUS', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MEDIA_SUPPORTED', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MEDIA_IN_USE', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_XMIT_ERROR', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_RCV_ERROR', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_RCV_NO_BUFFER ', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4925 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11TiledResources%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11TiledResources%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4925 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4925, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TiledResources does not clear  color validation with value non 0x80', 'TiledResources a)doesn’t initialize the non-tiled RT before doing the draw and the left over contents of the RT persist.  This then results in the testing failing.   b)Test not able to clear 0x7F value produced thus failed ', 'Errata issued', '2050-12-30T16:52:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'observed 0x7f7f7f7f, Expected 0x80808080', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CopyTiles from NULL-mapped tile produced nonzero results at buffer tile', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:52:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4916 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4916 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4916, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata for MUX''d endpoints with 1 input and 1 output', 'HCK requirement documentation states that MUX''d endpoints must have &gt;= 1 inputs and 1 output.  The test fails if device has 1 input and 1 output.  ', 'Filter covers failure.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Nodes\\All Nodes Pin I\/O Count', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '\(KSNODETYPE_MUX\) has 1 inputs and 1 outputs', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4899 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'SetDisplayConfig.exe InternalTopology ExternalTopology ExtendedTopology CloneTopology'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('SetDisplayConfig.exe InternalTopology ExternalTopology ExtendedTopology CloneTopology')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4899 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4899, 2, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM CCD Test for Validation of Basic Topology (Single Mon) test failed to clone display across the GPUs', 'Capability is not supported on a specific family of devices. ', 'Failures will be waived for applicable devices. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_DISPLAY'']/InstanceID[contains(.,''PCI\VEN_10DE'')])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_RENDER'']/InstanceID[contains(.,''PCI\VEN_10DE'')])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_OTHER'']/InstanceID[contains(.,''PCI\VEN_10DE'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/HardwareID[(contains(.,''DEV_15F8'') or contains(.,''DEV_15F9'') or contains(.,''DEV_1B38'') or contains(.,''DEV_1BB3'') or contains(.,''DEV_1BB4'') or contains(.,''DEV_13C0'') or contains(.,''DEV_13C1'') or contains(.,''DEV_13C2'') or contains(.,''DEV_13C3'') or contains(.,''DEV_13C4'') or contains(.,''DEV_13C5'') or contains(.,''DEV_13C6'') or contains(.,''DEV_13C7'') or contains(.,''DEV_13C8'') or contains(.,''DEV_13C9'') or contains(.,''DEV_13CA'') or contains(.,''DEV_13CB'') or contains(.,''DEV_13CC'') or contains(.,''DEV_13CD'') or contains(.,''DEV_13CE'') or contains(.,''DEV_13CF'') or contains(.,''DEV_13D0'') or contains(.,''DEV_13D1'') or contains(.,''DEV_13D2'') or contains(.,''DEV_13D3'') or contains(.,''DEV_13D4'') or contains(.,''DEV_13D5'') or contains(.,''DEV_13D6'') or contains(.,''DEV_13D7'') or contains(.,''DEV_13D8'') or contains(.,''DEV_13D9'') or contains(.,''DEV_13DA'') or contains(.,''DEV_13DB'') or contains(.,''DEV_13DC'') or contains(.,''DEV_13DD'') or contains(.,''DEV_13DE'') or contains(.,''DEV_13DF'') or contains(.,''DEV_13E0'') or contains(.,''DEV_13E1'') or contains(.,''DEV_13E2'') or contains(.,''DEV_13E3'') or contains(.,''DEV_13E4'') or contains(.,''DEV_13E5'') or contains(.,''DEV_13E6'') or contains(.,''DEV_13E7'') or contains(.,''DEV_13E8'') or contains(.,''DEV_13E9'') or contains(.,''DEV_13EA'') or contains(.,''DEV_13EB'') or contains(.,''DEV_13EC'') or contains(.,''DEV_13ED'') or contains(.,''DEV_13EE'') or contains(.,''DEV_13EF'') or contains(.,''DEV_13F0'') or contains(.,''DEV_13F1'') or contains(.,''DEV_13F2'') or contains(.,''DEV_13F3'') or contains(.,''DEV_13F4'') or contains(.,''DEV_13F5'') or contains(.,''DEV_13F6'') or contains(.,''DEV_13F7'') or contains(.,''DEV_13F8'') or contains(.,''DEV_13F9'') or contains(.,''DEV_13FA'') or contains(.,''DEV_13FB'') or contains(.,''DEV_13FC'') or contains(.,''DEV_13FD'') or contains(.,''DEV_13FE'') or contains(.,''DEV_13FF'') or contains(.,''DEV_17C0'') or contains(.,''DEV_17C1'') or contains(.,''DEV_17C2'') or contains(.,''DEV_17C3'') or contains(.,''DEV_17C4'') or contains(.,''DEV_17C5'') or contains(.,''DEV_17C6'') or contains(.,''DEV_17C7'') or contains(.,''DEV_17C8'') or contains(.,''DEV_17C9'') or contains(.,''DEV_17CA'') or contains(.,''DEV_17CB'') or contains(.,''DEV_17CC'') or contains(.,''DEV_17CD'') or contains(.,''DEV_17CE'') or contains(.,''DEV_17CF'') or contains(.,''DEV_17D0'') or contains(.,''DEV_17D1'') or contains(.,''DEV_17D2'') or contains(.,''DEV_17D3'') or contains(.,''DEV_17D4'') or contains(.,''DEV_17D5'') or contains(.,''DEV_17D6'') or contains(.,''DEV_17D7'') or contains(.,''DEV_17D8'') or contains(.,''DEV_17D9'') or contains(.,''DEV_17DA'') or contains(.,''DEV_17DB'') or contains(.,''DEV_17DC'') or contains(.,''DEV_17DD'') or contains(.,''DEV_17DE'') or contains(.,''DEV_17DF'') or contains(.,''DEV_17E0'') or contains(.,''DEV_17E1'') or contains(.,''DEV_17E2'') or contains(.,''DEV_17E3'') or contains(.,''DEV_17E4'') or contains(.,''DEV_17E5'') or contains(.,''DEV_17E6'') or contains(.,''DEV_17E7'') or contains(.,''DEV_17E8'') or contains(.,''DEV_17E9'') or contains(.,''DEV_17EA'') or contains(.,''DEV_17EB'') or contains(.,''DEV_17EC'') or contains(.,''DEV_17ED'') or contains(.,''DEV_17EE'') or contains(.,''DEV_17EF'') or contains(.,''DEV_17F0'') or contains(.,''DEV_17F1'') or contains(.,''DEV_17F2'') or contains(.,''DEV_17F3'') or contains(.,''DEV_17F4'') or contains(.,''DEV_17F5'') or contains(.,''DEV_17F6'') or contains(.,''DEV_17F7'') or contains(.,''DEV_17F8'') or contains(.,''DEV_17F9'') or contains(.,''DEV_17FA'') or contains(.,''DEV_17FB'') or contains(.,''DEV_17FC'') or contains(.,''DEV_17FD'') or contains(.,''DEV_17FE'') or contains(.,''DEV_17FF'') or contains(.,''DEV_1400'') or contains(.,''DEV_1401'') or contains(.,''DEV_1402'') or contains(.,''DEV_1403'') or contains(.,''DEV_1404'') or contains(.,''DEV_1405'') or contains(.,''DEV_1406'') or contains(.,''DEV_1407'') or contains(.,''DEV_1408'') or contains(.,''DEV_1409'') or contains(.,''DEV_140A'') or contains(.,''DEV_140B'') or contains(.,''DEV_140C'') or contains(.,''DEV_140D'') or contains(.,''DEV_140E'') or contains(.,''DEV_140F'') or contains(.,''DEV_1410'') or contains(.,''DEV_1411'') or contains(.,''DEV_1412'') or contains(.,''DEV_1413'') or contains(.,''DEV_1414'') or contains(.,''DEV_1415'') or contains(.,''DEV_1416'') or contains(.,''DEV_1417'') or contains(.,''DEV_1418'') or contains(.,''DEV_1419'') or contains(.,''DEV_141A'') or contains(.,''DEV_141B'') or contains(.,''DEV_141C'') or contains(.,''DEV_141D'') or contains(.,''DEV_141E'') or contains(.,''DEV_141F'') or contains(.,''DEV_1420'') or contains(.,''DEV_1421'') or contains(.,''DEV_1422'') or contains(.,''DEV_1423'') or contains(.,''DEV_1424'') or contains(.,''DEV_1425'') or contains(.,''DEV_1426'') or contains(.,''DEV_1427'') or contains(.,''DEV_1428'') or contains(.,''DEV_1429'') or contains(.,''DEV_142A'') or contains(.,''DEV_142B'') or contains(.,''DEV_142C'') or contains(.,''DEV_142D'') or contains(.,''DEV_142E'') or contains(.,''DEV_142F'') or contains(.,''DEV_1430'') or contains(.,''DEV_1431'') or contains(.,''DEV_1432'') or contains(.,''DEV_1433'') or contains(.,''DEV_1434'') or contains(.,''DEV_1435'') or contains(.,''DEV_1436'') or contains(.,''DEV_1437'') or contains(.,''DEV_1438'') or contains(.,''DEV_1439'') or contains(.,''DEV_143A'') or contains(.,''DEV_143B'') or contains(.,''DEV_143C'') or contains(.,''DEV_143D'') or contains(.,''DEV_143E'') or contains(.,''DEV_143F'') or contains(.,''DEV_0FC0'') or contains(.,''DEV_0FC1'') or contains(.,''DEV_0FC2'') or contains(.,''DEV_0FC3'') or contains(.,''DEV_0FC4'') or contains(.,''DEV_0FC5'') or contains(.,''DEV_0FC6'') or contains(.,''DEV_0FC7'') or contains(.,''DEV_0FC8'') or contains(.,''DEV_0FC9'') or contains(.,''DEV_0FCA'') or contains(.,''DEV_0FCB'') or contains(.,''DEV_0FCC'') or contains(.,''DEV_0FCD'') or contains(.,''DEV_0FCE'') or contains(.,''DEV_0FCF'') or contains(.,''DEV_0FD0'') or contains(.,''DEV_0FD1'') or contains(.,''DEV_0FD2'') or contains(.,''DEV_0FD3'') or contains(.,''DEV_0FD4'') or contains(.,''DEV_0FD5'') or contains(.,''DEV_0FD6'') or contains(.,''DEV_0FD7'') or contains(.,''DEV_0FD8'') or contains(.,''DEV_0FD9'') or contains(.,''DEV_0FDA'') or contains(.,''DEV_0FDB'') or contains(.,''DEV_0FDC'') or contains(.,''DEV_0FDD'') or contains(.,''DEV_0FDE'') or contains(.,''DEV_0FDF'') or contains(.,''DEV_0FE0'') or contains(.,''DEV_0FE1'') or contains(.,''DEV_0FE2'') or contains(.,''DEV_0FE3'') or contains(.,''DEV_0FE4'') or contains(.,''DEV_0FE5'') or contains(.,''DEV_0FE6'') or contains(.,''DEV_0FE7'') or contains(.,''DEV_0FE8'') or contains(.,''DEV_0FE9'') or contains(.,''DEV_0FEA'') or contains(.,''DEV_0FEB'') or contains(.,''DEV_0FEC'') or contains(.,''DEV_0FED'') or contains(.,''DEV_0FEE'') or contains(.,''DEV_0FEF'') or contains(.,''DEV_0FF0'') or contains(.,''DEV_0FF1'') or contains(.,''DEV_0FF2'') or contains(.,''DEV_0FF3'') or contains(.,''DEV_0FF4'') or contains(.,''DEV_0FF5'') or contains(.,''DEV_0FF6'') or contains(.,''DEV_0FF7'') or contains(.,''DEV_0FF8'') or contains(.,''DEV_0FF9'') or contains(.,''DEV_0FFA'') or contains(.,''DEV_0FFB'') or contains(.,''DEV_0FFC'') or contains(.,''DEV_0FFD'') or contains(.,''DEV_0FFE'') or contains(.,''DEV_0FFF'') or contains(.,''DEV_1180'') or contains(.,''DEV_1181'') or contains(.,''DEV_1182'') or contains(.,''DEV_1183'') or contains(.,''DEV_1184'') or contains(.,''DEV_1185'') or contains(.,''DEV_1186'') or contains(.,''DEV_1187'') or contains(.,''DEV_1188'') or contains(.,''DEV_1189'') or contains(.,''DEV_118A'') or contains(.,''DEV_118B'') or contains(.,''DEV_118C'') or contains(.,''DEV_118D'') or contains(.,''DEV_118E'') or contains(.,''DEV_118F'') or contains(.,''DEV_1190'') or contains(.,''DEV_1191'') or contains(.,''DEV_1192'') or contains(.,''DEV_1193'') or contains(.,''DEV_1194'') or contains(.,''DEV_1195'') or contains(.,''DEV_1196'') or contains(.,''DEV_1197'') or contains(.,''DEV_1198'') or contains(.,''DEV_1199'') or contains(.,''DEV_119A'') or contains(.,''DEV_119B'') or contains(.,''DEV_119C'') or contains(.,''DEV_119D'') or contains(.,''DEV_119E'') or contains(.,''DEV_119F'') or contains(.,''DEV_11A0'') or contains(.,''DEV_11A1'') or contains(.,''DEV_11A2'') or contains(.,''DEV_11A3'') or contains(.,''DEV_11A4'') or contains(.,''DEV_11A5'') or contains(.,''DEV_11A6'') or contains(.,''DEV_11A7'') or contains(.,''DEV_11A8'') or contains(.,''DEV_11A9'') or contains(.,''DEV_11AA'') or contains(.,''DEV_11AB'') or contains(.,''DEV_11AC'') or contains(.,''DEV_11AD'') or contains(.,''DEV_11AE'') or contains(.,''DEV_11AF'') or contains(.,''DEV_11B0'') or contains(.,''DEV_11B1'') or contains(.,''DEV_11B2'') or contains(.,''DEV_11B3'') or contains(.,''DEV_11B4'') or contains(.,''DEV_11B5'') or contains(.,''DEV_11B6'') or contains(.,''DEV_11B7'') or contains(.,''DEV_11B8'') or contains(.,''DEV_11B9'') or contains(.,''DEV_11BA'') or contains(.,''DEV_11BB'') or contains(.,''DEV_11BC'') or contains(.,''DEV_11BD'') or contains(.,''DEV_11BE'') or contains(.,''DEV_11BF'') or contains(.,''DEV_11C0'') or contains(.,''DEV_11C1'') or contains(.,''DEV_11C2'') or contains(.,''DEV_11C3'') or contains(.,''DEV_11C4'') or contains(.,''DEV_11C5'') or contains(.,''DEV_11C6'') or contains(.,''DEV_11C7'') or contains(.,''DEV_11C8'') or contains(.,''DEV_11C9'') or contains(.,''DEV_11CA'') or contains(.,''DEV_11CB'') or contains(.,''DEV_11CC'') or contains(.,''DEV_11CD'') or contains(.,''DEV_11CE'') or contains(.,''DEV_11CF'') or contains(.,''DEV_11D0'') or contains(.,''DEV_11D1'') or contains(.,''DEV_11D2'') or contains(.,''DEV_11D3'') or contains(.,''DEV_11D4'') or contains(.,''DEV_11D5'') or contains(.,''DEV_11D6'') or contains(.,''DEV_11D7'') or contains(.,''DEV_11D8'') or contains(.,''DEV_11D9'') or contains(.,''DEV_11DA'') or contains(.,''DEV_11DB'') or contains(.,''DEV_11DC'') or contains(.,''DEV_11DD'') or contains(.,''DEV_11DE'') or contains(.,''DEV_11DF'') or contains(.,''DEV_11E0'') or contains(.,''DEV_11E1'') or contains(.,''DEV_11E2'') or contains(.,''DEV_11E3'') or contains(.,''DEV_11E4'') or contains(.,''DEV_11E5'') or contains(.,''DEV_11E6'') or contains(.,''DEV_11E7'') or contains(.,''DEV_11E8'') or contains(.,''DEV_11E9'') or contains(.,''DEV_11EA'') or contains(.,''DEV_11EB'') or contains(.,''DEV_11EC'') or contains(.,''DEV_11ED'') or contains(.,''DEV_11EE'') or contains(.,''DEV_11EF'') or contains(.,''DEV_11F0'') or contains(.,''DEV_11F1'') or contains(.,''DEV_11F2'') or contains(.,''DEV_11F3'') or contains(.,''DEV_11F4'') or contains(.,''DEV_11F5'') or contains(.,''DEV_11F6'') or contains(.,''DEV_11F7'') or contains(.,''DEV_11F8'') or contains(.,''DEV_11F9'') or contains(.,''DEV_11FA'') or contains(.,''DEV_11FB'') or contains(.,''DEV_11FC'') or contains(.,''DEV_11FD'') or contains(.,''DEV_11FE'') or contains(.,''DEV_11FF'') or contains(.,''DEV_1000'') or contains(.,''DEV_1001'') or contains(.,''DEV_1002'') or contains(.,''DEV_1003'') or contains(.,''DEV_1004'') or contains(.,''DEV_1005'') or contains(.,''DEV_1006'') or contains(.,''DEV_1007'') or contains(.,''DEV_1008'') or contains(.,''DEV_1009'') or contains(.,''DEV_100A'') or contains(.,''DEV_100B'') or contains(.,''DEV_100C'') or contains(.,''DEV_100D'') or contains(.,''DEV_100E'') or contains(.,''DEV_100F'') or contains(.,''DEV_1010'') or contains(.,''DEV_1011'') or contains(.,''DEV_1012'') or contains(.,''DEV_1013'') or contains(.,''DEV_1014'') or contains(.,''DEV_1015'') or contains(.,''DEV_1016'') or contains(.,''DEV_1017'') or contains(.,''DEV_1018'') or contains(.,''DEV_1019'') or contains(.,''DEV_101A'') or contains(.,''DEV_101B'') or contains(.,''DEV_101C'') or contains(.,''DEV_101D'') or contains(.,''DEV_101E'') or contains(.,''DEV_101F'') or contains(.,''DEV_1020'') or contains(.,''DEV_1021'') or contains(.,''DEV_1022'') or contains(.,''DEV_1023'') or contains(.,''DEV_1024'') or contains(.,''DEV_1025'') or contains(.,''DEV_1026'') or contains(.,''DEV_1027'') or contains(.,''DEV_1028'') or contains(.,''DEV_1029'') or contains(.,''DEV_102A'') or contains(.,''DEV_102B'') or contains(.,''DEV_102C'') or contains(.,''DEV_102D'') or contains(.,''DEV_102E'') or contains(.,''DEV_102F'') or contains(.,''DEV_1030'') or contains(.,''DEV_1031'') or contains(.,''DEV_1032'') or contains(.,''DEV_1033'') or contains(.,''DEV_1034'') or contains(.,''DEV_1035'') or contains(.,''DEV_1036'') or contains(.,''DEV_1037'') or contains(.,''DEV_1038'') or contains(.,''DEV_1039'') or contains(.,''DEV_103A'') or contains(.,''DEV_103B'') or contains(.,''DEV_103C'') or contains(.,''DEV_103D'') or contains(.,''DEV_103E'') or contains(.,''DEV_103F'') or contains(.,''DEV_1280'') or contains(.,''DEV_1281'') or contains(.,''DEV_1282'') or contains(.,''DEV_1283'') or contains(.,''DEV_1284'') or contains(.,''DEV_1285'') or contains(.,''DEV_1286'') or contains(.,''DEV_1287'') or contains(.,''DEV_1288'') or contains(.,''DEV_1289'') or contains(.,''DEV_128A'') or contains(.,''DEV_128B'') or contains(.,''DEV_128C'') or contains(.,''DEV_128D'') or contains(.,''DEV_128E'') or contains(.,''DEV_128F'') or contains(.,''DEV_1290'') or contains(.,''DEV_1291'') or contains(.,''DEV_1292'') or contains(.,''DEV_1293'') or contains(.,''DEV_1294'') or contains(.,''DEV_1295'') or contains(.,''DEV_1296'') or contains(.,''DEV_1297'') or contains(.,''DEV_1298'') or contains(.,''DEV_1299'') or contains(.,''DEV_129A'') or contains(.,''DEV_129B'') or contains(.,''DEV_129C'') or contains(.,''DEV_129D'') or contains(.,''DEV_129E'') or contains(.,''DEV_129F'') or contains(.,''DEV_12A0'') or contains(.,''DEV_12A1'') or contains(.,''DEV_12A2'') or contains(.,''DEV_12A3'') or contains(.,''DEV_12A4'') or contains(.,''DEV_12A5'') or contains(.,''DEV_12A6'') or contains(.,''DEV_12A7'') or contains(.,''DEV_12A8'') or contains(.,''DEV_12A9'') or contains(.,''DEV_12AA'') or contains(.,''DEV_12AB'') or contains(.,''DEV_12AC'') or contains(.,''DEV_12AD'') or contains(.,''DEV_12AE'') or contains(.,''DEV_12AF'') or contains(.,''DEV_12B0'') or contains(.,''DEV_12B1'') or contains(.,''DEV_12B2'') or contains(.,''DEV_12B3'') or contains(.,''DEV_12B4'') or contains(.,''DEV_12B5'') or contains(.,''DEV_12B6'') or contains(.,''DEV_12B7'') or contains(.,''DEV_12B8'') or contains(.,''DEV_12B9'') or contains(.,''DEV_12BA'') or contains(.,''DEV_12BB'') or contains(.,''DEV_12BC'') or contains(.,''DEV_12BD'') or contains(.,''DEV_12BE'') or contains(.,''DEV_12BF''))])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*SetDisplayConfig', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Root Node.SetDisplayConfig...SetDisplayConfig failed with result. ERROR_GEN_FAILURE. flags. SDC_VALIDATE . SDC_PATH_PERSIST_IF_REQUIRED . SDC_TOPOLOGY_CLONE.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Root Node.SetDisplayConfig...SetDisplayConfig failed with result. ERROR_GEN_FAILURE, flags. SDC_VALIDATE . SDC_PATH_PERSIST_IF_REQUIRED . SDC_TOPOLOGY_EXTEND.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4881 v21.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Cmd.Exe%Teredo_WLK.WSF%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Cmd.Exe%Teredo_WLK.WSF%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4881 AND Version = 21
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4881, 21, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'ERRATA: TransitionTechnologies_Tests fail due a test case or configuration command\script is running on  Windows 7 that it shouldn’t (driver-specific)', 'The TransitionTechnologies_Tests may fail on Windows 7 or Server 2008 R2 due to an issue with the underlying Sparta binaries. The APIs are called in a manner that is not compatible with those OS versinos.', 'The errors will be filtered until the test is updated.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Driver/FileName[(.=''mfewfpk.sys'') or (.=''serreswfp.sys'') or (.=''bxnd60a.sys'') or (.=''epfwwfp.sys'') or (.=''epfwwfpr.sys'') or (.=''jnprns.sys'') or (.=''klwtp.sys'') or (.=''klwfp.sys'') or (.=''klwtpsm.sys'') or (.=''klwtpks.sys'') or (.=''klwtpaa.sys'') or (.=''klwtpee.sys'')  or (.=''vmwvudpd.sys'') or (.=''vnetwfp.sys'')      or (.=''mimeendpdrv.sys'') or starts-with(.,''acsock'') or (.=''idsvia64.sys'') or (.=''klwtpes.sys'') or (.=''klwtpaa.sys'') or (.=''idsvix86.sys'') or(.=''symevnt.sys'') or(.=''symevnt32.sys'') or (.=''klips.sys'') or (.=''klncap.sys'') or (.=''csagent.sys'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows 8 Server x64","Windows Server 2008 x64","Windows Server 2008 x86"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4814 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_WTTRunWorkingDir_\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:_queryTestDeviceID_ /jobs:_TestScript_'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_WTTRunWorkingDir_\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:_queryTestDeviceID_ /jobs:_TestScript_')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4814 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4814, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Virtual network driver fails NDISTest 6.5 - [1 Machine] StandardizedKeywords test due: Hardware Wake on Magic Packet capability status is NotSupported', 'Test [NDISTest 6.5 - [1 Machine] - StandardizedKeywords] may have failures related to Wake on Magic Packet. ', 'Virtual network adapters are not expected to be able to support Wake on Magic Packet.  These failures are waived for such devices. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'CLIENTMACHINE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('CLIENTMACHINE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'CLIENTMACHINE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(CLIENTMACHINE_BLOCK/smbiosManufacturer[contains(.,''VMware'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*RSS', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'NDI\\Params\\\*RSS\\Default is not "1" as expected\!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*WakeOnPattern', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Hardware Wake on Pattern capability status is NotSupported. Expected Supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*WakeOnMagicPacket', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Hardware Wake on Magic Packet capability status is NotSupported. Expected Supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4724 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11clipping.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11clipping.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4724 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4724, 1, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Legacy hardware waiver', 'Failures are acceptable at this time', '2024-12-31T15:45:07')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_5333&'') and (false or contains(.,''DEV_9042'') or contains(.,''DEV_9043'') or contains(.,''DEV_9044'') or contains(.,''DEV_9045'') or contains(.,''DEV_9022'') or contains(.,''DEV_9023'') or contains(.,''DEV_9024'') or contains(.,''DEV_9025''))])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows Server 2008 Release 2 x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Clipping\\Line\\(ZClip|ClipDist)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T15:45:07' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4721 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11clipping.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11clipping.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4721 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4721, 5, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Legacy Hardware Filter', 'Legacy Hardware waiver', 'Failures acceptable at this time', '2025-03-31T15:46:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1106'') or contains(.,''PCI\VEN_1D17'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Clipping\\Line\\(ZClip|ClipDist)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert1_Dist0 = -3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert3_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = -2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = 4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert0_Dist0 = 3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Vert2_Dist0 = -1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=-4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=-2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=-2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=-1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=-1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=-4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=-1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert1_Dist0=-3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert3_Dist0=1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=-4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=4', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=-1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=-1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=-2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=-2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=2', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=-4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=-3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert0_Dist0=3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'Vert2_Dist0=-1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T15:46:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4693 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'nvmeshim.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('nvmeshim.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4693 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4693, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '"NVMe shim tests fail on 3rd party NVMe driver', 'The following test may fail when the NVMe device being tested is using a 3rd party driver on Windows 8.1:

NVMe Device Capabilities Test (LOGO)
NVMe Queue Pause-Resume Test (LOGO)
NVMe Queue Utilization Test (LOGO)
', 'These failures are caused by the test having dependencies on the Microsoft class driver.  These failures are acceptable. 

Please note:  The task "Copy results" may still show as failed.  Since this failure cannot be filtered, please include waiver number 4693 in your submission readme file.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) = 9600])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Driver/FileName[contains(., ''.sys'')]/../isInbox[contains(.,''false'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4692 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'nvmeshim.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('nvmeshim.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4692 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4692, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NVMe Device Capabilities test', 'NVMe Device Capabilities test expects that If MC.MetadataInSeperateBuffer is set, FLBAS.MetadataInExtendedDataLBA must be cleared. This causes an issue in Format NVM command on trying to move from Non-zero MetaData size to Zero MetaData size with Error "enabling metadata to be transferred as part of a separate buffer when there is no metadata supported as part of the format selected"

Note:  Task "Copy Results" may still be failing, causing the overall test result to still fail.  If all failures in task "Run NVMe scenario test" are filtered, then please include errata 4692 in the readme file that goes in the supplemental files folder of your submission. ', 'ECN 009 corrects this issue in NVMe Spec. ', '2025-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["8.100.9600.25984","8.100.9600.27024","8.100.9600.26795","10.0.10240.26624","8.100.9600.26031","10.0.10011.10114","8.100.9431.9627","8.100.9600.26948","8.100.9600.26984","10.1.10586.10586","10.1.14393.14393","8.100.9600.26011","8.100.9600.26699","10.1.10575.10575","10.0.10120.10120","8.100.9600.26846","8.100.9600.26905","8.100.9600.26063","10.1.15063.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*Controller Identify Namespace Data', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'If MC.MetadataInSeperateBuffer is set, FLBAS.MetadataInExtendedDataLBA must be cleared', 'Title', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'If MC.MetadataInSeperateBuffer is set, FLBAS.MetadataInExtendedDataLBA must be cleared', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4688 v12.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGIPresentRate.exe FSSequential FSDiscard [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGIPresentRate.exe FSSequential FSDiscard [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4688 AND Version = 12
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4688, 12, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'GRID vGPU VSync variance test failed: DXGI Presentation Rate Testing', 'WHCK test runs within virtual machine, which does not have a physical GPU present. In the absence of a physical GPU, they can only drive vSync off of a CPU based timer. CPU based timers are not as accurate as a hardware timer on the GPU, as a result the driver sees the 5-10% variance in vSync rates on the VMs running vGPU.  Test failed: DXGI Presentation Rate Testing (filter 3b/3)', 'Expected future fix on the issue.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''VEN_10DE&DEV_15F8'') or contains(.,''VEN_10DE&DEV_15F9'') or contains(.,''VEN_10DE&DEV_1B38'') or contains(.,''VEN_10DE&DEV_1BB3'') or contains(.,''VEN_10DE&DEV_1BB4'') or contains(.,''VEN_10DE&DEV_0FE5'') or contains(.,''VEN_10DE&DEV_0FE6'') or contains(.,''VEN_10DE&DEV_0FE7'') or contains(.,''VEN_10DE&DEV_0FF5'') or contains(.,''VEN_10DE&DEV_0FF6'') or contains(.,''VEN_10DE&DEV_0FF7'') or contains(.,''VEN_10DE&DEV_118B'') or contains(.,''VEN_10DE&DEV_118C'')  or contains(.,''VEN_10DE&DEV_118D'') or contains(.,''VEN_10DE&DEV_11B0'') or contains(.,''VEN_10DE&DEV_11B1'') or contains(.,''VEN_10DE&DEV_13F2'') or contains(.,''VEN_10DE&DEV_13F3'') or contains(.,''VEN_10DE&DEV_1614'') or contains(.,''VEN_10DE&DEV_1613'') or contains(.,''VEN_10DE&DEV_13F8'') or contains(.,''VEN_10DE&DEV_13BD'') or contains(.,''VEN_10DE&DEV_1DB1'') or contains(.,''VEN_10DE&DEV_1DB3'') or contains(.,''VEN_10DE&DEV_1DB4'') or contains(.,''VEN_10DE&DEV_1DB5'') or contains(.,''VEN_10DE&DEV_1DB6'') or contains(.,''VEN_10DE&DEV_1EB8'') or contains(.,''VEN_10DE&DEV_1E30'') or contains(.,''VEN_10DE&DEV_2235'') or contains(.,''VEN_10DE&DEV_2236'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg', 'failed', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg', 'FAILURE:', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4686 v11.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Present2_fullscreen.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Present2_fullscreen.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4686 AND Version = 11
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4686, 11, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'GRID vGPU VSync variance test failed due to VM env:Present Validation 2(FullScreen)', 'WHCK test runs within virtual machine, which does not have a physical GPU present. In the absence of a physical GPU, they can only drive vSync off of a CPU based timer. CPU based timers are not as accurate as a hardware timer on the GPU, as a result the driver sees the 5-10% variance in vSync rates on the VMs running vGPU.  Test failed: Present Validation 2 (FullScreen) ', 'Expected future fix on the issue.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''VEN_10DE&DEV_15F8'') or contains(.,''VEN_10DE&DEV_15F9'') or contains(.,''VEN_10DE&DEV_1B38'') or contains(.,''VEN_10DE&DEV_1BB3'') or contains(.,''VEN_10DE&DEV_1BB4'') or contains(.,''VEN_10DE&DEV_0FE5'') or contains(.,''VEN_10DE&DEV_0FE6'') or contains(.,''VEN_10DE&DEV_0FE7'') or contains(.,''VEN_10DE&DEV_0FF5'') or contains(.,''VEN_10DE&DEV_0FF6'') or contains(.,''VEN_10DE&DEV_0FF7'') or contains(.,''VEN_10DE&DEV_118B'') or contains(.,''VEN_10DE&DEV_118C'') or contains(.,''VEN_10DE&DEV_118D'') or contains(.,''VEN_10DE&DEV_11B0'') or contains(.,''VEN_10DE&DEV_11B1'') or contains(.,''VEN_10DE&DEV_13F2'') or contains(.,''VEN_10DE&DEV_13F3'') or contains(.,''VEN_10DE&DEV_1614'') or contains(.,''VEN_10DE&DEV_1613'') or contains(.,''VEN_10DE&DEV_13F8'') or contains(.,''VEN_10DE&DEV_13BD'') or contains(.,''VEN_10DE&DEV_1DB1'') or contains(.,''VEN_10DE&DEV_1DB3'') or contains(.,''VEN_10DE&DEV_1DB4'') or contains(.,''VEN_10DE&DEV_1DB5'') or contains(.,''VEN_10DE&DEV_1DB6'') or contains(.,''VEN_10DE&DEV_1EB8'') or contains(.,''VEN_10DE&DEV_1E30'') or contains(.,''VEN_10DE&DEV_2235'') or contains(.,''VEN_10DE&DEV_2236'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'Present was faster then the allowed refresh rate interval', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'do not match the device mode''s behavior floags of 0xa0402', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'No spare cycles detected D3DERR_WASSTILLDRAWING was not returned from present', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'Present was slower then the allowed refresh rate interval.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'The driver doesn''t return D3DERR_WASSTILLDRAWING when D3DLOCK_DONOTWAIT is used', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4684 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4684 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4684, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DF - PNP Surprise Remove Device Test (Certification) test fails on Multi-GPU Graphics cards with CM_PROB_FAILED_POST_START', 'The DF - PNP Surprise Remove test fails with CM_PROB_FAILED_POST_START. On a Multi-GPU graphics card, the GPUs need to be started in a specific order. The display stack is not designed to handle Suprise Removing one GPU at a time.', 'This issue described is an acceptable failure. 
', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device[@Index=''1'']/@HardwareID = DISPLAY_BLOCK/Device[@Index=''2'']/@HardwareID)', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceId[contains(.,''PCI\VEN_1002'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', '.*CM_PROB_FAILED_POST_START.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 4659 v10.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'D3DProtection.exe CPAuthChannelAPI%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('D3DProtection.exe CPAuthChannelAPI%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4659 AND Version = 10
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(4659, 10, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D Content Protection - CPAuthChannelAPI fail due to unsupported in virtual environment', 'Full WDDM driver must support The D3DProtection CPAuthChannelAPI tests.  Only WDDM driver for virtual machine GPU doesn''t support OPM and is the cause of the failures. The issue occurs on some NVIDIA GPUs.
', 'This issue is an acceptable failure at this time.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[contains(.,''VEN_10DE&DEV_15F8'') or contains(.,''VEN_10DE&DEV_15F9'') or contains(.,''VEN_10DE&DEV_1B38'') or contains(.,''VEN_10DE&DEV_1BB3'') or contains(.,''VEN_10DE&DEV_1BB4'') or contains(.,''VEN_10DE&DEV_0FE5'') or contains(.,''VEN_10DE&DEV_0FE6'') or contains(.,''VEN_10DE&DEV_0FE7'') or contains(.,''VEN_10DE&DEV_0FF5'') or contains(.,''VEN_10DE&DEV_0FF6'') or contains(.,''VEN_10DE&DEV_0FF7'') or contains(.,''VEN_10DE&DEV_118B'') or contains(.,''VEN_10DE&DEV_118C'') or contains(.,''VEN_10DE&DEV_118D'') or contains(.,''VEN_10DE&DEV_11B0'') or contains(.,''VEN_10DE&DEV_11B1'')or contains(.,''VEN_10DE&DEV_13F2'')or contains(.,''VEN_10DE&DEV_13F3'')or contains(.,''VEN_10DE&DEV_1614'')or contains(.,''VEN_10DE&DEV_1613'')or contains(.,''VEN_10DE&DEV_13BD'') or contains(.,''VEN_10DE&DEV_1DB1'') or contains(.,''VEN_10DE&DEV_1DB3'') or contains(.,''VEN_10DE&DEV_1DB4'') or contains(.,''VEN_10DE&DEV_1DB5'') or contains(.,''VEN_10DE&DEV_1DB6'') or contains(.,"VEN_10DE&DEV_1EB8") or contains(.,''VEN_10DE&DEV_1E30'') or contains(.,''VEN_10DE&DEV_2235'') or contains(.,''VEN_10DE&DEV_2236'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPAuthChannelAPI', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!Msg', 'Create OPM Control : failed \(returned = Unknown \(0xc0262500\) \)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3497 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'groupsize.exe -ValidateMultipleGroupsExist'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('groupsize.exe -ValidateMultipleGroupsExist')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3497 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3497, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'The Multiple Processor group device test may improperly fail', 'The Multiple Processor Group Device Test may improperly fail. The setup instructions are unclear and if followed may cause a loss of network access. This test may fail with the message, ValidateMultipleGroupsExist - Failure: Expected more than one active processor group, but found only one…', 'This issue is an acceptable failure.', '2023-10-10T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows 8 Server x64","Windows v6.3 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=ValidateMultipleGroupsExist - Failure: Expected more than one active processor group, but found only one', 'ValidateMultipleGroupsExist - Failure: Expected more than one active processor group, but found only one', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-10T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3484 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11TiledResources%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11TiledResources%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3484 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3484, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TiledResources doesn''t support packed mips in arrays', 'TiledResources doesn''t support packed mips in arrays.  WGF11TiledResources is attempting to create full mip chains on a tiled resource with arraysize of 3.  This is causing CreateTexture2D to fail.', 'Errata issued', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ResourceTiling', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest', 'ArraySize=3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CreateTexture2D\(\) unexpectedly failed with error code E_INVALIDARG', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3439 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe% checkthermalzones.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe% checkthermalzones.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3439 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3439, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Check Thermal Zones test delayed enforment errata for fan status', '<h3 xmlns="http://www.w3.org/1999/xhtml">Delayed enforcement of fan notification requirement. 
  </h3><p xmlns="http://www.w3.org/1999/xhtml">We have stated to OEM''s that we will not require systems to give us notifications when the fan state changes until 1/10/2023.</p>', 'This filter will delay the enforcement until 1/10/2023.
  ', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*CheckThermalZones::ChecksDuringScreenOn.*', '.*CheckThermalZones::ChecksDuringScreenOn.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*Failed to wait for specified events: WaitForMultipleObjects failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*The Fan state did not change during test execution.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3412 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%scsicompliance.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%scsicompliance.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3412 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3412, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WHCK 2.1 Support for 16 Byte Worldwide Name', 'HP 3PAR uses 16-byte WWN. 
The test doesn''t handle NAA=6h properly. ', 'Errata for HP 3PAR only. 
Fix the test in the next release. ', '2030-06-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'STORAGE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('STORAGE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'STORAGE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/STORAGE_BLOCK/StorageDevices/StorageDevice/FriendlyName["3PARdata"])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":2,"Values":["Device.Storage.Hd.ScsiProtocol"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":2,"Values":["Device.Storage.Hd.ScsiProtocol.SpcCompliance"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=ASSERTION: INQUIRY Checking Identification Descriptors in VPD page 0x83.', 'ASSERTION: INQUIRY Checking Identification Descriptors in VPD page 0x83.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=ASSERTION: INQUIRY Checking Identification Descriptors in VPD page 0x83.', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3388 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3388 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3388, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - WLANWakeTests - SendRecive data in the MagicPacket variations can fail due to acceptable packet latency', 'The SendReceive data test in the MagicPacket variations can fail to receive all the packects due to accecptable latency
', 'This errata will filter this piece of the test.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'NETWORK_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('NETWORK_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'NETWORK_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/NETWORK_BLOCK/NDIS/NetworkAdapter[(./NetDeviceTypeWireless[contains(.,''true'')])])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client ARM","Windows 8 Client x86","Windows 8 Client x64","Windows v6.3 Client x86","Windows v6.3 Client x64"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'EndTest', '/WTT-Logger', '\s*Loading\s*test\s*PM_WoWlanMagicpacket.dll\s*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'EndTest', '/WTT-Logger', '.*jobgroup:WHQL\\WLANWakeTests_OSStack', 'Repro', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', '', 'Verify that simple send and receive works in both directions post-wake', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Send-receive variation failed after adding and removing pattern.*Status=NDIS_STATUS_FAILURE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3350 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%devfund.memorytest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%devfund.memorytest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3350 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3350, 8, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Software driver fails driver memory requirement', 'Software driver fails Driver Memory requirement', 'The fix will be made available in the near future', '2050-12-31T13:44:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/FileName[(.=''excsd.sys'') or (.=''intmsd.sys'') or (.=''vintmsd.sys'') or (.=''tcesd.sys'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows v6.3 Client x86","Windows v6.3 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.WindowsLogoKits.DevFund.MemoryTest.DriverNonPagedPoolUsage', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Driver excsd.sys used .* KB non-paged pool which is larger than non-paged pool requirement .* KB', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Driver excsd.sys failed driver non-paged pool test', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Driver vintmsd.sys used .* KB non-paged pool which is larger than non-paged pool requirement.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Driver tcesd.sys used .* KB non-paged pool which is larger than non-paged pool requirement.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Driver tcesd.sys failed driver non-paged pool test', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'Microsoft.WindowsLogoKits.DevFund.MemoryTest.MDLTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Driver vintmsd.sys used.*MDL memory usage.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Driver intmsd.sys used.*MDL memory usage.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T13:44:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3307 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3307 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3307, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Trim Zero-Range Test Failure', 'Trim Zero-Range Test sends Trims too small so that some enterprise storages may fail the test. ', 'Redesign the test to send down large Trims. ', '2030-07-25T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["Device.Storage.Hd.ReadZeroOnTrimUnmap"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["Device.Storage.Hd.ReadZeroOnTrimUnmap.BasicFunction"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600","10.1.17763","10.1.14393","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=File not trimmed as expected', 'Area not trimmed - contains stale data', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=File not trimmed as expected', 'Area not trimmed as expected - contains invalid data', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-25T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3261 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging devfund.memorytest.dll /name:Microsoft.WindowsLogoKits.DevFund.MemoryTest.*%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging devfund.memorytest.dll /name:Microsoft.WindowsLogoKits.DevFund.MemoryTest.*%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3261 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3261, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'The Driver Memory test may fail for non-paged code and data exceeds the requirement', 'The Driver Memory test may fail for non-paged code and data exceeds the requirement.  The requirement is detailed in Device.DevFund.Memory.DriverFootprint.  ', 'Partners will need to address this issue in their drivers.  For complete details on this requirement please see the requirement ID Device.DevFund.Memory.DriverFootprint.  This issue will be resolved in the future release.  ', '2049-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.WindowsLogoKits.DevFund.MemoryTest.DriverFootprint', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*non-paged code and data which is larger than requirement.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2049-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3229 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3229 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3229, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: Network: NDISTest QosStorageInterop test fails with Throttling failed for Network Traffic', 'The traffic generation tools used by some NDISTest QoS test cases are occasionally unable to generate sufficient traffic to accurately test the traffic throttling abilities of NICs.', 'The errors will be filtered until the test is updated.', '2023-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 Full","Windows Server 2008 Release 2 x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Storage Interop Test\] Fully Prioritize Storage Traffic over Network Traffic', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'QosStorageInteropTest::ValidateResult: ETS Throttling failed for (Network|Storage) Traffic ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Storage Interop Test\] Validating 2:1 Traffic Distribution of Oversubscribed Bandwidth between Network and Storage Traffic Class', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'QosStorageInteropTest::ValidateResult: ETS Throttling failed for (Network|Storage) Traffic ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Storage Interop Test\] Task: Validating Test Environment Performance', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'QosStorageInteropTest::ExerciseTestCases: Minimum Storage Traffic Utilization should be atlest 20.00%', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'QosStorageInteropTest::ExerciseTestCases: Minimum Network Traffic Utilization should be atlest 90.00%', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3165 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_ChaosTest_WLK.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_ChaosTest_WLK.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3165 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3165, 4, 2, 1, 0, 1, 0, 0, @TestCommandLineId, 'DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification) test may fail incorrectly when it fails due to timeout', 'If "DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification)" fails due to timeout, it is sometimes possible that the failure is due to a test or an OS bug. 

See “Test was cancelled because it ran too long” section of the following page for information on how to identify test failures caused by test timeout:
http://msdn.microsoft.com/en-us/library/windows/hardware/dn247432.aspx', 'If "DF - Concurrent Hardware And Operating System (CHAOS) Test (Reliability)" (same test under the "Reliability" category) passes, then manual errata #3165 applies. Please note that the "Reliability" version of the test is configured to have a longer timeout period. Please refer to errata #3165 in a README.txt file with your submission if you have passing results for the "Reliability" version of the test.

In summary, manual errata errata #3165 applies when:
1. "DF - Concurrent Hardware And Operating System (CHAOS) Test (Certification)" fails due to timeout

See “Test was cancelled because it ran too long” section of the following page for information on how to identify test failures caused by test timeout:
http://msdn.microsoft.com/en-us/library/windows/hardware/dn247432.aspx

2. "DF - Concurrent Hardware And Operating System (CHAOS) Test (Reliability)" (same test under the "Reliability" category) passes. Please make sure to submit results for this test.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3098 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3098 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3098, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [2 Machine] - TxFlowControl: Nic does not pass the single PAUSE frame test', 'The "NDIS 6.5: TxFlowControl" test can sometimes exhibit inconsistent failures with one of the following errors: "Nic does not pass the single PAUSE frame test", or "Nic does not pass the two PAUSE frames'' test". The method by which the test attempts to measure the small timing windows induced by PAUSE frames is not sufficiently accurate when testing over 1GbE NICs, which occasionally causes invalid test failures.
', 'This issue described is an acceptable failure and will be fixed in the future.', '2023-10-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["Device.Network.LAN.Base"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Check the paused time of single PAUSE frame.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Nic does not pass the single PAUSE frame test.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Check the paused time of two PAUSE frames.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Nic does not pass the two PAUSE frames'' test.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3071 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'stretchrect.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('stretchrect.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3071 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3071, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'StretchRect test is failing due to full-screen shim in the OS', 'The application of the full-screen shim is not intentional and is being fixed; however, the multisample stretch blt path may still be a QC issue. Once the issue with the full-screen shim is fixed, the blt path will no longer get hit, so the failure in the kit will go away. I am suggesting we errata the current failure and revisit in the future whether we add the blt cases to the kit coverage.', 'The application of the full-screen shim is not intentional and is being fixed; however, the multisample stretch blt path may still be a QC issue. Once the issue with the full-screen shim is fixed, the blt path will no longer get hit, so the failure in the kit will go away. I am suggesting we errata the current failure and revisit in the future whether we add the blt cases to the kit coverage.', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title', 'The reference and test images differ significantly\.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title', 'Source.*MultiSample Type: D3DMULTISAMPLE.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 3005 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11SharedResources.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11SharedResources.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3005 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(3005, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WGF11SharedResources: test leaks devices which leads to device creation errors - part 2 (Failed cases)', 'The test leaks devices in the ShareFromCompBuff\ToDX11 group. This can lead the test to run the system out of memory or hit other device limits, blocking further execution of the test.', 'This issue will be fixed by the RTM version of the HCK.', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '(ShareFromCompBuff\\ToDX11|ShareDX11FL9)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title', '.*SetupTestCase.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title', '.*The application is trying to create a shared handle using a name.*', 'ErrorText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7033 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DX11VideoTest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DX11VideoTest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7033 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7033, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK - "Level9 Large Capture Textures" test bug w/ NV12 Sharing Support 64 and Wow64(32bit)', 'HLK Errata: "Level9 Large Capture Textures" test bug w/ NV12 Sharing Support 64 and Wow64(32bit)', 'To be fixed in a future release of the HLK', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'INPUTFORMAT: NV12.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndMsg:UserText', 'ProcessDeviceCapture: Frame Validation Failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7035 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Present2_fullscreen.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Present2_fullscreen.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7035 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7035, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: Pesent Validation 2 (FullScreen)::PresentDoNotWaitFullscreen fails with present batching', 'In Windows 10 version 1607, there is a D3D9 runtime bug, which return codes for fullscreen presentation of 9Ex applications can be delayed until subsequent presents when the driver supports present batching. This causes the test to receive a D3DDDIERR_WASSTILLDRAWING return code for a present call without the D3DPRESENT_DONOTWAIT flag, which is unexpected. This failure shows up in the Present Validation 2 (FullScreen) job. ', 'The D3D9 runtime bug will be addressed in a future release.', '2030-12-31T14:24:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'Present failed, error code D3DDDIERR_WASSTILLDRAWING \(0x8876021c\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T14:24:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7041 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%tpm20coreprovisioningtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%tpm20coreprovisioningtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7041 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7041, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: TPM Core Provisioning test regression', 'The TPM Core Provisioning test has a regression', 'We will fix this in a future update.', '2030-06-30T17:07:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::VerifyAndTakeOwnership', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::VerifyAndTakeOwnership', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SUCCEEDED.TpmRetrieveEkCertificate... - Value .0x80290401.', 'SUCCEEDED.TpmTakeOwnership.OWNER_AUTH_1.. - Value .0x80284001.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::IsOwnerClearDisabledIsTrueOnDesktop', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::IsOwnerClearDisabledIsTrueOnDesktop', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'On desktop, OwnerClear is expected to be disabled since PPI is required.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::IsReadyInformation', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::IsReadyInformation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=The device lock counter has not been created.', 'TPM Not Ready', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::WindowsAIKTests', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::WindowsAIKTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SUCCEEDED.TpmCheckCreateWindowsAIK.&information.. - Value .0x8028018b.', 'SUCCEEDED.TpmCheckCreateWindowsAIK.&information.. - Value .0x8028018b.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::PublicSRKTests', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::PublicSRKTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SUCCEEDED.TpmGetSrkPublicKeyModulus.&cbSrkPublicKeyModulus, pbSrkPublicKeyModulus.. - Value .0x8028018b.', 'SUCCEEDED.TpmGetSrkPublicKeyModulus.&cbSrkPublicKeyModulus, NULL.. - Value .0x8028018b.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::MiscTests', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::MiscTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=AreEqual.TestKeyAttResult::KeyAttSucceeded, .TestKeyAttResult.keyAttestationCapabilityBits. - Values .0, 1.', 'SUCCEEDED.TpmIsKeyAttestationCapable.&keyAttestationCapabilityBits.. - Value .0x80090030.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'AreEqual.TestKeyAttResult..KeyAttSucceeded. .TestKeyAttResult.keyAttestationCapabilityBits. . Values .0. 5.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::ClearThatFailsOnDesktop', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::ClearThatFailsOnDesktop', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=AreEqual.TRUE. isReady. . Values .1. 0.', 'SUCCEEDED.TpmTakeOwnership.OWNER_AUTH_1.. . Value .0x80284001.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::ResetAuthLockOut', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::ResetAuthLockOut', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.TpmResetAuthLockOut.OWNER_AUTH_1.. . Value .0x80280001.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::OwnerAuthTests', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::OwnerAuthTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=AreNotEqual.0u, authBits. . Values .0. 0.', 'SUCCEEDED.TpmSetDictionaryAttackParameters.OWNER_AUTH_1. 32. 1. 1.. . Value .0x80280921.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::DictionaryAttackParametersTests', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::DictionaryAttackParametersTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SUCCEEDED.TpmSetDictionaryAttackParameters.OWNER_AUTH_1. maxTriesOrig. recoveryTimeOrig. lockoutRecoveryOrig.. . Value .0x80280921.', 'SUCCEEDED.TpmSetDictionaryAttackParameters.OWNER_AUTH_1. maxTriesNew. recoveryTimeNew. lockoutRecoveryNew.. . Value .0x80280921.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:07:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7040 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%tpm20ppitestcs.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%tpm20ppitestcs.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7040 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7040, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: Delayed Enforcement of TPM PPI 1.3 as enforced in TPM 2.0 TCG Physical Presence Interface 1.3 Test', 'There will be a delayed enforcement of TPM PPI 1.3. Validation is done by the TPM 2.0 TCG Physical Presence Interface 1.3 Test.', 'The failure seen in the test is acceptiable at this time. ', '2029-06-30T17:01:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::Tpm20PPITest::Tpm20PPITest::TestPPIVersion', 'WEX::TestExecution::Tpm20PPITest::Tpm20PPITest::TestPPIVersion', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Minimum Physical Presence Interface .PPI. version not met.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'System Version: 1.2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:01:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7042 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%tpm20coreprovisioningtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%tpm20coreprovisioningtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7042 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7042, 4, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK: TPM Core Provisioning Regression test regression - Blocked test cases', 'The TPM Core Provisioning Regression has a regression, this filter is for the blocked cases.', 'We will fix this in a future update.', '2030-06-30T17:06:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::ClearThatFailsOnDesktop', 'WEX::TestExecution::TpmCoreProvisioningTest::TpmCoreProvisioningTest::ClearThatFailsOnDesktop', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:06:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7046 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%d3dconf_12_core.dll /name:D3DConf_12_0_ResourceBarrierDepthStencil::%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%d3dconf_12_core.dll /name:D3DConf_12_0_ResourceBarrierDepthStencil::%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7046 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7046, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: D3D12 - Depth-Read Stencil-Write and D3D12 - Depth-Read Stencil-Read fail', 'The test attempts to create an SRV for the Stencil plane of a Depth/Stencil resource with PlaneIndex 0.  Stencil requires PlaneIndex 1.', 'Test has been fixed for future Windows Release RS2.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS1 OneCore","Windows v10.0 Client x64 RS1 OneCore","Windows v10.0 Client ARM RS1 OneCore","Windows v10.0 Client ARM64 RS1 OneCore","Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Client x86 RS1 OneCoreUAP","Windows v10.0 Client x64 RS1 OneCoreUAP","Windows v10.0 Client ARM RS1 OneCoreUAP","Windows v10.0 Client ARM64 RS1 OneCoreUAP","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS1 Mobile","Windows v10.0 Client ARM RS1 Mobile","Windows v10.0 Client ARM64 RS1 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(Result\) - Value \(0x887a0005\)', 'UserText', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=D3DConf_12_0_ResourceBarrierDepthStencil::TestSetup', 'Setup fixture \''D3DConf_12_0_ResourceBarrierDepthStencil::TestSetup\'' for the scope \''D3DConf_12_0_ResourceBarrierDepthStencil\'' failed\.', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceBarrierDepthStencil::Depth(Write|Read)Stencil(Write|Read)', 'D3DConf_12_0_ResourceBarrierDepthStencil::Depth(Write|Read)Stencil(Write|Read)', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7049 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll%LibTester.LibTesterTBSStress.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll%LibTester.LibTesterTBSStress.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7049 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7049, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK TPM Stress Test incorrectly enforces the response code from the TPM SelfTest', 'The TPM Stress test incorrectly enforces the response code from the TPM SelfTest.', 'Fix the test for the next kit release.', '2030-06-30T17:49:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'TestGetTestResults : TestGetTestResults : Result.Consistency.1;', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'TestGetTestResults failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'WHCK TPM 2.0 Hardware Interface test profile MinTpmAdmin in stress mode failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:49:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7052 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%d3dconf_12_core.dll /name:D3DConf_12_1_AllocationInfo::%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%d3dconf_12_core.dll /name:D3DConf_12_1_AllocationInfo::%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7052 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7052, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3DConf_12_1_AllocationInfo::ConformanceTest Expects KM Allocation for Non-Shader Visible Discriptor Heap', 'The test creates a descriptor heap without the D3D12_DESCRIPTOR_HEAP_FLAG_SHADER_VISIBLE flag.  It later requires that this descriptor heap have a KM allocation which is incorrect given that it is not shader visible.', 'Test has been fixed for future Windows Release RS2.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS1 OneCore","Windows v10.0 Client x64 RS1 OneCore","Windows v10.0 Client ARM RS1 OneCore","Windows v10.0 Client ARM64 RS1 OneCore","Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Client x86 RS1 OneCoreUAP","Windows v10.0 Client x64 RS1 OneCoreUAP","Windows v10.0 Client ARM RS1 OneCoreUAP","Windows v10.0 Client ARM64 RS1 OneCoreUAP","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS1 Mobile","Windows v10.0 Client ARM RS1 Mobile","Windows v10.0 Client ARM64 RS1 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=D3DConf_12_1_AllocationInfo::ConformanceTest', 'IsGreaterThanOrEqual\(AllocationInfo.NumKMAllocations, 1u\): Committed resources and heaps must have at least one associated KM allocation\. - Values \(0, 1\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8058 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGFVidMMWDDM1_2.exe %'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGFVidMMWDDM1_2.exe %')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8058 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8058, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: WGFVidMMWDDM1_2 - OfferReclaim - FL(10.0/9.1) fail in some scenarios ', 'The test fails because the updated HLK 1607 test uses a new OfferReclaimRenamedSurfaceTest::SetupTestCase code path to setup the test. This new code path doesn''t call some of the test resource initialization methods that older versions did. Later when the text executes, the test gets an AV on an uninitialized pointer.', 'This issue described is an acceptable failure. When making a submission with a failed log for this test, refer to 
this issue with the Errata ID number in the Readme.doc file included with your test submission package. ', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Device/Driver/GraphicsDriverInfo/ModelVersion[contains(., ''1.3'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test group had aborts.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Test group had aborts but no failures', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8054 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgfVidMMWDDM1_2.exe [[]MODIFIEDCMDLINE]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgfVidMMWDDM1_2.exe [[]MODIFIEDCMDLINE]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8054 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8054, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Erratum: WGFVidMWGFVidMMWDDM1_2 - UMDLogging - FL10.0 failing', 'The WGFVidMMWDDM1_2 - UMDLogging - FL10.0 is failing condition ', 'This is a known test issue', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'UMDLogging\\UMDLoggingInternalSurface', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'CUMDLoggingInternalSurfaceTest::VerifyResult\(\) - new internal allocation with unexpected semantic is detected', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8066 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%DImageEffectTests::CEffectTests::GoldenImageBlend%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%DImageEffectTests::CEffectTests::GoldenImageBlend%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8066 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8066, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D2D - DImage Effect Tests - Blend fails for HW precision issue', 'The test contains an issue where the hardware precision is not calculated correctly, causing tests on certain hardware to fail.', 'This is a test bug and will be fixed in the next kit release.', '2030-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063","10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*Bitmap comparison failed*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8065 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8065 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8065, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:: Wired LAN NDIS 6.5 VMQPowermanagement test fails SOC-based ssystems due to "Standby not Supported"', 'This is test code issue where the HLK tests think that these are SOC systems and should support power states and these systems dont', 'This is an acceptable failure', '2030-07-01T10:51:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64","Windows v10.0 Server x64 TH1 OneCore","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 OneCore","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full","Windows v10.0 Server x64 RS5 OneCore"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393.14393","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Going to hibernate state and waking up', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Standby in hibernate state did not succeed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T10:51:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8064 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8064 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8064, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Serial Timing test issue', 'Test assumes that, in following sequence of events, TopOfPipeLine timestamp for Draw should be atleast EndOfPipeLine timestamp of earlier clear-RenderTargetView operation i.e. there should not be any overlap in timestamp ranges of ClearRenderTargetView and Draw call.', 'This issue described is an acceptable failure. When making a submission with a failed log for this test, refer to this issue with the Errata ID number in the Readme.doc file included with your test submission package. ', '2030-12-31T13:15:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.16299","10.1.17134","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*IsLessThanOrEqual(PreviousClearEnd, RuntimeEvent.GpuStartTime)*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T13:15:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8063 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%offerreclaim.dll /name:VidMm::OfferReclaim11Decommit::ReclaimFailure%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%offerreclaim.dll /name:VidMm::OfferReclaim11Decommit::ReclaimFailure%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8063 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8063, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM - OfferReclaim11 - Reclaim Failure Test failure', 'This is a known test bug caused because we use a sepcial escape call to force the system to process the offer lists, but do not properly discard surfaces that were resident in VRAM. These surfaces are instead only placed in the segment''s offer lists which are not processed until the allocations are trimmed under memory pressure.', 'This issue described is an acceptable failure. When making a submission with a failed log for this test, refer to this issue with the Errata ID number in the Readme.doc file included with your test submission package. ', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.15063","10.1.14393","10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*DXGI_RECLAIM_RESOURCE_RESULT_DISCARDED.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*DXGI_RECLAIM_RESOURCE_RESULT_NOT_COMMITTED.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8062 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%/name:D3DConf_12_0_DebugLayerScenarios::SimpleInvalidResourceStateCommandListOps%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%/name:D3DConf_12_0_DebugLayerScenarios::SimpleInvalidResourceStateCommandListOps%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8062 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8062, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Simple Resource State for Non Shader Access resources Validation hits app crash', 'WHQL HLK RS1 14343 : D3D12 - Simple Resource State for Non Shader Access resources Validation hits app crash pointing to nvwgf2umx.dll!ddiClearUnorderedAccessViewUint_12_0', 'This issue described is an acceptable failure. When making a submission with a failed log for this test, refer to this issue with the Errata ID number in the Readme.doc file included with your test submission package. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*EXCEPTION_ACCESS_VIOLATION*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*Failed to invoke test operation*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*Failed to destroy*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*test host controller has stopped communicating*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8061 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%/name:D3DConf_12_0_DebugLayerScenarios::SimpleOutOfBoundsHeapIndex%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%/name:D3DConf_12_0_DebugLayerScenarios::SimpleOutOfBoundsHeapIndex%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8061 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8061, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Simple Heap Index Out of Bounds Validation fails', 'D3D12 - Simple Heap Index Out of Bounds Validation fails with error "D3D12_MESSAGE_ID_GPU_BASED_VALIDATION_DESCRIPTOR_HEAP_INDEX_OUT_OF_BOUNDS"', 'This issue described is an acceptable failure. When making a submission with a failed log for this test, refer to this issue with the Errata ID number in the Readme.doc file included with your test submission package. ', '2030-12-31T09:07:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063","10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*D3D12_MESSAGE_ID_GPU_BASED_VALIDATION_DESCRIPTOR_HEAP_INDEX_OUT_OF_BOUNDS*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T09:07:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8059 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% offerreclaim.dll /name:VidMm::OfferReclaim11Decommit::Query'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% offerreclaim.dll /name:VidMm::OfferReclaim11Decommit::Query')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8059 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8059, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NVIDIA: ''WDDM - OfferReclaim11 - Decommit Query Test'' fails with error ''AreEqual(AvailableForDecommit, TOTAL_SIZE_FEW) - Values (125829120, 83886080)''', 'The test fails to compare two values in an SLI configuration.  ', 'This issue described is an acceptable failure. When making a submission with a failed log for this test, refer to this issue with the Errata ID number in the Readme.doc file included with your test submission package. ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*AreEqual(AvailableForDecommit, TOTAL_SIZE_FEW)*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 8055 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% indirectdisplay.hlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% indirectdisplay.hlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8055 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(8055, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Indirect Display Pnp Stop-Start Indirect Display Adapter test failure due to test incorrectly reports that there are no Active Indirect Display paths', 'Filter to cover the timing issue were the test incorrectly reports that there are no active Indirect Display paths', 'This is an acceptable failure', '2023-10-01T13:11:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.14393"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OSG::Sigma::IndirectDisplay::HLKTest::PnpStopStartIDAdapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'No active Indirect Display paths found', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-01T13:11:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 7053 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'registry.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('registry.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7053 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(7053, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Regsitry Validation test fails for WDDM 2.1 drivers due to obsolete check for InstalledDisplayDrivers registry key', 'This test enforced an obsolete requirement around registry keys that can break with WDDM 2.1 drivers that run from the driver store.', 'This will be fixed in a future version of the kit.', '2050-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'DETAILS: ERROR: InstalledDisplayDrivers value not found under primary device registry key, pleas verify the value is correctly installed in the registry', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR: User mode binaries in the UserModeDriverName value should have .dll at the end', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR: User mode binaries in the UserModeDriverNameWow value should have .dll at the end', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Invalid driver version information detected. DETAILS: ERROR: retrieving file version info for:', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 9064 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'presentstats.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('presentstats.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 9064 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(9064, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM PresentStats - Present Statistics Test test failure (too few present calls)', 'There is a test issue where the measuring of present statistics is inconsistent.  ', 'This is a test issue and will be resolved in a future release of the test.', '2050-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*Too many vertical blanks*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*Too few Present calls reported*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*GPU-bound app missed too many frames*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*between GetLastPresentCount and PresentCount*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*should not happen on a D3DPRESENT_INTERVAL_ONE device*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*QPC times on present statistics are not within expected range*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 9065 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 9065 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(9065, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDIS 6.5 OffloadParity test falsely fails VxLAN parity on IPv6 for Wired LAN.', 'NDIS 6.5 OffloadParity test falsely fails VxLAN parity on IPv6 for Wired LAN.', 'This is an acceptable failure.
', '2030-12-31T10:49:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[OffloadParity\] Validating VxLAN::.*::Outer parity support for IPv4 and IPv6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Test_OffloadParity::ValidateParity: Feature VxLAN::.*::Outer does not have parity between IPv4 and IPv6', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OneQueueOneFilterIpv6Encap.*Vxlan:YES.*sending/receiving from the support adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'OneQueueOneFilterIpv6Encap.*Vxlan:YES.*received less than the expected percentage of packets sent \(MAC only\).', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Endtest', 'Validate task offload requirements', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'FAILED: EncapsulatedPacketTaskOffloadVxlan', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[OffloadParity\] Validating GRE::TransmitChecksum::Outer parity support for IPv4 and IPv6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Test_OffloadParity::ValidateParity: Feature GRE::TransmitChecksum::Outer does not have parity between IPv4 and IPv6', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[OffloadParity\] Validating GRE::LSOv2::Outer parity support for IPv4 and IPv6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Test_OffloadParity::ValidateParity: Feature GRE::LSOv2::Outer does not have parity between IPv4 and IPv6', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Endtest', 'Validate task offload requirements', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T10:49:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 9066 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestFrameReaderWithAllSupportedMediaFormats'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestFrameReaderWithAllSupportedMediaFormats')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 9066 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(9066, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Camera Driver System Test - MediaCapture - TestFrameReaderWithAllSupportedMediaFormats : Low Frame Rate Video does not have enough time to produce samples', 'TestFrameReader test originally streamed for a second and failed if the test did not receive a single sample. In certain cases, startup latency combined with a low frame rate (~2 frames / second) could cause a sample to not arrive in this window.', 'Test has been updated so that the sample gathering time is extended for every frame rate lower than 30 frames / second to allow for at least 30 frames to have the opportunity to arrive. Errata issued.', '2050-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=Test failed hr.*0x80004005', 'FrameReader.*Frame recieved count.*0', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10690 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10690 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10690, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, ' OffloadVMMQ test failure due to not supporting HW vRSS', 'DCB checked for vmmq job, indirection table processors number greater than queuenumber', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"EBDRV\L2ND&PCI_168E14E4") or contains(.,"MLX4\CONNECTX-3PRO_ETH") or contains(.,"PCI\VEN_15B3&DEV_1013") or contains(.,"QEBDRV\L2ND&PCI_80701077")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'Test terminated abnormally with an Exception System.FormatException', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'No more test cases will be executed', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'Failed to create VPort123.*NDIS_STATUS_INVALID_PARAMETER', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'Failed to set RSS parameters.*for Default VPort, Error Code 16', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10694 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Present2_fullscreen.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Present2_fullscreen.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10694 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10694, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D9 Present::PresentDoNotWaitFullscreen: Fails to return expected D3DDDERR_WASSTILLDRAWING', 'In Windows 10 version 1607, there is a D3D9 runtime bug where present batching is enabled even in scenarios where the D3DPRESENT_DONOTWAIT flag is expected to work. This causes the test to fail to receieve an expected D3DDDERR_WASSTILLDRAWING return code. This failure shows up in the Present Validation 2 (FullScreen) job. ', 'The D3D9 runtime bug will be addressed in a future release.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'No spare cycles detected D3DERR_WASSTILLDRAWING was not returned from present', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10696 v24.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%hvcihlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%hvcihlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10696 AND Version = 24
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10696, 24, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HyperVisor Code Integrity Readiness Test failed due to CI log file is empty or Unrecognized log format', 'HyperVisor Code Integrity Readiness Test failed due to CI log file is empty or Unrecognized log format', 'This is an acceptable failure for verified drivers.', '2027-01-11T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*iastora.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*iastorb.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*iastors.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*iarnvme.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*symelam.sys*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*No Code Integrity statistics section found for this module.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*disk.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*disk.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*No Code Integrity statistics section found for this module.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*ocnd65.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*''tpsutm.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*''tpsdsm.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*''iastore.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*''iarvmd.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mfeepmpk.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*''iavroc.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*''itecir.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*be2iscsi.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlxcx5.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*ipoib6x.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlxcx4lx.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlx4eth63.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlx4_bus.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlxmux6x.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*levirtualdisplay.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*lsi_sas3.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlnx5.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlnx5hpc.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CI log file is empty.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlx5.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*ltsdsm.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*ltsutm.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*msdsm.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*spsdsm.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlxrshimeth.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlxrshimcom.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*mlxrshimbus.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*fsdriver.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*caregsys.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*caadflt.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Unrecognized log format*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*detected Code Integrity FAILURES.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*HyperVisor Code Integrity Readiness Test failures.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-11T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10697 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% operateinnanoserver.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% operateinnanoserver.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10697 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10697, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Nano Proxy Test - Run ApiScan" test  Fails looking for wrong binaries', 'Nano Proxy Test - Run ApiScan" test  Fails incorrectly looking ofr wrong binaries', 'This is an acceptable failure', '2027-01-10T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.14393.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NanoHLK.HlkNanoTest.RunApiScanAgainstSupportingComponents', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Error: no dll or exe is found', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Errors were encountered', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NanoHLK.HlkNanoTest.RunApiScanAgainstSupportingComponents', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'is not a valid 64 bit PE file', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Errors were encountered', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-10T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10698 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% operateinnanoserver.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% operateinnanoserver.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10698 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10698, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Nano Proxy Test - Verify Same Device fails erroneously due to systems with different driver stacks installed in different order', 'Nano Proxy Test - Verify Same Device fails erroneously due to systems with different driver stacks installed in different order', 'This is an acceptable failure', '2027-01-10T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.14393.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NanoHLK.HlkNanoTest.VerifySimilarDriver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Expected inf to match', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-10T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10700 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10700 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10700, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NVMe Scsi Compliance Test expects the wrong length for NGUID-based serial numbers', 'PAGE LENGTH shall be set to 40 indicating the page length in bytes. PRODUCT SERIAL NUMBER shall be set to a 40 byte value by translating the NGUID field of the Identify Namespace Data Structure.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: INQUIRY Attempting Unit Serial Number Page 0x80', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Unit serial number page length shall be set to either 20 for EUI64 or 36 for NGUID. Actual=40', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10706 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'presentstats.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('presentstats.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10706 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10706, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM PresentStats - Present Statistics Test test failure (failure in Root Node/grafix/fullscreen/latency)', 'There is a runtime bug in the Present Statistics test regarding AllowFlipBatching when creating a device.  ', 'This is a known test issue and will be resolved in a future release of the test.  ', '2050-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Root Node/grafix/fullscreen/latency', 'Root Node/grafix/fullscreen/latency', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10707 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'StorFirmware -test [DiskDeviceObjLink] "[FirmwareImageFile]"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('StorFirmware -test [DiskDeviceObjLink] "[FirmwareImageFile]"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10707 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10707, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Storage firmware update test failures with error code of 0x0', 'The Storage Firmware Update test fails with an error code of 0x0', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Activate the new firmware image using IOCTL_STORAGE_FIRMWARE_ACTIVATE.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Firmware activate IOCTL failed. Error code: 0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10710 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'presentstats.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('presentstats.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10710 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10710, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM PresentStats - Present Statistics Test test failure (failure in Root Node/grafix/fsallpresentintervals/missedframes)', 'There is a runtime bug in the Present Statistics test regarding AllowFlipBatching when creating a device.  ', 'This is a known test issue and will be resolved in a future release of the test.  ', '2050-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Root Node/grafix/fsallpresentintervals/missedframes', 'Root Node/grafix/fsallpresentintervals/missedframes', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10715 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10715 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10715, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:NDISTest6.5-VMQBasicVerification failing due to Look ahead split is NOT configured on queue', 'According to MSDN,  NDIS_RECEIVE_QUEUE_PARAMETERS_LOOKAHEAD_SPLIT_REQUIRED  is deprecated after NDIS 6.30. At the same time, our HCK test code is strict that if the flag is not configured, splitting should not happen.  

When the flag is not set, the splitting into multiple MDL behavior is only acceptable if the splitting complies with MSDN’s packet split boundary.', 'FIlter four failing subtests  of NDISTest 6.5 - [2 Machine] - VMQBasicVerification failing:
• OneQueueOneFilterIpv4GreEncap Encap:YES Vlan:NO
• OneQueueOneFilterIpv6GreEncap Encap:YES Vlan:NO
• OneQueueOneFilterIpv4GreEncap Encap:YES Vlan:YES
• OneQueueOneFilterIpv6GreEncap Encap:YES Vlan:YES
', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'NETWORK_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('NETWORK_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'NETWORK_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/NETWORK_BLOCK/NDIS/NetworkAdapter[./description[contains(.,"Chelsio Network Adapter") or contains(.,"Intel(R) Ethernet Network Adapter") or contains(.,"Intel(R) Ethernet Converged Network Adapter X550-T2") or contains(.,"Intel(R) Ethernet Server Adapter I350-T2") or contains(.,"Intel(R) Ethernet Connection X552 10 GbE SFP+") or contains(.,"Intel(R) Ethernet Connection E823-L") or contains(.,"Intel(R) Ethernet Connection E823-C") or contains(.,"Intel(R) Ethernet 25G 2P E810-XXV-k Mezz")  or contains(.,"Intel(R) Ethernet Adapter E810-XXV-4") or contains(.,"Intel(R) Ethernet Controller E810-C for QSFP")or contains(.,"Intel(R) Ethernet Controller E810-XXV for SFP")]])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest:Title=OneQueueOneFilterIpv(4|6)GreEncap Encap:YES Vlan:(YES|NO): cleaning up.', 'OneQueueOneFilterIpv(4|6)GreEncap Encap:YES Vlan:(YES|NO): cleaning up.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '([0-9]|[1-9][0-9]) total breakpoints were hit in the protocol driver while this test was executing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'OneQueueOneFilterIpv(4|6)Encap GreV1:(YES|NO) GreV2:(YES|NO) Vxlan:(YES|NO) Vlan:(YES|NO): cleaning up.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '([0-9]|[1-9][0-9]) total breakpoints were hit in the protocol driver while this test was executing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OneQueueOneFilterIpv(4|6)Encap GreV1:(YES|NO) GreV2:(YES|NO) Vxlan:(YES|NO) Vlan:(YES|NO): sending/receiving from the support adapter Chelsio Network Adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'OneQueueOneFilterIpv(4|6)Encap GreV1:(YES|NO) GreV2:(YES|NO) Vxlan:(YES|NO) Vlan:(YES|NO): received less than the expected percentage of packets sent \(MAC only\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OneQueueOneFilterIpv(4|6)Encap GreV1:(YES|NO) GreV2:(YES|NO) Vxlan:(YES|NO) Vlan:(YES|NO): sending/receiving from the support adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'OneQueueOneFilterIpv(4|6)Encap GreV1:(YES|NO) GreV2:(YES|NO) Vxlan:(YES|NO) Vlan:(YES|NO): received less than the expected percentage of packets sent \(MAC only\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10716 v14.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10716 AND Version = 14
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10716, 14, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - QosPriorityFlowControl test failure due PFC Measurement Failure', 'NDISTest 6.5 - [2 Machine] - QosPriorityFlowControl test failure due PFC Measurement Failure', 'This is an acceptable failure
', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(., "PCI\VEN_14E4&DEV_16") or contains(., "PCI\VEN_14E4&DEV_175") or contains(., "PCI\VEN_14E4&DEV_d8") or contains(.,''Chelsio Network Adapter'') or contains(., "PCI\VEN_15B3&DEV_1015") or contains(., "PCI\VEN_8086&DEV_159B") or contains(.,"PCI\VEN_15B3&DEV_101D")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","8.100.9600","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Priority Flow Control Test\] Test Priority Flow Control', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'PFC Measurement Failure', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'QosPriorityFlowControlTest::ValidateTestResults: PFC Measurement Failure', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Priority Flow Control Test\] Test Priority Flow Control', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Priority Flow Control Test\]', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'PFC Measurement Failure', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'QosPriorityFlowControlTest::ValidateTestResults: PFC Measurement Failure', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Priority Flow Control Test\]', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Control Measurement Failure', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'QosPriorityFlowControlTest::ValidateTestResults: Control Measurement Failure', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10720 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11TiledResources%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11TiledResources%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10720 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10720, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - 11 on 12 - WGF11 TiledResources E_OUTOFMEMORY failures', 'An RS1 runtime error causes memory allocations above 4GB to fail.  This has been fixed in RS2.', 'This is an acceptable failure.', '2029-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Texture[23]D.LargeAddress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CreateTexture[23]D.. unexpectedly failed with error code E_OUTOFMEMORY .0x8007000e.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10723 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%GoldenImageTurbulence%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%GoldenImageTurbulence%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10723 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10723, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D2D - DImage Effect Tests - Turbulence - texture sampling issue with this test that creates a false fail', 'There is a texture sampling issue where comparisons are miscalculated, thus creating a false fail.  ', 'The failure is confirmed by the graphics team and is scheduled to be fixed for RS2.  ', '2024-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*Bitmap comparison failed*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10727 v12.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10727 AND Version = 12
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10727, 12, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - SRIOVTestingOIDs test fails with "VPORT creation unsuccessful, Error Code NDIS_STATUS_INVALID_PARAMETER', 'We are incorrectly calculating the maximum number of nondefault vports that can be created and assigned to PF when the flag NDIS_NIC_SWITCH_CAPS_SINGLE_VPORT_POOL is not set.', 'This is an acceptable failures', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_8086&DEV_1563") or contains (., "VEN_8086&DEV_15D1") or contains (., "PCI\VEN_14E4&DEV_1614") or contains (., "VEN_8086&DEV_1528") or contains (., "VEN_8086&DEV_10FB") or contains (., "VEN_8086&DEV_10F7") or contains (., "VEN_8086&DEV_1590") or contains (., "VEN_8086&DEV_10F8") or contains (., "VEN_8086&DEV_1889") or contains (.,"VEN_8086&DEV_10A6") or contains (., "VEN_8086&DEV_1593") or contains (., "VEN_8086&DEV_1592") or contains (., "VEN_8086&DEV_1591") or contains (., "VEN_8086&DEV_10F9") or contains (., "VEN_8086&DEV_151C") or contains (., "VEN_8086&DEV_1514") or contains (., "VEN_8086&DEV_15") or contains (., "VEN_8086&DEV_154D") or contains (., "VEN_8086&DEV_1557") or contains (., "VEN_8086&DEV_1558") or contains (., "VEN_8086&DEV_15AA") or contains (., "VEN_8086&DEV_15AB") or contains (., "VEN_8086&DEV_15AC") or contains (., "VEN_8086&DEV_15AD") or contains(., "QEBDRV\L2ND&PCI_16561077") or contains(., "QEBDRV\L2ND&PCI_164414e4") or contains(., "QEBDRV\L2ND&PCI_166614e4") or contains(., "QEBDRV\L2ND&PCI_165614e4") or contains(., "QEBDRV\L2ND&PCI_163314e4") or contains(., "QEBDRV\L2ND&PCI_163714e4") or contains(., "QEBDRV\L2ND&PCI_166414e4") or contains(., "QEBDRV\L2ND&PCI_163014e4") or contains(., "QEBDRV\L2ND&PCI_163114e4") or contains(., "QEBDRV\L2ND&PCI_163214e4") or contains(., "QEBDRV\L2ND&PCI_163414e4") or contains(., "QEBDRV\L2ND&PCI_163514e4")or contains(., "QEBDRV\L2ND&PCI_163614e4") or contains(., "QEBDRV\L2ND&PCI_163814e4") or contains(., "QEBDRV\L2ND&PCI_165c14e4") or contains(., "QEBDRV\L2ND&PCI_165e14e4") or contains(., "QEBDRV\L2ND&PCI_16341077") or contains(., "QEBDRV\L2ND&PCI_16351077") or contains(., "QEBDRV\L2ND&PCI_16361077") or contains(., "QEBDRV\L2ND&PCI_16381077") or contains(., "QEBDRV\L2ND&PCI_16391077") or contains(., "QEBDRV\L2ND&PCI_165c1077") or contains(., "QEBDRV\L2ND&PCI_165e1077") or contains(., "QEBDRV\L2ND&PCI_16331077") or contains(., "QEBDRV\L2ND&PCI_16371077") or contains(., "QEBDRV\L2ND&PCI_16641077") or contains(., "QEBDRV\L2ND&PCI_16661077") or contains(., "QEBDRV\L2ND&PCI_16561077") or contains(., "QEBDRV\L2ND&PCI_16441077") or contains(.,"QEBDRV\L2ND&PCI_80701077") or contains(., "PCI\VEN_14E4&DEV_16D7") or contains(., "PCI\VEN_14E4&DEV_16f0") or contains(., "PCI\VEN_14E4&DEV_16f1") or contains(., "PCI\VEN_14E4&DEV_d802") or contains(., "PCI\VEN_14E4&DEV_d804")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393.14393","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Boundary test of VPORT assignment - Allocate Max VPORTS', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'VPORT creation unsuccessful, Error Code NDIS_STATUS_INVALID_PARAMETER', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Change Queue Num for Non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to change number of Queues Pairs on Non-Default VPort to 16', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10728 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%verifyrunfromstoreandmatchingversions.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%verifyrunfromstoreandmatchingversions.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10728 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10728, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Verify run from driver store support and file versioning (Graphics Drivers)', 'There is a discrepancy between what is documented on MSDN and how the test enforces driver version requirements.', 'This is a confirmed test issue and will be fixed with the next version of the test.  ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', '.*Checking that file version and product version match*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10730 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10730 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10730, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [2 Machine] - QosPnpPower - Break instruction exception - code 80000003 (first chance)', 'NDISTest 6.5 - [2 Machine] - QosPnpPower failed due to 10G or greater NIC does not support certain power state', 'This is an acceptable failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'NETWORK_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('NETWORK_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'NETWORK_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//NDIS/NetworkAdapter/Is10GbOrGreater[. = "true"])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Performing Sleep State Transition. Sleep State PowerStateS4, Autoresume in 10000ms', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Transistion to hibernate did not succeed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Verifying Power Management Support', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Test Machine must support at least one sleep state.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Performing Adapter Reset', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Test terminated abnormally with an Exception NDISTest.NDISTestCore.TestServices.NDISOperationException', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10732 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%sriovtest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%sriovtest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10732 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10732, 9, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - SRIOVTestingOIDs test fails with "VPORT creation unsuccessful, Error Code NDIS_STATUS_INVALID_PARAMETER', 'We are incorrectly calculating the maximum number of nondefault vports that can be created and assigned to PF when the flag NDIS_NIC_SWITCH_CAPS_SINGLE_VPORT_POOL is not set.', 'This is an acceptable failures', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_8086&DEV_1563") or contains (., "VEN_8086&DEV_15D1") or contains (., "VEN_8086&DEV_1528") or contains (., "VEN_8086&DEV_10FB") or contains (., "VEN_8086&DEV_10F7") or contains (., "VEN_8086&DEV_10F8") or contains (., "VEN_8086&DEV_10F9") or contains (., "VEN_8086&DEV_151C") or contains (., "VEN_8086&DEV_1514") or contains (., "VEN_8086&DEV_154D") or contains (., "VEN_8086&DEV_1557") or contains (., "VEN_8086&DEV_1558") or contains (., "VEN_8086&DEV_15AA") or contains (., "VEN_8086&DEV_15AB") or contains (., "VEN_8086&DEV_15AC") or contains (., "VEN_8086&DEV_15AD") or contains(., "QEBDRV\L2ND&PCI_16561077") or contains(., "QEBDRV\L2ND&PCI_164414e4") or contains(., "QEBDRV\L2ND&PCI_166614e4") or contains(., "QEBDRV\L2ND&PCI_165614e4") or contains(., "QEBDRV\L2ND&PCI_163314e4") or contains(., "QEBDRV\L2ND&PCI_163714e4") or contains(., "QEBDRV\L2ND&PCI_166414e4") or contains(., "QEBDRV\L2ND&PCI_163014e4") or contains(., "QEBDRV\L2ND&PCI_163114e4") or contains(., "QEBDRV\L2ND&PCI_163214e4") or contains(., "QEBDRV\L2ND&PCI_163414e4") or contains(., "QEBDRV\L2ND&PCI_163514e4")or contains(., "QEBDRV\L2ND&PCI_163614e4") or contains(., "QEBDRV\L2ND&PCI_163814e4") or contains(., "QEBDRV\L2ND&PCI_165c14e4") or contains(., "QEBDRV\L2ND&PCI_165e14e4") or contains(., "QEBDRV\L2ND&PCI_16341077") or contains(., "QEBDRV\L2ND&PCI_16351077") or contains(., "QEBDRV\L2ND&PCI_16361077") or contains(., "QEBDRV\L2ND&PCI_16381077") or contains(., "QEBDRV\L2ND&PCI_16391077") or contains(., "QEBDRV\L2ND&PCI_165c1077") or contains(., "QEBDRV\L2ND&PCI_165e1077") or contains(., "QEBDRV\L2ND&PCI_16331077") or contains(., "QEBDRV\L2ND&PCI_16371077") or contains(., "QEBDRV\L2ND&PCI_16641077") or contains(., "QEBDRV\L2ND&PCI_16661077") or contains(., "QEBDRV\L2ND&PCI_16561077") or contains(., "QEBDRV\L2ND&PCI_16441077") or contains(., "VEN_14E4&DEV_16D7")
])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.14393.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10733 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%name:EvictionTest::MoveTest'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%name:EvictionTest::MoveTest')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10733 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10733, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MoveTest: issues with test warranted removal from playlist, but was never removed', 'There is a test failure caused by the test incorrectly allocating a 2D texture prior to validating the feature.', 'The test issue is confirmed by Microsoft and will be fixed in a future release of the test.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '/Error', 'Error 0x00000000', 'ErrorText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10735 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TE.exe /enablewttlogging /appendwttlogging operateinnanoserver.dll /name:NanoHLK.HlkNanoTest.VerifySimilarDriver%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TE.exe /enablewttlogging /appendwttlogging operateinnanoserver.dll /name:NanoHLK.HlkNanoTest.VerifySimilarDriver%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10735 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10735, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Manual Errata Nano Proxy Test - VerifySameDevice fails to account for multi-port devices', 'Errata Nano Proxy Test - VerifySameDevice fails to account for multi-port devices', 'This is an acceptable failure', '2027-01-10T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.14393.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NanoHLK.HlkNanoTest.VerifySimilarDriver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Expected dates to match', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-10T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10737 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PresentEx%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PresentEx%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10737 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10737, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: D3D9 Overlay - PresentEx - fails, test issu', 'D3D9 Overlay test is failing in HLK. Needs more time for investigation', 'Issuing errata to unblock IHVs', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) > 9600])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test group had aborts.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*Test group had aborts but no failures*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10738 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%NdkLogoTests%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%NdkLogoTests%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10738 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10738, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDK Logo Tests is failing port reservation tests ', 'NDK Logo Tests is failing port reservation tests ', 'This is an acceptable failure for approved hardware', '2030-07-01T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"MLX4\CONNECTX-3PRO_ETH") or contains(.,"PCI\VEN_15B3&DEV_1013") or contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_15B3&DEV_101D")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 OneCore","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', '.*Verify NDK destination port is reserved when NDK is enabled for IPv.* address', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'NdkLogoVerifyPortReservation: Rdma port 4791 not reserved.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10739 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%NdkLogo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%NdkLogo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10739 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10739, 6, 1, 1, 0, 1, 1, 0, @TestCommandLineId, 'NDK Logo Tests is failing port reservation tests ', 'NDK Logo Tests is failing port reservation tests ', 'This is an acceptable failure for approved hardware', '2030-07-01T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"MLX4\CONNECTX-3PRO_ETH") or contains(.,"PCI\VEN_15B3&DEV_1013") or contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_15B3&DEV_101D")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 OneCore","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10740 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% libtester_wlk.dll /name:LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% libtester_wlk.dll /name:LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10740 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10740, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NVSpace LibTester Test interprets spec wrong [TPM]', 'LibTester NVSpace test case erroneously fails TPMs which allow for 1 max size object in their NV Space', 'FIx should be available in RS2.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminRawNVWrite', 'LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminRawNVWrite', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminRawNVWrite', 'TPM Manufacturer ID: STM', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*was returned for command NvDefineSpace.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'TestRawNVWrite failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'WHCK TPM 2.0 Hardware Interface test WHCKTpmTbsAdminRawNVWrite failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminNvDefineSpace', 'LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminNvDefineSpace', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminNvDefineSpace', 'TPM Manufacturer ID: NTC', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*Error Size was expected but command NvDefineSpace succeeded*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'TestNvDefineSpace failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'WHCK TPM 2.0 Hardware Interface test WHCKTpmTbsAdminNvDefineSpace failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10741 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest%client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest%client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10741 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10741, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Multiple SRIOV tests failing to create VSwitch for NDIS 6.3 driver ', 'Multiple SRIOV tests failing to create VSwitch for NDIS 6.3 driver', 'This is an acceptable failure for approved hardware', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_1521") or contains(.,"PCI\VEN_8086&DEV_1522") or contains(.,"PCI\VEN_8086&DEV_1523") or contains(.,"PCI\VEN_8086&DEV_1524") or contains(.,"PCI\VEN_8086&DEV_1533") or contains(.,"PCI\VEN_8086&DEV_1536") or contains(.,"PCI\VEN_8086&DEV_1537") or contains(.,"PCI\VEN_8086&DEV_1538") or contains(.,"PCI\VEN_8086&DEV_157B") or contains(.,"PCI\VEN_8086&DEV_157C") or contains(.,"PCI\VEN_8086&DEV_1539")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.14393.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', '.*Error Code NDIS_STATUS_NOT_SUPPORTED.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Unknwon exception handling cleanup and restore previous VMQ state', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Unknown exception was caught: Failed to create Nic switch', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Test terminated abnormally with an Exception System.Exception', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10743 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%sriovtest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%sriovtest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10743 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10743, 5, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'Multiple SRIOV tests failing to create VSwitch for NDIS 6.3 driver', 'Multiple SRIOV tests failing to create VSwitch for NDIS 6.3 driver', 'This is an acceptable failure for approved hardware', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_1521") or contains(.,"PCI\VEN_8086&DEV_1522") or contains(.,"PCI\VEN_8086&DEV_1523") or contains(.,"PCI\VEN_8086&DEV_1524") or contains(.,"PCI\VEN_8086&DEV_1533") or contains(.,"PCI\VEN_8086&DEV_1536") or contains(.,"PCI\VEN_8086&DEV_1537") or contains(.,"PCI\VEN_8086&DEV_1538") or contains(.,"PCI\VEN_8086&DEV_157B") or contains(.,"PCI\VEN_8086&DEV_157C") or contains(.,"PCI\VEN_8086&DEV_1539")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.14393.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10746 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund%.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund%.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10746 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10746, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: DF - *: Disk Data Plugin reporting MPIO/SCSI Disk doesnt have volume', 'DF tests not able to see disk volumes on Windows Server 2016/2019/2022 builds', 'The disk data plug-in for WDTF does not recognize that there is a volume on the NetApp MPIO SCSI disks', '2031-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGETS              :          Device not configured properly for basic testing', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGETS              :          WDTF2.Action.SimpleIOStressEx.1 SetTarget() ERROR : Device not configured properly for basic testing', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGETS              :          WDTF.ConcurrentIO.1 SetTarget\(\) ERROR : CWDTFConcurrentIOImpl::SetTarget\(\) EDT filter is not installed on target device', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'WDTF_TARGETS              :          WDTF2.Action.SimpleIOStressProc.1 SetTarget\(\) ERROR : Device not configured properly for basic testing', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGETS              :          WDTF2.Action.SimpleIOStressEx.1 SetTarget\(\) ERROR : Device not configured properly for basic testing', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGET               :          Device not configured properly for basic testing: The Disk has no volume attached to it', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_SIMPLE_IO .*:*Device not configured properly for basic testing:.*The Disk has no volume attached to it HRESULT=0x80040200.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGETS[\s]+:[\s]+Error getting field data.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGETS[\s]+:[\s]+WDTF2.Action.SimpleIOStressProc.1 SetTarget\(\) ERROR[\s]+:[\s]+Error getting field data.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGETS[\s]+:[\s]+WDTF2.Action.SimpleIOStressEx.1 SetTarget\(\) ERROR[\s]+:[\s]+Error getting field data.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TARGET[\s]+:[\s]+Error getting field data.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10747 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%infverifhlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%infverifhlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10747 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10747, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: Device Driver INF Verfication Test - auto triage to help debug test', 'You may see this error message for one of the following three reasons:

1. Your INF file incorrectly lists Microsoft as the Provider in the VERSION section
2. Windows OS installed on the test system is not fully signed. 
3. You are hitting a known timing bug in HLK

Please see the issue resolution section.', 'Resolutions for each of the three reasons why you could be seeing this error:

1. Your INF file incorrectly lists Microsoft as the Provider in the VERSION section

Resolution: Do not list Microsoft as the Provider if Microsoft is not the provider of the INF file. Specify your organization''s name instead.

2. Windows OS installed on the test system is not fully signed.
Resolution: Run the test on a system with a fully signed (officially released) version of Windows installed.

3. You are hitting a known test bug in HCK 
Resolution: Follow the following steps in order:
a) Reboot the test system
b) Create a new HLK project
c) Select your test device and run the test again
d) Repeat a) to c) a few times if the failure continues to repro
e) If you continue to see the same failure after d), refer to manual errata 10747 in a README.txt file with your submission to have the failure overturned manually during submission review ', '2050-07-01T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'InfVerif::RunInfVerif', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Provider cannot be.*Microsoft.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-07-01T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10752 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TE.exe /enablewttlogging /appendwttlogging tpmperformancetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TE.exe /enablewttlogging /appendwttlogging tpmperformancetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10752 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10752, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Delayed Enforcement for TPM Performance Tests on Server', 'Per request by the Assurance AQ Team (who have been pushing TPM 2.0 requirement on server) we are delaying enforcement of some of the performance requirements for server SKU in order to allow a legacy part to be used for new certification temporarily.', 'Temporary errata. This is SERVER ONLY.  This filter MAY NOT be applied to Client systems under any circumstances due to performance considerations vis a vis different use cases.', '2027-01-12T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmPerformanceTest::RSASignTest', 'WEX::TestExecution::TpmPerformanceTest::RSASignTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'RSA Sign Test Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Average Time Per Iteration.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmPerformanceTest::RSADecryptPKCSTest', 'WEX::TestExecution::TpmPerformanceTest::RSADecryptPKCSTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'RSA Decrypt Test Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Average Time Per Iteration.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmPerformanceTest::HMACCreateTest', 'WEX::TestExecution::TpmPerformanceTest::HMACCreateTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'HMAC Create Test Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Average Time Per Iteration.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmPerformanceTest::HMACOperationTest', 'WEX::TestExecution::TpmPerformanceTest::HMACOperationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'HMAC Operation Test Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Average Time Per Iteration.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmPerformanceTest::ECCNIST256KeyGenerationTest', 'WEX::TestExecution::TpmPerformanceTest::ECCNIST256KeyGenerationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ECC NIST 256 Key Generation Test Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Average Time Per Iteration.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::TpmPerformanceTest::ECCProtectedImportTest', 'WEX::TestExecution::TpmPerformanceTest::ECCProtectedImportTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ECC Protected Import Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Average Time Per Iteration.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-12T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10760 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TDRWatch.exe [TDRArgs] [TDR_GUID]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TDRWatch.exe [TDRArgs] [TDR_GUID]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10760 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10760, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'CRASH - Display Stress 4-hour WDDM Profile (64bit) (32bit) test failed with TDR on Windows 7', 'TDR during running the test.', 'Issue is under investigation', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x64","Windows 7 Client x86"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '47FCB092-20AE-42E9-B961-1FB344462108', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TDRWatch_Count', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'F48B13B9-A08C-4B84-9146-9C0FFEC1C04E', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TDRWatch_Count', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10762 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva_hevc.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva_hevc.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10762 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10762, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HEVCQualityTest255, 256, 257, 258 test fails ', 'This was due to a known issue with the test in HLK 14393', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest257', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 257 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(257\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest256', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 256 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(256\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest258', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 258 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(258\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest255', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 255 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(255\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10769 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'PnPStop.exe UpdateDriver'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('PnPStop.exe UpdateDriver')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10769 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10769, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WDDM PnPStop Test - Update and Rollback test failure due to a File Copy "pop up" window', 'The way the test invokes the driver update results in incorrectly referencing the source path when trying to reinstall the driver from the driver store. This leads to a popup which blocks the test. This issue impacts drivers whose files are in a different directory from the INF in the original driver package', 'This issue has been fixed in RS2.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*CPnPControlDevice..CallClassInstaller . GetLastError returned . 0x4C7 .The operation was canceled by the user.\W', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10774 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Flags%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Flags%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10774 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10774, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Composite Device ID does not meet expected format in "Disable Flags"', 'Composite Device ID does not meet expected format in "Disable Flags"', 'This is an acceptable failure.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1."]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'DisableFlags', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'Error: Terminating: USB\\VID_\w{4}&PID_\w{4}&MI_\w{2}\\.*did not meet expected format', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'RevertFlags', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Error: Terminating: Could not find file.*RegHistory.xml', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'RebootIfFlagsRequired', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Error: Terminating: Could not find file.*RegHistory.xml', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10780 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%SCRIPT_NAME%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%SCRIPT_NAME%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10780 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10780, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: TDR2 - Multiple TDR Graphics Lockout and Recovery Tests failed due to not enough loop times', 'TDR2 - Multiple TDR Graphics Lockout and Recovery Tests failed due to not enough loop times', 'This issue is an acceptable failure.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE&DEV_1200") or contains(.,"VEN_10DE&DEV_1081") or contains(.,"VEN_10DE&DEV_0E22") or contains(.,"VEN_10DE&DEV_1241") or contains(.,"VEN_10DE&DEV_1086") or contains(.,"VEN_10DE&DEV_1088")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'CPreemptionTest::Run - Expected to loop more than .* times.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10783 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%sysfund_%_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%sysfund_%_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10783 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10783, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK - System Dev fund test showing up in device testing', 'The jobs System – PNP (disable and enable) with IO Before and After (Reliability) System – Sleep with IO Before and After (Reliability SysFund) are attributed to both System and Device requirements, but the device requirements are not applicable here.', 'The errata will filter out the 2 System test result which are not required for Device Disk certification. Thus the partner will be able to submit their package according all other required tests are passed. Additionally its acceptable to not run these tests but it will make the submission go in to manual review.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"MPIO") or contains (., "DISK")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":2,"Values":["Device.Storage."]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10785 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging servercorecheck.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging servercorecheck.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10785 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10785, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Operate in Server Core Test failure with DismGetFeatureInfo failed with error code: -2146498548', 'Server Core has known issues for some products that uses functionality not in its version', 'This is an acceptable failure', '2026-08-02T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ServerCoreCheck::ServerCoreCheck::ServerCoreCheckWithDismAPI', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'DismGetFeatureInfo failed with error code:', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-08-02T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10790 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% operateinnanoserver.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% operateinnanoserver.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10790 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10790, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Nano Proxy Test - Verify Same Device fails erroneously when two pnp devices share the first part of the DeviceId', 'Nano Proxy Test - Verify Same Device fails erroneously when two pnp devices share the first part of the DeviceId', 'This is an acceptable failure', '2027-01-10T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''QEBDRV\L2ND&PCI_16301077'') or contains(.,''QEBDRV\L2ND&PCI_16311077'') or contains(.,''QEBDRV\L2ND&PCI_16321077'') or contains(.,''QEBDRV\L2ND&PCI_16341077'') or contains(.,''QEBDRV\L2ND&PCI_16351077'')   or contains(.,''QEBDRV\L2ND&PCI_16361077'')   or contains(.,''QEBDRV\L2ND&PCI_16381077'')   or contains(.,''QEBDRV\L2ND&PCI_16391077'')   or contains(.,''QEBDRV\L2ND&PCI_165c1077'')   or contains(.,''QEBDRV\L2ND&PCI_165e1077'')   or contains(.,''QEBDRV\L2ND&PCI_16331077'')   or contains(.,''QEBDRV\L2ND&PCI_16371077'')   or contains(.,''QEBDRV\L2ND&PCI_16641077'')   or contains(.,''QEBDRV\L2ND&PCI_16661077'')   or contains(.,''QEBDRV\L2ND&PCI_16561077'')   or contains(.,''QEBDRV\L2ND&PCI_16441077'')  or contains(.,''PCI\VEN_1077&DEV_2422'') or contains(.,''PCI\VEN_1077&DEV_2432'') or contains(.,''PCI\VEN_1077&DEV_2533'') or contains(.,''PCI\VEN_1077&DEV_2532'') or contains(.,''PCI\VEN_1077&DEV_2031'') or contains(.,''PCI\VEN_1077&DEV_F001'') or contains(.,''PCI\VEN_1077&DEV_2261'') or contains(.,''PCI\VEN_1077&DEV_2071'') or contains(.,''PCI\VEN_1077&DEV_2171'') or contains(.,''PCI\VEN_1077&DEV_2271'') or contains(.,''PCI\VEN_1077&DEV_2371'') or contains(.,''PCI\VEN_1077&DEV_2261'') or contains(.,''PCI\VEN_1077&DEV_2533'') or contains(.,''PCI\VEN_1000&DEV_0087'') or contains(.,''PCI\VEN_1000&DEV_0070'') ])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NanoHLK.HlkNanoTest.VerifySimilarDriver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Expected dates to match', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-10T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10794 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspostst.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspostst.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10794 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10794, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: KS Position Test failed because failed to load kspostst.dll', 'KS Position Test failed because failed to load kspostst.dll', 'This is an acceptable failure.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063","10.1.16299","10.1.17134","10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', '.*Failed to load.*kspostst.dll.*BuildResourceList failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'No test cases were executed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', '.*Failed to load.*kspostst.dll.*BuildResourceList failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 10796 v20.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10796 AND Version = 20
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(10796, 20, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:: Wired LAN NDIS 6.5 VMQPowermanagement test fails on NICs that are higher than 10Gb', 'Our power management requirement only applies to 1Gb NIC or below.', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[
contains(.,"PCI\VEN_15B3&DEV_1013") or contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_15B3&DEV_1017") or 
contains(.,"MLX4\CONNECTX-3PRO_ETH") or 
contains(.,"PCI\VEN_14E4&DEV_16C0") or 
contains(.,"PCI\VEN_14E4&DEV_16C8") or 
contains(.,"PCI\VEN_14E4&DEV_16C9") or 
contains(.,"PCI\VEN_14E4&DEV_16CA") or 
contains(.,"PCI\VEN_14E4&DEV_16CC") or 
contains(.,"PCI\VEN_14E4&DEV_16CE") or 
contains(.,"PCI\VEN_14E4&DEV_16CF") or 
contains(.,"PCI\VEN_14E4&DEV_16D0") or 
contains(.,"PCI\VEN_14E4&DEV_16D1") or 
contains(.,"PCI\VEN_14E4&DEV_16D2") or 
contains(.,"PCI\VEN_14E4&DEV_16D4") or 
contains(.,"PCI\VEN_14E4&DEV_16D5") or 
contains(.,"PCI\VEN_14E4&DEV_16D6") or 
contains(.,"PCI\VEN_14E4&DEV_16D7") or 
contains(.,"PCI\VEN_14E4&DEV_16D8") or 
contains(.,"PCI\VEN_14E4&DEV_16D9") or 
contains(.,"PCI\VEN_14E4&DEV_16DE") or 
contains(.,"PCI\VEN_14E4&DEV_16DF") or 
contains(.,"PCI\VEN_14E4&DEV_16E0") or 
contains(.,"PCI\VEN_14E4&DEV_16E2") or 
contains(.,"PCI\VEN_14E4&DEV_16E3") or 
contains(.,"PCI\VEN_14E4&DEV_16E4") or 
contains(.,"PCI\VEN_14E4&DEV_16E7") or 
contains(.,"PCI\VEN_14E4&DEV_16E8") or 
contains(.,"PCI\VEN_14E4&DEV_16E9") or 
contains(.,"PCI\VEN_14E4&DEV_16EA") or 
contains(.,"PCI\VEN_14E4&DEV_16EB") or 
contains(.,"PCI\VEN_14E4&DEV_16EC") or 
contains(.,"PCI\VEN_14E4&DEV_16ED") or 
contains(.,"PCI\VEN_14E4&DEV_16EE") or 
contains(.,"PCI\VEN_14E4&DEV_16EF") or 
contains(.,"PCI\VEN_14E4&DEV_16") or  
contains(.,"PCI\VEN_8086&DEV_1521") or  
contains(.,"PCI\VEN_8086&DEV_1522") or  
contains(.,"PCI\VEN_8086&DEV_1523") or  
contains(.,"PCI\VEN_8086&DEV_1524") or  
contains(.,"PCI\VEN_8086&DEV_1533") or  
contains(.,"PCI\VEN_8086&DEV_1536") or  
contains(.,"PCI\VEN_8086&DEV_1537") or  
contains(.,"PCI\VEN_8086&DEV_1538") or  
contains(.,"PCI\VEN_8086&DEV_157B") or  
contains(.,"PCI\VEN_8086&DEV_157C") or  
contains(.,"PCI\VEN_8086&DEV_1539") or  
contains(.,"PCI\VEN_8086&DEV_10A6") or  
contains(.,"PCI\VEN_8086&DEV_1572") or  
contains(.,"PCI\VEN_8086&DEV_1580") or  
contains(.,"PCI\VEN_8086&DEV_1581") or  
contains(.,"PCI\VEN_8086&DEV_1583") or  
contains(.,"PCI\VEN_8086&DEV_1584") or  
contains(.,"PCI\VEN_8086&DEV_1585") or  
contains(.,"PCI\VEN_8086&DEV_1586") or  
contains(.,"PCI\VEN_8086&DEV_15FF") or  
contains(.,"PCI\VEN_8086&DEV_104E") or  
contains(.,"PCI\VEN_8086&DEV_104F") or  
contains(.,"PCI\VEN_8086&DEV_101F") or  
contains(.,"PCI\VEN_8086&DEV_1589") or  
contains(.,"PCI\VEN_8086&DEV_158A") or  
contains(.,"PCI\VEN_8086&DEV_158B") or  
contains(.,"PCI\VEN_8086&DEV_10A6") or  
contains(.,"PCI\VEN_8086&DEV_15C2") or  
contains(.,"PCI\VEN_8086&DEV_15C3") or  
contains(.,"PCI\VEN_8086&DEV_15C4") or  
contains(.,"PCI\VEN_8086&DEV_15CE") or  
contains(.,"PCI\VEN_8086&DEV_15C8") or  
contains(.,"PCI\VEN_8086&DEV_15E4") or  
contains(.,"PCI\VEN_8086&DEV_15E5") or  
contains(.,"VEN_19A2&DEV_0710") or 
contains(.,"VEN_10DF&DEV_0720") or 
contains(.,"PCI\VEN_14E4&DEV_d8") or contains(.,"EBDRV\L2ND&PCI_168E14E4") or contains(.,"qebdrv\l2nd") or contains(.,''PCI\VEN_8086&DEV_1F41'') or contains(.,''PCI\VEN_8086&DEV_1F40'') or contains(.,''PCI\VEN_8086&DEV_1F41'') or contains(.,''PCI\VEN_8086&DEV_1F45'') or contains(.,''PCI\VEN_8086&DEV_1572'') or contains(.,''PCI\VEN_8086&DEV_1563'') or contains(.,''PCI\VEN_8086&DEV_37D0'') or contains(.,''PCI\VEN_8086&DEV_15AC'') or contains(.,''PCI\VEN_8086&DEV_124C'') or contains(.,''PCI\VEN_8086&DEV_124D'') or contains(.,''PCI\VEN_8086&DEV_124E'') or contains(.,''PCI\VEN_8086&DEV_124F'') or contains(.,''PCI\VEN_8086&DEV_151D'') or contains(.,''PCI\VEN_8086&DEV_188A'') or contains(.,''PCI\VEN_8086&DEV_188B'') or contains(.,''PCI\VEN_8086&DEV_188C'') or contains(.,''PCI\VEN_8086&DEV_188D'') or contains(.,''PCI\VEN_8086&DEV_188E'') or contains(.,''PCI\VEN_15B3&DEV_101D'')])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Going to hibernate state and waking up', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Standby in hibernate state did not succeed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Running the send/recv test after waking up from hibernate state', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'received less than the expected percentage of packets sent', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Running the send/recv test after waking up from sleep state', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'received less than the expected percentage of packets sent', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Transitioning to hibernate state', 'Transitioning to hibernate state', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test terminated abnormally with an Exception System.Exception', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Transitioning to standby state', 'Transitioning to standby state', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Standby did not succeed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Transitioning to standby state', 'Gathering test device information', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Adapter .Intel.R. Ethernet Converged Network Adapter X550-T2. is not bound to either.both of TCPIP v4 or v6', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18026 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGFVidMMWDDM1_2.exe %'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGFVidMMWDDM1_2.exe %')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18026 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18026, 5, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK: WGFVidMMWDDM1_2 - OfferReclaim - FL(10.0/9.1) returns blocked cases in some scenarios ', 'The test fails because the updated HLK 1607 test uses a new OfferReclaimRenamedSurfaceTest::SetupTestCase code path to setup the test. This new code path doesn''t call some of the test resource initialization methods that older versions did. Later when the text executes, the test gets an AV on an uninitialized pointer.', 'This issue described is an acceptable failure. When making a submission with a failed log for this test, refer to this issue with the Errata ID number in the Readme.doc file included with your test submission package. ', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Device/Driver/GraphicsDriverInfo/ModelVersion[contains(., ''1.3'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*OfferReclaim\\OfferReclaimRenamedSurface*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'EndTest', 'EndTest:Result', '.*Blocked*', 'Result', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18028 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DX11VideoTest.exe [[]MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DX11VideoTest.exe [[]MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18028 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18028, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: DXGI DirectFlip can fail with error "ProcessFrames Failed " inspite DirectFlip was being used', 'The DXGI DirectFlip test can fail with error "ProcessFrames Failed " inspite of DirectFlip being used.', 'This issue is an acceptable failure at this time.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 18800])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Result=Fail', 'ValidatePresentData: Frame Validation Failed....', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Result=Fail', 'ExecuteTestCase: ProcessFrames Failed', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18045 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%HAPTest.dll%Certification%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%HAPTest.dll%Certification%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18045 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18045, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HW Offload test fails with error SNR is too low', 'The raw test was using loopback capture in timer-driven mode with the minimum buffer size. This had a good chance of failing due to the loopback capture missing a buffer resulting in a glitch. The glitch added enough noise that the SNR failed by a large margin.', 'Apply this erratum.  The test will be fixed in the next iteration of the kit.  Increasing the capture buffer size to 100ms with timer-driven mode eliminates these glitches', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS1 OneCoreUAP","Windows v10.0 Client x64 RS1 OneCoreUAP","Windows v10.0 Client ARM RS1 OneCoreUAP","Windows v10.0 Client ARM64 RS1 OneCoreUAP","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS1 Mobile","Windows v10.0 Client ARM RS1 Mobile","Windows v10.0 Client ARM64 RS1 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::Mix*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal / magNoise\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::MixOffloadDifferentFormat*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal / magNoise\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::Raw*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal / magNoise\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18161 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11filter.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11filter.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18161 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18161, 8, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - 11 on 12 - WGF11 Filter failure ', 'Hardware Limitation', 'Fixed in next generation of hardware', '2026-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002&'') and (contains(.,''DEV_67C4'') or contains(.,''DEV_699F'') or contains(.,''DEV_6981'') or contains(.,''DEV_6987'') or contains(.,''DEV_6980'') or contains(.,''DEV_6985'') or contains(.,''DEV_6986'') or contains(.,''DEV_6995'') or contains(.,''DEV_6997'') or contains(.,''099F'') or contains(.,''6790'')  or contains(.,''6792'')  or contains(.,''6798'')  or contains(.,''6799'')  or contains(.,''679A'')  or contains(.,''679B'')  or contains(.,''679E'')  or contains(.,''6806'')  or contains(.,''6808'')  or contains(.,''6809'')   or contains(.,''6810'')  or contains(.,''6811'')  or contains(.,''6818'')  or contains(.,''6819'')  or contains(.,''6828'')  or contains(.,''6835'')  or contains(.,''6837'')  or contains(.,''6838'') or contains(.,''6839'')  or contains(.,''683B'')  or contains(.,''683D'')  or contains(.,''683F'')  or contains(.,''6800'')  or contains(.,''6801'')  or contains(.,''6820'')  or contains(.,''6821'')   or contains(.,''6822'')  or contains(.,''6823'')  or contains(.,''6824'')  or contains(.,''6825'')  or contains(.,''6826'')  or contains(.,''6827'')  or contains(.,''682A'')  or contains(.,''682B'') or contains(.,''682C'')  or contains(.,''682D'')  or contains(.,''682F'')  or contains(.,''6830'')  or contains(.,''6831'')  or contains(.,''684C'')  or contains(.,''6780'')  or contains(.,''6784'')   or contains(.,''6788'')  or contains(.,''678A'')  or contains(.,''1305'')  or contains(.,''1306'')  or contains(.,''1307'')  or contains(.,''1309'')  or contains(.,''130A'')  or contains(.,''130C'') or contains(.,''130D'')  or contains(.,''130E'')  or contains(.,''130F'')  or contains(.,''1310'')  or contains(.,''1311'')  or contains(.,''1313'')  or contains(.,''1315'')  or contains(.,''1318'')   or contains(.,''131C'')  or contains(.,''131D'')  or contains(.,''130B'')  or contains(.,''1312'')  or contains(.,''1316'')  or contains(.,''1317'')  or contains(.,''131B'')  or contains(.,''9830'') or contains(.,''9831'')  or contains(.,''9832'')  or contains(.,''9833'')  or contains(.,''9834'')  or contains(.,''9835'')  or contains(.,''9836'')  or contains(.,''9837'')  or contains(.,''9838'')   or contains(.,''9839'')  or contains(.,''983D'')  or contains(.,''9850'')  or contains(.,''9851'')  or contains(.,''9852'')  or contains(.,''9853'')  or contains(.,''9854'')  or contains(.,''9855'') or contains(.,''9856'')  or contains(.,''9857'')  or contains(.,''9858'')  or contains(.,''9859'')  or contains(.,''985A'')  or contains(.,''985B'')  or contains(.,''985C'')  or contains(.,''985D'')   or contains(.,''985E'')  or contains(.,''985F'')  or contains(.,''9920'')  or contains(.,''9922'')  or contains(.,''9923'')  or contains(.,''9924'')  or contains(.,''6610'')  or contains(.,''6611'') or contains(.,''6613'')  or contains(.,''6617'')  or contains(.,''6631'')  or contains(.,''6650'')  or contains(.,''6651'')  or contains(.,''6658'')  or contains(.,''665C'')  or contains(.,''665D'')   or contains(.,''665F'')  or contains(.,''6600'')  or contains(.,''6601'')  or contains(.,''6602'')  or contains(.,''6603'')  or contains(.,''6606'')  or contains(.,''6607'')  or contains(.,''6620'') or contains(.,''6621'')  or contains(.,''6623'')  or contains(.,''6604'')  or contains(.,''6605'')  or contains(.,''6646'')  or contains(.,''6647'')  or contains(.,''6640'')  or contains(.,''6641'')   or contains(.,''6660'')  or contains(.,''6663'')  or contains(.,''6664'')  or contains(.,''6665'')  or contains(.,''6667'')  or contains(.,''666F'')  or contains(.,''6608'')  or contains(.,''6649'') or contains(.,''7300'')  or contains(.,''9874'')  or contains(.,''98C0'')  or contains(.,''98CD'')  or contains(.,''98E4'')  or contains(.,''67A2'')  or contains(.,''67B0'')  or contains(.,''67B1'')   or contains(.,''67B8'')  or contains(.,''67B9'')  or contains(.,''67BA'')  or contains(.,''67BE'')  or contains(.,''6930'')  or contains(.,''6938'')  or contains(.,''6939'')  or contains(.,''6900'') or contains(.,''6901'')  or contains(.,''6902'')  or contains(.,''6903'')  or contains(.,''6907'')  or contains(.,''6920'')  or contains(.,''6921'')  or contains(.,''67A0'')  or contains(.,''67A1'')   or contains(.,''6929'')  or contains(.,''692B'')  or contains(.,''692F'')  or contains(.,''67DF'')  or contains(.,''67EF'')  or contains(.,''67FF'')  or contains(.,''67C0'')  or contains(.,''67C1'') or contains(.,''67C2'')  or contains(.,''67C4'')  or contains(.,''67C7'')  or contains(.,''67E0'')  or contains(.,''67E3'') or contains(.,''67E8'')  or contains(.,''67EB'') or contains(.,''6FDF'') or contains(.,''694C'')  or contains(.,''694E''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Filter.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:EndTest', 'Format=R24_UNORM_X8.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:EndTest', 'Tex_Address_[0|1|2]=BORDER', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:EndTest', 'Border_Color=[INF|1\.25|0\.75|\-0\.5|\-0\.75|\-1|\-1\.25|\-INF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'TestParameter', 'EndTest:EndTest', 'Border_Color_Alpha=[INF|1\.25|0\.75|\-0\.5|\-0\.75|\-1|\-1\.25|\-INF]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18184 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18184 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18184, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Failing the NDISTest 6.5 - [2 Machine] - SelectiveSuspend on Windows 10 x86 and Windows 10 x64', 'This is due to an OS bug', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x86 RS1 OneCore","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86","Windows v10.0 Server x64 RS3 Full","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x64 RS1 OneCore","Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x64 RS4 OneCore","Windows v10.0 Client ARM RS4 OneCore","Windows v10.0 Server x64 RS4 OneCore"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[USB Selective Suspend Test\] Task: Initializing Miniport Adapters', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SelectiveSuspend::InitializeAdapters: Failed to disable adapter bindings on', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[USB Selective Suspend Test\] Task: Uninitializing Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SelectiveSuspend::UnInitializeAdapters: Failed to enable adapter bindings on', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[USB Selective Suspend Test\] Wakeup Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SelectiveSuspend::SSWakeupTest: Failed to enter suspended state', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18187 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18187 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18187, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wave Test: Test does not create a render pin along with loopback, causing fialure', 'Wavetest is requesting loopback stream without render stream opened ', 'Wave test will be updated in the future update', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86","Windows v10.0 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WaveTest::TAEF_Capture_ResetPin#CaptureDefaultStereoFormat#0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WaveTest::TAEF_Capture_ResetPin#CaptureDefaultStereoFormat#1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', 'WaveTest::TAEF_Capture_ResetPin#CaptureDefaultStereoFormat#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', 'WaveTest::TAEF_Capture_ResetPin#CaptureDefaultStereoFormat#3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', 'WaveTest::TAEF_Capture_PinStateChanges#CaptureDefaultStereoFormat#0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', 'WaveTest::TAEF_Capture_PinStateChanges#CaptureDefaultStereoFormat#1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', 'WaveTest::TAEF_Capture_PinStateChanges#CaptureDefaultStereoFormat#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'StartTest', 'WaveTest::TAEF_Capture_PinStateChanges#CaptureDefaultStereoFormat#3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL: Position did not move*', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18289 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11filter.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11filter.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18289 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18289, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK WGF11 Tiled Resource Min/Max failures', 'Tiled Resource MIN/MAX filtering may fail in some cases (HCK Specific)', 'Failures waived at this time. ', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["8.100.9600.27024"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_MAG_LINEAR_MIP_POINT', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_POINT_MAG_LINEAR_MIP_POINT', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_MAG_MIP_LINEAR', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_MIN_LINEAR_MAG_MIP_POINT', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '(MINIMUM|MAXIMUM)_ANISOTROPIC', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18291 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% sysfund_sleep_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% sysfund_sleep_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18291 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18291, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:System - PNP (disable and enable) with IO Before and After (Reliability): Camera Plugin fails due to race condition on ReadSample', 'OS has Race Condition during StartPreview that can cause a lock which prevents ReadSample for succeeding. StopPreview cannot complete until the first sample is delivered and timesout.', 'Errata Issued, OS to be fixed either in Servicing or RS2', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763","10.1.19041","10.1.18363","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*WebcamPlugin. CPlayer.*Win32.258', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18338 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'detectvp%-t'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('detectvp%-t')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18338 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18338, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: DetectVP fails on virtual systems submitted for SVVP', 'Verify processor virtualization support test needs to run on a physical without the presence of virtualization. The test will fail when run in a VM or on the host where hypervisor is already running.', 'Pass the test when running inside a VM if the intent is to test for SVVP. ', '2028-10-01T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["System.Server.Virtualization"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["System.Server.Virtualization.ProcessorVirtualizationAssist"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'DetectVp: Hypervisor is running.+|DetectVp: SVM not supported+|DetectVp: VMX not supported+', 'UserText', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-10-01T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18355 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11mapdefault.exe [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11mapdefault.exe [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18355 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18355, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK ERRATA: Failing the WGF11 Map Default Performance/WoW64 due to: The default buffer scenario was greater than 10 percent longer.', 'The runtime may perform deferred destruction cleanup during the test. This can interfere with the timing sections, and lead to random failures. This issue will be addressed in a future version of the test."
', 'The error will be filtered until the test is updated.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Zero_Copy', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!', 'Default score exceeded staging score by: ([0-2][1-9]|[1-9]%)?', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'The default buffer scenario was greater than 10 percent longer than the staging scenario', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18356 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgfVidMMWDDM1_2.exe [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgfVidMMWDDM1_2.exe [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18356 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18356, 3, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK: Sharing of vertex buffers is not supported by D3D FL9', 'Test is locking shared vertex buffers which results in failure. Sharing of vertex buffers is not supported by D3D FL9.', 'Errata will be applied to failures', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'TestParameter', '', 'ResourceType=WGFVIDMM_BUFFER', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'TestParameter', '', 'Shared=true', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '!EndTest:Result=^((?!Pass).)*$', '.*Failed to map staging resource, hr = 0x887A0005.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18357 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgfVidMMWDDM1_2.exe [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgfVidMMWDDM1_2.exe [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18357 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18357, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: Sharing of vertex buffers is not supported by D3D FL9 - Failed', 'Test is locking shared vertex buffers which results in failure. Sharing of vertex buffers is not supported by D3D FL9.', 'Errata will be applied to failures', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'TestParameter', '', 'ResourceType=WGFVIDMM_BUFFER', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'TestParameter', '', 'Shared=true', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '!EndTest:Result=^((?!Pass).)*$', '.*Failed to map staging resource, hr = 0x887A0005.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18388 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hvcihlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hvcihlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18388 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18388, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: HVCI Failure due to unloaded driver', 'HLK: HVCI Failure due to unloaded driver', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Driver/FileName[contains(.,"klelaml.sys") or contains (., "klelam.sys") or contains(.,"ucmcxucsinvppc.sys") or contains(.,"mfeelamk.sys") or contains(.,"GDElam.sys") or contains(.,"elamdrv.sys") or contains(.,"fidelis_elam.sys") or contains(.,"wdmcompanionfilter.sys") or contains(.,"epelam.sys") or contains(.,"fortielam.sys")]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HvciHlkTest::HvciTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'No Code Integrity statistics section found for this module', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18478 v10.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% npctest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% npctest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18478 AND Version = 10
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18478, 10, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Clock Interrupt Timer Test', 'Test failure is an acceptable failure in RS1', 'Test failure is an acceptable failure in RS1', '2030-12-12T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])

', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NpcTest::NpcTests::ClockIntTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Previous results in this log marked with', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to complete testing due to repeated interference from another component.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to complete testing due to repeated failures.*Please investigate.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-12T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18709 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogo.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogo.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18709 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18709, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Secure Boot Logo Test fail with KB3206632', 'The test case in question is attempting to verify that UEFI variables with attributes BS (not RunTime) are not visible/modifiable from within the OS.  It assumes that “CurrentPolicy” variable will be NV+BS.  The recent Windows Update to patch “Golden Key” changed the attribute of “CurrentPolicy” from NV+BS to NV+BS+RT+AT.  The WU change to a RunTime attribute breaks the assumptions made by this test case. ', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Tests.VerifyBootServicesVariableBehavior', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'attempting to call GetVariable\(\) on an existing variable with attributes "NV,BS" should fail', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18827 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11Async.exe '
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11Async.exe ')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18827 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18827, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WGF11Async failing for Windows 10 HLK RS1', 'WGF11Async test fails in Windows 10 RS1', 'This is a known failure in RS1, fixed in RS2', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Endtest', 'Query', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 18998 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18998 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(18998, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Simple Descriptor Type Mismatch Validation - D3D12_MESSAGE_ID_GPU_BASED_VALIDATION_DESCRIPTOR_TYPE_MISMATCH', 'D3DConf_12_0_DebugLayerScenarios::SimpleDescriptorTypeMismatch test fails due to bug in test.
', 'Fixed in RS2', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios::SimpleDescriptorTypeMismatch', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'D3D12_MESSAGE_ID_GPU_BASED_VALIDATION_DESCRIPTOR_TYPE_MISMATCH', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios::SimpleDescriptorTypeMismatch', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(pDevice->GetDeviceRemovedReason\(\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19114 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PNPTryStopDeviceAndFailRestart%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PNPTryStopDeviceAndFailRestart%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19114 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19114, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Airplane mode button with LED feature failed DF - PNP Rebalance Fail Restart Device Test (Reliability) because radio manager has an open handle ', 'Aireplane mode button with LED feature failed DF - PNP Rebalance Fail Restart Device Test (Reliability) because radio manager has an open handle ', 'This issue described is an acceptable failure. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"LGEX0815") or contains(.,"ATK4001") or contains(.,"PNPC000") or contains(.,"FNBT0000")])
')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'PNP.RestartDevice\(\) Win32=1 - Incorrect function.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19213 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%sysfund%with_io_beforeandafter%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%sysfund%with_io_beforeandafter%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19213 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19213, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: System PNP (Disable/Enable) with IO and Sleep with IO failed when both USB Camera and MIPI Camera on the system', 'HLK Errata: System PNP (Disable/Enable) with IO and Sleep with IO failed when both USB Camera and MIPI Camera on the system', 'This issue described is an acceptable failure. The filter is driver specific.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.19041","10.1.17763","10.1.18363","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0C45&PID_651A.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED.*Win32.*258', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0C45&PID_651A.*MF_CAPTURE_ENGINE_INITIALIZED.*Win32.*258', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0C45&PID_6A05.*MF_CAPTURE_ENGINE_INITIALIZED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0C45&PID_6A05.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0BDA&PID_5769.*MF_CAPTURE_ENGINE_INITIALIZED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0BDA&PID_5769.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_1BCF&PID_28C0.*MF_CAPTURE_ENGINE_INITIALIZED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_1BCF&PID_28C0.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0BDA&PID_5689.*MF_CAPTURE_ENGINE_INITIALIZED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0BDA&PID_5689.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_1BCF&PID_2C00.*MF_CAPTURE_ENGINE_INITIALIZED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_1BCF&PID_2C00.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_174F&PID_118F.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_04F2&PID_B6D6.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Msg', 'DISPLAY\\INT3480\\4&75C1224.*MF_CAPTURE_ENGINE_PREVIEW_STOPPED', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19214 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:D3DConf_12_0_DebugLayerScenarios%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:D3DConf_12_0_DebugLayerScenarios%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19214 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19214, 2, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'D3D12-Binding Initialized,Resource State Validation,Simple Resource,etc. failing on CreateRootSignature', 'D3D12-Binding Initialized,Resource State Validation,Simple Resource,etc. failing on CreateRootSignature', 'D3D12-Several Tests failing on HLK 14393 is expected', '2050-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,"PCI\VEN_10DE&") and (false or contains(.,"DEV_06C0") or contains(.,"DEV_0DC5") or contains(.,"DEV_0DC6") or contains(.,"DEV_0DE1") or contains(.,"DEV_0DE2") or contains(.,"DEV_0DE4") or contains(.,"DEV_0DE5") or contains(.,"DEV_0E24") or contains(.,"DEV_0F01") or contains(.,"DEV_1040") or contains(.,"DEV_1049") or contains(.,"DEV_104A") or contains(.,"DEV_104B") or contains(.,"DEV_107D") or contains(.,"DEV_1087") or contains(.,"DEV_1089") or contains(.,"DEV_124B") or contains(.,"DEV_06C4") or contains(.,"DEV_06CD") or contains(.,"DEV_06D8") or contains(.,"DEV_06DD") or contains(.,"DEV_0DC4") or contains(.,"DEV_0DD8") or contains(.,"DEV_0DE0") or contains(.,"DEV_0DEB") or contains(.,"DEV_0DF4") or contains(.,"DEV_0DF7") or contains(.,"DEV_0DFF") or contains(.,"DEV_0E22") or contains(.,"DEV_0E23") or contains(.,"DEV_1042") or contains(.,"DEV_1050") or contains(.,"DEV_1080") or contains(.,"DEV_1081") or contains(.,"DEV_1082") or contains(.,"DEV_1084") or contains(.,"DEV_1086") or contains(.,"DEV_1088") or contains(.,"DEV_109A") or contains(.,"DEV_1200") or contains(.,"DEV_1201") or contains(.,"DEV_1203") or contains(.,"DEV_1205") or contains(.,"DEV_1206") or contains(.,"DEV_121F") or contains(.,"DEV_1240") or contains(.,"DEV_1241") or contains(.,"DEV_1243") or contains(.,"DEV_1244") or contains(.,"DEV_1245"))])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios::', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(E_FAIL\) - Value', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios::', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(pDevice->CreateRootSignature\( 1, g_VSMain, sizeof\(g_VSMain\), IID_PPV_ARGS\(ppGfxRootSig\)\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios::', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Endtest', 'AreEqual\(1, NumTypedDebugMessageProduced\(pDevice, D3D12_MESSAGE_ID_GPU_BASED_VALIDATION_INCOMPATIBLE_RESOURCE_STATE, false\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios::', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(pDevice->CreateGraphicsPipelineState\(&PState, IID_PPV_ARGS\(&pGfxPS\)\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19229 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'diskio.exe /d "_WDKDeviceID_" /b _BlockSize_ /t _TestDuration_ /c _Scenarios_ _Settings_'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('diskio.exe /d "_WDKDeviceID_" /b _BlockSize_ /t _TestDuration_ /c _Scenarios_ _Settings_')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19229 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19229, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Disk Stress (LOGO) fails if there is no active volume on a disk device', 'The test [Disk Stress (LOGO)] may fail when run against storage devices on a VLUN.', 'These failures are acceptable. ', '2025-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//StorageDevice/DeviceID[starts-with(.,''MPIO\DISK&VEN_HUASY&PROD_S5500T'') or starts-with(., ''MPIO\DISK&VEN_HUAWEI&PROD_XSG1'') or starts-with(., ''MPIO\DISK&VEN_DGC&PROD_RAID_5'') or starts-with(., ''MPIO\DISK&VEN_EMC&PROD_SYMMETRIX'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Generating test cases', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error in testcase "Generating test cases".', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19241 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'MinimumDisplaySpec.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('MinimumDisplaySpec.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19241 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19241, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK "Display Mode Filter Check" failing in Kit version 14393', 'HLK "Display Mode Filter Check" failing in Kit version 14393', 'HLK "Display Mode Filter Check" fixed in RS2 Kit', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'TestCase: 00000001', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'No 32bpp BIOS mode found with at least the minimum required resolution of 1024 x 768', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19252 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmck.exe certify'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmck.exe certify')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19252 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19252, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Smart Card Minidriver Certification Test:  taget minidriver size large than max size 4MB', 'Smart Card Minidriver Certification Test:  taget minidriver size large than max size 4MB', 'This is an accepatable failure', '2025-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''ATHENA_ASEDRIVE'') or contains(.,''CID_556E69706572436172645631'') or contains(.,''IDENTIV_UTRUST'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'size (\d+) Bytes exceeds maximum allowed size 4194304 Bytes', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19283 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%D3DConf_12_0_DebugLayerScenarios%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%D3DConf_12_0_DebugLayerScenarios%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19283 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19283, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D DebugLayerScenarios fail with RS1 KB3200970', 'HLK Errata: D3D DebugLayerScenarios fail with RS1 KB3200970', 'This is an acceptable when KB3200970 is installed.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//PackageInfoList/PackageName[number(substring(., 20, 7)) >= 3200970])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'D3DConf_12_0_DebugLayerScenarios', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'SUCCEEDED\(E_FAIL\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'D3DConf_12_0_DebugLayerScenarios', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'AreEqual\(0, NumDebugMessagesProduced\(pDevice\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19529 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19529 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19529, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 tests that will not function with AMDs mGPU solution and tests will fail with access violation error ', 'D3D11On12 has a bug in RS1 where it sometimes creates resources on node 0, when everything else is located on node N-1.', 'The fix is already checked in for RS2, but an errata is necessary for RS1.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/GraphicsInfo/RenderInfo/D3D12NodeCount[.>1]) ', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002'')])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartDXGLog', 'EndDXGLog', '.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', 'Using 11on12.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndDXGLog', '.*', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', '.*ACCESS VIOLATION exception occurred at address.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', '.*DXGI_ERROR_DEVICE_REMOVED*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', 'CResourceFormatsTest.*887a0005', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19584 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_WTTRunWorkingDir_\ndistest.net\ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_WTTRunWorkingDir_\ndistest.net\ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19584 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19584, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Device Specific: "NDISTest 6.5 - [1 Machine] - OffloadVMMQ" and "NDISTest 6.5 – [2 Machine] - QosPnpPower" test failures', 'The following tests may have failures on speicfic Stratus based hardware:

NDISTest 6.5 - [1 Machine] - OffloadVMMQ 
NDISTest 6.5 – [2 Machine] - QosPnpPower', 'These failures are the result of a test issue.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/ImagePath[contains(.,''sraixt.sys'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HW vRSS - Verifying hardware support', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Test terminated abnormally with an Exception System.FormatException', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying Power Management Support', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Test Machine must support at least one sleep state.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 19744 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ndklogo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ndklogo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19744 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(19744, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Manual Errata: NDK HLK tests should wait for CqNotification after arming the provider with NDK_FN_ARM_CQ and before calling NDK_FN_GET_CQ_RESULTS ', 'HLK Manual Errata: NDK HLK tests should wait for CqNotification after arming the provider with NDK_FN_ARM_CQ and before calling NDK_FN_GET_CQ_RESULTS ', 'This is an acceptable failure.', '2025-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NDK Logo Provider Interface\\Arm each CQ twice successively, arming it with CQ_NOTIFY_ANY followed by arming with other types', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 0 on QP 0xf8f50800 does not match expected number of results 1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 2 on QP 0xf8f50800 does not match expected number of results 1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 0 on QP 0x8be3e800 does not match expected number of results 1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: cqResults\[0\].RequestContext = 0x8956f34 .*= expected RequestContext = 0x8956f38', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: cqResults\[0\].RequestContext = 0x8956f38 .*= expected RequestContext = 0x8956f30', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 2 on QP 0x8be3e800 does not match expected number of results 1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoCheckCqNotifications: More than one CQ notification were generated after multiple requests completed to CQ even though CQ was armed once', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 0 on QP 0xff2daa90 does not match expected number of results 1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 2 on QP 0xff2daa90 does not match expected number of results 1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 2 on QP 0x', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoVerifyCqResults: Number of CQ results 0 on QP 0x', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Title', 'NDK Logo Provider Interface\\Fast-memory registration for local read and writes', 'EndTest', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VerifyRdmaTrafficCounters: Performance counter RDMAOutOctets not incremented after outbound requests completed', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20068 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe%devnodetest.dll%USB_CompatibleID%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe%devnodetest.dll%USB_CompatibleID%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20068 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20068, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Printer CompatibleID Test - USB fails on barcode/RFID Printers', 'HLK Errata: Printer CompatibleID Test - USB failed', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceId[contains(.,''USBPRINT\HONEYWELL_PC42T-203-FP'') or contains(.,''USBPRINT\ZEBRA_TECHNOLOGIES_ZTC_ZT220-200DPI_ZPL'') or contains(.,''USBPRINT\INTERMECPD42(203)FP'') or contains(.,''USBPRINT\INTERMECPD42(300)FP'') or contains(.,''USBPRINT\INTERMECPB22(203)FP'') or contains(.,''USBPRINT\INTERMECPX4I(406)FP'') or contains(.,''USBPRINT\INTERMECPX4I(203)FP'') or contains(.,''USBPRINT\DATAMAXONEIL_W1110'') or boolean(//*[contains(.,''Seagull'')])])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CompatibleID::USB_CompatibleID', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR - Failed to verify device.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20069 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'MTask.exe -i "Does this driver implement XPSDrv or does this device have a logoed driver that correctly implements XPSDrv?" -o "PassFail"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('MTask.exe -i "Does this driver implement XPSDrv or does this device have a logoed driver that correctly implements XPSDrv?" -o "PassFail"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20069 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20069, 7, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HCK Manual Errata: Verify the device supports XPS (MANUAL) fails on barcode/RFID Printers', 'The test "Verify the device supports XPS (MANUAL)" may fail on specific barcode/RFID Printers.', 'Verify the device supports XPS (MANUAL) should not be applied for specific barcode/RFID Printers', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Description[(contains(.,''PD41'') or contains(.,''PD42'') or contains(.,''PC23d'') or contains(.,''PC43d'') or contains(.,''PC43t'') or contains(.,''PD43'') or contains(.,''PM23c'') or contains(.,''PM43'') or contains(.,''PC42d'') or contains(.,''PC42t'') or contains(.,''PM42'') or contains(.,''PB22'') or contains(.,''PB50'') or contains(.,''PX4i'') or contains(.,''ZDesigner'') or contains(.,''w1110'') or boolean(//*[contains(.,''Seagull'')]))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20086 v53.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%EkCertTests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%EkCertTests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20086 AND Version = 53
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20086, 53, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM EK Certificate Tests Verify Known Authority', 'EK Certificates needs to have an authority that Microsoft is aware of.', 'Make Microsoft aware of the authority identifier', '2030-07-01T07:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=EkCertTests::VerifyEkCertIsKnownAuthority', 'EkCertTests::VerifyEkCertIsKnownAuthority', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8d 6f 08 70 0e ca e1 6a 85 6e 05 a8 6f b2 34 78 93 a2 7c f2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '72 f9 e5 b9 52 8e c9 d4 ae f8 2e 6c f2 2d 9d c5 ba b8 8d 32', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '28 ce 57 49 c6 b8 16 66 1b 22 fd 1f d5 d6 6d 54 3c a1 00 ed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '12 fb 8b 78 86 05 86 20 7c b1 43 3c 92 53 cd af 9e ca ac e5', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '57 8b 68 61 6f e4 db f8 1b a4 05 33 48 33 7b 23 8c 08 18 be', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '45 14 ae 70 73 58 07 f1 e4 90 07 a3 2c 5e 0e 07 13 79 fa da', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f5 cd ad 98 67 a6 dc e9 3c 55 44 bf f5 f7 e3 67 c2 00 27 f6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '7a 22 a5 71 ee 9e f0 a4 45 38 8b eb 52 df cc 52 c7 06 5d bc', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8c 59 77 76 85 3b 9e db 90 c6 1a 8c af ca 29 f1 be a0 4a c6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8c 95 02 ba bb 49 cb a7 c3 fb f8 7c 30 cd c1 b2 b2 e6 c6 eb', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '36 b0 b7 10 c0 10 d1 81 92 21 c2 9b dc e5 3e 50 03 3c 29 15', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c1 ee 71 39 eb 2f 19 bd 4f 0e 49 8a 57 63 6b 8a 65 b7 e2 07', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd1 42 6c 97 77 a3 2c 61 53 e6 fc e8 2a 35 ed d3 4a 4f c0 ad', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '14 82 fd 9c b8 8a fb b7 f9 17 ca 14 22 5f 89 16 f3 10 40 0d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '16 62 76 7c 80 f2 5d f6 0e f7 bf 0a dd c7 6e 81 a5 d2 7d cf', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '94 ae 1a 5e 93 b1 a4 51 1f 01 a3 8c ef d4 5e f1 d3 b1 24 6e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '52 fb 59 e2 9a a8 3a 96 2f b9 ee f0 fe 5b 48 11 de 6b 75 1e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bc 8e ac 10 84 4f 5c 7e bf e8 ba c2 ce b5 0e 8c df 34 ef 88', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8a 05 78 cf 56 14 6f ea 39 9a f9 03 fb 5b 0a c3 6e b2 78 6a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '90 7d 65 e9 b5 62 31 59 97 dd 5a d0 86 b2 b7 59 89 57 b9 2c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '90 e0 07 e1 75 57 42 01 a7 a8 da c9 3b 32 31 14 a8 87 e1 e8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'cb b3 f7 26 e7 2c 37 bf 7e 9c 6c fa a6 ef 06 f8 8f d1 fc 4c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8e 0d 17 7f 92 bd 34 80 a0 38 70 fa 20 4f b2 18 56 4d fb 85', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bb 96 0c fc 54 36 fa 70 f7 e5 c5 a0 d3 2c b6 5b 74 3e 11 2f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'eb 61 98 3b 7d 01 2a 31 d3 27 86 55 a8 03 a1 d4 5e 44 8f c6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '0d bf e1 c5 fb 4d d1 88 52 50 5a 70 44 3e 99 7b c0 a0 93 03', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f7 61 a3 a1 f4 08 f1 09 07 97 b8 71 27 c2 a2 39 7c 0a ca 24', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '81 b5 d9 9c bf ac 98 c5 d6 1a 8e bf 26 a8 6a 08 6b fa 3e ce', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'cd 34 01 ac 6e 1c 6f 93 dd d8 69 d4 6a 51 83 11 b3 74 78 95', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a0 85 4b d1 97 f8 21 2f ac ba 38 99 1b fd db f5 d1 3c e9 ce', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd6 f5 6e cf cf 7e dd b7 fd 87 ed 01 e1 27 ee 00 9a 46 3b c9', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '46 66 de 76 62 04 e7 4d d2 9b b4 fd c5 85 23 a1 40 3d 6a 32', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e0 02 8d 87 ce 6c 67 a8 75 1c c4 b5 d7 4f 57 62 2e 75 e4 2a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2d 60 5c d8 82 b2 bd 71 6c ce 71 c9 0b c7 74 d3 d5 bc b1 d4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '35 ae e7 36 c9 b4 d2 86 13 09 e7 81 5c 0f a4 ce 40 d8 65 f6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '55 f4 da 39 ca 65 b6 68 1f 2b 77 11 bc 3e f2 08 a8 67 9d 1e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '16 b3 41 e3 81 cd 5c 3e 79 9a c8 38 ca 17 f1 f7 f3 f7 43 1e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '27 76 31 d0 59 fa 7a 95 53 fb 59 df d6 e8 5b c1 22 30 0f f0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '31 d0 5d 10 6d af e4 ed 19 dd 0a af d3 5b ea 22 a3 78 1c 57', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '38 93 cd bd d8 73 c4 23 33 15 e1 b1 3b a9 6a 0d 23 cc 10 c7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '43 32 5a f5 50 04 06 54 89 30 cd a9 a6 7d c7 80 67 b9 78 01', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c6 cb 2a 4d b7 29 4b e9 11 72 4f 50 41 31 0b 4c 42 f8 9b b2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '88 b3 c1 3f 61 05 d1 04 22 9f 5a c0 eb 49 95 64 ac d4 73 bd', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bb cf 7c c1 84 21 31 66 da b5 be 53 a8 70 14 dd d3 48 d8 cc', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e8 26 69 cd 9f 20 98 27 02 97 49 9e ae b8 df a7 e6 8b 34 22', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a7 55 98 b8 02 6f a5 44 af fc bc 4b 91 06 c1 2f 96 d3 f0 b8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '4c 4b 4d 64 89 08 e4 5b fe 5a 10 d3 63 87 a6 88 ae c1 cf 78', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b0 80 35 9b 59 aa 93 88 00 a4 ae bf d1 0c c7 0c f0 1b 1b 37', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b0 29 81 15 7b 6d 7c c3 21 00 16 38 0b 89 89 50 52 43 50 e6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '37 35 dd c8 e3 00 b8 17 ae be 03 50 3a 92 ed df df 1a c7 1a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '25 83 ca de 36 8f 69 c8 0f 58 d3 4a 48 b2 de 65 3d fe af 98', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '22 bf 9b f4 97 8f 4f 45 a4 e9 db f7 29 d8 a0 8a dc a0 a8 2c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '78 a4 09 c4 57 de 69 26 f6 df 42 c6 11 4e b7 e5 6a 9b 56 e7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '12 84 62 f2 a0 d1 6c de 19 46 f1 00 05 44 b0 55 bc 11 3d 10', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ec 3f 8d 4c c1 2a be 88 a0 19 06 4e 8a 62 b7 01 8f a2 e3 59', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '75 68 ff 26 f3 7d 11 26 85 67 b6 86 4e c7 2a 08 c8 18 89 1e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1d de 0f 40 6d 12 2c 3e 5a 4f 86 1f 94 87 6c 9e 1a cd d3 7e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8f fd 47 88 0e 23 9a 3a 3a 20 de 13 ed f1 01 e8 82 a9 d2 1d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a0 c9 de c0 8f d3 9a 8b 59 c4 6b cb e8 7f d9 94 8c 55 f9 70', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2a d7 0e b9 09 62 c5 41 a5 5e 2d 15 b8 5b fa d2 86 15 4f 0d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a4 d1 87 26 36 4e a2 e3 b2 78 46 4c dc 7f ad 96 8e 01 5d 4b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '97 e5 d1 cd 8b 04 97 c0 4b 46 55 a8 69 c8 f3 0e fa 89 38 8d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '4a 76 9e b5 d9 3c 83 3a 55 00 f1 f2 81 32 4e ef 03 fb eb 3d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '65 95 7c ae 12 ef 1b 1a 87 5d 95 1a 94 25 b1 bc 1d 2b 3b d3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6d ed 70 ab 84 1a e9 c2 2a 03 64 7f c8 d1 48 21 88 d3 da e3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f5 3e 4f 47 5e 0d 3c 6e 2b 3e 56 e3 ae 8a bb 95 31 22 61 7f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a4 38 4b ee 39 66 53 35 39 cd 0a 73 6d 1d d2 c2 13 53 8d be', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '83 43 ba c2 12 9d 78 29 9c 4b 51 3c c3 de 61 03 7b fc c9 55', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '76 fa 7d f0 c0 77 33 dc 8c e2 4e 8e ff 19 6d 27 78 86 68 da', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2f 57 2b ba de c4 d1 8e 0d 91 ff 43 75 fb 46 8c 61 b8 c7 af', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '46 f2 6f 96 33 06 91 e5 61 b7 2f 7a 63 dc e3 a0 51 70 39 fb', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2a 77 a0 e3 42 cb c6 c7 2e e3 fa fc 3b 0a 7b ce a7 c9 ce 4e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '34 7c 93 ca bd ed 61 68 c6 1f dc 87 40 a7 35 3e 46 75 16 16', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a2 6c ee ac 95 fa 33 67 32 19 d0 c2 a7 76 37 10 2f b5 3f f2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '18 b1 af 70 b9 3f 99 19 72 f3 62 55 6a 9a 3f bf 4b b2 4e 0d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '94 27 61 4d 3d 48 ab 03 d9 47 4f ef aa 92 28 31 21 a9 03 35', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5f e6 18 0c 25 7f 26 13 0b 98 b0 e0 f5 a3 47 68 36 77 f3 91', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '37 ae 34 6b aa 54 c5 13 cf f0 29 0b b3 21 a2 2a 34 a4 a8 c4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ce 77 15 3b 6e 11 0c a4 ae 29 71 a0 98 51 ef 49 93 26 20 2a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '73 ab b8 1a 02 25 45 63 37 f0 2b 25 bd 39 e6 58 b9 0f 00 ff', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '3f e3 e3 e0 38 3e cb 89 91 18 18 8f 4e 2b 96 44 db d3 9a 3c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ca 69 70 45 86 73 49 3a 8a e1 99 4e f1 e2 92 38 f2 7f 45 18', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '55 5d ef 6c 33 f8 30 44 8b ad ac ff ec b1 d3 7b ad f1 e7 86', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bd 6c 69 c0 75 9e aa 95 dd 6d 15 6e a6 41 70 c4 b9 b3 6c 78', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1b d6 45 fc 1f 90 82 7c 28 3e 6c b5 26 85 9f fa b0 e0 c6 2b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b2 d3 cc 08 14 4c 50 80 8c 28 9d 11 96 27 47 9b ff c0 e4 a3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f6 5c 28 9b 3d 93 b7 8f 97 8a c8 d0 17 b7 94 7d a9 36 37 a5', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '95 32 15 3b aa 9d 74 48 2d 27 5b 1a 3e 47 53 09 d3 cf e5 07', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '92 bb 51 cb 97 90 0c 4c e3 50 be 2f 4a b2 d2 a5 bf 64 5d 39', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1f cd fb 8e ce 40 86 75 d9 63 e5 e5 10 8d 55 c9 84 dd 79 7a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '91 77 3c b8 68 24 e1 c1 95 49 ed 8a c1 33 dc c6 a7 36 9b 85', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '55 2e e1 64 ed c8 69 b2 f6 a3 5e ed a2 84 51 29 4b 1f 7d 7c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '01 d9 26 60 a0 1a b7 8a dc 0e 71 b4 8e 32 80 05 88 3b a6 8c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '63 53 59 b0 b7 7f d5 fc 41 20 cb c5 20 b0 95 75 8a 92 22 07', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5e a7 e8 aa cd 2c 6f 58 47 74 4a e9 60 c1 a7 8f 46 6f dd df', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8f d2 76 91 f6 14 cf 13 e5 89 35 9a 68 3f f4 22 4a d6 40 88', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd6 15 a5 4d 22 9f 9c c6 12 92 11 c8 ed 36 ee 6e 31 bc 10 80', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '0a 8c 17 76 66 7c ee 98 85 76 8d ac 40 1e 02 0b 98 57 61 63', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8c c7 e3 00 7d c3 1f 3f 27 43 85 cb 30 87 93 39 9b d6 9d 1b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '95 46 0c 50 3c 6e 70 91 39 74 36 20 95 83 60 b5 19 2c 30 da', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6d fc e4 d0 1c 37 c3 0b ac 47 ab c8 aa 0b ce 05 a7 e4 57 e0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9c 24 b6 c8 b6 45 af 35 6f 56 79 c9 48 2b 65 f0 e6 96 88 c8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '31 c5 ce 4c 93 2c 61 8e 39 1a 84 20 fe 5e c6 b4 71 46 bf 8b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ef 6b da 32 9d f3 22 c0 65 ae 0f d9 ba 03 66 45 c0 7b 03 01', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '25 9e 5c bc 4f 03 4f 1c ad ef 9c e3 e4 8e 34 2e 24 b7 69 2c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '10 32 78 79 af f2 a7 05 40 e0 5f 55 03 9e 31 85 48 be 25 8f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '64 9d a5 b7 61 9f bd d3 96 d9 f0 e8 6d b5 71 6e bc ae 77 9c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '36 59 8f 22 ec 84 c3 c4 f6 40 d2 1c 16 7d 0b 91 13 7b 90 a4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '69 14 6a c3 cf b3 66 5c 7a e7 81 01 cc a5 c1 42 55 ca 2b c8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c8 8c 75 fb 06 27 0b f7 ea 12 44 fb 9c 25 df d2 09 b7 ab cd', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c2 ef 64 1c 32 9c b0 a9 f2 ea e0 4b fb 10 c9 9b 89 c3 46 14', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '40 b8 68 2b 8d 18 45 0a 2b 06 84 9d 9b 5c d9 6f 4c dd f4 be', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '26 3b 74 4d 85 41 2b ae 6e 13 e9 4a 53 c2 35 18 5b a4 ee ec', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '29 fe 69 63 0e 85 3a 4c d3 57 5f 84 39 2a 9b ed 2d 7e 8c a2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c7 ee 1d 9c f6 a2 91 a0 6e 4f 5b 88 ce b2 5c ae e1 2f 82 7b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9c 7d f5 a9 1c 3d 49 bb e7 37 8d 4a ba 12 ff 8e 78 a2 d7 5c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ef fe ec 5e 01 61 00 82 c0 e3 11 cb d0 7a 32 04 40 8b 32 b8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '09 0c aa e1 85 8a 3c 3a 3b 6d 4d f8 97 89 16 fb 20 5f ca 90', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd8 a3 f5 56 08 5a 68 c8 aa 5d 5f e0 79 bc c6 e9 c6 d3 77 64', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5c 29 20 74 21 79 bc 70 4d b1 d8 c5 4c 34 ca 94 40 56 17 ca', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'df 5d 6d ab 51 02 df 18 a1 f7 71 13 f4 98 3c 62 cb af 73 85', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '11 22 7a b2 28 98 32 89 ad 2e 7e e6 84 13 21 90 1e f5 92 f6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c6 6e fd 2c 49 24 6e 60 7d d0 9e 17 2e 5a 7f 8e 3d a6 0f 62', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c0 04 4e 3b 23 f4 3b 28 54 bb 76 ad 4f dd 79 bc 62 98 6c 55', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8e 1f 3b 1e 12 9d 4a de d7 63 1f 5b 4a 2b 75 82 8a f2 81 28', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e9 06 17 97 e8 e5 e8 c6 8f 93 5e e5 e9 76 bc 8f a1 7d 75 23', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '32 c6 e5 76 66 3f ee 80 d6 4c dd 7b 18 e5 60 38 63 b3 bc 8a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'da 20 6e f5 da 6c f7 9c ae 93 c5 e4 72 ff e9 48 01 72 cc 8e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '70 26 d0 9e d9 35 dc dc 44 d8 4d 7d a7 5c cf 0a bc 1f de 0a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '4a c9 0c ee 68 d4 b5 72 9d e4 35 7d 2c 47 58 84 f4 09 b7 a6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '26 5c f3 24 70 fc 4d 93 c7 02 2f a3 4a b4 c8 08 79 48 45 4b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2a 4a 69 83 25 a1 b2 20 46 4e f0 09 b0 18 92 26 8b 25 f8 4f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9a 64 3b c4 80 07 e0 82 47 98 43 00 36 b6 58 41 9b 70 c0 77', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '36 2b 02 16 5c aa f5 17 10 eb 8d a4 43 ed 5e 7a 07 a9 65 cb', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '39 b5 58 4b 7c f1 67 01 e7 30 98 e2 14 ba 9e 65 7a 10 09 32', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1c 21 e9 87 e3 a2 35 f9 98 b8 7f e7 11 35 d7 1b 1f f8 cd 8e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1c 32 44 af f4 12 c4 53 04 c0 c8 76 09 ec 45 e7 1e c2 56 10', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b1 1f 33 cc a6 06 56 ba 25 9c 2e 90 5a 3b 54 3f 52 44 97 91', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9a 1b c5 f5 46 97 90 00 7f 08 78 18 41 c8 6e be 43 a0 39 3c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '28 2f 56 70 b1 1e 88 b2 8a 49 59 b2 6c ff fa ec dc f9 7c e8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '7c b4 b7 8e 68 86 14 be 44 21 c5 85 8f 15 b9 6d 5e ab 51 ee', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '0d 99 69 51 9b 97 9d 32 ee 4b 80 31 65 66 4e 9c c8 6f 9d 0d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '44 f5 bb d4 bd 90 41 a4 e8 5b f7 8b d4 dd d0 08 05 40 39 b0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '56 f6 b5 97 39 63 01 18 5b 91 d8 00 ac ee 91 62 19 e3 a6 bb', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5d 08 15 95 1f 5f 60 63 8a 69 e7 25 2f 3e c4 be cd 75 54 b2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b6 37 32 5e 7b fe e1 a9 42 e6 de ef d6 2b f2 0f f4 20 3c 72', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd6 c1 8f 05 70 94 b3 5d bf 19 83 e8 77 f5 e8 13 38 7d 13 fa', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8f b7 53 d3 ea f4 29 1d 9e 1c a9 9f 61 5a 71 61 3d 57 78 ba', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6e a1 4b 11 a2 5f 9a 5f 6d 28 6b cb 20 c1 89 8f 85 a3 b9 bc', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '72 d5 7e 87 28 bc 26 86 fa 17 81 d1 b1 5a 3f 7d c5 77 e6 36', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1d 2c c2 15 a5 de 99 d7 d3 93 85 ae c8 06 e8 b6 66 a6 c0 d3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5f dc be 5a 8c 9a 66 d8 22 af c1 80 e5 b6 3b 4b 2d 8d 8e 0c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '83 e3 a0 36 d1 20 34 15 66 b4 bf 9b ff ee 29 2b 88 0c 46 65', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '56 eb 91 44 85 63 d6 72 b3 ae d4 45 96 0b f7 94 0e 54 42 a6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '0f 14 f5 e3 20 88 44 16 ca 26 bf 8d 1f ce 37 15 ea 45 6f 06', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd1 a0 05 96 aa 47 a4 95 b0 b7 86 4a 07 1a 3a 4c ad db be bb', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b4 18 85 c8 4a 4a c5 12 7a f2 40 39 de c4 f5 8b 1e 7e 4a d1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'dc bb 56 ab f1 18 fc a6 9a 75 11 10 65 84 12 9e d5 41 92 b9', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '82 b8 3d cc 71 b8 3e 7e f6 9c d6 1d c8 4d 52 32 70 6c c7 9d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'fb 4f cb 0f 1f 6e 5d d5 62 22 f4 c5 4a 25 39 e4 bd 4d 6a 28', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2c 2a f0 60 3b d0 22 88 92 85 a3 e9 ce 35 87 72 72 42 2c f5', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '62 1e 61 6f fe b9 31 86 6e 75 78 e4 9f 3a 5e 43 52 d1 4e 9f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '34 21 9b 21 f4 77 f6 c7 f7 8a 0f 26 b2 3d 04 30 de ea 43 63', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '13 4d 03 d6 58 1d ab ea 3b f8 2e b2 e3 4b f9 81 92 82 69 62', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b9 9e 97 9a ae 48 77 4e a2 ef ca 9b f9 ad 5b 04 04 0d c1 0a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '31 73 4d 6f 8a ea 91 3a 0a 31 18 0b 78 5c c0 63 08 94 cc 7b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd7 3c fe 5a 9e 01 80 80 11 81 a1 44 4d e3 6e fb f8 8b a1 6e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '0f a7 b4 95 04 81 26 12 0e 12 73 16 06 77 6f 3d 68 a0 37 c0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '49 94 c1 29 f1 a5 48 d4 88 58 6f 22 a2 df 86 03 73 9b 3b d3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '14 09 2b 5f 78 14 ec 9b 71 3e 9a 9b 90 a4 c5 19 df 08 e6 88', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9a af 59 1e e2 63 ca ae 10 f5 7b a0 4f a8 d1 dd 66 13 f9 eb', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '78 6a 37 5f 4d 54 b3 14 54 51 d4 be 93 76 0f 74 24 24 fe 78', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '23 36 0e 8e 18 99 4d ab e9 1c 42 47 cb 3b 82 6e d8 08 92 0b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '17 a0 05 75 d0 5e 58 e3 88 12 10 bb 98 b1 04 5b b4 c3 06 39', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '14 19 7b a6 5d 63 3b 5b 71 73 44 5d ee 1a bb a3 ef 3d 60 5d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2d 3c ec fe 65 94 82 97 19 d6 55 6b 60 05 41 e7 49 fc 63 5b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bb 98 05 e3 19 a7 8d ba ef a8 88 b4 56 15 95 72 05 17 91 81', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'cf f5 e5 34 67 74 eb 4f 7a a9 72 13 d5 c1 21 bb cf ba 13 b4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b2 4b ca 32 cf 1f bb b6 e5 ac e8 3e 72 b2 46 e1 ea e6 2b 2a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '51 c7 3c bc df c9 90 aa 67 74 17 cd 5f 78 ba 37 d4 a8 d7 31', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '09 92 16 53 9c c8 e7 bd 03 77 05 75 02 bc 8f cf f1 07 3f 9f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '31 99 b5 d6 2d 57 d3 06 7b 95 3c 10 c4 0f 7b 77 c0 61 c7 e5', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e7 08 3f 22 15 2a 74 92 ec 59 b0 c4 24 34 37 64 8b 15 db b7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5f c5 e6 d7 51 7c e0 16 c6 16 11 0b 50 14 d8 25 be 31 7a 7e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1c f8 fa 72 39 30 a3 e7 31 29 cd 7d 9f 3a 84 5d 71 ca 72 68', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f6 dc ae 38 08 32 6f 10 a4 6a 62 d5 5f e0 a9 cb e8 41 a3 d4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2c fc f4 3b 16 c8 bf c7 82 49 cc 97 1e e5 73 24 d6 39 f0 79', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ca 71 2a 9f 87 5e 48 cd e7 bf 65 7f b7 26 2c 70 3e ff 5f e2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f1 8b f8 1c 71 80 bd 41 23 86 46 c2 16 ef bf 6e 99 52 cf 1a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '8e 1a d8 46 93 d5 d8 9b 14 72 cd 8f 99 90 76 ed c4 11 54 00', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f3 07 ba 33 34 7c 28 3a 1e 0c 15 08 ad 02 f5 c8 ca 06 f4 5e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '01 c0 5c c8 1c 16 a7 b2 39 40 4e 5d d6 9a 91 3d f0 99 6e e1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '61 9a 0a 78 96 88 03 cc 61 90 a8 a5 3f 90 6d 75 7c 9f 69 6a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ce fe 33 33 90 73 3c 67 27 c7 88 0d fe 42 9a fe b5 57 a8 92', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bf 9c 5c 6f bf 80 cd ce 74 ab cd 0e 0e 60 04 ea 02 2a 66 06', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5e 73 c8 9a a3 e9 02 b2 72 b9 f0 74 1f 7d 87 30 e3 ec 72 4a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f9 9f 20 7d fc 87 97 bf f9 0d 64 1d 25 fd 5a 45 f7 63 10 b8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6c a9 df 62 a1 aa e2 3e 0f eb 7c 3f 5e b8 e6 1e ca c1 7c b7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b0 66 d9 69 7f 5d 3a 07 b4 25 c1 0f 58 7c ce ec f1 6f fe 58', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '14 51 26 d0 fd b5 3e 99 90 7d 6f c6 ff 1b 90 45 5b 9e 32 4a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e8 52 05 c2 4f d8 d2 d5 a5 21 47 16 b6 ce 0c 7b 5b ba 77 0f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'b4 58 c9 f6 e4 08 40 a3 f2 58 c8 39 78 6e ae 8e 0a 8d 9c 38', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '02 2c be ed 5d 77 06 0f 28 33 e9 d5 37 6b a8 bc 30 8c d9 ba', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '03 d1 cd e4 38 ea 3d b3 4d 94 31 81 c1 cd 51 7d 68 80 62 ef', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'eb b2 f4 e3 12 e6 52 9c 4e d0 cd b6 82 28 58 0a e5 20 3d 45', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '3a bc ff 08 df 5e 01 0c 2b 64 07 8b c7 ce 95 06 f4 08 fd e4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '42 5d 5e bc d7 25 02 68 88 82 13 12 9e e7 4d d8 6b af 71 d8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a0 d7 37 29 0e 16 cf 2a e2 be e7 10 0c f5 6b 2f 04 c5 f0 43', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a9 d9 47 f3 f9 81 72 ee b6 dc c5 ed 60 9a 00 de 7c 06 9c b0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '15 91 d4 b6 ea f9 8d 01 04 86 4b 69 03 a4 8d d0 02 60 77 d3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '88 2f 04 7b 87 12 1c f9 88 5f 31 16 0b c7 bb 55 86 af 47 1b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e1 51 b0 ab 06 bf f7 5b 07 4e 5b 6a a8 34 e2 da 2f ba 83 83', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '08 30 0f 43 a8 f4 b8 c8 e6 24 a4 f7 06 0c f5 9e 74 50 15 e7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a5 2c b6 47 e0 90 9b da 2e 7f 7d 91 3f 62 d8 8b 13 89 e2 c6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '56 87 37 b0 ec 39 d0 b7 79 c3 dc 7e 81 c1 0f ad 8f 60 a1 59', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9f bb 79 aa 0f 52 62 78 be d1 50 92 9a 71 71 e9 6a 35 be f7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '23 f4 e2 2a d3 be 37 4a 44 97 72 95 4a a2 83 ae d7 52 57 2e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e4 a8 66 6f 8f 4c 6d 9c 39 32 a9 48 84 77 80 a6 81 0c 42 13', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '28 1d 97 77 e8 8c 49 d9 f8 8c be a4 13 79 8a e3 a4 0b 96 71', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e7 dc 6c 54 fb c8 a1 a5 f1 ca 4b 95 7b 82 f9 5e 1a f8 53 1d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ca e3 9a e4 3b c7 fd 01 ba 41 f7 1c 30 b3 44 5d 70 7e bc 51', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bc 28 15 45 e5 18 2b a3 b3 da bc b1 35 27 5c e7 9c 54 a5 18', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd6 0b 99 ad 75 6f 6e 29 a9 08 98 11 68 91 4d 04 e2 0c 1f 84', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '16 f3 5f 91 a0 4e dd 3b 83 1d a8 c6 d1 ec ee e6 ee 49 7d 60', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '79 10 0c 2e a3 5c 4f c1 4b de 15 9b 56 32 6f b7 31 d1 d5 12', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '7a 8c 0a ce 2f 48 62 17 e2 94 d1 ae 55 c1 52 ec 71 74 a4 56', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '7e b8 36 ce fb df 8a 63 71 ff 73 33 f9 ba d7 14 61 6c 96 cb', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '66 2d 8f 1c ec df f1 47 a8 b6 f0 ea 29 6a f7 f2 4c ad f9 cf', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9d a5 c7 2c a0 0b e1 4b 85 b3 e5 35 c8 b0 7c 83 e8 5b df f6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bd 96 3e 9a d5 74 aa d9 4f ad 6c bf 41 6d d8 5b 4a 55 99 42', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '08 cb b0 5c a4 51 0b 2a 73 29 91 84 ed dc 9c ce 42 91 12 11', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f3 c9 15 74 a6 e7 73 ff 13 bf 0c 6b ad 7a 7b 65 cf 1c 78 20', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '57 1f 80 6b 47 cc e7 9b fa 35 94 7c ed 88 b8 d1 00 5a e0 9e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '00 56 a6 10 d5 3d 1b 3b 6d bd 14 09 4b 2d ce 7e 1f 75 6e d0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'cf 23 e5 95 26 e4 46 c3 fe 4f 13 eb 68 6f 62 4d 70 53 05 f2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1a db 99 4a b5 8b e5 7a 0c c9 b9 00 e7 85 1e 1a 43 c0 86 60', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'fb 17 d7 0d 73 48 70 e9 19 c4 e8 e6 03 97 5e 66 4e 0e 43 de', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6b 27 80 80 0a 94 1c b4 7e fb ca bd d8 d1 f0 1d 52 9b f3 6c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1e 23 63 f0 85 b5 f6 25 4e ed 1a c0 50 be 65 7c c7 d4 15 7a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '61 3e fc 11 99 0a 7f b0 a9 5b 90 a0 26 5e 29 61 47 b7 30 03', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6f e6 c5 6c 07 b7 6c 8b 0a 81 92 83 5c cb 41 1e f6 8e d1 27', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '20 92 56 3c 0b 43 a8 05 72 53 03 29 07 1c 07 e0 eb ec 03 04', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '74 9a 4e 3b eb 01 7d f0 a1 63 a2 80 1f fe 24 4b 0e 4b 9e 9f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '55 07 64 88 d0 30 da 00 17 ec a2 2d 8d 28 60 86 c4 32 fd f1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ab 18 1d 12 47 ac e5 f6 c0 dc 5b e2 d0 bd 79 50 96 85 2b 80', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd2 4b d1 6c 1a fd c6 c5 fd e1 9a 25 b5 ab 31 b5 6a fb 83 ec', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f9 71 26 d6 03 51 9a 88 05 b8 40 d9 8e 4d b7 32 40 73 21 22', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '23 54 fd 86 c0 49 9d 2e b9 95 06 ae 23 6a 8d 74 06 5f 5a f4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f0 0b 97 96 fa c9 31 af 0d 88 77 96 e3 4b 5e 8f 7c a5 e2 4c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '14 e8 94 90 75 48 a0 1b 0a 08 9b 88 0d 8e 23 df a0 62 1b a1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '7a 94 c4 68 a9 da 91 e6 7b 03 2e 09 d8 8f 27 bb de 86 45 43', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'cd 3f 60 4f 2e 34 53 0b 00 ab 60 fe e7 e8 18 7c a4 24 5f c8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '18 81 dc 85 ba e3 c7 fc 28 37 95 3c 5d ee 03 2c b3 3a 85 ee', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '87 b8 5e 6b e4 53 29 4f 2f 43 89 c9 64 c4 24 4a b4 40 51 6f', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '33 96 f1 1e c2 b3 b5 e2 9e 9d 47 4d cc a3 16 9e d2 cb b5 c8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '7a 54 3f f6 ca 11 d0 99 67 9c 36 a6 11 f2 61 ef 15 d5 20 92', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ba 21 13 65 73 c2 c3 8a 5b e5 7c b6 c6 8b fc 23 bb 36 ca 58', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ea 95 0d 98 7b cf f0 df 9a ac 1f ef fb 8a b4 80 3f ef 2c a2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'fd f0 57 bd 9f f6 2a 25 5c 1a e3 68 d3 60 00 5a 06 5e 5f 3e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9a da 65 15 19 67 e5 c7 da 31 46 57 71 d8 26 a8 de 88 19 4d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'db db 34 5f 7d 58 3a 11 a8 b7 cc 4e 1b e5 21 3f 2e 28 5a f0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a7 f5 f6 0e 6d ac c8 cb 09 62 4d 87 9d 50 56 5b 14 d2 19 33', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '61 81 18 ef c3 65 ab 56 5c 55 73 ee 0c c8 bd 54 b5 d9 a8 d0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'da 39 f2 0c 3c 7e 7c ff e8 14 e1 b4 b6 26 b8 30 25 85 d8 18', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '70 ea 16 aa 61 5a 92 b6 4d 0d f1 4c 32 dc e3 02 b9 86 31 de', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '29 44 65 af a4 00 1b 73 6c 86 88 e9 88 0e 4e f7 41 9d 4f 68', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '15 b3 e9 ae ec 23 ff 60 28 e2 3e a5 30 de 5b a6 05 ae e6 f4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1c b4 a0 68 7b 9d 82 07 2c 57 83 a6 b5 7d 10 d7 40 00 fc b9', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c1 a8 b8 60 7b 69 67 be 3f 1d 79 dc 1e ce 94 95 3b 15 9c d7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'fa 26 ea 54 3e f0 13 aa aa f1 1b f1 9c 7b d6 da 47 5d 54 1c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '95 05 58 1b 99 07 07 af 8b 38 77 6f 8c 42 4d cc da 8e 16 bd', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c6 3e a7 80 03 28 a1 26 7e e2 85 c6 f3 db 90 26 ab 34 94 11', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '91 fc 14 f2 57 46 15 b5 b1 84 88 bc e8 0c 2f 27 ec 32 c0 0a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '56 92 03 08 8a b5 32 ea 3c bd 34 32 21 aa 9d 7d 9f 6e af de', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '96 54 96 6c e6 cb 71 da 36 7a 8e 52 7b 8f ff 8c c8 08 f0 7d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '55 7a 21 08 a6 6d 8e bf c3 8e 49 b1 65 52 24 cb 64 c3 30 8e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f0 f3 ca 51 0b e1 a6 f6 bd 58 67 73 d5 01 df bd 57 c2 dd 13', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '5c ca d0 6b 25 e5 0f 40 fd fc bd 13 0c c0 dd be 00 47 68 43', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '46 b5 83 01 89 da 66 c5 bd 44 f1 4a 6b f5 07 7c 1f dc 7a 6a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '28 1d 97 77 e8 8c 49 d9 f8 8c be a4 13 79 8a e3 a4 0b 96 71', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e7 dc 6c 54 fb c8 a1 a5 f1 ca 4b 95 7b 82 f9 5e 1a f8 53 1d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ca e3 9a e4 3b c7 fd 01 ba 41 f7 1c 30 b3 44 5d 70 7e bc 51', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'bc 28 15 45 e5 18 2b a3 b3 da bc b1 35 27 5c e7 9c 54 a5 18', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'd6 0b 99 ad 75 6f 6e 29 a9 08 98 11 68 91 4d 04 e2 0c 1f 84', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '16 f3 5f 91 a0 4e dd 3b 83 1d a8 c6 d1 ec ee e6 ee 49 7d 60', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9c b3 99 c7 48 36 c2 0f 48 40 b8 3f 94 2a a7 41 98 fa b3 5a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'f8 0f f2 80 0a ff 25 1c c7 e2 ba 58 be 27 ad 49 8e aa 8a d6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '65 70 62 a7 10 56 91 6f 8c 7f 79 8a 92 dd e6 d8 1d 0a 98 da', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e5 be 2b 8e b0 b2 90 ba bc 77 1c df f9 bb 4e 1e 04 da 7a 5b', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '25 e1 ad 27 d5 62 01 b8 ba 2e a5 6f 85 ee f1 b1 89 cf bd 3c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '1b 36 48 db 23 e5 e6 a3 97 2b 8c 92 03 28 b6 e4 aa 9a 7c 3d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9c b3 59 a2 2a 91 df 22 04 5f 5d db 1b 70 d4 a9 39 ba 17 14', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'a2 8a c8 35 94 9b 33 8b c7 99 a2 37 42 69 6e 51 a8 b2 11 9e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ac da f6 c3 83 33 6d a0 10 4a 8f 0d a6 91 c9 66 7c 71 a4 9c', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e3 75 68 6f 18 2d 84 7c eb e1 f7 ce 7a ed a5 ca b6 b6 be 24', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '4c 30 d9 a8 16 7b 86 2f 35 6a 6b 56 5f d3 ae 99 87 be 9f 03', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '66 7d 15 46 65 ca c0 1f 70 cb 40 d8 db 33 59 4c 90 b4 d9 11', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '72 b0 3d 71 22 81 95 34 63 bc 72 60 98 ea 3b c2 f3 b1 3f a6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ee f8 21 8c 20 41 94 75 88 93 0b 68 45 83 9c 85 cd e7 38 57', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '99 f3 39 0f a3 c6 24 a1 a9 22 a8 22 23 d5 16 94 9f 5e 60 4d', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '25 93 f7 e7 82 d4 42 82 f8 0a 3b 79 d7 a6 14 0a c7 85 a1 d1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '2c b8 1a c4 90 6b 05 fd 31 7e 48 8a c7 73 db 64 92 1b 03 88', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6f 15 37 e8 8e 99 8a 2c 09 a1 2c e2 f2 87 cd 07 0a 0d 10 86', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e2 15 e5 8e bc 7c 1b 99 42 2d e6 a0 b4 64 7d e3 12 a8 80 1a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '29 65 fc 78 2d d6 1c c1 37 76 fa c3 60 9f f8 2a 42 66 e6 e4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e6 2e f3 45 af 8e 3e 0c 7b a2 af d7 de c7 46 3e 2c 2d 98 e1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '7f 44 c0 11 a4 49 b7 cb 7e dd 2c 11 39 3d c9 67 af a6 b9 f6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '64 b5 96 25 df cd 23 4b 7b 68 af 50 de 4f 2d cc ca 32 04 ff', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'c9 c5 f4 6c f0 b4 d7 3b 81 51 e9 42 6c 6d 17 bc e0 cf 1e 90', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ad fa 9f 36 6a ff bb 74 3f 63 e6 63 74 03 1a 8e ef bc bd f3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '12 76 08 5f b7 88 33 e0 a4 48 57 86 14 d4 ce d6 7f c5 94 19', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'e5 0d 52 ca 7e be 6f dd d3 b5 27 76 14 e6 f3 dd 40 b6 f9 82', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '3f 80 cc 7f 33 50 04 42 5e 4f 66 6e 0e 01 81 e7 07 51 41 11', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '30 09 aa 22 45 0d 29 95 cf af ae 84 8e 7d 0c cf b5 fb f1 4e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '95 3a fb 5c d8 91 a6 c2 e2 78 13 80 e0 09 96 4e bf 13 40 95', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '64 ea 58 6e 5f 8e 7a c0 71 b0 5a d0 0a 51 cf a1 0e 9a de 12', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '9b 65 6c d6 a9 dc 8f 9d 8c cf 86 21 c5 d1 fe f6 46 7f a0 25', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '19 c0 d4 4f 34 99 ba 60 2d 91 3e 8a 74 e3 32 2f ba 32 75 a1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '6b 77 3f 7f c8 ea f6 a5 b1 0d 73 61 bf 20 13 d1 28 d0 38 46', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '77 b6 3d 9f 8b 73 f5 fb bd 73 ac e7 d8 fb da 37 a6 a7 86 5f', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'EkCertTests::VerifyEkCertIsKnownAuthority', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'b0 66 d9 69 7f 5d 3a 07 b4 25 c1 0f 58 7c ce ec f1 6f fe 58', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '33 96 f1 1e c2 b3 b5 e2 9e 9d 47 4d cc a3 16 9e d2 cb b5 c8', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '87 b8 5e 6b e4 53 29 4f 2f 43 89 c9 64 c4 24 4a b4 40 51 6f', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'f3 07 ba 33 34 7c 28 3a 1e 0c 15 08 ad 02 f5 c8 ca 06 f4 5e', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'EkCertTests::VerifyEkCertIsKnownAuthority', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Key ID: *', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'b0 66 d9 69 7f 5d 3a 07 b4 25 c1 0f 58 7c ce ec f1 6f fe 58', 'UserText', 0, 1, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '33 96 f1 1e c2 b3 b5 e2 9e 9d 47 4d cc a3 16 9e d2 cb b5 c8', 'UserText', 0, 1, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '87 b8 5e 6b e4 53 29 4f 2f 43 89 c9 64 c4 24 4a b4 40 51 6f', 'UserText', 0, 1, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'f3 07 ba 33 34 7c 28 3a 1e 0c 15 08 ad 02 f5 c8 ca 06 f4 5e', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T07:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20335 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% devfund_pnpdtest_wlk_certification.dll /name:PNPDTest::PNPSurpriseRemoveAndRestartDevice%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% devfund_pnpdtest_wlk_certification.dll /name:PNPDTest::PNPSurpriseRemoveAndRestartDevice%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20335 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20335, 3, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'HLK Manual Errata: 0xC4/43006 on mpio.sys when running DF - PNP Surprise Remove Device Test (Reliability)', 'Bugcheck during testing on MPIO.sys', 'This issue described is an acceptable failure. ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/ImagePath[contains(.,''mpio.sys'')])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/producttype[number(.) = 3])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20477 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%tpmattestation.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%tpmattestation.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20477 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20477, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM Attestation Test AIK test issues', 'TPM Attestation test has a test bug.', 'Use this errata. The test has been deprecated in RS2.', '2029-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WHCK.TPM.Attestation.TpmAttestation.RunAikCreationCmd', 'WHCK.TPM.Attestation.TpmAttestation.RunAikCreationCmd', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ERROR - PcpToolActivateAIK\(\): \(0x8009002d\) An internal consistency check failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '\*\*\*TEST FAILED\*\*\*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WHCK.TPM.Attestation.TpmAttestation.RunAttestationCmd', 'WHCK.TPM.Attestation.TpmAttestation.RunAttestationCmd', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ERROR - PcpToolValidatePlatformAttestation\(\): \(0x80070057\) The parameter is incorrect.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '\*\*\*TEST FAILED\*\*\*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WHCK.TPM.Attestation.TpmAttestation.RunTrustPointValidationCmd', 'WHCK.TPM.Attestation.TpmAttestation.RunTrustPointValidationCmd', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ERROR - PcpToolCreatePlatformAttestationFromLog\(\): \(0x80070057\) The parameter is incorrect.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ERROR - PcpToolValidatePlatformAttestation\(\): \(0x80070057\) The parameter is incorrect.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '\*\*\*TEST FAILED\*\*\*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20478 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'StorFirmware%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('StorFirmware%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20478 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20478, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Storage Firmware Update test incorrectly apply to bus type other than SATA, SAS or NVMe', 'Storage Firmware Update test incorrectly apply to bus type other than SATA, SAS or NVMe', 'This is an acceptable failure for all bus type other than SATA, SAS or NVMe. We have a fix in the supplemental pacakge in
http://connect.microsoft.com/site1304/Downloads/DownloadDetails.aspx?DownloadID=62801
However, to make the fix work, you need to create a new project and rerun all the tests. This filter is to unblock the case.', '2030-08-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["Device.Storage.Hd.Iscsi","Device.Storage.Hd.FibreChannel","Device.Storage.Hd.RaidArray","Device.Storage.Hd"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20481 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%d3dconf_12_core.dll%D3DConf_12_0_ResourceCopy::AtomicCopyBufferMisc%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%d3dconf_12_core.dll%D3DConf_12_0_ResourceCopy::AtomicCopyBufferMisc%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20481 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20481, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3D12 - Late Latch Atomic Copy Miscellaneous: TDR/ GPU page-faults during test cases on Tiled Resource Tier 1 GPUs', 'These test cases accidently exercised null tile mappings on tiled resource tier 1 hardware, where the results are specified to be undefined. In actuality, it appears to trigger a GPU page-fault which looks like a TDR and device-removal.', 'The failures from these test cases need to be ignored, as well as failures from TdrWatch. Only NVidia provides tiled resource tier 1 hardware, so the filter is scoped as close to their hardware as possible. This filter only deals with failures from the test cases.', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 OneCore","Windows v10.0 Client x64 RS2 OneCore","Windows v10.0 Client ARM RS2 OneCore","Windows v10.0 Client ARM64 RS2 OneCore","Windows v10.0 Server x64 RS2 OneCore","Windows v10.0 Client x86 RS2 OneCoreUAP","Windows v10.0 Client x64 RS2 OneCoreUAP","Windows v10.0 Client ARM RS2 OneCoreUAP","Windows v10.0 Client ARM64 RS2 OneCoreUAP","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS2 Mobile","Windows v10.0 Client ARM RS2 Mobile","Windows v10.0 Client ARM64 RS2 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceCopy::AtomicCopyBufferMisc#0', 'D3DConf_12_0_ResourceCopy::AtomicCopyBufferMisc#0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error 0x00000000', 'ErrorText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceCopy::AtomicCopyBufferMisc#1', 'D3DConf_12_0_ResourceCopy::AtomicCopyBufferMisc#1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error 0x00000000', 'ErrorText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20517 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% devfund_pnpdtest_wlk_certification.dll /name:PNPDTest::PNPTryStopDeviceAndFailRestart%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% devfund_pnpdtest_wlk_certification.dll /name:PNPDTest::PNPTryStopDeviceAndFailRestart%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20517 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20517, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DF - PNP Rebalance Fail Restart Device Test (Reliability) failed in HLK 1607', '
        The test "DF - PNP Rebalance Fail Restart Device Test (Reliability)" may fail with the following error:

        WDTF_PNP : PNP.RestartDevice() Win32=1 - Incorrect function.
      ', 'This is a false failure, resolved by applying this filter. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) = 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PNPDTest::PNPTryStopDeviceAndFailRestart#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'WDTF_PNP.*PNP.RestartDevice.. Win32.1 . Incorrect function.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20569 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd%TDRWatch.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd%TDRWatch.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20569 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20569, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3D12 - Late Latch Atomic Copy Miscellaneous: TDR/ GPU page-faults during test cases on Tiled Resource Tier 1 GPUs', 'These test cases accidently exercised null tile mappings on tiled resource tier 1 hardware, where the results are specified to be undefined. In actuality, it appears to trigger a GPU page-fault which looks like a TDR and device-removal.', 'The failures from these test cases need to be ignored, as well as failures from TdrWatch. Only NVidia provides tiled resource tier 1 hardware, so the filter is scoped as close to their hardware as possible. This filter only deals with failures from TdrWatch.', '2030-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 OneCore","Windows v10.0 Client x64 RS2 OneCore","Windows v10.0 Client ARM RS2 OneCore","Windows v10.0 Client ARM64 RS2 OneCore","Windows v10.0 Server x64 RS2 OneCore","Windows v10.0 Client x86 RS2 OneCoreUAP","Windows v10.0 Client x64 RS2 OneCoreUAP","Windows v10.0 Client ARM RS2 OneCoreUAP","Windows v10.0 Client ARM64 RS2 OneCoreUAP","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS2 Mobile","Windows v10.0 Client ARM RS2 Mobile","Windows v10.0 Client ARM64 RS2 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TDR_Happened', 'D652CC9A-3A6D-4B8B-9DE5-94E054B9A355', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TDR_Happened', 'TDR_Happened', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'EndTest', '', 'Fail', 'Result', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20687 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'CScript.Exe _WinDir_\System32\WFPLogoSetup.JS -v -nc -nf'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('CScript.Exe _WinDir_\System32\WFPLogoSetup.JS -v -nc -nf')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20687 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20687, 4, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'WindowsFilteringPlatform_Tests failed on Sparta Miniport installation in HLK', 'The test [WindowsFilteringPlatform_Tests] may fail after attempting to install the Sparta miniport interfaces.

Not all of the tasks that are part of the test can be filtered.  If filter 20687 applies to task [Install Sparta MiniPort Interfaces] within test [WindowsFilteringPlatform_Tests], then the entire test result can be considered passing. 

', 'Please reference waiver number 20687 in your submission readme file when submitting for certification. ', '2050-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20725 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Present2.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Present2.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20725 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20725, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Several Present Validation 2 Tests failed due to a timing issue on slow WDDM 1.3 driver', 'There is a timing issue that that test should detect the ''erase'' color and wait for the expected result to show up but the test is not doing this.', 'These failures are acceptable for WDDM 1.3 driver.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/Driver/GraphicsDriverInfo/ModelVersion[contains(.,"1.3")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*Too many overall pixels are different.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*Color balance is way off.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', '.*Local conformance is way off.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20801 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% servercorecheck.dll /name:ServerCoreCheck::ServerCoreCheck::ServerCoreCheckWithRegistry'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% servercorecheck.dll /name:ServerCoreCheck::ServerCoreCheck::ServerCoreCheckWithRegistry')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20801 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20801, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Windows Server 2008 and later Server Core issues', 'The Operate in Server Core Test does not apply to all device categories. ', 'This filter will overturn failures for devices in specific categories.', '2031-01-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":1,"Values":["Device.Graphics.AdapterBase","Device.Streaming.HMFT","Device.Imaging.Printer","Device.Display.Monitor","Device.Streaming.Camera.Base","Device.Audio.Base","Device.Audio.APO","Device.Input.PrecisionTouchpad","Device.Input.Digitizer.PrecisionTouchpad","Device.Imaging.Scanner.Base","Device.Media.DMR.Audio","Device.Portable.MobilePhone","Device.Portable.DigitalCamera","Device.Portable.Core","Device.Input.SmartCardMiniDriver","Device.Connectivity.WSD"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ServerCoreCheck..ServerCoreCheck..ServerCoreCheckWithRegistry', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'System operating in Server', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-01-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20804 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20804 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20804, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wavetest failed on MIDI only device due to no audio related filter exposed', 'Wavetest failed due to MIDI only device', 'This is an acceptable failure.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Server x64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'Failed to load.*\\WaveTest.dll''. \(0x80004005: BuildResourceList failed\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'No test cases were executed.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'The selection criteria did not match any tests.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '\[HRESULT 0x80004005\] Failed to load.*\\WaveTest.dll''. \(BuildResourceList failed\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20839 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgfVidMMWDDM1_2.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgfVidMMWDDM1_2.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20839 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20839, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WGFVidMMWDDM1_2 - UMD Logging tests failing because of no filters (device specific)', 'The WGFVidMMWDDM1_2 - UMD Logging tests are not handling packed surfaces correctly', 'These are an acceptable failures', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002")]) ')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'UMDLogging\\UMDLoggingRenamedSurface', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Allocation has already been mapped', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20871 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgfVidMMWDDM1_2.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgfVidMMWDDM1_2.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20871 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20871, 5, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WGFVidMMWDDM1_2 - UMD Logging tests failing because of no filters due to no logs (device specific)', 'The WGFVidMMWDDM1_2 - UMD Logging tests are not handling packed surfaces correctly', 'These are an acceptable failures', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002")]) ')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20874 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20874 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20874, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - VMQBasicVerification failed Encap test because client does not support Encapsulation (Device Specific)', 'WIN10 client NIC driver does not support and does not advertise encapsulation task offload. Yet NDISTest test sends a filter set request with NDIS_RECEIVE_FILTER_PACKET_ENCAPSULATION_GRE encapsulation flag specified. ', 'This is a device specfic errata.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[
contains(.,"PCI\VEN_14E4&DEV_16C0") or 
contains(.,"PCI\VEN_14E4&DEV_16C8") or 
contains(.,"PCI\VEN_14E4&DEV_16C9") or 
contains(.,"PCI\VEN_14E4&DEV_16CA") or 
contains(.,"PCI\VEN_14E4&DEV_16CC") or 
contains(.,"PCI\VEN_14E4&DEV_16CE") or 
contains(.,"PCI\VEN_14E4&DEV_16CF") or 
contains(.,"PCI\VEN_14E4&DEV_16D0") or 
contains(.,"PCI\VEN_14E4&DEV_16D1") or 
contains(.,"PCI\VEN_14E4&DEV_16D2") or 
contains(.,"PCI\VEN_14E4&DEV_16D4") or 
contains(.,"PCI\VEN_14E4&DEV_16D5") or 
contains(.,"PCI\VEN_14E4&DEV_16D6") or 
contains(.,"PCI\VEN_14E4&DEV_16D7") or 
contains(.,"PCI\VEN_14E4&DEV_16D8") or 
contains(.,"PCI\VEN_14E4&DEV_16D9") or 
contains(.,"PCI\VEN_14E4&DEV_16DE") or 
contains(.,"PCI\VEN_14E4&DEV_16DF") or 
contains(.,"PCI\VEN_14E4&DEV_16E0") or 
contains(.,"PCI\VEN_14E4&DEV_16E2") or 
contains(.,"PCI\VEN_14E4&DEV_16E3") or 
contains(.,"PCI\VEN_14E4&DEV_16E4") or 
contains(.,"PCI\VEN_14E4&DEV_16E7") or 
contains(.,"PCI\VEN_14E4&DEV_16E8") or 
contains(.,"PCI\VEN_14E4&DEV_16E9") or 
contains(.,"PCI\VEN_14E4&DEV_16EA") or 
contains(.,"PCI\VEN_14E4&DEV_16EB") or 
contains(.,"PCI\VEN_14E4&DEV_16EC") or 
contains(.,"PCI\VEN_14E4&DEV_16ED") or 
contains(.,"PCI\VEN_14E4&DEV_16EE") or 
contains(.,"PCI\VEN_14E4&DEV_1614") or 
contains(.,"PCI\VEN_14E4&DEV_16f0") or 
contains(.,"PCI\VEN_14E4&DEV_16f1") or 
contains(.,"PCI\VEN_14E4&DEV_d802") or 
contains(.,"PCI\VEN_14E4&DEV_d804") or 
contains(.,"PCI\VEN_14E4&DEV_16EF")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["14393","15063","16299","17134","17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest:Title=.*Encap.*', '.*Encap.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*Encap.*', 'NDIS_STATUS_INVALID_PARAMETER', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20918 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PNPSurpriseRemoveAndRestartDevice%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PNPSurpriseRemoveAndRestartDevice%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20918 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20918, 5, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'HLK Manual Errata: ''DF - PNP Surprise Remove Device Test (Reliability)'' test fails with bug check 0x7e -  dxgmms2!VIDMM_GLOBAL::SuspendWorkerThread (Device Specific)', 'DF - PNP Surprise Remove Device Test (Reliability) test may fail with bugcheck 0x7E due to an OS issue.', 'Devices that have been verified to be affected by this issue have been added into this errata. ', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/CompatID[(starts-with(.,''PCI\VEN_10DE'') or starts-with(.,''PCI\VEN_1002''))])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Class[. =''Display''])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20919 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%MultiHead.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%MultiHead.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20919 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20919, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata Waiver: MultiHead Support: Multi-head SetCursor regression in OS', 'Changes to the way that D3D9 uses software cursors (to support HiDpi) are causing this test to fail. This is a test bug.', 'Because the test is specifically targetting a D3D9 feature that we are working to deprecate (software cursors are only supported in fullscreen exclusive), the correct fix will be to remove these tests.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'does not match expected color of white', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20923 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%hardwaresecuritytest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%hardwaresecuritytest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20923 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20923, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:Broxton Support in Connected Standby Hardware Security Test', 'Intel Platforms have DMA busses which were not included in the native test list of internal busses.', 'Temporary exception until test is updated.', '2030-08-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 OneCore","Windows v10.0 Client x64 RS2 OneCore","Windows v10.0 Server x64 RS2 OneCore","Windows v10.0 Client x86 RS2 OneCoreUAP","Windows v10.0 Client x64 RS2 OneCoreUAP","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS2 Mobile","Windows v10.0 Client x86 RS3 OneCore","Windows v10.0 Client x64 RS3 OneCore","Windows v10.0 Server x64 RS3 OneCore","Windows v10.0 Client x86 RS3 OneCoreUAP","Windows v10.0 Client x64 RS3 OneCoreUAP","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Server x64 RS3 Full","Windows v10.0 Client x86 RS3 Mobile","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.CS.HardwareSecurity.Tests.ProbeForInsecureDirectMemoryAccessBusses', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*Root.*PCI\\VEN_8086.DEV_5AD[6789AB].*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_5AE8.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_31D[6789AB]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_31E8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_9D8[0123456789ABCDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_9D9[0123456789ABCDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_9DB[0123456789ABCDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A29[0123456789ABCDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A2C[23456789ABCDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A2D[0123456789ABCDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A2E[789ABCDE]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A14[23456789ABCDE]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A15[012345]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A16[789A]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A3[013][01234567890ABCDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A32[CDEF]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_8086&DEV_A34[0123]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20961 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20961 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20961, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3DConf_12_0_ResourceBarrierDepthStencil::DepthWriteStencilRead: Minor hardware failure (already fixed on future hardware)', 'Older nvidia hardware reads stencil to all for channels when read into shader: S,S,S,S rather than 0,S,0,1 for the 4 channels as the spec expects.', 'Contingency for the affected hardware.  It has been fixed for all newer hardware.  Unlikely to affect real applications.', '2025-12-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE'') and (contains(.,''DEV_06D8'') or contains(.,''DEV_0E20'') or contains(.,''DEV_0DC0'') or contains(.,''DEV_0E38'') or contains(.,''DEV_0DD8'') or contains(.,''DEV_0DF8'') or contains(.,''DEV_06C1'') or contains(.,''DEV_06C2'') or contains(.,''DEV_06C3'') or contains(.,''DEV_06D1'') or contains(.,''DEV_06CA'') or contains(.,''DEV_0EB8'') or contains(.,''DEV_1040'') or contains(.,''DEV_06DD'') or contains(.,''DEV_06DE'') or contains(.,''DEV_1080'') or contains(.,''DEV_1058'') or contains(.,''DEV_0E30'') or contains(.,''DEV_0DE1'') or contains(.,''DEV_0DE2'') or contains(.,''DEV_0DF0'') or contains(.,''DEV_0DFE'') or contains(.,''DEV_0E21'') or contains(.,''DEV_0E22'') or contains(.,''DEV_0E24'') or contains(.,''DEV_0E3E'') or contains(.,''DEV_0DC2'') or contains(.,''DEV_0DDE'') or contains(.,''DEV_0DDF'') or contains(.,''DEV_1089'') or contains(.,''DEV_0DD0'') or contains(.,''DEV_0DD2'') or contains(.,''DEV_0DD3'') or contains(.,''DEV_1070'') or contains(.,''DEV_1078'') or contains(.,''DEV_0DCA'') or contains(.,''DEV_0DC5'') or contains(.,''DEV_0DEE'') or contains(.,''DEV_0DCF'') or contains(.,''DEV_0DF4'') or contains(.,''DEV_0DD1'') or contains(.,''DEV_0E31'') or contains(.,''DEV_0E32'') or contains(.,''DEV_0DCC'') or contains(.,''DEV_0DCD'') or contains(.,''DEV_0DCE'') or contains(.,''DEV_0E3A'') or contains(.,''DEV_1081'') or contains(.,''DEV_1082'') or contains(.,''DEV_1083'') or contains(.,''DEV_11B0'') or contains(.,''DEV_1054'') or contains(.,''DEV_127F'') or contains(.,''DEV_06DC'') or contains(.,''DEV_06DF'') or contains(.,''DEV_0DEB'') or contains(.,''DEV_107E'') or contains(.,''DEV_0DEA'') or contains(.,''DEV_0DEC'') or contains(.,''DEV_0DED'') or contains(.,''DEV_0DC6'') or contains(.,''DEV_107F'') or contains(.,''DEV_109A'') or contains(.,''DEV_06CB'') or contains(.,''DEV_1057'') or contains(.,''DEV_0DD6'') or contains(.,''DEV_121F'') or contains(.,''DEV_0FF0'') or contains(.,''DEV_107D'') or contains(.,''DEV_1084'') or contains(.,''DEV_1086'') or contains(.,''DEV_1244'') or contains(.,''DEV_0E28'') or contains(.,''DEV_1030'') or contains(.,''DEV_1211'') or contains(.,''DEV_1201'') or contains(.,''DEV_1243'') or contains(.,''DEV_1205'') or contains(.,''DEV_109B'') or contains(.,''DEV_1088'') or contains(.,''DEV_0DF9'') or contains(.,''DEV_1212'') or contains(.,''DEV_11A0'') or contains(.,''DEV_0E23'') or contains(.,''DEV_0E3F'') or contains(.,''DEV_0DDA'') or contains(.,''DEV_120D'') or contains(.,''DEV_1091'') or contains(.,''DEV_1202'') or contains(.,''DEV_0FA0'') or contains(.,''DEV_1041'') or contains(.,''DEV_0DE8'') or contains(.,''DEV_1146'') or contains(.,''DEV_0FD4'') or contains(.,''DEV_0FD1'') or contains(.,''DEV_0FFB'') or contains(.,''DEV_1213'') or contains(.,''DEV_06DA'') or contains(.,''DEV_06CD'') or contains(.,''DEV_0E25'') or contains(.,''DEV_0DF6'') or contains(.,''DEV_0DF7'') or contains(.,''DEV_1240'') or contains(.,''DEV_1218'') or contains(.,''DEV_0E0D'') or contains(.,''DEV_1143'') or contains(.,''DEV_114A'') or contains(.,''DEV_0FD3'') or contains(.,''DEV_06C4'') or contains(.,''DEV_06C5'') or contains(.,''DEV_06C6'') or contains(.,''DEV_06C7'') or contains(.,''DEV_06C8'') or contains(.,''DEV_06C9'') or contains(.,''DEV_06D9'') or contains(.,''DEV_06D0'') or contains(.,''DEV_1098'') or contains(.,''DEV_1050'') or contains(.,''DEV_108F'') or contains(.,''DEV_1090'') or contains(.,''DEV_1096'') or contains(.,''DEV_1142'') or contains(.,''DEV_0DE4'') or contains(.,''DEV_0DC4'') or contains(.,''DEV_06D2'') or contains(.,''DEV_1051'') or contains(.,''DEV_0DFC'') or contains(.,''DEV_0DF1'') or contains(.,''DEV_0DF2'') or contains(.,''DEV_0DF3'') or contains(.,''DEV_1170'') or contains(.,''DEV_0DFA'') or contains(.,''DEV_1258'') or contains(.,''DEV_0DD9'') or contains(.,''DEV_108E'') or contains(.,''DEV_1147'') or contains(.,''DEV_0FD2'') or contains(.,''DEV_104F'') or contains(.,''DEV_11BC'') or contains(.,''DEV_11BD'') or contains(.,''DEV_1059'') or contains(.,''DEV_11AA'') or contains(.,''DEV_11BB'') or contains(.,''DEV_1087'') or contains(.,''DEV_11B1'') or contains(.,''DEV_06DB'') or contains(.,''DEV_1048'') or contains(.,''DEV_11BA'') or contains(.,''DEV_0FA7'') or contains(.,''DEV_11A4'') or contains(.,''DEV_11A3'') or contains(.,''DEV_1189'') or contains(.,''DEV_11A5'') or contains(.,''DEV_124B'') or contains(.,''DEV_0DE6'') or contains(.,''DEV_11BF'') or contains(.,''DEV_118F'') or contains(.,''DEV_0FCB'') or contains(.,''DEV_104A'') or contains(.,''DEV_0FEF'') or contains(.,''DEV_11E2'') or contains(.,''DEV_11C3'') or contains(.,''DEV_0FD9'') or contains(.,''DEV_0FF9'') or contains(.,''DEV_12AF'') or contains(.,''DEV_0DE3'') or contains(.,''DEV_119F'') or contains(.,''DEV_12B1'') or contains(.,''DEV_118B'') or contains(.,''DEV_0FE5'') or contains(.,''DEV_0FF7'') or contains(.,''DEV_12AD'') or contains(.,''DEV_13BF'') or contains(.,''DEV_12AE'') or contains(.,''DEV_104B'') or contains(.,''DEV_12BA'') or contains(.,''DEV_0FF6'') or contains(.,''DEV_1290'') or contains(.,''DEV_1292'') or contains(.,''DEV_1004'') or contains(.,''DEV_103B'') or contains(.,''DEV_1021'') or contains(.,''DEV_11D1'') or contains(.,''DEV_11FC'') or contains(.,''DEV_11A7'') or contains(.,''DEV_12A0'') or contains(.,''DEV_11B7'') or contains(.,''DEV_0FE1'') or contains(.,''DEV_0FE7'') or contains(.,''DEV_0FF5'') or contains(.,''DEV_1291'') or contains(.,''DEV_1282'') or contains(.,''DEV_1293'') or contains(.,''DEV_0FE9'') or contains(.,''DEV_0FE8'') or contains(.,''DEV_0FEA'') or contains(.,''DEV_119D'') or contains(.,''DEV_103A'') or contains(.,''DEV_0FCD'') or contains(.,''DEV_1192'') or contains(.,''DEV_1024'') or contains(.,''DEV_1023'') or contains(.,''DEV_11AC'') or contains(.,''DEV_102A'') or contains(.,''DEV_102B'') or contains(.,''DEV_1284'') or contains(.,''DEV_100A'') or contains(.,''DEV_118E'') or contains(.,''DEV_102C'') or contains(.,''DEV_17BF'') or contains(.,''DEV_1781'') or contains(.,''DEV_17BE'') or contains(.,''DEV_1780'') or contains(.,''DEV_17B0'') or contains(.,''DEV_1782'') or contains(.,''DEV_1298'') or contains(.,''DEV_1199'') or contains(.,''DEV_13AD'') or contains(.,''DEV_1193'') or contains(.,''DEV_0DE7'') or contains(.,''DEV_1191'') or contains(.,''DEV_1022'') or contains(.,''DEV_11C0'') or contains(.,''DEV_11C1'') or contains(.,''DEV_11D0'') or contains(.,''DEV_11D2'') or contains(.,''DEV_11E0'') or contains(.,''DEV_11E1'') or contains(.,''DEV_11C2'') or contains(.,''DEV_11B8'') or contains(.,''DEV_0FE3'') or contains(.,''DEV_105B'') or contains(.,''DEV_12B9'') or contains(.,''DEV_1026'') or contains(.,''DEV_1001'') or contains(.,''DEV_1027'') or contains(.,''DEV_100B'') or contains(.,''DEV_1381'') or contains(.,''DEV_1392'') or contains(.,''DEV_1792'') or contains(.,''DEV_13AE'') or contains(.,''DEV_11C8'') or contains(.,''DEV_104C'') or contains(.,''DEV_102F'') or contains(.,''DEV_11B4'') or contains(.,''DEV_1195'') or contains(.,''DEV_11AF'') or contains(.,''DEV_0FC8'') or contains(.,''DEV_0FF3'') or contains(.,''DEV_13D8'') or contains(.,''DEV_13D9'') or contains(.,''DEV_1600'') or contains(.,''DEV_1638'') or contains(.,''DEV_163A'') or contains(.,''DEV_103F'') or contains(.,''DEV_0FED'') or contains(.,''DEV_13BD'') or contains(.,''DEV_142E'') or contains(.,''DEV_107C'') or contains(.,''DEV_1294'') or contains(.,''DEV_1390'') or contains(.,''DEV_0FEC'') or contains(.,''DEV_1194'') or contains(.,''DEV_13BB'') or contains(.,''DEV_17BB'') or contains(.,''DEV_13C0'') or contains(.,''DEV_13FE'') or contains(.,''DEV_1401'') or contains(.,''DEV_13C4'') or contains(.,''DEV_140F'') or contains(.,''DEV_1400'') or contains(.,''DEV_13B2'') or contains(.,''DEV_17BC'') or contains(.,''DEV_17B1'') or contains(.,''DEV_17B2'') or contains(.,''DEV_1404'') or contains(.,''DEV_13DA'') or contains(.,''DEV_0FC9'') or contains(.,''DEV_1613'') or contains(.,''DEV_13F3'') or contains(.,''DEV_1614'') or contains(.,''DEV_1646'') or contains(.,''DEV_119E'') or contains(.,''DEV_1295'') or contains(.,''DEV_101E'') or contains(.,''DEV_13FF'') or contains(.,''DEV_13BE'') or contains(.,''DEV_1383'') or contains(.,''DEV_1790'') or contains(.,''DEV_1382'') or contains(.,''DEV_1296'') or contains(.,''DEV_13F0'') or contains(.,''DEV_13F1'') or contains(.,''DEV_1601'') or contains(.,''DEV_1602'') or contains(.,''DEV_1630'') or contains(.,''DEV_1639'') or contains(.,''DEV_13F2'') or contains(.,''DEV_13B9'') or contains(.,''DEV_1667'') or contains(.,''DEV_1384'') or contains(.,''DEV_1406'') or contains(.,''DEV_139D'') or contains(.,''DEV_1431'') or contains(.,''DEV_1403'') or contains(.,''DEV_1407'') or contains(.,''DEV_0F03'') or contains(.,''DEV_179C'') or contains(.,''DEV_1408'') or contains(.,''DEV_1029'') or contains(.,''DEV_1380'') or contains(.,''DEV_1198'') or contains(.,''DEV_1617'') or contains(.,''DEV_13E5'') or contains(.,''DEV_1289'') or contains(.,''DEV_13BC'') or contains(.,''DEV_1644'') or contains(.,''DEV_1648'') or contains(.,''DEV_13FB'') or contains(.,''DEV_13B4'') or contains(.,''DEV_13B6'') or contains(.,''DEV_1391'') or contains(.,''DEV_1791'') or contains(.,''DEV_13AF'') or contains(.,''DEV_17BA'') or contains(.,''DEV_13C2'') or contains(.,''DEV_139A'') or contains(.,''DEV_1671'') or contains(.,''DEV_163B'') or contains(.,''DEV_1436'') or contains(.,''DEV_1783'') or contains(.,''DEV_102D'') or contains(.,''DEV_17B3'') or contains(.,''DEV_11AD'') or contains(.,''DEV_13D7'') or contains(.,''DEV_1631'') or contains(.,''DEV_104D'') or contains(.,''DEV_1402'') or contains(.,''DEV_139E'') or contains(.,''DEV_0FD6'') or contains(.,''DEV_0FD7'') or contains(.,''DEV_0FC0'') or contains(.,''DEV_0FC1'') or contains(.,''DEV_0FC2'') or contains(.,''DEV_0FC4'') or contains(.,''DEV_0FDD'') or contains(.,''DEV_0FDE'') or contains(.,''DEV_0FD0'') or contains(.,''DEV_06C0'') or contains(.,''DEV_0DE0'') or contains(.,''DEV_0DFF'') or contains(.,''DEV_0DC1'') or contains(.,''DEV_1055'') or contains(.,''DEV_1200'') or contains(.,''DEV_1056'') or contains(.,''DEV_1241'') or contains(.,''DEV_0DF5'') or contains(.,''DEV_123F'') or contains(.,''DEV_0E3B'') or contains(.,''DEV_1250'') or contains(.,''DEV_1210'') or contains(.,''DEV_1245'') or contains(.,''DEV_1094'') or contains(.,''DEV_109F'') or contains(.,''DEV_1093'') or contains(.,''DEV_1251'') or contains(.,''DEV_124D'') or contains(.,''DEV_1248'') or contains(.,''DEV_1247'') or contains(.,''DEV_1246'') or contains(.,''DEV_0DE5'') or contains(.,''DEV_1042'') or contains(.,''DEV_1052'') or contains(.,''DEV_11F0'') or contains(.,''DEV_0CE0'') or contains(.,''DEV_1203'') or contains(.,''DEV_0DE9'') or contains(.,''DEV_1145'') or contains(.,''DEV_1144'') or contains(.,''DEV_1141'') or contains(.,''DEV_11A1'') or contains(.,''DEV_0DEF'') or contains(.,''DEV_11BE'') or contains(.,''DEV_0FFC'') or contains(.,''DEV_114B'') or contains(.,''DEV_1149'') or contains(.,''DEV_1150'') or contains(.,''DEV_1180'') or contains(.,''DEV_1183'') or contains(.,''DEV_108B'') or contains(.,''DEV_108C'') or contains(.,''DEV_0E16'') or contains(.,''DEV_1206'') or contains(.,''DEV_0FDC'') or contains(.,''DEV_0DC7'') or contains(.,''DEV_1249'') or contains(.,''DEV_0FD5'') or contains(.,''DEV_0FFD'') or contains(.,''DEV_0FC6'') or contains(.,''DEV_0FD8'') or contains(.,''DEV_0FDA'') or contains(.,''DEV_0FDB'') or contains(.,''DEV_0FDF'') or contains(.,''DEV_0FFA'') or contains(.,''DEV_0FFE'') or contains(.,''DEV_0FFF'') or contains(.,''DEV_0FE0'') or contains(.,''DEV_0FC7'') or contains(.,''DEV_1182'') or contains(.,''DEV_1140'') or contains(.,''DEV_0FCA'') or contains(.,''DEV_105A'') or contains(.,''DEV_12B0'') or contains(.,''DEV_1188'') or contains(.,''DEV_0E3C'') or contains(.,''DEV_0FCF'') or contains(.,''DEV_1049'') or contains(.,''DEV_11A2'') or contains(.,''DEV_0FCE'') or contains(.,''DEV_11F8'') or contains(.,''DEV_1207'') or contains(.,''DEV_1208'') or contains(.,''DEV_0FF1'') or contains(.,''DEV_0F00'') or contains(.,''DEV_0F01'') or contains(.,''DEV_1020'') or contains(.,''DEV_1003'') or contains(.,''DEV_1187'') or contains(.,''DEV_1185'') or contains(.,''DEV_11C4'') or contains(.,''DEV_11FA'') or contains(.,''DEV_0FF8'') or contains(.,''DEV_0FF2'') or contains(.,''DEV_13B0'') or contains(.,''DEV_118A'') or contains(.,''DEV_11B6'') or contains(.,''DEV_0FE2'') or contains(.,''DEV_0FE4'') or contains(.,''DEV_118C'') or contains(.,''DEV_118D'') or contains(.,''DEV_1028'') or contains(.,''DEV_0FE6'') or contains(.,''DEV_11C6'') or contains(.,''DEV_1280'') or contains(.,''DEV_11D3'') or contains(.,''DEV_101F'') or contains(.,''DEV_0FC5'') or contains(.,''DEV_1281'') or contains(.,''DEV_11E3'') or contains(.,''DEV_1283'') or contains(.,''DEV_1285'') or contains(.,''DEV_11FF'') or contains(.,''DEV_1184'') or contains(.,''DEV_1005'') or contains(.,''DEV_119A'') or contains(.,''DEV_100C'') or contains(.,''DEV_1393'') or contains(.,''DEV_1389'') or contains(.,''DEV_1286'') or contains(.,''DEV_102E'') or contains(.,''DEV_11C5'') or contains(.,''DEV_103C'') or contains(.,''DEV_1398'') or contains(.,''DEV_13BA'') or contains(.,''DEV_13B3'') or contains(.,''DEV_11AE'') or contains(.,''DEV_1287'') or contains(.,''DEV_1288'') or contains(.,''DEV_1789'') or contains(.,''DEV_13C1'') or contains(.,''DEV_13F8'') or contains(.,''DEV_13F9'') or contains(.,''DEV_13FA'') or contains(.,''DEV_1618'') or contains(.,''DEV_1619'') or contains(.,''DEV_1007'') or contains(.,''DEV_1008'') or contains(.,''DEV_0F02'') or contains(.,''DEV_13C3'') or contains(.,''DEV_1603'') or contains(.,''DEV_13E7'') or contains(.,''DEV_13E8'') or contains(.,''DEV_13E4'') or contains(.,''DEV_17BD'') or contains(.,''DEV_1299'') or contains(.,''DEV_129A'') or contains(.,''DEV_139B'') or contains(.,''DEV_1641'') or contains(.,''DEV_143E'') or contains(.,''DEV_1632'') or contains(.,''DEV_142F'') or contains(.,''DEV_1642'') or contains(.,''DEV_1604'') or contains(.,''DEV_1399'') or contains(.,''DEV_139C'') or contains(.,''DEV_13B1'') or contains(.,''DEV_13B5'') or contains(.,''DEV_161A'') or contains(.,''DEV_0FCC'') or contains(.,''DEV_1427'') or contains(.,''DEV_11CB'') or contains(.,''DEV_129B'') or contains(.,''DEV_0FEE'') or contains(.,''DEV_128A'') or contains(.,''DEV_128B'') or contains(.,''DEV_1430'') or contains(.,''DEV_1670'') or contains(.,''DEV_1297'') or contains(.,''DEV_143F'') or contains(.,''DEV_11C7'') or contains(.,''DEV_17B4'') or contains(.,''DEV_17B6'') or contains(.,''DEV_1676'') or contains(.,''DEV_179E'') or contains(.,''DEV_17C2''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceBarrierDepthStencil::DepthWriteStencilRead', 'D3DConf_12_0_ResourceBarrierDepthStencil::DepthWriteStencilRead', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 20964 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20964 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(20964, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: NVMe Scsi Compliance Test expects the wrong length for NGUID-based serial numbers', 'PAGE LENGTH shall be set to 40 indicating the page length in bytes. PRODUCT SERIAL NUMBER shall be set to a 40 byte value by translating the NGUID field of the Identify Namespace Data Structure.', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: INQUIRY Attempting Unit Serial Number Page 0x80', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Unit serial number page length shall be set to either 20 for EUI64 or 36 for NGUID. Actual=40', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: INQUIRY Attempting Unit Serial Number Page 0x80', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', '"Page Length" = 0x28', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Unit serial number page length shall be set to 20', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: INQUIRY Attempting Unit Serial Number Page 0x80', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', '"Page Length" = 0x1e', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Unit serial number page length shall be set to 20', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21012 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%nvmeshim.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%nvmeshim.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21012 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21012, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS1 Errata: NVMe Device Capabilities Test fails on NVMe 1.2 compliant devices due to inactive namespaces.', 'NVMe Device Capabilities Test fails on NVMe 1.2 compliant devices due to inactive namespaces.', 'This issue is fixed in the next release', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Controller Identify Namespace Data', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'LBADS of either 512 or 4KB must be supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Assertion: Controller Identify Data', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', '"Secure Erase shall be per namespace"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21134 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ndklogo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ndklogo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21134 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21134, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: Driver incorrectly interprets the "Connect" and "Accept" members of NDIS_NDK_PERFORMANCE_COUNTERS structure (Driver Specific)', 'Driver incorrectly interprets the "Connect" and "Accept" members of NDIS_NDK_PERFORMANCE_COUNTERS structure', 'This is an acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"CHT6BUS\chnet")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NDK Logo Provider Interface\\Local end reject connection after remote end accepts connection', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdkLogoConnector_ErrorCases: Performance counter Accept not incremented after successful NdkAccept. ', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NDK Logo Provider Interface\\Verify NdkCompleteConnect fails with STATUS_CONNECTION_INVALID', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NDK Logo Provider Interface\\Verify reject fails with STATUS_CONNECTION_ABORTED', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21172 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'crashdumptest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('crashdumptest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21172 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21172, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS2 Errata: Crashdump Support Test (Logo) test failure due to debug engine shipping with the HLK can’t read the new dump file format', 'Crashdump Support Test (Logo) test failure due to debug engine shipping with the HLK can’t read the new dump file format', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Display Stack Test', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21393 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21393 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21393, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TestFlipModes failure on pre-WDDM 2.2 drivers', 'TestFlipModes incorrectly fails on pre-WDDM 2.2 devices during the test case TestFlipModes.', 'For pre-WDDM 2.2 drivers, this is an acceptable failure. ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/Driver/GraphicsDriverInfo/ModelVersion[contains(.,''2.1'') or contains(.,''2.0'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VidMm::ConfigurableWorkloadTest::FlipModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*Test Host Process could not be reached.*It has terminated with an exit code of.*The message to invoke a test operation was not properly handled by the host process.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual\(frameStats.PresentCount . previousPresentCount. listenerContext.*stableFrameRate\) - Values \(1, 2\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21396 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%tpmattestation.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%tpmattestation.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21396 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21396, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS1 Errata: Failing the TPM Attestation test on RS1 due to problems with the test and passing with RS2', 'HLK RS1 Errata: Failing the TPM Attestation test on RS1 due to problems with the test and passing with RS2', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WHCK.TPM.Attestation.TpmAttestation.RunAttestationCmd', 'WHCK.TPM.Attestation.TpmAttestation.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'ERROR - PcpToolEnumerateKey\(\): \(0x80090016\) Keyset does not exist', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*\*\*TEST FAILED\*\*\*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WHCK.TPM.Attestation.TpmAttestation.RunAttestationCmd', 'WHCK.TPM.Attestation.TpmAttestation.RunAttestationCmd', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR - PcpToolValidatePlatformAttestation\(\): \(0x80004005\) Unspecified error', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '\*\*\*TEST FAILED\*\*\*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WHCK.TPM.Attestation.TpmAttestation.RunTrustPointValidationCmd', 'WHCK.TPM.Attestation.TpmAttestation.RunTrustPointValidationCmd', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR - PcpToolCreatePlatformAttestationFromLog\(\): \(0x80004005\) Unspecified error', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '\*\*\*TEST FAILED\*\*\*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21399 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21399 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21399, 4, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'TestFlipModes failure on specific devices.', 'Hardware specific contingency', 'This is an acceptable failure. ', '2034-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_DISPLAY'']/InstanceID[contains(.,''PCI\VEN_10DE'')])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_RENDER'']/InstanceID[contains(.,''PCI\VEN_10DE'')])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_OTHER'']/InstanceID[contains(.,''PCI\VEN_10DE'')] or DISPLAY_BLOCK/Device/InstanceID[contains(.,''PCI\VEN_10DE&DEV_15F8'')] or DISPLAY_BLOCK/Device/InstanceID[contains(.,''PCI\VEN_10DE&DEV_15F9'')] or DISPLAY_BLOCK/Device/InstanceID[contains(.,''PCI\VEN_10DE&DEV_1B38'')] or DISPLAY_BLOCK/Device/InstanceID[contains(.,''PCI\VEN_10DE&DEV_1BB3'')] or DISPLAY_BLOCK/Device/InstanceID[contains(.,''PCI\VEN_10DE&DEV_1BB4'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/DriverVersion[number(concat(substring(., string-length(.) -5, 1), substring(., string-length(.) -3, 2))) <= 386]) and boolean(Devnode/DeviceID[contains(., ''VEN_10DE'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VidMm::ConfigurableWorkloadTest::FlipModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*Test Host Process could not be reached.*It has terminated with an exit code of.*The message to invoke a test operation was not properly handled by the host process.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual\(frameStats.PresentCount . previousPresentCount. listenerContext.*stableFrameRate\) - Values \(1, 2\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2034-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21488 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestDesktop::* /p:"TestRequiresMultipleOutputs=[TestRequiresMultipleOutputs]"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestDesktop::* /p:"TestRequiresMultipleOutputs=[TestRequiresMultipleOutputs]"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21488 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21488, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'iFlip Present Desktop: Ignore "IsTrue(presentStats_3): Last fame was unexpectedly not using iFlip. In this scenario, the cursor was enabled and a source rect was set." errors', 'Errors containing "IsTrue(presentStats_3): Last fame was unexpectedly not using iFlip. In this scenario, the cursor was enabled and a source rect was set." should be ignored (errated). If that error is present, "IsFalse(EtwWatcher-&gt;GetExitiFlipSignaled()): iFlip was unexpectedly exited during the test case." should also be ignored. Other errors in the test cases should NOT be ignored.
', 'Filter will overturn the appropriate failures. 
      ', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Error:UserText=IsTrue\(presentStats_3\): Last fame was unexpectedly not using iFlip. In this scenario, the cursor was enabled and a source rect was set.', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsFalse\(EtwWatcher-.*GetExitiFlipSignaled\(\)\): iFlip was unexpectedly exited during the test case.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'IsTrue\(presentStats_3\): Last fame was unexpectedly not using iFlip. In this scenario, the cursor was enabled and a source rect was set.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21550 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11resourceaccess.exe [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11resourceaccess.exe [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21550 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21550, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WGF11ResourceAccess fails due to d3ddriververifier.dll regression ', 'd3ddriververifier.dll is unable to retrieve sub objects. Tests running with d3ddriververifier enabled that require video (which is a subobject) will fail', 'This is fixed in the next release', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'QueryInterface failed', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21572 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11resourceaccess.exe [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11resourceaccess.exe [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21572 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21572, 2, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK Errata: WGF11ResourceAccess fails due to d3ddriververifier.dll regression (covers blocked tests)', 'd3ddriververifier.dll is unable to retrieve sub objects. Tests running with d3ddriververifier enabled that require video (which is a subobject) will fail', 'This is fixed in the next release', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'QueryInterface failed', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21583 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%iFlipPresentTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%iFlipPresentTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21583 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21583, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'iFlip test has "Driver is setting Stretch/Shrink factors without indicating RGB or YUV stretch support" errors', 'These specific "Driver is setting Stretch/Shrink factors without indicating RGB or YUV stretch support" error should be disregarded. Other errors should still be investigated.', 'This is an acceptable failure at this time.', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'iFlipPresentTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Driver is setting Stretch/Shrink factors without indicating RGB or YUV stretch support', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21587 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'configdisplay.exe -d2'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('configdisplay.exe -d2')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21587 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21587, 3, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'DXGI Presentation Rate Testing: Sometimes warnings in task "Execute ConfigDisplay to disable 2nd dispaly if enabled" show as failures', 'DXGI Presentation Rate Testing: Sometimes warnings in task "Execute ConfigDisplay to disable 2nd dispaly if enabled" show as failures', 'This filter will resolve the issue. ', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063","10.1.16299","10.1.17134","10.1.17763"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ConfigDisplay', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', '', 'Error: Device .* is already disabled.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21623 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21623 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21623, 5, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'TestFlipModes failures:  Hardware specific contingency', 'Older AMD WDDM 2.2 capable GPUs have a defect that prevents this feature from being supported correctly. ', 'Future release of the hardware should address this issue properly.', '2025-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/CompatID[(string-length(.) = 21) and (starts-with(.,''PCI\VEN_1002'')) and (contains(.,''DEV_6860'') or contains(.,''DEV_687F'') or contains(.,''DEV_9550'') or contains(.,''DEV_6861'') or contains(.,''DEV_9100'') or contains(.,''DEV_6862'') or contains(.,''DEV_6863'') or contains(.,''DEV_6864'') or contains(.,''DEV_6867'') or contains(.,''DEV_6868'') or contains(.,''DEV_8100'') or contains(.,''DEV_686C'') or contains(.,''6790'') or contains(.,''699F'') or contains(.,''6981'')  or contains(.,''6987'')  or contains(.,''699F'')  or contains(.,''6980'')  or contains(.,''6985'')  or contains(.,''6986'')  or contains(.,''6995'')  or contains(.,''6997'') or contains(.,''6792'') or contains(.,''6798'') or contains(.,''6799'') or contains(.,''679A'') or contains(.,''679B'') or contains(.,''679E'') or contains(.,''6806'') or contains(.,''6808'') or contains(.,''6809'') or contains(.,''6810'') or contains(.,''6811'') or contains(.,''6818'') or contains(.,''6819'') or contains(.,''6828'') or contains(.,''6835'') or contains(.,''6837'') or contains(.,''6838'') or contains(.,''6839'') or contains(.,''683B'') or contains(.,''683D'') or contains(.,''683F'') or contains(.,''6800'') or contains(.,''6801'') or contains(.,''6820'') or contains(.,''6821'') or contains(.,''6822'') or contains(.,''6823'') or contains(.,''6824'') or contains(.,''6825'') or contains(.,''6826'') or contains(.,''6827'') or contains(.,''682A'') or contains(.,''682B'') or contains(.,''682C'') or contains(.,''682D'') or contains(.,''682F'') or contains(.,''6830'') or contains(.,''6831'') or contains(.,''684C'') or contains(.,''6780'') or contains(.,''6784'') or contains(.,''6788'') or contains(.,''678A'') or contains(.,''1305'') or contains(.,''1306'') or contains(.,''1307'') or contains(.,''1309'') or contains(.,''130A'') or contains(.,''130C'') or contains(.,''130D'') or contains(.,''130E'') or contains(.,''130F'') or contains(.,''1310'') or contains(.,''1311'') or contains(.,''1313'') or contains(.,''1315'') or contains(.,''1318'') or contains(.,''131C'') or contains(.,''131D'') or contains(.,''130B'') or contains(.,''1312'') or contains(.,''1316'') or contains(.,''1317'') or contains(.,''131B'') or contains(.,''9830'') or contains(.,''9831'') or contains(.,''9832'') or contains(.,''9833'') or contains(.,''9834'') or contains(.,''9835'') or contains(.,''9836'') or contains(.,''9837'') or contains(.,''9838'') or contains(.,''9839'') or contains(.,''983D'') or contains(.,''9850'') or contains(.,''9851'') or contains(.,''9852'') or contains(.,''9853'') or contains(.,''9854'') or contains(.,''9855'') or contains(.,''9856'') or contains(.,''9857'') or contains(.,''9858'') or contains(.,''9859'') or contains(.,''985A'') or contains(.,''985B'') or contains(.,''985C'') or contains(.,''985D'') or contains(.,''985E'') or contains(.,''985F'') or contains(.,''9920'') or contains(.,''9922'') or contains(.,''9923'') or contains(.,''9924'') or contains(.,''6610'') or contains(.,''6611'') or contains(.,''6613'') or contains(.,''6617'') or contains(.,''6631'') or contains(.,''6650'') or contains(.,''6651'') or contains(.,''6658'') or contains(.,''665C'') or contains(.,''665D'') or contains(.,''665F'') or contains(.,''6600'') or contains(.,''6601'') or contains(.,''6602'') or contains(.,''6603'') or contains(.,''6606'') or contains(.,''6607'') or contains(.,''6620'') or contains(.,''6621'') or contains(.,''6623'') or contains(.,''6604'') or contains(.,''6605'') or contains(.,''6646'') or contains(.,''6647'') or contains(.,''6640'') or contains(.,''6641'') or contains(.,''6660'') or contains(.,''6663'') or contains(.,''6664'') or contains(.,''6665'') or contains(.,''6667'') or contains(.,''666F'') or contains(.,''6608'') or contains(.,''6649'') or contains(.,''7300'') or contains(.,''9874'') or contains(.,''98C0'') or contains(.,''98CD'') or contains(.,''98E4'') or contains(.,''67A2'') or contains(.,''67B0'') or contains(.,''67B1'') or contains(.,''67B8'') or contains(.,''67B9'') or contains(.,''67BA'') or contains(.,''67BE'') or contains(.,''6930'') or contains(.,''6938'') or contains(.,''6939'') or contains(.,''6900'') or contains(.,''6901'') or contains(.,''6902'') or contains(.,''6903'') or contains(.,''6907'') or contains(.,''6920'') or contains(.,''6921'') or contains(.,''67A0'') or contains(.,''67A1'') or contains(.,''6929'') or contains(.,''692B'') or contains(.,''692F'') or contains(.,''67DF'') or contains(.,''67EF'') or contains(.,''67FF'') or contains(.,''67C0'') or contains(.,''67C1'') or contains(.,''67C2'') or contains(.,''67C4'') or contains(.,''67C7'') or contains(.,''67E0'') or contains(.,''67E3'') or contains(.,''67E8'') or contains(.,''67EB'') or contains(.,''694C'') or contains(.,''694E''))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VidMm::ConfigurableWorkloadTest::FlipModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*Test Host Process could not be reached.*It has terminated with an exit code of.*The message to invoke a test operation was not properly handled by the host process.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual\(frameStats.PresentCount . previousPresentCount. listenerContext.*stableFrameRate\) - Values \(1, 2\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21636 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[[]queryTestDeviceID] /script:{[[]TestScript]}%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[[]queryTestDeviceID] /script:{[[]TestScript]}%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21636 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21636, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: NDISTest 6.0 - [1 Machine] - 1c_OidsWMI on an RNDIS 6 driver', 'HLK Errata: NDISTest 6.0 - [1 Machine] - 1c_OidsWMI on an RNDIS 6 driver

', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"USB\VID_17EF&PID_B001")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '1c_oidswmi', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying GUID for all adapters', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Call to WmiQuerySingleInstance failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying GUID for all adapters', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Call to WmiQueryAllData failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying GUID for this adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Call to WmiQuerySingleInstance failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying GUID for this adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Call to WmiQueryAllData failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21882 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21882 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21882, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK2.1: TPM Attestation Test Fails', 'ERROR - PcpToolValidatePlatformAttestation(): (0x80070057) The parameter is incorrect.', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WHCK.TPM.Attestation.TpmAttestation.RunAttestationCmd', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'ERROR - PcpToolValidatePlatformAttestation\(\): \(0x80070057\) The parameter is incorrect.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WHCK.TPM.Attestation.TpmAttestation.RunTrustPointValidationCmd', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'ERROR - PcpToolValidatePlatformAttestation\(\): \(0x80070057\) The parameter is incorrect.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21885 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21885 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21885, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK:NDISTest 6.5 - [1 Machine] - PM_Requirements fails due to the RNDIS miniport NDIS 6.0 driver doesn’t support SS but states it is NDIS 6.30.', 'When run "NDISTest 6.5 - [1 Machine] - PM_Requirements" on a RNDIS USB device which loads the inbox driver pair: rndismp6.sys and usb80236.sys in Windows 8 and later system, the test case may fail due to the rndismp6.sys and usb80236.sys do not support "NDIS No Pause On Suspend" and "NDIS Selective Suspend" but states it is a NDIS 6.30 driver.', 'The failure is an acceptable failure at this time.', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"USB\VID_17EF&PID_B001")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Verify USB Selective Suspend for RNDIS', 'Verify USB Selective Suspend for Lenovo XCC USB Remote NDIS Network Device', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Verify USB Selective Suspend for RNDIS', '.*does not indicate support for USB Selective Suspend.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21891 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestDesktop::* /p:"TestRequiresMultipleOutputs=%TestRequiresMultipleOutputs%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestDesktop::* /p:"TestRequiresMultipleOutputs=%TestRequiresMultipleOutputs%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21891 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21891, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Test [iFlip Present Desktop - Multihead (Requires 2+ monitors)]  errors ', 'This issue is caused by an OS bug in RS2 that can be worked around in the graphics driver.  This delayed enforcement errata will provide a window of time for partners to implement and validate the workaround.

The bug is fixed in RS3. ', 'The failures are temporarily waived to give partners time to implement and test a workaround.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''PCI\VEN_1002'')]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*iFlipPresentTestDesktop.*export1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(presentStats_1\): Last fame was unexpectedly not using iFlip. In this scenario, the cursor was left at default and no source rect was set.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 21981 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21981 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(21981, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'System - PNP (disable and enable) with IO Before and After (Reliability) should be more lightweight', 'System - PNP (disable and enable) with IO Before and After (Reliability) should be more lightweight', 'This is an acceptable failure', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PNP_DisableEnable_With_IO_BeforeAndAfter::PNP_DisableEnable_With_IO_BeforeAndAfter_Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'WDTF_SIMPLE_IO            :  - PerformIO\(Intel\(R\) RealSense\(TM\) 3D Camera Virtual Driver ROOT\\IMAGE\\0000 \) Failed : Test: WebcamPlugin: CPlayer::StartPreviewSession\(\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22029 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WFPLogo.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WFPLogo.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22029 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22029, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Validate.WFPUsage: Expected failure due to indeterminate WFP usage', 'This test will fail (By Design) if it cannot determine what a WFP Callout driver''s intended purpose is.  The expectation is the ISV / IHV will reach out and begin a discussion as to what it is they are trying to accomplish.  If it is deemed acceptable, then this Errata will apply', 'Need to discuss with ISV / IHV the purpose of the callout driver.  Apply Errata only if the usage deemed acceptable.  Otherwise create a Contingency', '2023-07-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean((Driver/FileName[.=''wfpdriver.sys'']) or (Driver/FileName[.=''esensor.sys'']) or (Driver/FileName[.=''elastic-endpoint-driver.sys'']) or (Driver/FileName[.=''yetanotherdriver.sys'']))')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":2,"Values":["Filter.Driver.WindowsFilteringPlatform.ArchitecturalDesign"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*Validate.WFPUsage', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', '/Unexpected usage/g', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'EndTest', 'EndTest', 'Fail', 'Result', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22303 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%d3dconf_12_core.dll%D3DConf_12_0_ResourceCopy::AtomicCopyBuffer%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%d3dconf_12_core.dll%D3DConf_12_0_ResourceCopy::AtomicCopyBuffer%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22303 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22303, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 - Late Latch Atomic Copy Barrier/UINT Fails on non WDDM2.2 Driver', 'The test doesn''t take into account Driver that doesn''t support WDDM2.2.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/Driver/GraphicsDriverInfo/ModelVersion[contains(.,"2.1") or contains(.,"2.0")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceCopy::AtomicCopyBuffer', 'D3DConf_12_0_ResourceCopy::AtomicCopyBuffer', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(ValChanges\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22580 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22580 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22580, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ResetHandlerEx can be null in QosPnpPower and VMQStress HLK tests', 'ResetHandlerEx can be null in QosPnpPower and VMQStress HLK tests', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"MLX4\ConnectX-3Pro_Eth") or contains(.,"VEN_15B3&DEV_1015")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Exception occurred', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught exception', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Performing Adapter Reset', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Test terminated abnormally ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22659 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'tcgosint.exe /TestCaseId 3,4,6,7,8,9,10,11,12,13,14,15,19,20,22,23,24,25,26,27,104,105,110'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('tcgosint.exe /TestCaseId 3,4,6,7,8,9,10,11,12,13,14,15,19,20,22,23,24,25,26,27,104,105,110')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22659 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22659, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: TPM 1.2 TCG OS Interface test failure due to unexpected value in PCR[18]', 'TPM 1.2 TCG OS Interface Server Test fails with Intel''s BootGuard enabled.  BootGuard places a value in PRC[18] that the test doesn''t expect', 'Errata 22659', '2030-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ReadPCRs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TPM outDigest \(PCR 18\) \[Expected \(hex\) ffffffff ffffffff ffffffff ffffffff ffffffff\]: ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ReadExtendedPCRs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TPM outDigest \(PCR 18\) \[Expected \(hex\) ffffffff ffffffff ffffffff ffffffff ffffffff\]: ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22660 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22660 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22660, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK Errata: D3D12 tests that will not function with AMDs mGPU solution and tests will fail with access violation error ', 'D3D11On12 has a bug in RS1 where it sometimes creates resources on node 0, when everything else is located on node N-1.', 'The fix is already checked in for RS2, but an errata is necessary for RS1.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/GraphicsInfo/RenderInfo/D3D12NodeCount[.>1]) ', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002'')])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 14393])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartDXGLog', 'EndDXGLog', '.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', 'Using 11on12.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndDXGLog', '.*', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', '.*ACCESS VIOLATION exception occurred at address.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', '.*DXGI_ERROR_DEVICE_REMOVED*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndDXGLog', 'CResourceFormatsTest.*887a0005', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22665 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'tcgosint.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('tcgosint.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22665 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22665, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK: TPM 1.2 TCG OS Interface test failure due to unexpected value in PCR[18]', 'TPM 1.2 TCG OS Interface Server Test fails with Intel''s BootGuard enabled.  BootGuard places a value in PRC[18] that the test doesn''t expect', 'Errata 22665', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ReadPCRs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TPM outDigest \(PCR 18\) \[Expected \(hex\) ffffffff ffffffff ffffffff ffffffff ffffffff\]: ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ReadExtendedPCRs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'TPM outDigest \(PCR 18\) \[Expected \(hex\) ffffffff ffffffff ffffffff ffffffff ffffffff\]: ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22670 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%HAPTest.dll%Certification%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%HAPTest.dll%Certification%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22670 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22670, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio::Erratum: Hardware Offload APO Registration test fails with "Could not CoCreateInstance() any supported versions of IPolicyConfig" when run on downlevel system', 'The APO Registration test attempts to use an unsupported interface when run against a downlevel OS.', 'Apply this erratum. The test will be fixed in the future.', '2050-06-30T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::APORegistration', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Could not CoCreateInstance\(\) any supported versions of IPolicyConfig', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'CoCreateInstance\(__uuidof\(PolicyConfig\).*IID_IPolicyConfigWin10Th.*0x80004002', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-06-30T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22755 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22755 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22755, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - QosRemoteSettings test failure in OID_QOS_REMOTE_PARAMETERS', 'This is a test failure', 'Apply this erratum. The test will be fixed in the future.', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test basic reporting of remote settings - Variation #3: All TLVs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'QosRemoteSettingsTest::ValidateRemoteTestResults: Invalid Remote Settings Failure: DCBX has ETS Recommendation TLV but corresponding ETS settings were not reported in OID_QOS_REMOTE_PARAMETERS', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22756 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22756 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22756, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, ' HCK Errata: NDISTest 6.5 - [2 Machine] - QosRemoteSettings test failure in OID_QOS_REMOTE_PARAMETERS', 'This is a test failure', 'Apply this erratum. The test will be fixed in the future.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test basic reporting of remote settings - Variation #3: All TLVs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'QosRemoteSettingsTest::ValidateRemoteTestResults: Invalid Remote Settings Failure: DCBX has ETS Recommendation TLV but corresponding ETS settings were not reported in OID_QOS_REMOTE_PARAMETERS', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22826 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mfcaptureenginehlktest.dll /p:% /p:% /p:"DS=Table:cameraDriverHLKScenarioTests.xml#CameraHLK_ScenarioTests" /select:"@name=''CWLKWebcamLogoTaefTests::TAEFEntryPoint#*'' AND @ID=2001"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mfcaptureenginehlktest.dll /p:% /p:% /p:"DS=Table:cameraDriverHLKScenarioTests.xml#CameraHLK_ScenarioTests" /select:"@name=''CWLKWebcamLogoTaefTests::TAEFEntryPoint#*'' AND @ID=2001"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22826 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22826, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Camera Driver Test -  Video Capture (Record) - Record 30 seconds of 480p Video from Capture pin to H264 file (Video Only)', 'This test was erroneously included in the 1703 playlist, and is being removed from the next playlist release.', 'This errata filter will overturn any failures associated with this test. ', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22827 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mfcaptureenginehlktest.dll /p:% /p:% /p:"DS=Table:cameraDriverHLKScenarioTests.xml#CameraHLK_ScenarioTests" /select:"@name=''CWLKWebcamLogoTaefTests::TAEFEntryPoint#*'' AND @ID=2000"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mfcaptureenginehlktest.dll /p:% /p:% /p:"DS=Table:cameraDriverHLKScenarioTests.xml#CameraHLK_ScenarioTests" /select:"@name=''CWLKWebcamLogoTaefTests::TAEFEntryPoint#*'' AND @ID=2000"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22827 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22827, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Camera Driver Test - Video Capture (Record) - Record 30 seconds of 720p Video from Capture pin to H264 file (Video Only)', 'This test was erroneously included in the 1703 playlist, and is being removed from the next playlist release.', 'This errata filter will overturn any failures associated with this test. ', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22832 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'EhddLogoTest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('EhddLogoTest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22832 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22832, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK2.1 Errata: EHDD Test fails the “Range Crossing Test” and “Fuzz Test” on disk drives that do not support 512B aligned LBAs for locking ranges.', 'HCK Errata: EHDD Test fails the “Range Crossing Test” and “Fuzz Test” on disk drives that do not support 512B aligned LBAs for locking ranges.', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_INTEL&PROD_SSDSC") or contains(.,"VEN_NVME&PROD_INTEL_SSDPE")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Range Crossing Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Create band failed', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The parameter is incorrect', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'FAIL : Range Crossing Test Case', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Range Crossing Test Case', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Create band failed', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The parameter is incorrect', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 4

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 4
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'FAIL : Range Crossing Test Case', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 4

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'Fuzz Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Create band failed', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The parameter is incorrect', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'Fuzz Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Create band failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Range Crossing Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Create band failed', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The parameter is incorrect', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Range Crossing Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Create band failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22838 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22838 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22838, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ResetHandlerEx can be null in QosPnpPower HCK tests', 'ResetHandlerEx can be null in QosPnpPower and VMQPnpTest HCK tests', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"MLX4\ConnectX-3Pro_Eth")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Exception occurred', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught exception', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Performing Adapter Reset', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Test terminated abnormally ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22839 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22839 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22839, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ResetHandlerEx can be null in VMQPnpTest HCK tests', 'ResetHandlerEx can be null in VMQPnpTest HCK tests', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"MLX4\ConnectX-3Pro_Eth")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unknwon exception is caught', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unknown exception was caught: Failed to send NdisReset command to the binding', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Test terminated abnormally with an Exception ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22882 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'EnumerationStress.exe "_WDKDeviceID_" "_queryVID_" "_queryPID_" "_queryPrimarySsHubPartVid_" "_queryPrimarySsHubPartPid_"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('EnumerationStress.exe "_WDKDeviceID_" "_queryVID_" "_queryPID_" "_queryPrimarySsHubPartVid_" "_queryPrimarySsHubPartPid_"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22882 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22882, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB 3.0 Hub Enumeration Stress failed in HCK', 'USB 3.0 Hub Enumeration Stress may fail with the following error message:

Found downstream SuperSpeed peripheral device, correct manual test setup. ', 'This is a test issue which is overturned by the this filter. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'EnumerationStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Get connector IOCTL returned companion port.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 22912 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'uefilogo.exe /CreateLogs%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('uefilogo.exe /CreateLogs%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22912 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(22912, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: UEFI GOP mode test failure due to having mutiple integrated monitors', 'Test fails on a system with two chips for two monitors', 'This is an acceptable failure', '2025-05-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/ChildDevices/Device/@Index[.>=1])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'System with Internal panel mode requirements', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failure: Boot resolution \(1024x768\) does not match preferred \(1280x800\) monitor resolution', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failure: Boot resolution \(3840x2160\) does not match preferred \(3840x1100\) monitor resolution', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failure: Boot resolution \(1920x1080\) does not match preferred \(1080x2160\) monitor resolution', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failure: Boot resolution \(1920x1200\) does not match preferred \(1080x2160\) monitor resolution', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failure: Boot resolution \(1920x1080\) does not match preferred \(1920x515\) monitor resolution', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failure: Boot resolution \(3840x2160\) does not match preferred \(1080x2160\) monitor resolution', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-05-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23104 v12.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11TiledResources.exe _MODIFIEDCMDLINE_ -11on12'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11TiledResources.exe _MODIFIEDCMDLINE_ -11on12')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23104 AND Version = 12
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23104, 12, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency: D3D12 - 11 on 12 - WGF11 TiledResources', 'Specific devices have an issue that prevents meeting the requirement for this test.', 'This issue has been reviewed, and a contingency will be provided to waive these failures for the current generation of hardware.  Future generations must meet this requirement. ', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''PCI\VEN_1002'') and (contains(.,''DEV_6860'') or contains(.,''DEV_687F'') or contains(.,''DEV_6861'') or contains(.,''DEV_6862'') or contains(.,''DEV_6863'') or contains(.,''DEV_6864'') or contains(.,''DEV_6867'') or contains(.,''DEV_6868'') or contains(.,''DEV_6869'') or contains(.,''DEV_686C'') or contains(.,''DEV_15DD'') or contains(.,''DEV_69A0'') or contains(.,''DEV_69A1'') or contains(.,''DEV_66A2'') or contains(.,''DEV_66A1'') or contains(.,''DEV_66A0'') or contains(.,''DEV_66A3'') or contains(.,''DEV_66A7'') or contains(.,''DEV_66AF'') or contains(.,''DEV_69A2'') or contains(.,''DEV_69A3'') or contains(.,''DEV_69AF'') or contains(.,''DEV_15D8'') or contains(.,''DEV_1636'') or contains(.,''DEV_1638'') or contains(.,''DEV_686B'') or contains(.,''DEV_164C'') or contains(.,''DEV_15E7''))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Texture3D\\Filter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Invalid data at logical tile location X=\d{1,3}, Y=\d{1,3}, Z=\d{1,3} \(pixel coordinate x=\d{1,3}, y=\d{1,3}, z=\d{1,3}\): observed 0x.{8}, Expected 0x.{8}', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23110 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23110 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23110, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [1 Machine] - OffloadVMMQ test generateindirectiontable() updates indirection table incorrectly without adding specified procindex', 'HLK Errata: NDISTest 6.5 - [1 Machine] - OffloadVMMQ test generateindirectiontable() updates indirection table incorrectly without adding specified procindex', 'This is an acceptable failure', '2029-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"EBDRV\L2ND&PCI_168E14E4") or contains(.,"MLX4\CONNECTX-3PRO_ETH") or contains(.,"PCI\VEN_15B3&DEV_1013") or contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"QEBDRV\L2ND&PCI_80701077")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to set RSS initial parameters for VPort \(index=1, ID=2\), startProc=1, numProcs=1', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'No more test cases will be executed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'No more test cases will be executed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to set RSS initial parameters for VPort \(index=3, ID=4\), startProc=3, numProcs=1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Change Queue Num for Non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Test terminated abnormally with an Exception NDISTest.NDISTestCore.TestServices.NDISOperationException', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to set RSS initial parameters for VPort \(index=1, ID=2\), startProc=1, numProcs=1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to set RSS initial parameters for VPort \(index=2, ID=3\), startProc=2, numProcs=1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'Failed to create VPort123', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'No more test cases will be executed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'Failed to create VPort123', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to set RSS initial parameters for VPort \(index=123, ID=2763835808\), startProc=3, numProcs=1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'Failed to create VPort249', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'No more test cases will be executed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'Failed to create VPort249', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23164 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ifdtest2.exe -sa -sb -sc -se -sf'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ifdtest2.exe -sa -sb -sc -se -sf')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23164 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23164, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency: Ifdtest2 Part D (SC Reader LOGO) - (Manual Test)', 'The devices covered by this contingency do not support protocol T=1.  These devices are designed for a specific customer, and will not be available for retail sale. ', 'This failure is acceptable and for the products covered by this contingency. ', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''USB\VID_2439'') and (contains(.,''PID_2210'') or contains(.,''PID_2220'') or contains(.,''PID_2230''))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Set protocol T=1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*c0000002H.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23168 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23168 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23168, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NVMe SCSI Compliance Test (LOGO) failed if NVMe supports NGUID', 'HLK Errata: NVMe SCSI Compliance Test (LOGO) failed if NVMe supports NGUID', 'This issue described is an acceptable failure. This issue is fixed in RS3.', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'ASSERTION: INQUIRY Attempting Unit Serial Number Page 0x80.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Unit serial number does not fit a valid format \(\w{4}_\w{4}_\w{4}_\w{4}_\w{4}_\w{4}_\w{4}_\w{4}.\).', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23225 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23225 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23225, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 - Compute Timestamps due to a regression caused by enabling GPU MMU page faults', 'D3D12 – Compute Timestamps test fails on RS2 HLK. This bug is a regression caused by enabling GPU MMU page faults.  ', 'This is an acceptable failures and it will be addressed in the next release', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_TimingData::ComputeTimestamps', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsLessThanOrEqual\(HistoryBuffIt->HistoryBuff\[i\], EndBufferStamp\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23317 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd /c TDRWatch.exe /get [[]WTTJobGuid]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd /c TDRWatch.exe /get [[]WTTJobGuid]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23317 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23317, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Compute Timestamps TDRWatch', 'TDR during running the test.', 'Issue is under investigation', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64","Windows v10.0 Client x86 TH1 Full","Windows v10.0 Client x86 TH2 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 TH1 Full","Windows v10.0 Client x64 TH2 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 TH1 Full","Windows v10.0 Server x64 TH2 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '12FECD65-3ECF-4B56-8485-CC2320846186', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'TDRWatch_Count', 'Title', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'TDR_Happened', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23407 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe RadioLogoTest.dll /name:RadioMgrLogoTests::[VerifySleepAndMaintainState][VerifyHibernateAndMaintainState]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe RadioLogoTest.dll /name:RadioMgrLogoTests::[VerifySleepAndMaintainState][VerifyHibernateAndMaintainState]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23407 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23407, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Test "Radio Manager - Verify Radio State" failures', 'Test [Radio Manager - Verify Radio State] may have failures specific to GPS devices.', 'These failures are acceptable and are being waived.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'RadioMgrLogoTests::VerifySleepAndMaintainState', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'RadioMgrLogoTests::VerifyHibernateAndMaintainState', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23701 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23701 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23701, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DF - PNP Cancel Remove Device Test (Reliability)', 'HLK Errata: DF - PNP Cancel Remove Device Test (Reliability) failure on a Hidden NIC', 'The error will be filtered until a fix is available.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"VEN_PNP&DEV_0A07") or contains(.,"Unisys s-Par Nic6 Ethernet Adapter") or contains(.,"Unisys s-Par Device Bus")]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'Failed : IcmpSendEcho\(\) had too many consecutive timeouts while pinging the gateway address or the remote system IP address\. Win32=11003 ', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'HRESULT=0x80004005', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Problem Code=0', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23773 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23773 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23773, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:NDISTest 6.5 - [2 Machine] - ConfigCheck "Verify that driver supports Scatter Gather DMA" test failure', 'The test results in ConfigCheck failing for some devices that don''t use DMA. We''ve decided the test is low value and will remove it.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify that driver supports Scatter Gather DMA', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'For logo purposes all drivers on Vista must support Scatter Gather DMA', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23844 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Brightness2.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Brightness2.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23844 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23844, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Brightness2 test fail for AIO system with default HDMI display ', 'Brightness2 test fail for AIO system with default HDMI display.', 'This issue described is an acceptable failure.', '2029-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//MonitorInfo/ConnectionType[.="D3DKMDT_VOT_HDMI"])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVICE_COLLECTION')
		INSERT INTO GathererType([Name]) VALUES ('DEVICE_COLLECTION')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVICE_COLLECTION'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//*/Category[.="Computer.AllInOne"])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest:Title=DevX::GRFX::BaseVideo::Brightness2::TestBrightness2Presence', 'DevX::GRFX::BaseVideo::Brightness2::TestBrightness2Presence', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'Brightness2: WDDM 1.2 driver should support brightness only thru Brightness2 interface.', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23845 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest\bin\ndtest.exe /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest\bin\ndtest.exe /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23845 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23845, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:[NDISTest] NDISTest 6.0 - [2 Machine] - 2c_OidsNdisRequest should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'HLK Errata:[NDISTest] NDISTest 6.0 - [2 Machine] - 2c_OidsNdisRequest should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'Failure is acceptable', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_1281&DEV_0003") or contains(.,"PCI\VEN_1D0F&DEV_0EC2")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","8.100.9600","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Check for all required oids', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Supported list does not contain required Oid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Testing statistical OIDs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Packets received ok stat != total number of packets received', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking if OID must be queried', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query open instance .* for OID', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 23951 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'net stop NdkLogoRemoteServer & sc delete NdkLogoRemoteServer'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('net stop NdkLogoRemoteServer & sc delete NdkLogoRemoteServer')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23951 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(23951, 3, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'NDK Logo Tests:  Task "Stop and delete NdkLogoRemoveServer, if exists" fails', 'Task "Stop and delete NdkLogoRemoveServer, if exists" fails if the service does not exist.', 'This should not be a failure. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24006 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% xpsprintkittests.dll /name:XPSPrint::%XPS[^RS]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% xpsprintkittests.dll /name:XPSPrint::%XPS[^RS]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24006 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24006, 2, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'Errata to waive failures on specific manual print tests', 'Many of the manual print tests are being waived in an effort to reduce the time required to test print drivers.', 'These tests will be removed from the next playlist update.  Until then, this filter will overturn failures in the following tests when the test has been cancelled by manually closing the command prompt window on the test system.

XPS Content Library - Discard Control Processing(MANUAL) 
XPS Content Library - Files that violate OPC, XPS, Markup Compatibility rules(MANUAL) 
XPS Content Library - MinBar Files(MANUAL) 
XPS Content Library - Thumbnail Processing(MANUAL) 

OXPS Content Library - Discard Control Processing(MANUAL)
OXPS Content Library - Thumbnail Processing(MANUAL)
OXPS Content Library - MinBar Files(MANUAL)
OXPS Content Library - Files that violate OPC, XPS, Markup Compatibility rules(MANUAL)
', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!', 'XPSPrint::XPSDiscardControl', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24013 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TrimPerf%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TrimPerf%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24013 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24013, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Manual Errata: NVMe Deallocate Performance test failed if sector size is 4096 bytes (4kn format)', 'NVMe Deallocate Performance test failed if sector size is 4096 bytes (4kn format)', 'This issue described is an acceptable failure. ', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600."]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'Sector size: \t\t4096 bytes', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Max latency.*ms exceeds logo requirement of 500.0 ms', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24240 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% [lte][ipk][bmc][tpe][er][srt]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% [lte][ipk][bmc][tpe][er][srt]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24240 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24240, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM tests fail on non-TPM based security device', 'Devices of class ''security'' may cause the TPM tests to enumerate when the device is not a TPM device. ', 'The TPM tests are waived for devices identified to not be TPM.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Service[.=''amdpsp''])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24413 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24413 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24413, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 Debug Layer Tests Incorrectly Applying to TH2 Driver when running RS2 HLK', 'D3D12 Debug Layer Tests Incorrectly Applying to TH2 Driver when running RS2 HLK or RS3 HLK', 'This is an acceptable failure', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_8086&DEV_04") or contains (., "VEN_8086&DEV_0A") or contains (., "VEN_8086&DEV_0D") or contains (., "VEN_8086&DEV_16") or contains (., "VEN_8086&DEV_19") or contains (., "VEN_8086&DEV_0D26")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063","10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '0x80004001', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '0x80004005', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(Device->CreateFence\(0, D3D12_FENCE_FLAG_NONE, IID_PPV_ARGS\(&Fence\)\)\) - Value \(0x887a0005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(pDevice->GetDeviceRemovedReason\(\)\) - Value \(0x887a0020\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_DebugLayerScenarios', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR: Test case 0, expected 0 error messages but saw 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24530 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%supp6%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%supp6%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24530 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24530, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: TPM 2.0 Supplemental Test failed on server 2012R2 but can pass in server 2016', 'HCK Errata: TPM 2.0 Supplemental Test failed on server 2012R2 but can pass in server 2016', 'This is a system-specific, automatic filter. If the system is verified by CSS, then the system name would be added into the filter.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//smbiosModel[.="UCSB-B200-M5"] or //smbiosModel[.="UCSB-B480-M5"] or //smbiosModel[.="UCSC-C480-M5"] or //smbiosModel[.="UCSC-C480S-M5"] or //smbiosModel[.="UCSC-C220-M5L"] or //smbiosModel[.="UCSC-C220-M5S"] or //smbiosModel[.="UCSC-C220-M5SN"] or //smbiosModel[.="UCSC-C220-M5SX"] or //smbiosModel[.="UCSC-C240-M5L"] or //smbiosModel[.="UCSC-C240-M5S"] or //smbiosModel[.="UCSC-C240-M5SN"] or //smbiosModel[.="UCSC-C240-M5SX"] or //smbiosModel[.="UCS-S3260-M5SRB"] or //smbiosModel[.="UCS-SX348-SNM5"]  or //smbiosModel[.="PURLEY"])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Checking for Invalid PCR Values', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'TBS Log didn;t match PCR values.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking for Boot Application Event in logs.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24577 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Tpm20PPITest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Tpm20PPITest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24577 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24577, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: TPM2.0 TCG Physical Presence Interface 1.2 Test fail for Server 2012 R2 but 1.3 Test pass for Server 2016', 'HCK Errata: TPM2.0 TCG Physical Presence Interface 1.2 Test fail for Server 2012 R2 but 1.3 Test pass for Server 2016', 'This issue described is an acceptable failure. The filter is system specific. ', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVICE_COLLECTION')
		INSERT INTO GathererType([Name]) VALUES ('DEVICE_COLLECTION')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVICE_COLLECTION'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//DeviceCollection/ModelName[.="UCSB-B200-M5"] or //DeviceCollection/ModelName[.="UCSB-B480-M5"] or //DeviceCollection/ModelName[.="UCSC-C480-M5"] or //DeviceCollection/ModelName[.="UCSC-C480S-M5"] or //DeviceCollection/ModelName[.="UCSC-C220-M5L"] or //DeviceCollection/ModelName[.="UCSC-C220-M5S"] or //DeviceCollection/ModelName[.="UCSC-C220-M5SN"] or //DeviceCollection/ModelName[.="UCSC-C220-M5SX"] or //DeviceCollection/ModelName[.="UCSC-C240-M5L"] or //DeviceCollection/ModelName[.="UCSC-C240-M5S"] or //DeviceCollection/ModelName[.="UCSC-C240-M5SN"] or //DeviceCollection/ModelName[.="UCSC-C240-M5SX"] or //DeviceCollection/ModelName[.="UCS-S3260-M5SRB"] or //DeviceCollection/ModelName[.="UCS-SX348-SNM5"])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg', 'Confirmation status: \w{1} \(Expected: \w{1}\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg', 'AreEqual\(FALSE, tpmIsOwned\) - Values \(0, -1\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24599 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcmEndToEnd.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcmEndToEnd.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24599 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24599, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB Type-C UCM Data Role Swap runs and fails (instead of skipping) on systems that don''t have DRP ports', 'USB Type-C UCM Data Role Swap test erroneously runs for systems that do not have DRP ports', 'In RS3 HLK, USB Type-C UCM Data Role Swap test will check for DRP capability before running. If the system does not have DRP ports, the test will skip.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'No USB Type-C connectors found with partners attached.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24600 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcsiComplianceTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcsiComplianceTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24600 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24600, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UCSI Get Connector Status -Error', 'UCSI Get Connector Status - Error test expected a sequence that was invalid in the error case', 'This issue has since been fixed in the RS3 kit', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsTrue.*0xDECAF.*Get Connector Status Command Failed', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Connector Error Notification Not received!!', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24601 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcsiComplianceTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcsiComplianceTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24601 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24601, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UCSI Get Connector Status - Supported Connector Alternate Modes Change fails for systems that where the Alternate Modes on the ports will not change by design', 'UCSI Get Connector Status - Supported CAM Change test assumed that all systems that support Alternate Modes will change their connectors'' advertised Alternate Modes when an Alternate Mode device is connected. This is not the case for systems with systems with sufficient Alternate Mode resources for the USB-C ports on the system.', 'In RS3 kit, this test will first ask the user to specify whether or not the Alternate Modes advertised on the USB-C ports will ever change. If they will not change even when another Alternate Mode device is connected, then this test is skipped.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Supported CAM Change Notification Not received!!', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Caught std::exception.*The wait operation timed out.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24602 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcsiComplianceTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcsiComplianceTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24602 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24602, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UCSI Get Connector Status - Supported Provider Capabilities Change fails for systems where the provider capabilities on the ports will never change by design', 'UCSI Get Connector Status - Supported Provider Capabilities Change test assumed that all systems that have PD Provider Capabilities have the ability to change their Provider Capabilities. For example, advertising a different set of Provider Capabilities when the system is on battery power vs. when connected to a charger.', 'In RS3 kit, this test will first ask the user to specify whether or not the Provider Capabilities advertised on the USB-C ports will ever change. If they will never change, then this test will be skipped.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Supported Provider Capabilities Change Notification Not received!!', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24614 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest\bin\ndtest.exe /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest\bin\ndtest.exe /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24614 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24614, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:[NDISTest] NDISTest 6.0 - [1 Machine] - 1c_WMICoverage should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'NDISTest 6.0 - [1 Machine] - 1c_WMICoverage should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'This is an acceptable failure for verified devices.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_1281&DEV_0003") or contains(.,"PCI\VEN_1281&DEV_003F") or contains(.,"PCI\VEN_1D0F&DEV_0EC2")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763","8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MAXIMUM_SEND_PACKETS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_RCV_ERROR_ALIGNMENT as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_XMIT_ONE_COLLISION as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_XMIT_MORE_COLLISIONS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query error = 0x80041008', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24708 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24708 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24708, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:[NDISTest] NDISTest 6.5 - [2 Machine] - Stats should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'NDISTest 6.5 - [2 Machine] - Stats should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'This is an acceptable failure for verified devices.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_1281&DEV_0003") or contains(.,"PCI\VEN_1281&DEV_003F") or contains(.,"PCI\VEN_1D0F&DEV_0EC2") or contains(.,"PCI\VEN_1D0F&DEV_0EC2")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Determine Test Parameters', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query OID_GEN_MAXIMUM_SEND_PACKETS on support adapter\. NT_STATUS \(0xC0010017\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query OID_GEN_MAXIMUM_SEND_PACKETS on support adapter\. NT_STATUS \(0xC00000BB\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24872 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%KsTopTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%KsTopTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24872 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24872, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'KsTopTest fails on RS2 due to test opening pin with incorrect format.', 'If a driver supports multiple signal processing modes and these modes support different set of formats, then test may try to instantiate pin with an incompatible format which would result in pin creation failure from driver.', 'If you encountered this error and you suspsect this is a test issue and not a driver issue based on above issue description, please contact CSS for verification and to obtain the updated test binary.', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', '\sFAIL: Pin.*: Pin creation failed for .*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24876 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24876 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24876, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - E2EPerf Test terminated abnormally with Exception', 'There is a known issue with the test', 'This is an acceptable failure and it will be fixed in a later release', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x64","Windows v10.0 Client x86","Windows v10.0 Server x64","Windows 8 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Creating Performance Module Collection', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Test terminated abnormally with an Exception System.NullReferenceException', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24919 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd /c TDRWatch.exe /get [WTTJobGuid]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd /c TDRWatch.exe /get [WTTJobGuid]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24919 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24919, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Simple Resource Dimension Mismatch Validation test fails due to a page fault of type ''FAULT_PDE'' in the cleanup phase.', 'GBV skips validation of descriptor dimension mismatch when the descriptor is static.  However, since the resource itself may not be static the resource state validation is still performed using uninitialized data stored in temp registers in SaveResourceAndDescriptorInfo.  This function uses a shader switch statement to store the temporary data with no case block for unexpected dimensions resulting in the subsequent TDR.', 'This issue is the result of an errata. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 15063])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/CompatID[(string-length(.) = 21) and (starts-with(.,''PCI\VEN_10DE'')) and (contains(.,''DEV_1001'') or contains(.,''DEV_1004'') or contains(.,''DEV_1005'') or contains(.,''DEV_1007'') or contains(.,''DEV_1008'') or contains(.,''DEV_1021'') or contains(.,''DEV_1022'') or contains(.,''DEV_1023'') or contains(.,''DEV_1024'') or contains(.,''DEV_1026'') or contains(.,''DEV_1027'') or contains(.,''DEV_1028'') or contains(.,''DEV_1029'') or contains(.,''DEV_1180'') or contains(.,''DEV_1183'') or contains(.,''DEV_1184'') or contains(.,''DEV_1185'') or contains(.,''DEV_1187'') or contains(.,''DEV_1188'') or contains(.,''DEV_1189'') or contains(.,''DEV_1193'') or contains(.,''DEV_1194'') or contains(.,''DEV_1195'') or contains(.,''DEV_1280'') or contains(.,''DEV_1281'') or contains(.,''DEV_1282'') or contains(.,''DEV_1284'') or contains(.,''DEV_1286'') or contains(.,''DEV_1287'') or contains(.,''DEV_1288'') or contains(.,''DEV_1289'') or contains(.,''DEV_1295'') or contains(.,''DEV_0FC0'') or contains(.,''DEV_0FC1'') or contains(.,''DEV_0FC2'') or contains(.,''DEV_0FC6'') or contains(.,''DEV_0FC8'') or contains(.,''DEV_0FC9'') or contains(.,''DEV_0FEF'') or contains(.,''DEV_0FF2'') or contains(.,''DEV_0FF3'') or contains(.,''DEV_0FF9'') or contains(.,''DEV_0FFA'') or contains(.,''DEV_0FFD'') or contains(.,''DEV_0FFE'') or contains(.,''DEV_0FFF'') or contains(.,''DEV_100A'') or contains(.,''DEV_100C'') or contains(.,''DEV_102A'') or contains(.,''DEV_102D'') or contains(.,''DEV_103A'') or contains(.,''DEV_103C'') or contains(.,''DEV_118E'') or contains(.,''DEV_118F'') or contains(.,''DEV_11B4'') or contains(.,''DEV_11B6'') or contains(.,''DEV_11BA'') or contains(.,''DEV_11BC'') or contains(.,''DEV_11BD'') or contains(.,''DEV_11BE'') or contains(.,''DEV_11BF'') or contains(.,''DEV_11C0'') or contains(.,''DEV_11C2'') or contains(.,''DEV_11C3'') or contains(.,''DEV_11C4'') or contains(.,''DEV_11C5'') or contains(.,''DEV_11C6'') or contains(.,''DEV_11C8'') or contains(.,''DEV_11CB'') or contains(.,''DEV_11FA'') or contains(.,''DEV_11FC'') or contains(.,''DEV_128B'') or contains(.,''DEV_12B9''))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'A4663F21-FD2E-49E5-8B52-9D3B31C0F3ED', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'TDR_Happened', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 24944 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24944 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(24944, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'The NDISTest 6.0 - [2 Machine] - 2C Priority test is failing with the error message, Unable to get priority test results on Test adapter, even when the linkspeed of the device is less than 1Gbps.', 'The NDISTest 6.0 - [2 Machine] - 2C Priority test is failing with the error message, Unable to get priority test results on Test adapter, even when the linkspeed of the device is less than 1Gbps.', 'This is an acceptable failure for verified devices.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_1281&DEV_0003")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Directed Packets - NdisSendPackets', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to get priority test results on Test adapter', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 25437 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% usbserialnumber.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% usbserialnumber.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 25437 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(25437, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: USB Serial Number Test fails due to Zero PID', 'HLK Errata: USB Serial Number Test fails due to Zero PID', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'USB::UsbSerialNumber::SerialNumber', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreNotEqual\(0u, gIdProduct\): productId should not be 0. - Values \(0, 0\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 25691 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Tpm20PPITestCS.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Tpm20PPITestCS.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 25691 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(25691, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM Physical Presence Interface NoPPIClear', 'The NoPPIClear requirement was being enforced.', 'We are removing the requirement, so this errata will wavie failures.', '2028-04-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client ARM RS2 OneCore","Windows v10.0 Client ARM64 RS2 OneCore"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'WEX::TestExecution::Tpm20PPITest::Tpm20PPITest::VerifyConfirmationStatusWithNoPPIClearTrue', 'WEX::TestExecution::Tpm20PPITest::Tpm20PPITest::VerifyConfirmationStatusWithNoPPIClearTrue', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Confirmation status: 3 \(Expected: 4\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-04-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 25836 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TE.exe /enablewttlogging /appendwttlogging microsoft.dxgi.swapchain.rendering.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TE.exe /enablewttlogging /appendwttlogging microsoft.dxgi.swapchain.rendering.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 25836 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(25836, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Autotriage: Test CreateSwapChain tests fail with error "BOOL ERROR 0"', 'Test CreateSwapChain tests fail due to using a dynamic projection matrix depending on the aspect ratio of the monitor resolution', 'Please run the test on a different aspect ratio', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["16299","15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'BOOL ERROR 0:  Texel color', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 25870 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 25870 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(25870, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - VMQPnpTest failed because the device does not support reset', 'HLK Errata: NDISTest 6.5 - [2 Machine] - VMQPnpTest failed if the device does not support reset', 'This issue described is an acceptable failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"MLX4\ConnectX-3Pro_Eth") or contains (.,"VEN_15B3&DEV_1015") or contains(.,''QEBDRV\L2ND&PCI_80701077'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393.14393","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Unknwon exception is caught', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Unknown exception was caught: Failed to send NdisReset command to the binding', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Test terminated abnormally with an Exception NDISTest.NDISTestCore.TestServices.NDISOperationException', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 26086 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%devfund%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%devfund%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26086 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(26086, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Devfund Tests trigger C++ Exception', 'Windows Driver Test Framework (WDTF) may encounter an unhandled C++ exception when trying to read the properties of certain drivers.', 'If you are seeing this autotriage message, then please download an updated version of WDTF.DLL from the link below.  Follow the instructions included within the zip file to install the updated WDTF.DLL onto the client test machine, and then re-run the failed test. 

<a href="https://aka.ms/hlkerrata26086" xmlns="http://www.w3.org/1999/xhtml">Download updated WDTF.DLL from here.</a>', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/Architecture[number(.) = 0])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":1,"Values":["Device"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["RS3"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Error:.*', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*', 'A C\+\+ exception was throw by a test in a DLL that was compiled with C\+\+ exceptions disabled.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 26250 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26250 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(26250, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'The NDISTest 6.0 - [2 Machine] - 2C Priority test fails, even when the linkspeed of the device is less than 1Gbps.', 'The NDISTest 6.0 - [2 Machine] - 2C Priority test fails, even when the linkspeed of the device is less than 1Gbps.', 'This is an acceptable failure for verified devices.', '2030-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_1281&DEV_0003")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Check for 802.1p support', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'All drivers with NDIS Version greater than 5.1 must enable 802.1p by default and must report when queried for OID_GEN_MAC_OPTIONS', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 26384 v12.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26384 AND Version = 12
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(26384, 12, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - OffloadMisc due to different domain-joined/non-domain-joined configurations (device-specific)', 'HLK Errata: NDISTest 6.5 - [2 Machine] - OffloadMisc due to different domain-joined/non-domain-joined configurations (device-specific)', 'This is a driver-specific, automatic filter. If the driver is verified by CSS, then the target device would be added into the filter. If the filter does not apply, then fail the submission.', '2030-07-01T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"Mellanox ConnectX-4 Adapter") or contains(.,"Mellanox ConnectX-3Pro Adapter") or contains(.,"Mellanox ConnectX-3 Pro Ethernet Adapter") or  contains(.,"Mellanox ConnectX-4Lx Adapter") or  contains(.,"Mellanox ConnectX-5 Adapter") or  contains(.,"Mellanox ConnectX-4 Lx") or  contains(.,"Mellanox ConnectX-6 Adapter") or  contains(.,"PCI\VEN_8086&DEV_15FF") or contains(.,"PCI\VEN_15B3&DEV_101D")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 OneCore","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 OneCore","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test Encapoverhead traffic tests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'An exception occured in EncapOverheadTrafficTester test case. Exception message :WinRM cannot process the request. The following error with errorcode 0x8009030e occurred while using Kerberos authentication: A specified logon session does not exist. It may already have been terminated.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'An exception occured when querying net adapter to get encap overhead capabilities. Exception message :The client cannot connect to the destination specified in the request.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test SetClearEncapoverhead', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'An exception occured in TestSetEncapOverhead test case', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test Encapoverhead traffic tests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'An exception occured in EncapOverheadTrafficTester test case. Exception message :The WinRM client sent a request to an HTTP server and got a response saying the requested HTTP URL was not available.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Sending/receiving from the support adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'EncapOverheadTrafficTester Traffic Passpercentage', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 26876 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26876 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(26876, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - SelectiveSuspend\PM_WakeOnLinkChange tests fails on for PCI Devices when run on machines whose PCI bus do not support wake from S0', 'HLK Errata: NDISTest 6.5 - [2 Machine] - SelectiveSuspend\PM_WakeOnLinkChange tests fails on for PCI Devices when run on machines whose PCI bus do not support wake from S0', 'This is an acceptable failrue', '2029-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1055")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063","10.1.16299","10.1.17134","8.100.9600.27024","10.1.17763","10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[USB Selective Suspend Test\] Wakeup Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SelectiveSuspend::SSWakeupTest: Failed to wakeup', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[USB Selective Suspend Test] Idle Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SelectiveSuspend::SSIdleTest: Failed to remain suspended state for 300 seconds', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'With device=D0, WOLC=on, medium=connected, verify that device goes to sleep on disconnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device failed to go into low power mode after medium disconnect', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Re-connect medium and enable WOLC for next test case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to re-connect medium for next test case', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'With device awake, WOLC=on, medium=connected, disable WOLC and verify that device stays in D0 on disconnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to disconnect medium from DUT', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'With device=D0, WOLC=off, medium=disconnected: enable WOLC and expect device to transition to sleep', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'DUT failed to go into low power mode after device enabled', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Re-connecting medium for next test cases', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to reconnect medium to DUT', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Put device into low power mode, sleep the system, wake up, and reconnect medium', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'DUT failed to go to low power mode after medium disconnect', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'DUT failed to go into low power mode shortly after the machine woke up', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to re-connect the medium to the adapter', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Put device into low power mode, sleep the system, wake up, and reconnect medium', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'DUT failed to go to low power mode after medium disconnect', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'DUT failed to go into low power mode shortly after the machine woke up', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Put device into low power mode, sleep the system, wake up, and reconnect medium', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'DUT failed to go to low power mode after medium disconnect', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 26997 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26997 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(26997, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Camera Driver Registration test Device Category Check Invalid', 'The test for Device Registration Class was incorrectly matching against Camera in the check for previously allowed classes. This caused it to log the error that the device was class Image/Media/System when it was correctly camera.', 'Logic fixed for next kit released, Errata issued that identifies that the device is correctly camera and then fixes the error', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'DEVPKEY_Device_Class.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'DEVPKEY.Device.Class should be Camera for future use. Not Image.Media.System', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27045 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'present2.exe %-src:ref%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('present2.exe %-src:ref%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27045 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27045, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Present Validation 2 - GammaPresent:  Ref driver uses the a2r10g10b10 format without checking for hardware support', 'The DX9 ref driver is a software implementation of the DX9 driver, however it uses the hardware DX9 driver when presenting the actual contents to the screen. D3D9on12, which is the default DX9 driver for devices that don''t have a hardware driver, does not support the A2R10G10B10 format because it was deprecated in DX10+, however the ref driver is assuming this format is usable without correctly checking driver caps.', 'Error will be filtered until the DX9 Ref driver is fixed to correctly check for format support on presentation', '2028-11-29T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Client ARM64 RS5 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DFMT_A2R10G10B10', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-11-29T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27098 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'sch_stress.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('sch_stress.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27098 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27098, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM Scheduler Stress: Test failing due to 9on12 Shader Compilation Error', 'D3D9on12 fails compilation when used in combination with the DXBC-to-DXIL converter and a shader reads from a null resource', 'Errors will be filtered for RS3 and fixed in RS4', '2029-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Client ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'grafix\/window\/scene\/render\/scale\/movewindow\/render|||Exception access violation', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27100 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'PresentStats.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('PresentStats.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27100 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27100, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM Present Stats: Test failing due to lack of 9on12 iFlip Support', 'Test failing on when explicitly testing iFlip, which is not currently supported by 9on12.', 'Errors will be filtered for RS3 and fixed for RS4', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Client ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'fullscreen', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Too few vertical blanks were reported in present statistics', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Difference in Present count between GetLastPresentCount and PresentCount on present statistics is greater than maximum frame latency', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\/fs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'GPU-bound app missed too many frames', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27183 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::TestSimultaneousActiveNotifications'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::TestSimultaneousActiveNotifications')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27183 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27183, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM2.2 Periodic frame notification - Precision of simultaneous notifications at various point of the VSync interval', 'The periodic frame notification can support up to 8 simultaneous notifications. The job is looking for 8 hardware notifications but fewer are supported with the backup OS notifications. 
', 'The test will be relaxed and fixed in a future release of the HLK. ', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PeriodicFrameNotification\:\:TestSimultaneousActiveNotifications', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 's', 'NtSuccess\(D3DKMTCreateSynchronizationObject2\(\&Args\)\) - Value \(0xc0000002\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27185 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27185 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27185, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Cross Adapter Resource DX12 - OS bug causes test to fail', 'An OS bug precludes opening certain shared heaps when LDA GPUs are being exercised by some HLK test cases.', 'Error will be filtered until the OS bug is fixed.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/GraphicsInfo[@IsLDA="1"])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.15063","10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=^CrossAdapterResource::CopyBuffer#\d{23}[1-9]\d{4}$', '^CrossAdapterResource::CopyBuffer#\d{23}[1-9]\d{4}$', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '^SUCCEEDED\(pTstDevice\[1\]->m_Device->OpenSharedHandle\( Handle\.m_h, IID_PPV_ARGS\(&Resources\.pHeap\[1\]\) \)\) - Value \(0x80070057\)$', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27220 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGITrimMemory.exe '
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGITrimMemory.exe ')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27220 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27220, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: DXGI Trim Memory: Changes in Power State cause discrepencies when comparing Rendering times', 'This test is failing the "second render" portion of this test, which attempts to verify that starting to render from a trimmed state is roughly equivalent to starting to render from a fresh device. The issue is that the CPU went into a lower power state for the second half of the test due to a sleep between the halves, and thus recording/submitting the rendering takes longer.', 'Errors will be filtered until the test is fixed to either enforce a power state or the relax the timing check for the second half.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE&'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TrimMemoryTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'The time-to\-first\-frame after Trim was greater than 5 percent more than the time\-to\-first-frame after device creation', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27222 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27222 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27222, 6, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM2.2 Periodic frame notification feature is enforced when there are scenarios that are optional', 'Periodic frame notificaiton feature was added in wddm 2.2. This feature is not required of hardware. ', 'Future release of the kit will adjust the test to account for this. ', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[(contains(.,''PCI\VEN_10DE'') or contains(.,''PCI\VEN_1002'')) and (false or contains(.,''DEV_06C0'') or contains(.,''DEV_06C1'') or contains(.,''DEV_06C2'') or contains(.,''DEV_06C3'') or contains(.,''DEV_06C4'') or contains(.,''DEV_06C5'') or contains(.,''DEV_06C6'') or contains(.,''DEV_06C7'') or contains(.,''DEV_06C8'') or contains(.,''DEV_06C9'') or contains(.,''DEV_06CA'') or contains(.,''DEV_06CB'') or contains(.,''DEV_06CD'') or contains(.,''DEV_06D1'') or contains(.,''DEV_06D2'') or contains(.,''DEV_06DA'') or contains(.,''DEV_06DE'') or contains(.,''DEV_06DF'') or contains(.,''DEV_0DC0'') or contains(.,''DEV_0DC1'') or contains(.,''DEV_0DC2'') or contains(.,''DEV_0DC4'') or contains(.,''DEV_0DC5'') or contains(.,''DEV_0DC6'') or contains(.,''DEV_0DCA'') or contains(.,''DEV_0DCC'') or contains(.,''DEV_0DCD'') or contains(.,''DEV_0DCE'') or contains(.,''DEV_0DCF'') or contains(.,''DEV_0DD0'') or contains(.,''DEV_0DD1'') or contains(.,''DEV_0DD2'') or contains(.,''DEV_0DD3'') or contains(.,''DEV_0DD6'') or contains(.,''DEV_0DDA'') or contains(.,''DEV_0DDE'') or contains(.,''DEV_0DDF'') or contains(.,''DEV_0DE0'') or contains(.,''DEV_0DE1'') or contains(.,''DEV_0DE2'') or contains(.,''DEV_0DE3'') or contains(.,''DEV_0DE4'') or contains(.,''DEV_0DE5'') or contains(.,''DEV_0DE6'') or contains(.,''DEV_0DE7'') or contains(.,''DEV_0DE8'') or contains(.,''DEV_0DE9'') or contains(.,''DEV_0DEA'') or contains(.,''DEV_0DEB'') or contains(.,''DEV_0DEC'') or contains(.,''DEV_0DED'') or contains(.,''DEV_0DEE'') or contains(.,''DEV_0DEF'') or contains(.,''DEV_0DF0'') or contains(.,''DEV_0DF1'') or contains(.,''DEV_0DF2'') or contains(.,''DEV_0DF3'') or contains(.,''DEV_0DF4'') or contains(.,''DEV_0DF5'') or contains(.,''DEV_0DF6'') or contains(.,''DEV_0DF7'') or contains(.,''DEV_0DFC'') or contains(.,''DEV_0DFE'') or contains(.,''DEV_0DFF'') or contains(.,''DEV_0E21'') or contains(.,''DEV_0E22'') or contains(.,''DEV_0E23'') or contains(.,''DEV_0E24'') or contains(.,''DEV_0E25'') or contains(.,''DEV_0E28'') or contains(.,''DEV_0E30'') or contains(.,''DEV_0E31'') or contains(.,''DEV_0E32'') or contains(.,''DEV_0E38'') or contains(.,''DEV_0E3C'') or contains(.,''DEV_0E3E'') or contains(.,''DEV_0E3F'') or contains(.,''DEV_0F00'') or contains(.,''DEV_0F01'') or contains(.,''DEV_0F02'') or contains(.,''DEV_0F03'') or contains(.,''DEV_0FC0'') or contains(.,''DEV_0FC1'') or contains(.,''DEV_0FC2'') or contains(.,''DEV_0FC4'') or contains(.,''DEV_0FC5'') or contains(.,''DEV_0FC6'') or contains(.,''DEV_0FC8'') or contains(.,''DEV_0FC9'') or contains(.,''DEV_0FCB'') or contains(.,''DEV_0FCC'') or contains(.,''DEV_0FCE'') or contains(.,''DEV_0FCF'') or contains(.,''DEV_0FD0'') or contains(.,''DEV_0FD1'') or contains(.,''DEV_0FD2'') or contains(.,''DEV_0FD3'') or contains(.,''DEV_0FD4'') or contains(.,''DEV_0FD5'') or contains(.,''DEV_0FD8'') or contains(.,''DEV_0FD9'') or contains(.,''DEV_0FDA'') or contains(.,''DEV_0FDB'') or contains(.,''DEV_0FDC'') or contains(.,''DEV_0FDF'') or contains(.,''DEV_0FE0'') or contains(.,''DEV_0FE1'') or contains(.,''DEV_0FE2'') or contains(.,''DEV_0FE3'') or contains(.,''DEV_0FE4'') or contains(.,''DEV_0FE5'') or contains(.,''DEV_0FE6'') or contains(.,''DEV_0FE7'') or contains(.,''DEV_0FE8'') or contains(.,''DEV_0FE9'') or contains(.,''DEV_0FEA'') or contains(.,''DEV_0FEC'') or contains(.,''DEV_0FED'') or contains(.,''DEV_0FEE'') or contains(.,''DEV_0FF0'') or contains(.,''DEV_0FF1'') or contains(.,''DEV_0FF3'') or contains(.,''DEV_0FF5'') or contains(.,''DEV_0FF6'') or contains(.,''DEV_0FF7'') or contains(.,''DEV_0FF8'') or contains(.,''DEV_0FF9'') or contains(.,''DEV_0FFA'') or contains(.,''DEV_0FFB'') or contains(.,''DEV_0FFC'') or contains(.,''DEV_0FFD'') or contains(.,''DEV_0FFE'') or contains(.,''DEV_0FFF'') or contains(.,''DEV_1001'') or contains(.,''DEV_1003'') or contains(.,''DEV_1004'') or contains(.,''DEV_1005'') or contains(.,''DEV_1007'') or contains(.,''DEV_1008'') or contains(.,''DEV_100A'') or contains(.,''DEV_100B'') or contains(.,''DEV_100C'') or contains(.,''DEV_101E'') or contains(.,''DEV_101F'') or contains(.,''DEV_1020'') or contains(.,''DEV_1021'') or contains(.,''DEV_1022'') or contains(.,''DEV_1023'') or contains(.,''DEV_1024'') or contains(.,''DEV_1026'') or contains(.,''DEV_1027'') or contains(.,''DEV_1028'') or contains(.,''DEV_1029'') or contains(.,''DEV_102A'') or contains(.,''DEV_102B'') or contains(.,''DEV_103A'') or contains(.,''DEV_103B'') or contains(.,''DEV_103C'') or contains(.,''DEV_1040'') or contains(.,''DEV_1041'') or contains(.,''DEV_1042'') or contains(.,''DEV_1048'') or contains(.,''DEV_1049'') or contains(.,''DEV_104A'') or contains(.,''DEV_104B'') or contains(.,''DEV_104C'') or contains(.,''DEV_104D'') or contains(.,''DEV_1050'') or contains(.,''DEV_1051'') or contains(.,''DEV_1052'') or contains(.,''DEV_1054'') or contains(.,''DEV_1055'') or contains(.,''DEV_1056'') or contains(.,''DEV_1057'') or contains(.,''DEV_1058'') or contains(.,''DEV_1059'') or contains(.,''DEV_105A'') or contains(.,''DEV_105B'') or contains(.,''DEV_107C'') or contains(.,''DEV_107D'') or contains(.,''DEV_107E'') or contains(.,''DEV_107F'') or contains(.,''DEV_1080'') or contains(.,''DEV_1081'') or contains(.,''DEV_1082'') or contains(.,''DEV_1084'') or contains(.,''DEV_1086'') or contains(.,''DEV_1087'') or contains(.,''DEV_1088'') or contains(.,''DEV_1089'') or contains(.,''DEV_108B'') or contains(.,''DEV_108C'') or contains(.,''DEV_108E'') or contains(.,''DEV_1091'') or contains(.,''DEV_1094'') or contains(.,''DEV_1096'') or contains(.,''DEV_1098'') or contains(.,''DEV_1140'') or contains(.,''DEV_1144'') or contains(.,''DEV_1147'') or contains(.,''DEV_1149'') or contains(.,''DEV_114A'') or contains(.,''DEV_114B'') or contains(.,''DEV_1180'') or contains(.,''DEV_1182'') or contains(.,''DEV_1183'') or contains(.,''DEV_1184'') or contains(.,''DEV_1185'') or contains(.,''DEV_1187'') or contains(.,''DEV_1188'') or contains(.,''DEV_1189'') or contains(.,''DEV_118A'') or contains(.,''DEV_118B'') or contains(.,''DEV_118C'') or contains(.,''DEV_118D'') or contains(.,''DEV_118E'') or contains(.,''DEV_118F'') or contains(.,''DEV_1191'') or contains(.,''DEV_1192'') or contains(.,''DEV_1193'') or contains(.,''DEV_1194'') or contains(.,''DEV_1195'') or contains(.,''DEV_1198'') or contains(.,''DEV_1199'') or contains(.,''DEV_119D'') or contains(.,''DEV_119E'') or contains(.,''DEV_119F'') or contains(.,''DEV_11A0'') or contains(.,''DEV_11A1'') or contains(.,''DEV_11A2'') or contains(.,''DEV_11A3'') or contains(.,''DEV_11A4'') or contains(.,''DEV_11A5'') or contains(.,''DEV_11A7'') or contains(.,''DEV_11AA'') or contains(.,''DEV_11AC'') or contains(.,''DEV_11B1'') or contains(.,''DEV_11B4'') or contains(.,''DEV_11B6'') or contains(.,''DEV_11B7'') or contains(.,''DEV_11B8'') or contains(.,''DEV_11BA'') or contains(.,''DEV_11BB'') or contains(.,''DEV_11BC'') or contains(.,''DEV_11BD'') or contains(.,''DEV_11BE'') or contains(.,''DEV_11C0'') or contains(.,''DEV_11C1'') or contains(.,''DEV_11C2'') or contains(.,''DEV_11C3'') or contains(.,''DEV_11C4'') or contains(.,''DEV_11C5'') or contains(.,''DEV_11C6'')  or contains(.,''DEV_11C7'') or contains(.,''DEV_11C8'') or contains(.,''DEV_11CB'') or contains(.,''DEV_11D0'') or contains(.,''DEV_11D1'') or contains(.,''DEV_11D2'') or contains(.,''DEV_11D3'') or contains(.,''DEV_11E0'') or contains(.,''DEV_11E1'') or contains(.,''DEV_11E2'') or contains(.,''DEV_11E3'') or contains(.,''DEV_11FA'') or contains(.,''DEV_11FC'') or contains(.,''DEV_11FF'') or contains(.,''DEV_1200'') or contains(.,''DEV_1201'') or contains(.,''DEV_1202'') or contains(.,''DEV_1203'') or contains(.,''DEV_1205'') or contains(.,''DEV_1206'') or contains(.,''DEV_1207'') or contains(.,''DEV_1208'') or contains(.,''DEV_1210'') or contains(.,''DEV_1211'') or contains(.,''DEV_1212'') or contains(.,''DEV_1213'') or contains(.,''DEV_121F'') or contains(.,''DEV_1240'') or contains(.,''DEV_1241'') or contains(.,''DEV_1243'') or contains(.,''DEV_1244'') or contains(.,''DEV_1245'') or contains(.,''DEV_1246'') or contains(.,''DEV_1247'') or contains(.,''DEV_1248'') or contains(.,''DEV_1249'') or contains(.,''DEV_124B'') or contains(.,''DEV_124D'') or contains(.,''DEV_1250'') or contains(.,''DEV_1251'') or contains(.,''DEV_6780'') or contains(.,''DEV_6784'') or contains(.,''DEV_6788'') or contains(.,''DEV_678A'') or contains(.,''DEV_6790'') or contains(.,''DEV_6791'') or contains(.,''DEV_6792'') or contains(.,''DEV_6798'') or contains(.,''DEV_6799'') or contains(.,''DEV_679A'') or contains(.,''DEV_679B'') or contains(.,''DEV_679E'') or contains(.,''DEV_679F'') or contains(.,''DEV_6808'') or contains(.,''DEV_6809'') or contains(.,''DEV_6810'') or contains(.,''DEV_6811'') or contains(.,''DEV_6816'') or contains(.,''DEV_6817'') or contains(.,''DEV_6818'') or contains(.,''DEV_6819'') or contains(.,''DEV_684C'') or contains(.,''DEV_6800'') or contains(.,''DEV_6801'') or contains(.,''DEV_6802'') or contains(.,''DEV_6806'') or contains(.,''DEV_6828'') or contains(.,''DEV_6829'') or contains(.,''DEV_682C'') or contains(.,''DEV_6830'') or contains(.,''DEV_6831'') or contains(.,''DEV_6835'') or contains(.,''DEV_6837'') or contains(.,''DEV_6838'') or contains(.,''DEV_6839'') or contains(.,''DEV_683B'') or contains(.,''DEV_683D'') or contains(.,''DEV_683F'') or contains(.,''DEV_6820'') or contains(.,''DEV_6821'') or contains(.,''DEV_6822'') or contains(.,''DEV_6823'') or contains(.,''DEV_6824'') or contains(.,''DEV_6825'') or contains(.,''DEV_6826'') or contains(.,''DEV_6827'') or contains(.,''DEV_682A'') or contains(.,''DEV_682B'') or contains(.,''DEV_682D'') or contains(.,''DEV_682F'') or contains(.,''DEV_6608'') or contains(.,''DEV_6610'') or contains(.,''DEV_6611'') or contains(.,''DEV_6613'') or contains(.,''DEV_6617'') or contains(.,''DEV_6631'') or contains(.,''DEV_6600'') or contains(.,''DEV_6601'') or contains(.,''DEV_6602'') or contains(.,''DEV_6603'') or contains(.,''DEV_6604'') or contains(.,''DEV_6605'') or contains(.,''DEV_6606'') or contains(.,''DEV_6607'') or contains(.,''DEV_6620'') or contains(.,''DEV_6621'') or contains(.,''DEV_6623'') or contains(.,''DEV_6660'') or contains(.,''DEV_6663'') or contains(.,''DEV_6664'') or contains(.,''DEV_6665'') or contains(.,''DEV_6667'') or contains(.,''DEV_666F'') or contains(.,''DEV_73A1'') or contains(.,''DEV_73AE'') or contains(.,''DEV_9900'') or contains(.,''DEV_9901'') or contains(.,''DEV_9903'') or contains(.,''DEV_9904'') or contains(.,''DEV_9905'') or contains(.,''DEV_9906'') or contains(.,''DEV_9907'') or contains(.,''DEV_9908'') or contains(.,''DEV_9909'') or contains(.,''DEV_990A'') or contains(.,''DEV_990B'') or contains(.,''DEV_990C'') or contains(.,''DEV_990D'') or contains(.,''DEV_990E'') or contains(.,''DEV_990F'') or contains(.,''DEV_9910'') or contains(.,''DEV_9913'') or contains(.,''DEV_9917'') or contains(.,''DEV_9918'') or contains(.,''DEV_9919'') or contains(.,''DEV_9990'') or contains(.,''DEV_9991'') or contains(.,''DEV_9992'') or contains(.,''DEV_9993'') or contains(.,''DEV_9994'') or contains(.,''DEV_9995'') or contains(.,''DEV_9996'') or contains(.,''DEV_9997'') or contains(.,''DEV_9998'') or contains(.,''DEV_9999'') or contains(.,''DEV_999A'') or contains(.,''DEV_999B'') or contains(.,''DEV_999C'') or contains(.,''DEV_999D'') or contains(.,''DEV_99A0'') or contains(.,''DEV_99A2'') or contains(.,''DEV_99A4'') or contains(.,''DEV_990F''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'NtSuccess\(D3DKMTCreateSynchronizationObject2\(\&Args\)\) - Value \(0xc0000002\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'NtSuccess\(D3DKMTCreateSynchronizationObject2\(&CreateArgs\)\)\: Create Notification for Mode Change Cancel. - Value \(0xc0000002\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27273 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%CWLKDecDXVAHDTAEF::XVPTest5%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%CWLKDecDXVAHDTAEF::XVPTest5%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27273 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27273, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'XVP test 5 fails due to mismatch between SW and VPBlt color space (SW is wrong)', 'An OS fix in RS3 made a change to the color space specified to VPBlt.  However, the software path which is used to validate VPBlt in this test was not updated to use the same color space.', 'Test metrics result of test will be filtered out, until the OS code is fixed.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Mobile","Windows v10.0 Client ARM RS3 Mobile","Windows v10.0 Client x86 RS3 Mobile","Windows v10.0 Server x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client ARM64 RS3 OneCoreUAP","Windows v10.0 Client ARM RS3 OneCoreUAP","Windows v10.0 Client x64 RS3 OneCoreUAP","Windows v10.0 Client x86 RS3 OneCoreUAP","Windows v10.0 Server x64 RS3 OneCore","Windows v10.0 Client ARM64 RS3 OneCore","Windows v10.0 Client ARM RS3 OneCore","Windows v10.0 Client x64 RS3 OneCore","Windows v10.0 Client x86 RS3 OneCore"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*frames failed validation with hr=0x80004005.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27274 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Vshader.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Vshader.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27274 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27274, 1, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'Vertex Shaders: Failing due to 9on12 Shader Converter Issues', 'Test failing due to 9on12 conformance issues when handling UDEC3', 'Errors will be filtered for RS3 and fixed for RS4', '2028-11-29T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VSREG:UDEC3', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-11-29T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27315 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27315 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27315, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, '[Qualcomm]HLK test - TestFlipModes', 'Certain hardware configurations do not support the requirements of this test. ', 'The issue can be resolved by supporting flip overwrite.', '2023-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''QCOM'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'VidMm::ConfigurableWorkloadTest::FlipModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(listenerContext\-\>stablePresentPredicate\(frameStats.PresentCount - previousPresentCount\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27316 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%WaveTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%WaveTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27316 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27316, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Autotriage: WaveTest fails due to incorrect format used by test during pin creation.', 'Pin creation would fail due to incorrect format getting specified by test, ', 'If you encountered this error and you suspsect this is a test issue then please contact CSS for verification and to obtain the updated test binary.', '2028-12-29T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'WDMAudio::WaveTest::TAEF_.*_DataIntersection.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', '.*CKsPin::Instantiate.  Failed to instantiate KSPIN_DATAFLOW_.*pin!.*0x00000491.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*FAIL: KSPROPERTY_PIN_DATAINTERSECTION Succeeded, Pin Creation Failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-29T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27410 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%sysfund%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%sysfund%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27410 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27410, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Devfund Tests trigger C++ Exception', 'Windows Driver Test Framework (WDTF) may encounter an unhandled C++ exception when trying to read the properties of certain drivers.', 'The errata will overturn the failure on System submissions.  There is a fixed version of the affected test binary available that can be downloaded from the link below.  Follow the instructions included within the zip file to install the updated WDTF.DLL onto the client test machine.  Installing this updated file is optional for system testing. 

<a href="https://aka.ms/hlkerrata26086" xmlns="http://www.w3.org/1999/xhtml">Download updated WDTF.DLL from here.</a>', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/Architecture[number(.) = 0])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":1,"Values":["System"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["RS3"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Error:.*', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*', 'A C\+\+ exception was throw by a test in a DLL that was compiled with C\+\+ exceptions disabled.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27420 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27420 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27420, 3, 1, 1, 0, 1, 0, 0, @TestCommandLineId, '[TestFlipModes] Configurable Workload test incorrectly fails on WDDM 2.3 devices during the test case TestFlipModes', 'Configurable Workload test incorrectly fails on WDDM 2.3 devices during the test case TestFlipModes.', 'For WDDM 2.3 drivers, this is an acceptable failure. ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/Driver/GraphicsDriverInfo/ModelVersion[contains(.,''2.3'')])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS2 OneCore","Windows v10.0 Client x64 RS2 OneCore","Windows v10.0 Client ARM RS2 OneCore","Windows v10.0 Client ARM64 RS2 OneCore","Windows v10.0 Server x64 RS2 OneCore","Windows v10.0 Client x86 RS2 OneCoreUAP","Windows v10.0 Client x64 RS2 OneCoreUAP","Windows v10.0 Client ARM RS2 OneCoreUAP","Windows v10.0 Client ARM64 RS2 OneCoreUAP","Windows v10.0 Client x86 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x86 RS2 Mobile","Windows v10.0 Client ARM RS2 Mobile","Windows v10.0 Client ARM64 RS2 Mobile","Windows v10.0 Client x86 RS3 OneCore","Windows v10.0 Client ARM RS3 OneCore","Windows v10.0 Client ARM64 RS3 OneCore","Windows v10.0 Server x64 RS3 OneCore","Windows v10.0 Client x86 RS3 OneCoreUAP","Windows v10.0 Client x64 RS3 OneCoreUAP","Windows v10.0 Client ARM RS3 OneCoreUAP","Windows v10.0 Client ARM64 RS3 OneCoreUAP","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Server x64 RS3 Full","Windows v10.0 Client x86 RS3 Mobile","Windows v10.0 Client ARM RS3 Mobile","Windows v10.0 Client ARM64 RS3 Mobile"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27528 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11ResourceAccess.exe%-11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11ResourceAccess.exe%-11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27528 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27528, 4, 1, 1, 0, 1, 0, 1, @TestCommandLineId, 'Errata Waiver: WGF11ResourceAccess.exe - D3D11On12 crashes on mipped AYUV surfaces', 'D3D11On12 crashes when trying to use ClearView on a video view of a mipped AYUV surface. This path is leveraged by WGF11ResourceAccess.exe when run through D3D11On12.', 'The bug is fixed in RS4.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS3","Windows v10.0 Client x64 RS3","Windows v10.0 Client ARM RS3","Windows v10.0 Client ARM64 RS3","Windows v10.0 Server x64 RS3","Windows v10.0 Client x86 RS2","Windows v10.0 Client x64 RS2","Windows v10.0 Client ARM RS2","Windows v10.0 Client ARM64 RS2","Windows v10.0 Server x64 RS2","Windows v10.0 Client x86 RS1","Windows v10.0 Client x64 RS1","Windows v10.0 Client ARM RS1","Windows v10.0 Client ARM64 RS1","Windows v10.0 Server x64 RS1","Windows v10.0 Client x86 TH","Windows v10.0 Client x64 TH","Windows v10.0 Client ARM TH","Windows v10.0 Client ARM64 TH","Windows v10.0 Server x64 TH"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27573 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'nvmeshim.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('nvmeshim.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27573 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27573, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK: NVMe Device Capabilities Test FormatNVM requirement relaxed.', 'NVMe Device Capabilities Test (LOGO) FormatNVM is optional ', 'If filter 27573 applied to Run NVMe scenrario test, please reference errata ID 27573 into your readme.doc to cover the remainder of the failures in the NVMe Device Capabilities Test (Logo)', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":2,"Values":["Device.Storage.ControllerDrive.NVMe"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Assertion: Controller Identify Data', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27687 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%tpmksp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%tpmksp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27687 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27687, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM SHA384 RS2 SealUnseal Error', 'RS2 does not properly handle CONTEXT_HASH of SHA384+. ', 'Use the errata.', '2029-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Client x64 RS2 Full","Windows v10.0 Client x86 RS2 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=tpmksp::SealUnSealTest::SealUnSealTestWithHmacAuth', 'tpmksp::SealUnSealTest::SealUnSealTestWithHmacAuth', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.. NCryptDecrypt.. with right authentication ticket . Value .0x8009002d.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27720 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe Microsoft.Test.Networking.Wireless.WiFiDirect.dll /Name:Microsoft.Test.Networking.Wireless.WiFiDirect.ServicesDiscoveryTests.* /p:RemoteServer=%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe Microsoft.Test.Networking.Wireless.WiFiDirect.dll /Name:Microsoft.Test.Networking.Wireless.WiFiDirect.ServicesDiscoveryTests.* /p:RemoteServer=%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27720 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27720, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wi-Fi Direct Service Discovery Tests – Functional: Prefix Matching OS Regression', 'Some services are not discovered in the prefix service discovery test.<br xmlns="http://www.w3.org/1999/xhtml" />
This is due to an OS bug that causes inconsistencies in some cases where services that are discovered are surfaced to the client application. This is caused by an OS component after the ANQP discovery happens. When this issue occurs, the data about the services is freed before it is sent to the test code, causing the results to be inconsistent and usually filtered out.', 'Driver vendors can validate this by looking at the ANQP query response sent as action frames for the test case ServiceInfoMultipleMatchSameServicePrefix. This can be either in the WDI log, or in an over-the-air packet capture. The test log should list the names of the 3 services that are published for this test. For example:<br xmlns="http://www.w3.org/1999/xhtml" /><ul xmlns="http://www.w3.org/1999/xhtml"><li>Starting Publish for service "com.msft.kit.MAC_ADDRESS.15.foo"...</li><li>Starting Publish for service "com.msft.kit.MAC_ADDRESS.15"...</li><li>Starting Publish for service "com.msft.kit.MAC_ADDRESS.15.bar"...</li></ul>
The ANQP response at this time should include all 3 services along with service information for 2 of the services.', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 OneCore","Windows v10.0 Client x64 RS3 OneCore","Windows v10.0 Client ARM RS3 OneCore","Windows v10.0 Client ARM64 RS3 OneCore","Windows v10.0 Client x86 RS3 OneCoreUAP","Windows v10.0 Client x64 RS3 OneCoreUAP","Windows v10.0 Client ARM RS3 OneCoreUAP","Windows v10.0 Client ARM64 RS3 OneCoreUAP","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Client x86 RS3 Mobile","Windows v10.0 Client ARM RS3 Mobile","Windows v10.0 Client ARM64 RS3 Mobile"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["Device.Network.WLAN.SupportWiFiDirectServices.WiFiDirectServices"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Microsoft\.Test\.Networking\.Wireless\.WiFiDirect\.ServicesDiscoveryTests\.ServiceInfoMultipleMatchSameServicePrefix', 'Microsoft\.Test\.Networking\.Wireless\.WiFiDirect\.ServicesDiscoveryTests\.ServiceInfoMultipleMatchSameServicePrefix', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Enumeration Complete[!]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Caught exception while executing service discovery scenario: System\.Exception: Timed out waiting for watcher to find service', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27755 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te boottest.dll /name=*HostPostProcess*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te boottest.dll /name=*HostPostProcess*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27755 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27755, 1, 2, 1, 1, 1, 1, 0, @TestCommandLineId, 'AutoTriage: WindowsToGo Boot Test: Deletion of boot entry', '[Logo Requirement ID] – Brief failure description <br xmlns="http://www.w3.org/1999/xhtml" /> While executing the WindowsToGo Boot Test, its possible that the very first boot entry is deleted (Windows Boot Manager) causing the system under test to boot into the WTG device instead of the host OS.<br xmlns="http://www.w3.org/1999/xhtml" /> Brief optional description of the test case.', 'If the test fails repeatedly with "No UFD found. Please insert a UFD and try again!" please attempt the following workaround

1. Test prepares the WTG device.
2. Test creates a WTG boot entry in the boot menu.
3. Test boots into the OS on the WTG device.
4. Test goes to sleep state S4 in WTG OS.
5. Test wakes from sleep state S4 and boots into WTG OS.
6. Test reboots in WTG OS. 
-- &gt;&gt;   At this point, manually remove the WTG device.
7. Test boots into host OS.
8. While booting to host OS, before it completes, attach WTG device to system via USB.
9. Test verification will continue.', '2099-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'Looking for WTG device', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'No UFD found. Please insert a UFD and try again!', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Caught an unidentified C\+\+ exception', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2099-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27760 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te boottest.dll /name=*HostPostProcess*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te boottest.dll /name=*HostPostProcess*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27760 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27760, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'AutoTriage: WindowsToGo Boot Test: Windows 10S unsupported', '[Logo Requirement ID] – Cannot execute scripts on Windows 10S <br xmlns="http://www.w3.org/1999/xhtml" /> Test executes based on the assumption that OS under test is Windows 10 Pro <br xmlns="http://www.w3.org/1999/xhtml" /> Test installs OS at WIM index 1 which is Windows 10S and used to be Windows 10 Pro (until build 15063)', 'If the Windows To Go OS booted into is Windows 10S, the tests will fail. To work around do the following
1. open HLK Manager -&gt; Explorer -&gt; Job Explorer
2. navigate to $ -&gt; System -&gt; Fundamental -&gt; USBBoot
3. Dbl-click job 1027 (WindowsToGo Boot Test)
4. In the new window that opens, navigate to the ''Parameters'' tab
5. Edit job and update WimIndex from 1 (Windows 10 S) to 8 (Windows 10 Pro)
6. Save
7. Re-Run test.
', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=BootTest::CBootTests::HostPostProcessResults', 'BootTest::CBootTests::HostPostProcessResults', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=BootTest::CBootTests::HostPostProcessResults', 'Failed to boot to Wtg device', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27764 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ___fund%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ___fund%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27764 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27764, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Device PnP tests fail due to change in Camera Pipeline Sleep functionality', 'RS3 Functionality for Sleep and Reinstall was changed. The Camera Plugin for DevFund was not updated for these new changes.', 'Errata Issued. Plugin to be updated', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063","10.1.16299","10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'WDTF_SIMPLE_IO.*0xC00D7167', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*PerformIO.*The parameter is incorrect', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 27766 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% iflip.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% iflip.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27766 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(27766, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'iFlipPresentTestUAP: fails due to receving a token when the test does not enter IFLIP', 'Test bug in IFlip UAP test. Driver succeeds CheckMPOSupport calls. 
Graphics Kernel is receiving D3DKMT_PM_REDIRECTED_GDI type tokens in duration when test does not enter IFLIP indicating a test bug.', 'Fix the test. ', '2029-10-01T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_8086'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["      <value>10.1.15063<\/value>","       <value>10.1.16299<\/value>"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'IsTrue\(EtwWatcher->GetEnteriFlipSignaled\(\)\): The scenario was expected to result in iFlip, however, iFlip was not entered.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'IsTrue\(mpoWaiterResult_[1|2|3]\): Did not detect an MPO ETW event containing the expected source rect.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(presentStats_[1|2|3]\): Last fame was unexpectedly not using iFlip. In this scenario, the cursor was left at default and no source rect was set.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-10-01T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 28408 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspostst.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspostst.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 28408 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(28408, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio AutoTriage: KsPosTst Capture_DriftAndJitter_ForAEC fails instead of skipping on packet-based endpoints', 'Some tests incorrectly run on packet-based pins instead of skipping.', 'If you encountered this error and you suspsect this is a test issue then please contact CSS for verification and to obtain the updated test binary.', '2028-12-28T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*TAEF_Capture_DriftAndJitter_ForAEC.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*Error.*Could not get KSRTAUDIO_BUFFER.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-28T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 28452 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspostst.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspostst.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 28452 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(28452, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio Erratum: KsPosTst Render_DurationLength doesn''t provide CURRENT_WRITE_POSITION for offload pins', 'KS Position Test for Render_DurationLength doesn''t provide CURRENT_WRITE_POSITION for offload pins.', 'Apply this filter. The test will be updated in the next release.', '2028-12-28T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*Render_DurationLength.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'FAIL: Driver streamed 0 bytes instead of .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-28T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 28980 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TestUcsi::UcsiTest::TestAcceptDataRoleSwap%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TestUcsi::UcsiTest::TestAcceptDataRoleSwap%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 28980 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(28980, 3, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'RS3 Waiver: UCSI USB Operation Role command - Accept Swap: should skip if DFP and UFP aren''t both supported', 'Test should skip if DFP and UFP aren''t both supported.', 'Resolved in future release of the HLK.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Server x64 RS3 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 28981 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcsiTest::TestRejectPowerRoleSwap%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcsiTest::TestRejectPowerRoleSwap%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 28981 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(28981, 2, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'RS3/RS4 Waiver: UCSI Power Direction Role command - Reject Swap: InitialPowerRole incorrect', 'Test fails to account for automatic role resolution when checking the initial power role direction.  Partner system may correct power role after initial connect event after the test has cached the initial state.', 'Fixed in future release of the kit.', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Server x64 RS3 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Set_PDR Command to perform Power Role Swap succeeded after setting partner to reject swap.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29054 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe /auto /client /dvi /u /target:Miniport%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe /auto /client /dvi /u /target:Miniport%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29054 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29054, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK2.1 Errata: Mini6RssOids test failing due to test looking for looking for NumberOfIndirectionTableEntries in 2008R2', 'HCK2.1 Errata: Mini6RssOids test failing due to test looking for looking for NumberOfIndirectionTableEntries in 2008R2', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(., "PCI\VEN_14E4&DEV_16") or contains(., "PCI\VEN_14E4&DEV_d8")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows Server 2008 Release 2 x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking support for full RSS \(OID_GEN_RECEIVE_SCALE_PARAMETERS\)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'BytesWritten was greater than the buffer provided to the set request', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The indirection table size returned does not match the one we set', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking support for full RSS \(OID_GEN_RECEIVE_SCALE_PARAMETERS\)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'BytesWritten was greater than the buffer provided to the set request', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29156 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestConcurrentRecordAndPhotoCapture_%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestConcurrentRecordAndPhotoCapture_%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29156 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29156, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Device/System Test - MediaCapture - TestConcurrentRecordAndPhotoCapture', 'The WarmStart state check in this test fails for single pin cameras because it assumes different states for the Record and Photo streams.', 'Test fixed in 1803 RS4 HLK kit: Errata issued for RS3 1709', '2029-07-30T23:59:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=Device PhotoMode.* Normal', 'StreamIndex.*Photo WarmStartState.* On .*Expected.* Off', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T23:59:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29170 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ptlogo.exe Test.DeviceButton.json'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ptlogo.exe Test.DeviceButton.json')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29170 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29170, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Test.DeviceButton: Test fails if touchpads are not clickable with a non-capacitive object', 'For the Windows Touchpad Button test, activating the click functionality of the button with a non-capacitive weighted contact is required, to esure the user always sees a click occur when the sound of the button is heard. OEMs may prefer to ship a touchpad which only clicks when a capacitive contact is present in order to block aggains certain subcatagories of inadvertant activation.', 'OEMs should ensure that they understand he impact to their customers by electing to ship a touchpad which only clicks when a capacitive contact is present, and that the touchpad still has appropriate click activation for a capacitive contact at the forces specified in the Windows PTP Implementation Guide.', '2030-04-02T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'Iteration 1: failed: explicitly failed by user This PTP is not reporting button state changes reliably. Some unexpected behaviors will occur for users on this PTP.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-04-02T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29502 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestCaptureWithAllSupportedMediaTypeWithPreview#%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestCaptureWithAllSupportedMediaTypeWithPreview#%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29502 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29502, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - MediaCapture - TestCaptureWithAllSupportedMediaTypeWithPreview fails due to stale samples', 'Camera Driver System Test - MediaCapture - TestCaptureWithAllSupportedMediaTypeWithPreview fails due to stale samples found in the pipeline. The samples are queued and then sent to the decoder on restart. The decoder processes them, then the XVP rejects them causing the pipeline to stall. No samples are created, causing a test failure.', 'Errata issued, OS updated', '2023-07-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.17134","10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*No samples of length.*0 received. Failing the case', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Warn:UserText=Error.*C00D36C4', 'Exception.*Line.*119', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=Test failed hr.*0x800705B4', 'Cancel task timeout', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Warn:UserText=Async Error.*80070057.*', 'Async Error.*80070057.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29580 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%WsdPrintVerify.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%WsdPrintVerify.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29580 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29580, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: FDWSD is unable to send probe messages for low memory machines (Less than 4GB)', 'HCK Errata: FDWSD is unable to send probe messages for low memory machines (Less than 4GB)', 'This is an acceptable failure
  ', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'IMAGING-0004 Any network-connected device that supports Windows network-connected Web Services for Devices \(WSD\) must implement WSD properly for their device type', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'Multi-cast "Resolve" for device FAIL!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29686 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29686 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29686, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NVMe SCSI compliance test doesn’t support V1.0 compliant devices', 'HLK Errata: NVMe SCSI compliance test doesn’t support V1.0 compliant devices', 'This is acceptable failure', '2030-08-20T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_2700") or contains(.,"PCI\VEN_8086&DEV_2701") or contains(.,"PCI\VEN_8086&DEV_0953") or contains(.,"PCI\VEN_8086&DEV_0A53")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: INQUIRY Attempting Unit Serial Number Page 0x80', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unit serial number page length shall be set to either 20 for EUI64 or 36 for NGUID', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: INQUIRY Attempting Unit Serial Number Page 0x80', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unit serial number page length shall be set to either 20 for EUI64 or 40 for NGUID', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-20T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29690 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'INFGate.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('INFGate.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29690 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29690, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: INF Syntax Test failure due to PDFRENDERFILTER.DLL ', 'Errata: INF Syntax Test failure due to PDFRENDERFILTER.DLL ', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"TeamViewer Printer")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["15063","8.100.9600","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'C:\\WINDOWS\\System32\\DriverStore\\FileRepository\\teamviewer_xpsdriverfilter', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'C:\\Windows\\System32\\DriverStore\\FileRepository\\teamviewer_xpsdriverfilter', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29766 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe RenderOnlyTests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe RenderOnlyTests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29766 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29766, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: RenderOnly SetupAPI test failure due to String to INT conversion error', 'RenderOnly SetupAPI test failure due to String to INT conversion error', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevX::GRFX::BaseVideo::RenderOnly::SetupAPITests::VerifyPCIDeviceClass', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Class: 03 and SubClass: 80', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(classMatch\): Render Only devices must have PCI class = 03 and subclass = 02 or 80', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29865 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29865 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29865, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Simple Invalid Resource Validation uses DATA_STATIC_WHILE_SET_AT_EXECUTE w/ inaccessible resource - Main task', 'The test is deliberately releasing the CBV resource early to verify the expected GBV error.  These test cases enable a GBV flag that tells a patched shader to skip-over invalid instructions by wrapping them with a conditional block.  This trick will not work if a driver is executing both sides of a conditional if/else because all accessed bindings are static.', 'Ignore Device Removal as a result of running this test', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.14393","10.1.15063","10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=SimpleInvalidResource', 'GetDeviceRemovedReason', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=SimpleInvalidResource', 'Device->CreateFence', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29899 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%EffectsDiscoveryCPPTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%EffectsDiscoveryCPPTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29899 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29899, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, ' EffectsDiscovery test incorrectly requires that Raw mode must be supported.', 'EffectsDiscovery test incorrectly requires that Raw mode must be supported. OS requires that driver must support either Raw mode or Default mode.', 'This Errata covers the failure.', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Server x64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'EffectsDiscovery::Tests::CPP::TaefEffectsDiscoveryCppTests::AudioTestsRender', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Device does not support raw', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 29935 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TDRWatch.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TDRWatch.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29935 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(29935, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Simple Invalid Resource Validation uses DATA_STATIC_WHILE_SET_AT_EXECUTE w/ inaccessible - TDR failure', 'TDR during running the test.', 'Issue is under investigation', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '11DB400C-FF2C-4332-B68D-77633296C216', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'TDRWatch_Count', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 30161 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%SystemExposedPort%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%SystemExposedPort%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 30161 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(30161, 6, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'USB Exposed Port System Test will crash on UDE implementations (no physical port)', 'USB Exposed Port Test applies to UDE device', 'Test should not apply', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//ImagePath[contains(translate(., ''ABCDEFGHIJKLMNOPQRSTUVWXYZ'', ''abcdefghijklmnopqrstuvwxyz''),''ude.sys'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', '.*Failed to invoke test operation:.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', '.*Failing Exposed Connector.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Failed to verify consistent USB 3.0 Port Mapping.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '[HRESULT 0x800706BE]*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 30414 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 30414 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(30414, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK DXVA tests incorrectly check for dflip usage on WDDM2.2 or later drivers', 'HLK DXVA tests incorrectly check for dflip usage on WDDM2.2 or later drivers', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.15063","10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVATAEF::WMVPlaybackTest32', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ERROR>> Test 32 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(RunTest\(32\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 30900 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TE.exe /enablewttlogging /appendwttlogging usb3termination.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TE.exe /enablewttlogging /appendwttlogging usb3termination.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 30900 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(30900, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB3 termination test failed on RS3 due to no valid superSpeed USB device found after reboot.', 'USB3 termination test failed on RS3 due to no valid superSpeed USB device found after reboot.', 'This is an acceptable failure on RS3', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"VEN_8086&DEV_7360") ])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft::Windows::USB::Usb3Termination::Usb3TerminationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'No Valid SuperSpeed USB Device found after reboot.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 30958 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.system.testclassdriver.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.system.testclassdriver.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 30958 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(30958, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK test Win6_4.MB.System.Data.TestClassDriver due to their device is not using wbmclass driver, but their own class driver', 'HLK test Win6_4.MB.System.Data.TestClassDriver due to their device is not using wbmclass driver, but their own class driver', 'This is an acceptable failure', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"USB\VID_05C6&PID_9091") or contains(., "USB\VID_1508&PID_1001")])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestClassDriver::VerifyClassDriver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Verify device is not using usb \[USB\\VID_05C6&PID_9091.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device is using usb', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Verify device is not using usb \[USB\\VID_1508&PID_1001.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device is using usb', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 31264 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31264 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(31264, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: NDISTest 6.5 – LWF Logo test on Windows Server 2012. Not Applicable because the driver is intentionally an NDIS 6.1 driver', 'HCK Errata: NDISTest 6.5 – LWF Logo test on Windows Server 2012. Not Applicable because the driver is intentionally an NDIS 6.1 driver".', 'This is considered an acceptable failure at this time. ', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Validate NDIS stack minimum version is >= miniport NDIS version', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'The miniport stack minimum NDIS major verion is less than the miniport NDIS version.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 31384 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ifdtest2.exe -sd -se -sf'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ifdtest2.exe -sd -se -sf')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31384 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(31384, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Embedded smart card + readers fail HLK Ifdtest2 Parts A B &C', 'Embedded smart card + readers fail HLK Ifdtest2 Parts A and C', 'This is an acceptable failure in hlk kit', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.15063","10.1.14393","10.1.18362","10.1.17763","10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking reader status', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Invalid reader state\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'SCARD_ATTR_DEVICE_UNIT', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Invalid value:', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 31413 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'mjolnir.hlk.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('mjolnir.hlk.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31413 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(31413, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NonUsb tests run on systems with custom services', 'NonUsb based tests appear when there are local services on the system.', 'This errata will verify if non-USB based tests are incorrectly added and apply to those tests.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'count(//Devnode[ClassGUID="{e0cbf06c-cd8b-4647-bb8a-263b43f0f974}" and Enumerator!="USB" and Enumerator!="BTH" and Enumerator!="BTHLE"]) > 0', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'BUSES_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('BUSES_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'BUSES_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'count(//Devnode[BTHInfo/isBTHDevice and USBInfo/IsUsbDevice])>0', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":1,"Values":["System.Client.BluetoothController.NonUSB"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["19041","16299","17134","17763","18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'The master side of this test must be run on a system with a non-USB transport', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Running as Slave', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 31451 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.GSM.testclassdriver.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.GSM.testclassdriver.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31451 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(31451, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK test Win6_4.MB.System.Data.TestClassDriver due to their device is not using wbmclass driver, but their own class driver', 'HLK test Win6_4.MB.GSM.Data.TestClassDriver due to their device is not using wbmclass driver, but their own class driver', 'This is an acceptable failure', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"USB\VID_05C6&PID_9091") or contains(., "USB\VID_1508&PID_1001")])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestClassDriver::VerifyClassDriver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Verify device is not using usb \[USB\\VID_05C6&PID_9091.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device is using usb', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Verify device is not using usb \[USB\\VID_1508&PID_1001.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device is using usb', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 31452 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.CDMA.testclassdriver.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.CDMA.testclassdriver.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31452 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(31452, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK test Win6_4.MB.CDMA.Data.TestClassDriver due to their device is not using wbmclass driver, but their own class driver', 'HLK test Win6_4.MB.CDMA.Data.TestClassDriver due to their device is not using wbmclass driver, but their own class driver', 'This is an acceptable failure', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"USB\VID_05C6&PID_9091")])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestClassDriver::VerifyClassDriver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Verify device is not using usb \[USB\\VID_05C6&PID_9091.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device is using usb', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 31455 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspostst.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspostst.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31455 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(31455, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Waiver: KsPosition test specifies large buffer during pin creation. ', 'KsPosition TAEF_Render_DriftAndJitter_ForAEC/TAEF_Capture_DriftAndJitter_ForAEC test cases use 2 seconds buffer during pin creation. This ends up being a very large buffer for a format with higher sampling rate and multiple channels and driver may return failure due to insufficient resources.', 'This Errata covers the failure.', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.15063","10.1.16299","10.1.17134","10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'WDMAudio::KsPosTest::TAEF_.*_DriftAndJitter_ForAEC.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText', 'Error!  Could not get KSRTAUDIO_BUFFER: error 1450', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'AreNotEqual\(dwRes, \(DWORD\)FNS_FAIL\) - Values \(1, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 31833 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%WGF11Shader5x.exe%-11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%WGF11Shader5x.exe%-11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31833 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(31833, 5, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WGF11Shader5x ConstantBuffers on nVidia Kepler (Device Specific)', 'CONTINGENCY: Device.Graphics.AdapterRender.D3D12Core.CoreRequirement

It is only kind of working today (Kepler). Today, you can''t bind different views (same base address but different size) in different banks concurrently (i.e. both views applied to the same draw call). The bounds of latter one always "wins", though the interlock prevent the new bounds any in-flight threads launched binding the first view only."

This test is binding the same CB base with different sizes.  It does this:
1) Bind CB to VS HW slot 14 with size 256
2) Bind same CB as 1) to GS/PS slot 14 with size 512
3) VS tries to read data beyond 256 and incorrectly reads the data there
', 'Already fixed in post-Kepler hardware', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["Device.Graphics.AdapterRender.D3D12Core.CoreRequirement"]}')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE'') and (false 
or contains(.,''DEV_11C8'') or contains(.,''DEV_100C'') or contains(.,''DEV_104A'') or contains(.,''DEV_0FEF'') or contains(.,''DEV_1022'') or contains(.,''DEV_11C3'') or contains(.,''DEV_11FA'') or contains(.,''DEV_0FF9'') or contains(.,''DEV_0FF2'') or contains(.,''DEV_11C2'') or contains(.,''DEV_1249'') or contains(.,''DEV_11BF'') or contains(.,''DEV_1207'') or contains(.,''DEV_118F'') or contains(.,''DEV_1208'') or contains(.,''DEV_11C0'') or contains(.,''DEV_11C4'') or contains(.,''DEV_1187'') or contains(.,''DEV_1185'') or contains(.,''DEV_1027'') or contains(.,''DEV_1024'') or contains(.,''DEV_1284'') or contains(.,''DEV_11C6'') or contains(.,''DEV_104B'') or contains(.,''DEV_1206'') or contains(.,''DEV_1200'') or contains(.,''DEV_1201'') or contains(.,''DEV_1205'') or contains(.,''DEV_1241'') or contains(.,''DEV_1243'') or contains(.,''DEV_1244'') or contains(.,''DEV_1245'') or contains(.,''DEV_1040'') or contains(.,''DEV_1042'') or contains(.,''DEV_107D'') or contains(.,''DEV_1080'') or contains(.,''DEV_1082'') or contains(.,''DEV_1084'') or contains(.,''DEV_1086'') or contains(.,''DEV_1088'') or contains(.,''DEV_1089'') or contains(.,''DEV_1091'') or contains(.,''DEV_1094'') or contains(.,''DEV_109B'') or contains(.,''DEV_1081'') or contains(.,''DEV_1094'') or contains(.,''DEV_109B'') or contains(.,''DEV_1091'') or contains(.,''DEV_1091'') or contains(.,''DEV_1096'') or contains(.,''DEV_1096'') or contains(.,''DEV_1091'') or contains(.,''DEV_1183'') or contains(.,''DEV_0FC0'') or contains(.,''DEV_0FFA'') or contains(.,''DEV_0FFF'') or contains(.,''DEV_1096'') or contains(.,''DEV_1188'') or contains(.,''DEV_0FFE'') or contains(.,''DEV_1189'') or contains(.,''DEV_1087'') or contains(.,''DEV_1048'') or contains(.,''DEV_108B'') or contains(.,''DEV_0FFD'') or contains(.,''DEV_0FC2'') or contains(.,''DEV_0FC6'') or contains(.,''DEV_0FC1'') or contains(.,''DEV_1180'') or contains(.,''DEV_1049'') or contains(.,''DEV_11BA'') or contains(.,''DEV_124B'') or contains(.,''DEV_11BD'') or contains(.,''DEV_11BE'') or contains(.,''DEV_1184'') or contains(.,''DEV_1005'') or contains(.,''DEV_1004'') or contains(.,''DEV_11BC'') or contains(.,''DEV_11B6'') or contains(.,''DEV_1021'') or contains(.,''DEV_1028'') or contains(.,''DEV_1028'') or contains(.,''DEV_1022'') or contains(.,''DEV_0FF2'') or contains(.,''DEV_1021'') or contains(.,''DEV_0FF2'') or contains(.,''DEV_11BF'') or contains(.,''DEV_1280'') or contains(.,''DEV_1091'') or contains(.,''DEV_11BF'') or contains(.,''DEV_103A'') or contains(.,''DEV_1295'') or contains(.,''DEV_1023'') or contains(.,''DEV_1029'') or contains(.,''DEV_102A'') or contains(.,''DEV_1026'') or contains(.,''DEV_1282'') or contains(.,''DEV_1281'') or contains(.,''DEV_107C'') or contains(.,''DEV_1289'') or contains(.,''DEV_1001'') or contains(.,''DEV_100A'') or contains(.,''DEV_1286'') or contains(.,''DEV_1194'') or contains(.,''DEV_11C5'') or contains(.,''DEV_103C'') or contains(.,''DEV_118E'') or contains(.,''DEV_1193'') or contains(.,''DEV_1007'') or contains(.,''DEV_1008'') or contains(.,''DEV_104C'') or contains(.,''DEV_1288'') or contains(.,''DEV_0FF3'') or contains(.,''DEV_102D'') or contains(.,''DEV_1195'') or contains(.,''DEV_1287'') or contains(.,''DEV_0FC8'') or contains(.,''DEV_11B4'') or contains(.,''DEV_12B9'') or contains(.,''DEV_11FC'') or contains(.,''DEV_0FC9'') or contains(.,''DEV_11CB'') or contains(.,''DEV_128B''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=ConstantBuffers', 'ConstantBuffers', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32001 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%d3dconf_12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%d3dconf_12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32001 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32001, 7, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency for D3D12 Video Timestamps', 'HLK contains DX12 query based tests that depend on consistent “tick counts” to be reported by all engines.

The obvious way to obtain consistency is to use the same global clock and counter in HW (same frequency, always counting up with same values), and keep this clock/counter ALWAYS ON.

Current AMD HW will use different clocks and counters (per block/IP domain), and there is a different clock counter between video queues and gfx/compute queues

Some Gfx9  HW uses aggressive power gating features (GfxOff) that compromises the consistency of these clocks/counters between engine/queues due to clocks being paused/stopped and in extreme cases reset to 0.

We are seeing HLK failures when these clocks drift or create unexpected results from pause/reset.

Future HW (Gfx10+) will continue to use different clocks/counters per engine/queue and have aggressive power gating features; however, the HW will also leverage a global counter that will manage offsets for each of these clocks/counters to adjust and make each of these to appear like a consistent clock/counter (with skew of less than 20ns, which is much less than MS spec value of 80ns).', 'AMD to address hardware issue in next architecture (immediately proceeding Vega) and achieve test/API conformance. Fix is already POR, per AMD.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002'') and (contains(.,''DEV_15DD'') or contains(.,''DEV_69AF'') or contains(.,''DEV_69A0'') or contains(.,''DEV_69A1'') or contains(.,''DEV_15D9'') or contains(.,''DEV_1636'') or contains(.,''DEV_15D8''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*VideoProcessAndDecodeMarkers.*', '.*VideoProcessAndDecodeMarkers.*', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*SingleCommandListTimestamps.*', '.*SingleCommandListTimestamps.*', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*D3DConf_12_0_TimingData.*', '.*D3DConf_12_0_TimingData.*', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*D3DConf_12_0_GlobalRealtimeCommandQueuePriority.*', '.*D3DConf_12_0_GlobalRealtimeCommandQueuePriority.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32133 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%scsicompliance.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%scsicompliance.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32133 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32133, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK & HLK: SES Test (LOGO) or Enclosure Disk Test (LOGO) - SCSI Compliance Test does not handle page length over 4096 bytes', 'SCSI Compliance Test failed with error message “(x) ElementIndex field needs to be in ascending order." if SCSI Enclosure Services page length larger than the allocation length 4096 bytes.', 'This is an acceptable failure until the test is updated. ', '2030-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION\: RECEIVE DIAGNOSTIC RESULTS Additional Element Status diagnostic page Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '\(x\) ElementIndex field needs to be in ascending order.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32215 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%VerifyDriverRunFromStoreAndVersioning%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%VerifyDriverRunFromStoreAndVersioning%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32215 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32215, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Verify run from driver store support and file versioning (Graphics Drivers): Failure on LDA systems', 'On an LDA system, a test issue will result in failure: 
SUCCEEDED(GetDisplayDriverModelAndDriverStorePathFromDevicePath(wcBuffer.data(), pVersion, pDriverStorePath)) - Value (0x80004005)', 'This is an acceptable failure at this time.', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*SUCCEEDED\(GetDisplayDriverModelAndDriverStorePathFromDevicePath\(wcBuffer.data\(\), pVersion, pDriverStorePath\)\) - Value \(0x80004005\).*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32216 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%devfundinf.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%devfundinf.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32216 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32216, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: DevFund INF Test Error DriverPackage has a Hardware Id or a Compatible Id that begins with *pnp', 'DevFund INF Test Error DriverPackage has a Hardware Id or a Compatible Id that begins with *pnp for Windows 8.1.', 'This is an acceptable failure until the test is updated.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"ACPI\VEN_PNP&DEV_0501") or contains (., "ACPI\VEN_PNP&DEV_0500")])
')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevFundInfTest\:\:RestrictedHardwareId', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'inf has a Hardware Id or a Compatible Id that begins with \*pnp', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32443 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%win6_4.mbn.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%win6_4.mbn.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32443 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32443, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.System.Data.TestConnect Error at "Attempt to download web doc, failed" with "Let Windows manage this connection" option enabled.', 'Win6_4.MB.* tests cannot pass due to doc download failed with error message "Attempt to download web doc, failed"', 'This is an acceptable failure until the test is updated.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"USB\VID_8087&PID_0AC9") or contains(.,"USB\VID_8087&PID_0A2B")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client x86 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Attempt to download web doc\, failed', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Attempt connect and traffic on additional PDP and default PDP\, failed', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32480 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'crash.exe -input "_WTTRunWorkingDir_\profiles\WDDM_Logo_4Hrs-64bit.crash" _SLP_ _SLPATH_ _SLF_ _SLFILENAME_ _CONT_ _TRIAGE_ _AUTO_'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('crash.exe -input "_WTTRunWorkingDir_\profiles\WDDM_Logo_4Hrs-64bit.crash" _SLP_ _SLPATH_ _SLF_ _SLFILENAME_ _CONT_ _TRIAGE_ _AUTO_')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32480 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32480, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[Crash Test] Scheduler Stress failure during CRASH test on AMD APU Systems', 'Crash test causes failure during non driver portion of the test. The test can''t open a scenegraph file.', 'The issue is scheduled to be fixed with the test.', '2029-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Failed to read scene graph file', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32548 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging tpm20supplementaltest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging tpm20supplementaltest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32548 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32548, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM Interrupt Support Delay Enforcement Waiver', 'TPM Interrupt Support Delay Enforcement Waiver', 'In Vibranium, this test will be required to be passed.', '2029-01-09T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WEX::TestExecution::Tpm20SupplementalTest::Tpm20SupplementalTest::VerifyInterruptPresentAndUsed', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-01-09T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32629 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestValidateFaceAuthProfileForHello%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestValidateFaceAuthProfileForHello%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32629 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32629, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Windows Hello Face Auth Profile Validation fails existing cameras', 'Camera Windows Hello Face Auth Profile Validation fails existing cameras. These fails are accurate, but we are extending the time for devices to fix their driver bugs as it has been deemed non-critical.', 'Delayed Enforcement Errata issued until drivers and hardware can be updated. Enforcement will begin in release after 19H1/1903', '2050-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client x86 19H1 Full","Windows v10.0 Client x64 19H1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Found a non-0 index Face Auth Profile.*', 'Found KSCAMERAPROFILE.*FaceAuth.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*does not have profiles, but defines a face auth control.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32725 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspostst.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspostst.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32725 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32725, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KS Position Test incorrectly fails TAEF_Capture_ReadPacket and TAEF_Render_WritePacket testcases on a driver that does not implement them.', 'For TAEF_Capture_ReadPacket and TAEF_Render_WritePacket test cases, KsPosition test first instantiates pin and allocates audio buffer using AllocateBufferWithNotification and then checks if the driver support the WaveRT packet streaming. This is incorrect as driver that does not implement WaveRT packet streaming are not required to implement AllocateBufferWithNotification.', 'This errata covers above failure.
', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"USB\VID_17EF&PID_3063") or starts-with(.,"USB\VID_17EF&PID_306A") or starts-with(.,"USB\VID_17EF&PID_30A3") or starts-with(.,"USB\VID_0572&PID_1804")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*TAEF_Render_WritePacket.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Error!  Could not get KSRTAUDIO_BUFFER: error 87', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*TAEF_Capture_ReadPacket.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Error!  Could not get KSRTAUDIO_BUFFER: error 87', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32868 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pdcconform.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pdcconform.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32868 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32868, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:  ''Mobile Print - Print Device Capabilities conformance’ test failure as smaller than 360 dpi is not supported by these printers.', 'For performance reasons, PageResolution must have at least one option that is smaller than 360 DPI.', 'This is an acceptable failure until the test is updated.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/HardwareID[contains (., "Hewlett-PackardHP_La51C9") or contains (., "Hewlett-PackardHP_La3CEA") or contains (., "Hewlett-PackardHP_CoBDD3") or contains (., "Hewlett-PackardHP_Co2F61") or contains (., "Hewlett-PackardHP_LaD555") or contains (., "Hewlett-PackardHP_Co3C4F") or contains (., "Hewlett-PackardHP_LaD4E5") or contains (., "Hewlett-PackardHP_LaD5A5") or contains (., "Hewlett-PackardHP_LaA89E") or contains (., "Hewlett-PackardHP_Co1C8B") or contains (., "Hewlett-PackardHP_Co8EBD") or contains (., "Hewlett-PackardHP_LaFA09") or contains (., "Hewlett-PackardHP_La0A72") or contains (., "Hewlett-PackardCCT_CA04D")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PdcConform::PdcConform::DeviceTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'For performance reasons, PageResolution must have at least one option that is smaller than 360 DPI.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32878 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_video.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_video.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32878 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32878, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Conf_VideoNative::SingleDecodeH264#D3D12Driver#* failing due to invalid max DPB in decoder heap.', 'D3D12 - Conf_VideoNative::SingleDecodeH264#D3D12Driver#* failing due to invalid max DPB in decoder heap.', 'This is an acceptable failure', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ReferenceOnly: true, DecodeTier: 1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'IsTrue\(result\.codeFound\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ReferenceOnly: true, DecodeTier: 1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '\[HRESULT 0x800706BE\] A failure occurred while running a test operation', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32915 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32915 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32915, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 - Shader Model 6.0 Support Reporting Test fails on WS 2016', 'D3D12 - Shader Model 6.0 Support Reporting Test is being removed from the current kits.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_1_ShaderModel::SupportTestSM6_0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsLessThan\(SMData.HighestShaderModel, D3D_SHADER_MODEL_6_0\): Driver must not report support for SM 6.0 ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32918 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcmEndtoEnd.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcmEndtoEnd.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32918 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32918, 4, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'RS4/RS5: Manual Waiver: UCM Role Swap tests do not apply to Type-C systems that do not support PD (power delivery)', 'The UCM Role Swap tests are applied to all systems with USB Type-C ports.  However, if the system does support PD or Desktop/AIO system does not support USB Function/Device Mode or operating as a USB-C/PD Power Sink, then the requirement to support UCM should not apply.  A waiver for these tests is available for RS4/RS5 submissions.', 'Contact CSS for application of manual waiver #32918.

If the system has Type-C ports, but does not support USB PD (Power Delivery), Desktop/AIO system does not support USB Function/Device Mode or operating as a USB-C/PD Power Sink
The waiver will apply.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17134","10.1.17763","10.1.19043"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*No providers present.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 32920 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32920 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(32920, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Overlapping resources Test failing on resources > 4GB', 'NV drivers do not support allocating resources larger than 4GB', 'NV will provide a driver with fixes enabling &gt;4GB resources', '2028-11-29T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceHeap::OverlappingResourcesTest', 'D3DConf_12_0_ResourceHeap::OverlappingResourcesTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'SUCCEEDED\(m_Device->CreateHeap\(', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', '', 'Driver Verifier', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-11-29T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33026 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33026 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33026, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata Waiver: D3D12 - DXIL 16bit Types Test - * instruction: Verifies the * DXIL instruction', 'The driver that enables optional feature for Shader Model 6.2 16bit types run tests with pattern DxilConfTest::*Half. However some test cases in this area are expecting wrong values, resulting in false negative errors even when the drivers are computing the correct values for 16bit type inputs.', 'Error will be filtered until HLK test cases are fixed to correctly expect the right values.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_RENDER'']/GraphicsInfo/RenderInfo[D3D12Native16Bits=1])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#HcosHalf', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'IsTrue(CompareHalfEpsilon(output, ref, (float)tolerance))', 'UserText', 0, 1)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#Round_niHalf', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#FAbsHalf', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#RsqrtHalf', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#SqrtHalf', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::CBufferTestHalf', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33062 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll /name:AVQuality::DRMTest::HardwareDRM_VerifyCodecSupport#*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll /name:AVQuality::DRMTest::HardwareDRM_VerifyCodecSupport#*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33062 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33062, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata : Verify Codec Support Test : verify that decoderprofile which support playready bitstream encryption guids are supported by the OS for HW-DRM (Deivce Specific)', 'Driver reproting playready HW-DRM BitStreamEncryptionGuid for codecs which do not have playready HW-DRM support.', 'This is an acceptable failure for now. Remove the offending DecoderProfiles in the future.', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002'') and (contains(.,''DEV_15DD'') or contains(.,''DEV_15D9'') or contains(.,''DEV_699F'') or contains(.,''DEV_6980'') or contains(.,''DEV_6860'') or contains(.,''DEV_6861'') or contains(.,''DEV_6862'') or contains(.,''DEV_6863'') or contains(.,''DEV_6864'') or contains(.,''DEV_6867'') or contains(.,''DEV_6868'') or contains(.,''DEV_6869'') or contains(.,''DEV_686A'') or contains(.,''DEV_686B'') or contains(.,''DEV_686C'') or contains(.,''DEV_686D'') or contains(.,''DEV_686E'') or contains(.,''DEV_686F'') or contains(.,''DEV_69A0'') or contains(.,''DEV_69A1'') or contains(.,''DEV_69A2'') or contains(.,''DEV_69A3'') or contains(.,''DEV_69AF'') or contains(.,''DEV_66A0'') or contains(.,''DEV_66A1'') or contains(.,''DEV_66A2'') or contains(.,''DEV_66A3'') or contains(.,''DEV_66A7'') or contains(.,''DEV_66AF'') or contains(.,''DEV_67DF'') or contains(.,''DEV_67EF'') or contains(.,''DEV_6900'') or contains(.,''DEV_67C2'') or contains(.,''DEV_694C'') or contains(.,''DEV_694E'') or contains(.,''DEV_694F'') or contains(.,''DEV_67C0'') or contains(.,''DEV_6987'') or contains(.,''DEV_6981'') or contains(.,''DEV_6FDF'') or contains(.,''DEV_67C1''))])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Server x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_VerifyCodecSupport', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {4245F676-2BBC-4166-A0BB-54E7B849C380}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {4245F676-2BBC-4166-A0BB-54E7B849C380}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {4245F676-2BBC-4166-A0BB-54E7B849C380}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {6719B6FB-5CAD-4ACB-B00A-F3BFDEC38727}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {6719B6FB-5CAD-4ACB-B00A-F3BFDEC38727}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {9901CCD3-CA12-4B7E-867A-E2223D9255C3}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {EA72396A-67EC-4781-BEDE-56F498F04EF2}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {C152CA8F-738C-461B-AD89-FC292CF8F162}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {514A356C-7027-4AFF-8A60-AFD2C1F672F1}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {65D1FA41-58AF-453A-9CAB-5D981156DA9F}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {2DB154B6-DBB2-4079-A3FF-60D7A898A6AB}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {C74A3FD0-D713-4581-A02E-8EDFB112ACE3}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {4245F676-2BBC-4166-A0BB-54E7B849C380}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {4245F676-2BBC-4166-A0BB-54E7B849C380}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {6719B6FB-5CAD-4ACB-B00A-F3BFDEC38727}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {6719B6FB-5CAD-4ACB-B00A-F3BFDEC38727}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {9901CCD3-CA12-4B7E-867A-E2223D9255C3}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {EA72396A-67EC-4781-BEDE-56F498F04EF2}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {C152CA8F-738C-461B-AD89-FC292CF8F162}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {514A356C-7027-4AFF-8A60-AFD2C1F672F1}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {65D1FA41-58AF-453A-9CAB-5D981156DA9F}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {2DB154B6-DBB2-4079-A3FF-60D7A898A6AB}', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'GUID: {C74A3FD0-D713-4581-A02E-8EDFB112ACE3}', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33105 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGISwap.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGISwap.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33105 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33105, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: DXGI Swap Effects: CPresentFS::CreateDeviceAndSwapChain: SetFullscreenState failed on 4K display', 'Test fails because of OS issue causing cmd.exe to be set as Foreground window, which causes test app to fail to SetFullscreenState and fail test cases.', 'Error will be filtered for RS4. Shell team will fix the OS bug in RS5.', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Client ARM64 RS5 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'CPresentFS::CreateDeviceAndSwapChain:  SetFullscreenState failed with error 0x887a0022.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'CFSWinTransitionSequential::TransitionBeforePresent SetFullscreenState failed hr=0x887a0022', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'HRESULT: DXGI_STATUS_OCCLUDED \(0x87a0001\).', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33175 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%sysfund%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%sysfund%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33175 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33175, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: System - PNP (disable and enable) with IO Before and After (Reliability) test: BluetoothFindFirstDevice failed to find a device Win32=259', 'Filter this error with Bluetooth devices which has been fixed for RS5: BluetoothFindFirstDevice failed to find a device Win32=259', 'WDTF Bluetooth plug-in has been updated to fix this error.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndError:UserText', '.*BluetoothFindFirstDevice failed to find a device Win32=259*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33176 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33176 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33176, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata Waiver: D3D12 - D3D12 - DXIL SM 6.2 DenormMode Test - FMadDenormPreserve', 'The driver that enables optional feature Shader Model 6.2 will run DxilConfTest::DenormTertiaryFloatOpTest#FMadDenormPreserve. The test infrastructure reads the wrong inputs, resulting in false negative errors even when the drivers are computing the correct values. ', 'Error will be filtered until HLK test cases are fixed to correctly expect the right values.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_RENDER'']/GraphicsInfo/RenderInfo[D3D12HighestShaderModel>=98])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::DenormTertiaryFloatOpTest#FMadDenormPreserve', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33267 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33267 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33267, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'RS4 : IHVs fail PeriodicFrameNotificaiton test due to setup enabling driver verfier', 'PeriodicFrameNotificaiton Precision test may fail due to setup job enabling driver verifier.', 'Test setup will be fixed in future releases.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS4 OneCore","Windows v10.0 Client x64 RS4 OneCore","Windows v10.0 Client ARM RS4 OneCore","Windows v10.0 Client ARM64 RS4 OneCore","Windows v10.0 Server x64 RS4 OneCore","Windows v10.0 Client x86 RS4 OneCoreUAP","Windows v10.0 Client x64 RS4 OneCoreUAP","Windows v10.0 Client ARM RS4 OneCoreUAP","Windows v10.0 Client ARM64 RS4 OneCoreUAP","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client x86 RS4 Mobile","Windows v10.0 Client ARM RS4 Mobile","Windows v10.0 Client ARM64 RS4 Mobile"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PeriodicFrameNotification::TestPrecision', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Average notification latency exceeds the target of', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Average notification time is consistently earlier than the notification target by more than', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PeriodicFrameNotification::TestSimultaneousActiveNotifications', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Average notification time is consistently earlier than the notification target by more than', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Average notification latency exceeds the target of', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33452 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Present2_fullscreen.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Present2_fullscreen.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33452 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33452, 2, 1, 1, 0, 1, 1, 1, @TestCommandLineId, 'HLK Errata: Present Validation 2 (Fullscreen) test fails on Windows 10 RS4', 'HLK Manual Errata: Present Validation 2 (Fullscreen) test fails on Windows 10 RS4', 'This is an acceptable failure', '2030-07-01T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1002")]) ')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33472 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ucsicompliancetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ucsicompliancetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33472 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33472, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS4: UCSI Get Connector Status - Supported Provider Capabilities Change | Log file displays the test as pass but result is shown as Fail', 'The scenario is that the test waits a full 2 minutes for the Supported Provider Capabilities Change Notification.  However, if the notification arrives more than once then the test terminates prematurely.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1002")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'End', 'Failed to start wpp tracing', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestSupportedProviderCapabilitiesChangeNotification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught std::exception', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Test operation', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33596 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestWindowsHelloDeviceRequirement%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestWindowsHelloDeviceRequirement%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33596 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33596, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - MediaCapture - TestWindowsHelloDeviceRequirement fails due to pin filtering', 'Camera Driver System Test - MediaCapture - TestWindowsHelloDeviceRequirement fails on certain devices when profiles filters out certain pins. This causes indexing to become faulty, leading to the selected stream being unavailable.', 'OS Fixed, Errata Issued', '2028-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Unable to to find the FaceAuth IR Stream after initialization', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33694 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'MTask.exe -i "Does this driver implement XPSDrv or does this device have a logoed driver that correctly implements XPSDrv?" -o "PassFail"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('MTask.exe -i "Does this driver implement XPSDrv or does this device have a logoed driver that correctly implements XPSDrv?" -o "PassFail"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33694 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33694, 1, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HCK Manual Errata: Verify the device supports XPS (MANUAL) fails on Wide Format printer', 'HCK Manual Errata: Verify the device supports XPS (MANUAL) fails on Wide Format printer', 'HCK Manual Errata: Verify the device supports XPS (MANUAL) fails on Wide Format printer', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 9600])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Description[(contains(.,''PD41'') or contains(.,''PD42'') or contains(.,''PC23d'') or contains(.,''PC43d'') or contains(.,''PC43t'') or contains(.,''PD43'') or contains(.,''PM23c'') or contains(.,''PM43'') or contains(.,''PC42d'') or contains(.,''PC42t'') or contains(.,''PM42'') or contains(.,''PB22'') or contains(.,''PB50'') or contains(.,''PX4i'') or contains(.,''ZDesigner'') or contains(.,''w1110'') or boolean(//*[contains(.,''Seagull'') or contains(.,"canonipf5100")]))])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'This is a dummy constraint meant to prevent this filter from applying to results that have log files.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33734 v10.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%enablewttlogging%appendwttlogging%hlk.bluetooth.singledevicetests.dll%name:BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%enablewttlogging%appendwttlogging%hlk.bluetooth.singledevicetests.dll%name:BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33734 AND Version = 10
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33734, 10, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Bluetooth - Optional - HciExtension1 (Bring Up): HciExtensions tests for incorrect feature bits', 'This HLK test checks to make sure the HW returns to us a bitmask, with the required supported features set to 1. In later OS releases, we added a new feature, but did not update the HLK test to check for this bit in the HW provided bitmask, causing a failure.', 'This errata allows IHVs who run the HLK tests to support the extra feature and pass the HLK test.', '2029-07-30T23:59:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763","18362","19041","22000","22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1', 'BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Not all expected Microsoft HCI extension features are supported. - Values \(31, 15\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Not all expected Microsoft HCI extension features are supported. - Values \(63, 15\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1', 'BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Radio reported supported features as: 0x000000000000007F', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Radio reported supported features as: 0x000000000000027F', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Radio reported supported features as: 0x000000000000047F', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '0000000000000000000000000000000000000000000000000000010000000000', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-30T23:59:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33742 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%hlk%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%hlk%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33742 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33742, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Bluetooth - Optional - HciExtension (Bring Up) and (Development and Integration): HciExtensions tests for incorrect feature bits', 'This HLK test checks to make sure the HW returns to us a bitmask, with the required supported features set to 1. The tests assume all features will be supported, which is not always the case.', 'This errata allows IHVs to run the HLK tests on hardware that have partial support of the HciExtensions.', '2025-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'count(//Devnode[DeviceID[
contains(text(), "USB\VID_0BDA&PID_0002") or 
contains(text(), "USB\VID_13D3&PID_3386") or 
contains(text(), "USB\VID_0BDA&PID_8723") or 
contains(text(), "USB\VID_13D3&PID_3394") or 
contains(text(), "USB\VID_0930&PID_021d") or 
contains(text(), "USB\VID_0BDA&PID_A723") or 
contains(text(), "USB\VID_0BDA&PID_1724&MI_00") or 
contains(text(), "USB\VID_0BDA&PID_8725&MI_00") or 
contains(text(), "USB\VID_0BDA&PID_0723&MI_00") or 
contains(text(), "USB\VID_0BDA&PID_0724&MI_00") or 
contains(text(), "USB\VID_0BDA&PID_8821") or 
contains(text(), "USB\VID_0BDA&PID_2850") or 
contains(text(), "USB\VID_0BDA&PID_2801") or 
contains(text(), "USB\VID_0BDA&PID_8753") or 
contains(text(), "USB\VID_0BDA&PID_B723") or 
contains(text(), "USB\VID_13D3&PID_3459") or 
contains(text(), "USB\VID_B49A&PID_04F2") or 
contains(text(), "USB\VID_04F2&PID_B49A") or 
contains(text(), "USB\VID_0BDA&PID_B720&MI_00") or 
contains(text(), "USB\VID_0BDA&PID_B72A") or 
contains(text(), "USB\VID_0BDA&PID_B72B") or 
contains(text(), "USB\VID_0BDA&PID_8754") or 
contains(text(), "USB\VID_0BDA&PID_B761") or 
contains(text(), "USB\VID_0BDA&PID_8761") or 
contains(text(), "USB\VID_0BDA&PID_8762") or 
contains(text(), "USB\VID_0BDA&PID_8763") or 
contains(text(), "USB\VID_0BDA&PID_B002") or 
contains(text(), "USB\VID_13D3&PID_3410") or 
contains(text(), "USB\VID_0BDA&PID_B003") or 
contains(text(), "USB\VID_0930&PID_0222") or 
contains(text(), "USB\VID_0BDA&PID_B004") or 
contains(text(), "USB\VID_0BDA&PID_8760") or 
contains(text(), "USB\VID_0BDA&PID_8A60") or 
contains(text(), "USB\VID_13D3&PID_3416") or 
contains(text(), "USB\VID_0B05&PID_17DC") or 
contains(text(), "USB\VID_0BDA&PID_0823&MI_00") or 
contains(text(), "USB\VID_0BDA&PID_8A61") or 
contains(text(), "USB\VID_0BDA&PID_A761") or 
contains(text(), "USB\VID_0BDA&PID_818C&MI_00") or 
contains(text(), "USB\VID_13D3&PID_3527") or 
contains(text(), "USB\VID_0BDA&PID_B005") or 
contains(text(), "USB\VID_13D3&PID_3458") or 
contains(text(), "USB\VID_0489&PID_E085") or 
contains(text(), "USB\VID_0489&PID_E08B") or 
contains(text(), "USB\VID_0489&PID_E094") or 
contains(text(), "USB\VID_0489&PID_E09E") or 
contains(text(), "USB\VID_13D3&PID_3461") or 
contains(text(), "USB\VID_13D3&PID_3462") or 
contains(text(), "USB\VID_13D3&PID_3477") or 
contains(text(), "USB\VID_13D3&PID_3479") or 
contains(text(), "USB\VID_13D3&PID_3535") or 
contains(text(), "USB\VID_0930&PID_022F") or 
contains(text(), "USB\VID_0BDA&PID_8199") or 
contains(text(), "USB\VID_13D3&PID_3542") or 
contains(text(), "USB\VID_04F2&PID_B49B") or 
contains(text(), "USB\VID_04F2&PID_B49C") or 
contains(text(), "USB\VID_0BDA&PID_B721") or 
contains(text(), "USB\VID_0BDA&PID_B722") or 
contains(text(), "USB\VID_0BDA&PID_B007") or 
contains(text(), "USB\VID_04F2&PID_B4A0") or 
contains(text(), "USB\VID_04F2&PID_B49F") or 
contains(text(), "USB\VID_04F2&PID_B4A5") or 
contains(text(), "USB\VID_0BDA&PID_B725") or 
contains(text(), "USB\VID_0BDA&PID_B719") or 
contains(text(), "USB\VID_0BDA&PID_B718") or 
contains(text(), "USB\VID_13D3&PID_3494") or 
contains(text(), "USB\VID_13D3&PID_3507") or 
contains(text(), "USB\VID_0BDA&PID_3508") or 
contains(text(), "USB\VID_0BDA&PID_3509") or 
contains(text(), "USB\VID_3341&PID_8050") or 
contains(text(), "USB\VID_13D3&PID_3486") or 
contains(text(), "USB\VID_0BDA&PID_B001") or 
contains(text(), "USB\VID_0BDA&PID_B006") or 
contains(text(), "USB\VID_0BDA&PID_B008") or 
contains(text(), "USB\VID_0BDA&PID_0821") or 
contains(text(), "USB\VID_13D3&PID_3414") or 
contains(text(), "USB\VID_0BDA&PID_B728") or 
contains(text(), "USB\VID_0BDA&PID_B739")
]])=1', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1', 'BluetoothHLK::RadioControllerCapabilities::Test_HciExtensions1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Not all expected Microsoft HCI extension features are supported. - Values \(16, 15\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=HciExtensions', 'HciExtensions', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR: HciExtensions\d{0,1} ERROR - Failed to send monitor command to BTHPORT. \[0x80070032\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '-= SLAVE Executing Test Case : TestID \[HciExtensions\d\] =-', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33822 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestWindowsHelloDeviceRequirement%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestWindowsHelloDeviceRequirement%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33822 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33822, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Windows Hello Test has IR Camera frame drops when testing with Dual IR-RGB at 30 fps', 'This is due to the test runtime for capture being 10s for 300 frames, as well as the RGB camera being stopped before the IR Camera. The stop of the RGB camera causes the pipeline to flush, which then stops all samples from flowing. Fix was to reverse the order of operations for stopping, and to increase the time to 15s for the test.', 'Errata Issued, Test Fixed', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Test completed', 'CreateFrameReader.1.', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Time between frames exceeds 200 Percent of Frame Rate: Frame .2.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 33826 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% sysfund_%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% sysfund_%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33826 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(33826, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'System PnP test fails when using concurrent cameras on the same USB bus', 'Test fails due to two USB cameras both running concurrently, on the same USB bus. This configuration is not advised', 'Errata Issued', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*HRESULT.0xC00D3704 . Hardware MFT failed to start streaming due to lack of hardware resources', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34231 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'damx.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('damx.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34231 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34231, 2, 2, 1, 0, 1, 0, 0, @TestCommandLineId, 'HLK RS4 Autotriage: Connected standby IO stress failure due to copy required files in specific location', 'Test fails at step "Exempt xperf.exe from DAM"
The test tries to lookup xperf.exe at  ‘%DTMBin%..\..\Windows Performance Toolkit\’ which is the correct path for AMD/x64 systems but not for ARM64, causing the setup test to fail only for ARM.', 'Please use the following Workaround: (on the Client) For ARM64 testing, before running the test, copy files manually from "c:\data\test\bin\WTT\LocalInstall\arm64\XPerf\" to c:\data\test\Windows Performance Toolkit”', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS3 Full"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34238 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'UpdateTexture.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('UpdateTexture.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34238 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34238, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: UpdateTexture:  9on12 fails to handle mismatching mipmap copies', 'D3D9on12 is failing to correctly handle copies between resources with mismatching mipmap cases.', 'Error will be filtered until RS5 where this has been fixed and verified', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify texture of different levels can be updated', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34243 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'mrt.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('mrt.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34243 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34243, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: MRT:  9on12 fails to handle BlendWriteMask for R10G10B10A2_UNORM', 'D3D9on12 emulates the R10G10B10A2_UNORM format since it doesn''t exist in DXGI, but doesn''t properly handle swizzling the BlendWriteMask, causing MRT to result in incorrectly blended results.', 'Error will be filtered until RS5 where this has been fixed and verified', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Tex.*:A2R10G10B10', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34246 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'present2.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('present2.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34246 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34246, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Present2:  9on12 failing to swizzle channels for R10G10B10A2_UNORM before Present', 'D3D9on12 emulates the R10G10B10A2_UNORM format since it doesn''t exist in DXGI, but doesn''t properly handle swizzling the channels before present, causing the red and blue channels to be swapped', 'Error will be filtered until RS5 where this has been fixed and verified', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'GammaPresent.*D3DFMT_A2R10G10B10', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34247 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'StretchRect.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('StretchRect.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34247 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34247, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: StretchRect: 9on12 invalidly reporting RenderTarget support for NV12', 'D3D9on12 was incorrectly reporting RenderTarget support for NV12 surfaces, causing a device removal when the StretchRect test requested a RenderTarget be created for a NV12 surface', 'Error will be filtered until RS5 where this has been fixed and verified', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Test group had aborts but no failures', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', '.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'CreateDeviceEx failed with error 0x8876086a', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34250 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'StretchRect.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('StretchRect.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34250 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34250, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'Errata Waiver: StretchRect: 9on12 invalidly reporting RenderTarget support for NV12 (Blocked Version)', 'D3D9on12 was incorrectly reporting RenderTarget support for NV12 surfaces, causing a device removal when the StretchRect test requested a RenderTarget be created for a NV12 surface', 'Error will be filtered until RS5 where this has been fixed and verified', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'SetupTest', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test Initialization', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34328 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging devfundinf.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging devfundinf.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34328 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34328, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK2.1: DevFund INF test failure due to Driver Dismounted with no function driver (Device specific)', 'HCK2.1: DevFund INF test failure due to Driver Dismounted with no function driver (Device specific)', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1000&DEV_00AF") or contains(.,"VEN_1000&DEV_00AA") or contains(.,"VEN_1000&DEV_00AB") or contains(.,"VEN_1000&DEV_00AC") or contains(.,"VEN_1000&DEV_00AD") or contains(.,"VEN_1000&DEV_00AE") or contains(.,"VEN_1000&DEV_00D0") or contains(.,"VEN_1000&DEV_00D1") or contains(.,"VEN_1000&DEV_00D2")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevFundInfTest::HasFunctionDriver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The service for the function driver must have the SPSVCINST_ASSOCSERVICE flag', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34365 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34365 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34365, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata Waiver: D3D12 - DXIL SM 6.2 DenormMode Test - FDivDenormPreserve', 'This test case is for an optional feature Shader Model 6.2. This is a test bug - the expected value is wrong.', 'Error will be filtered until HLK test cases are fixed to correctly expect the right values.', '2029-10-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_RENDER'']/GraphicsInfo/RenderInfo[D3D12HighestShaderModel>=98])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::DenormBinaryFloatOpTest#FDivDenormPreserve', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-10-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34370 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::Test'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::Test')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34370 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34370, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - Profile Validation does not expect finish', 'Camera Driver System Test - Profile Validation does not expect finish, so ERROR_NO_MORE_ITEMS causes the test to fail.', 'Errata Issued, Test Fixed', '2028-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=SUCCEEDED.*0x80070103.', 'Status of Sensor Profile Validation hr . 0x 80070103', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34378 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGISwap.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGISwap.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34378 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34378, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[HLK RS4] DXGI Swap Effects & DXGI Swap Effects (WoW64) Failing on AMD HW', '0x887A0022 (DXGI_ERROR_NOT_CURRENTLY_AVAILABLE) ', 'This is an acceptabel failure in the RS4', '2050-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'TransitionBeforePresent failed. hr=0x887a0022', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34379 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TDRWatch.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TDRWatch.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34379 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34379, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: TDRWatch test failures due to D3D12 - Conf_VideoNative::SingleDecodeH264#D3D12Driver#* failing due to invalid max DPB in decoder heap.', 'This test uses a constant MaxDPB parameter of 5, but then proceeds to decode a clip that requires a MaxDPB of 16.  The driver is allowed to optimize memory utilization based on this value.', 'Test will be fixed in RS4.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '0D8581D9\-F453\-45C5\-8C06\-C200389017CC', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TDR_Happened', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34414 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%WaveTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%WaveTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34414 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34414, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WaveTest TAEF_Capture_DataIntersection testcase fails on keyword detector pin.', 'Pin creation would fail due to incorrect buffer allocation API used by test. Driver supports KSPROPERTY_RTAUDIO_BUFFER_WITH_NOTIFICATION and test is using KSPROPERTY_RTAUDIO_BUFFER to allocate buffer. This causes failure on keyword detector pin.', 'This errata overturns the failure.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS3 Full","Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'WDMAudio::WaveTest::TAEF_Capture_DataIntersection.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', '.*Data[Name]: Capture Pin # 2.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', '.*Error!  Could not get KSRTAUDIO_BUFFER: error 31.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!', '.*FAIL: Failed to create data buffer.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*FAIL: Pin Creation Failed for all formats.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34490 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11ResourceAccess.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11ResourceAccess.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34490 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34490, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: WGF11 Resource Access test is failing for P010 surfaces', 'Test is validating the high 6 bits of the P010 format, which are allowed to be undefined.', 'We will filter the failures until RS5.', '2050-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ResourceAccess', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Format.*P010', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34526 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'EDIDV2.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('EDIDV2.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34526 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34526, 1, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'EDID 1.3 and DDC (WoW64): Test can crash due to test bug', 'Crashes in the "EDID 1.3 and DDC (WoW64)" test (resulting in no wtl log) can occur due to a test bug. These should be waived.', 'This is an acceptable failure', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17134"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34630 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% dimageblackboxtests.dll /name:DImageEffectTests::CInteropTests::CommandTiling'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% dimageblackboxtests.dll /name:DImageEffectTests::CInteropTests::CommandTiling')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34630 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34630, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D2D - DImage Effect Test CommandTiling is overly strict', 'The CommandTiling tests were created with an overly strict error tolerance - causing visually identical output and comparison images to be registered as different enough to fail the test.', 'Error will be filtered out until test is updated to change tolerances.', '2050-02-28T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DImageEffectTests::CInteropTests::CommandTiling', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-02-28T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 34867 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kstoptest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kstoptest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34867 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(34867, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, ' KsTopology test incorrectly fails when a node support KSPROPERTY_MEMBER_FLAG_BASICSUPPORT_UNIFORM.', 'KsTopology test incorrectly requires that GET request for channels greater than zero must fail when a node has KSPROPERTY_MEMBER_FLAG_BASICSUPPORT_UNIFORM flag set.', 'This errata overturns the failure.', '2029-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'KS Topology Filters\\KS Properties\\Check Property Descriptor Size and Headers', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*KSPROPERTY_MEMBERSHEADER.Flags has the KSPROPERTY_MEMBER_FLAG_BASICSUPPORT_UNIFORM flag setand allows GET for channels greater than zero.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'KS Topology Filters\\KS Properties\\Check Property Get and Set Ranges', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*KSPROPERTY_MEMBERSHEADER.Flags has the KSPROPERTY_MEMBER_FLAG_BASICSUPPORT_UNIFORM flag setand allows GET for channels greater than zero.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 35112 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 35112 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(35112, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata : HEVC SW-DRM some NVidia GPUS do not support 4k decode', 'Some low memory NVidia GPU''s are incapabable of decoding 4k content due to memory constraints.', 'For now we will grant device specific waivers. In the future we will add requirements that can appropriatley screen the device for 4k decode support.', '2025-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE&DEV_1287") or contains(.,"VEN_10DE&DEV_0FF0") or contains(.,"VEN_10DE&DEV_0FD4") or contains(.,"VEN_10DE&DEV_0FD1") or contains(.,"VEN_10DE&DEV_0FFB") or contains(.,"VEN_10DE&DEV_0FD3") or contains(.,"VEN_10DE&DEV_0FD2") or contains(.,"VEN_10DE&DEV_0FCB") or contains(.,"VEN_10DE&DEV_0FEF") or contains(.,"VEN_10DE&DEV_0FD9") or contains(.,"VEN_10DE&DEV_0FF9") or contains(.,"VEN_10DE&DEV_12AF") or contains(.,"VEN_10DE&DEV_12B1") or contains(.,"VEN_10DE&DEV_0FE5") or contains(.,"VEN_10DE&DEV_0FF7") or contains(.,"VEN_10DE&DEV_12AD") or contains(.,"VEN_10DE&DEV_12AE") or contains(.,"VEN_10DE&DEV_12BA") or contains(.,"VEN_10DE&DEV_0FF6") or contains(.,"VEN_10DE&DEV_1290") or contains(.,"VEN_10DE&DEV_1292") or contains(.,"VEN_10DE&DEV_12A0") or contains(.,"VEN_10DE&DEV_0FE1") or contains(.,"VEN_10DE&DEV_0FE7") or contains(.,"VEN_10DE&DEV_0FF5") or contains(.,"VEN_10DE&DEV_1291") or contains(.,"VEN_10DE&DEV_1282") or contains(.,"VEN_10DE&DEV_1293") or contains(.,"VEN_10DE&DEV_0FE9") or contains(.,"VEN_10DE&DEV_0FE8") or contains(.,"VEN_10DE&DEV_0FCD") or contains(.,"VEN_10DE&DEV_1284") or contains(.,"VEN_10DE&DEV_1298") or contains(.,"VEN_10DE&DEV_0FE3") or contains(.,"VEN_10DE&DEV_12B9") or contains(.,"VEN_10DE&DEV_0FC8") or contains(.,"VEN_10DE&DEV_0FF3") or contains(.,"VEN_10DE&DEV_0FED") or contains(.,"VEN_10DE&DEV_1294") or contains(.,"VEN_10DE&DEV_0FEC") or contains(.,"VEN_10DE&DEV_0FC9") or contains(.,"VEN_10DE&DEV_1295") or contains(.,"VEN_10DE&DEV_1296") or contains(.,"VEN_10DE&DEV_1289") or contains(.,"VEN_10DE&DEV_0FD6") or contains(.,"VEN_10DE&DEV_0FD7") or contains(.,"VEN_10DE&DEV_0FC0") or contains(.,"VEN_10DE&DEV_0FC2") or contains(.,"VEN_10DE&DEV_0FC4") or contains(.,"VEN_10DE&DEV_0FDD") or contains(.,"VEN_10DE&DEV_0FDE") or contains(.,"VEN_10DE&DEV_0FD0") or contains(.,"VEN_10DE&DEV_0FFC") or contains(.,"VEN_10DE&DEV_0FDC") or contains(.,"VEN_10DE&DEV_0FD5") or contains(.,"VEN_10DE&DEV_0FFD") or contains(.,"VEN_10DE&DEV_0FC6") or contains(.,"VEN_10DE&DEV_0FD8") or contains(.,"VEN_10DE&DEV_0FDA") or contains(.,"VEN_10DE&DEV_0FDB") or contains(.,"VEN_10DE&DEV_0FDF") or contains(.,"VEN_10DE&DEV_0FFA") or contains(.,"VEN_10DE&DEV_0FFE") or contains(.,"VEN_10DE&DEV_0FFF") or contains(.,"VEN_10DE&DEV_0FE0") or contains(.,"VEN_10DE&DEV_0FC7") or contains(.,"VEN_10DE&DEV_0FCA") or contains(.,"VEN_10DE&DEV_12B0") or contains(.,"VEN_10DE&DEV_0FCE") or contains(.,"VEN_10DE&DEV_0FCF") or contains(.,"VEN_10DE&DEV_0FF1") or contains(.,"VEN_10DE&DEV_0FF8") or contains(.,"VEN_10DE&DEV_0FF2") or contains(.,"VEN_10DE&DEV_0FE2") or contains(.,"VEN_10DE&DEV_0FE4") or contains(.,"VEN_10DE&DEV_0FE6") or contains(.,"VEN_10DE&DEV_1280") or contains(.,"VEN_10DE&DEV_0FC5") or contains(.,"VEN_10DE&DEV_1281") or contains(.,"VEN_10DE&DEV_1283") or contains(.,"VEN_10DE&DEV_1285") or contains(.,"VEN_10DE&DEV_1286") or contains(.,"VEN_10DE&DEV_0FF0") or contains(.,"VEN_10DE&DEV_1288") or contains(.,"VEN_10DE&DEV_1299") or contains(.,"VEN_10DE&DEV_129A") or contains(.,"VEN_10DE&DEV_0FCC") or contains(.,"VEN_10DE&DEV_129B") or contains(.,"VEN_10DE&DEV_0FEE") or contains(.,"VEN_10DE&DEV_128A") or contains(.,"VEN_10DE&DEV_128B") or contains(.,"VEN_10DE&DEV_1297")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_HEVC_Video1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_HEVC_Video5', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_HEVC_Video6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_HEVC_Video7', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Playback failed with error: 80004001', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 35355 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe VerifyDeviceDriverSupport.dll%VerifyDeviceDriverIsWDDM%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe VerifyDeviceDriverSupport.dll%VerifyDeviceDriverIsWDDM%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 35355 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(35355, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Verify Device Driver Is WDDM', 'Verify Device Driver Is WDDM miss identifies wddm version in RS4', 'The test will be fixed in RS5', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 OneCore","Windows v10.0 Client x64 RS4 OneCore","Windows v10.0 Client ARM RS4 OneCore","Windows v10.0 Client ARM64 RS4 OneCore","Windows v10.0 Server x64 RS4 OneCore","Windows v10.0 Client x86 RS4 OneCoreUAP","Windows v10.0 Client x64 RS4 OneCoreUAP","Windows v10.0 Client ARM RS4 OneCoreUAP","Windows v10.0 Client ARM64 RS4 OneCoreUAP","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client x86 RS4 Mobile","Windows v10.0 Client ARM RS4 Mobile","Windows v10.0 Client ARM64 RS4 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 35518 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_TestExe_ -c _TestPro_ -l "s98wtt.dll"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_TestExe_ -c _TestPro_ -l "s98wtt.dll"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 35518 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(35518, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'General Audio test fails on certain ARM64 devices for Volume and Mute properties.', 'Certain ARM64 devices require pin to be in ACQUIRE state for KSPROPERTY_AUDIO_VOLUMELEVEL and KSPROPERTY_AUDIO_MUTE properties to work. GAudit test creates a pin and leaves pin in Stop state when querying for these properties.', 'This errata covers the failure.', '2030-05-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 18363])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM","Windows v10.0 Client ARM64","Windows v10.0 Server ARM64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS properties\\KSPROPSETID_Audio\\KSPROPERTY_AUDIO_MUTE.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*failing test case.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS properties\\KSPROPSETID_Audio\\KSPROPERTY_AUDIO_VOLUME.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'EndTest', 'EndTest', 'Fail', 'Result', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-05-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 35531 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%AdapterPowerManagement.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%AdapterPowerManagement.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 35531 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(35531, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Power state transition test failed on MIDI only device due to no active endpoint exposed', 'Power state transition test failed on MIDI only device due to no active endpoint exposed', 'This is an acceptable failure', '2029-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,"VID_17CC&PID_1730")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Server x64 RS3 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Server x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'There were 0 active endpoints for device:*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(DeviceUnderTestIncreasePinCount\( &spAudioClient \)\) - Value \(0x8000ffff\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 35981 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pgremlin%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pgremlin%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 35981 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(35981, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[HLK] PGremlin/2 Rendering Test fails when testing a Printer Driver with a Print Workflow App', 'Creating this errata as the test was supposed to have been removed from the Playlist', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PGremlin', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TEST', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 35982 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%tpmauxiliarytest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%tpmauxiliarytest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 35982 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(35982, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS4 Errata : TPMAuxiliaryTest Exotic RSA Key Test checks invalid exponents', 'The auxiliary test is stricter than the specification demands.', 'In RS5, the test will be less strict.', '2025-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*ExoticRSAKeyTest', 'TpmAuxiliaryTest::ExoticRSAKeyTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error importing exotic key! HR: 0x80280084', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error importing exotic key! HR: 0x8028009C', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 36327 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva_hevc.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva_hevc.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 36327 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(36327, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HEVCQualityTest some NVidia GPUS do not support 4k decode', 'This was due to a known issue with the test in HLK 17134', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE&DEV_1287") or contains(.,"VEN_10DE&DEV_0FF0") or contains(.,"VEN_10DE&DEV_0FD4") or contains(.,"VEN_10DE&DEV_0FD1") or contains(.,"VEN_10DE&DEV_0FFB") or contains(.,"VEN_10DE&DEV_0FD3") or contains(.,"VEN_10DE&DEV_0FD2") or contains(.,"VEN_10DE&DEV_0FCB") or contains(.,"VEN_10DE&DEV_0FEF") or contains(.,"VEN_10DE&DEV_0FD9") or contains(.,"VEN_10DE&DEV_0FF9") or contains(.,"VEN_10DE&DEV_12AF") or contains(.,"VEN_10DE&DEV_12B1") or contains(.,"VEN_10DE&DEV_0FE5") or contains(.,"VEN_10DE&DEV_0FF7") or contains(.,"VEN_10DE&DEV_12AD") or contains(.,"VEN_10DE&DEV_12AE") or contains(.,"VEN_10DE&DEV_12BA") or contains(.,"VEN_10DE&DEV_0FF6") or contains(.,"VEN_10DE&DEV_1290") or contains(.,"VEN_10DE&DEV_1292") or contains(.,"VEN_10DE&DEV_12A0") or contains(.,"VEN_10DE&DEV_0FE1") or contains(.,"VEN_10DE&DEV_0FE7") or contains(.,"VEN_10DE&DEV_0FF5") or contains(.,"VEN_10DE&DEV_1291") or contains(.,"VEN_10DE&DEV_1282") or contains(.,"VEN_10DE&DEV_1293") or contains(.,"VEN_10DE&DEV_0FE9") or contains(.,"VEN_10DE&DEV_0FE8") or contains(.,"VEN_10DE&DEV_0FCD") or contains(.,"VEN_10DE&DEV_1284") or contains(.,"VEN_10DE&DEV_1298") or contains(.,"VEN_10DE&DEV_0FE3") or contains(.,"VEN_10DE&DEV_12B9") or contains(.,"VEN_10DE&DEV_0FC8") or contains(.,"VEN_10DE&DEV_0FF3") or contains(.,"VEN_10DE&DEV_0FED") or contains(.,"VEN_10DE&DEV_1294") or contains(.,"VEN_10DE&DEV_0FEC") or contains(.,"VEN_10DE&DEV_0FC9") or contains(.,"VEN_10DE&DEV_1295") or contains(.,"VEN_10DE&DEV_1296") or contains(.,"VEN_10DE&DEV_1289") or contains(.,"VEN_10DE&DEV_0FD6") or contains(.,"VEN_10DE&DEV_0FD7") or contains(.,"VEN_10DE&DEV_0FC0") or contains(.,"VEN_10DE&DEV_0FC2") or contains(.,"VEN_10DE&DEV_0FC4") or contains(.,"VEN_10DE&DEV_0FDD") or contains(.,"VEN_10DE&DEV_0FDE") or contains(.,"VEN_10DE&DEV_0FD0") or contains(.,"VEN_10DE&DEV_0FFC") or contains(.,"VEN_10DE&DEV_0FDC") or contains(.,"VEN_10DE&DEV_0FD5") or contains(.,"VEN_10DE&DEV_0FFD") or contains(.,"VEN_10DE&DEV_0FC6") or contains(.,"VEN_10DE&DEV_0FD8") or contains(.,"VEN_10DE&DEV_0FDA") or contains(.,"VEN_10DE&DEV_0FDB") or contains(.,"VEN_10DE&DEV_0FDF") or contains(.,"VEN_10DE&DEV_0FFA") or contains(.,"VEN_10DE&DEV_0FFE") or contains(.,"VEN_10DE&DEV_0FFF") or contains(.,"VEN_10DE&DEV_0FE0") or contains(.,"VEN_10DE&DEV_0FC7") or contains(.,"VEN_10DE&DEV_0FCA") or contains(.,"VEN_10DE&DEV_12B0") or contains(.,"VEN_10DE&DEV_0FCE") or contains(.,"VEN_10DE&DEV_0FCF") or contains(.,"VEN_10DE&DEV_0FF1") or contains(.,"VEN_10DE&DEV_0FF8") or contains(.,"VEN_10DE&DEV_0FF2") or contains(.,"VEN_10DE&DEV_0FE2") or contains(.,"VEN_10DE&DEV_0FE4") or contains(.,"VEN_10DE&DEV_0FE6") or contains(.,"VEN_10DE&DEV_1280") or contains(.,"VEN_10DE&DEV_0FC5") or contains(.,"VEN_10DE&DEV_1281") or contains(.,"VEN_10DE&DEV_1283") or contains(.,"VEN_10DE&DEV_1285") or contains(.,"VEN_10DE&DEV_1286") or contains(.,"VEN_10DE&DEV_0FF0") or contains(.,"VEN_10DE&DEV_1288") or contains(.,"VEN_10DE&DEV_1299") or contains(.,"VEN_10DE&DEV_129A") or contains(.,"VEN_10DE&DEV_0FCC") or contains(.,"VEN_10DE&DEV_129B") or contains(.,"VEN_10DE&DEV_0FEE") or contains(.,"VEN_10DE&DEV_128A") or contains(.,"VEN_10DE&DEV_128B") or contains(.,"VEN_10DE&DEV_1297")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest257', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 257 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(257\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest256', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 256 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(256\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest258', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 258 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(258\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVA_HEVC_TAEF::HEVCQualityTest255', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test 255 Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(RunTest\(255\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 36340 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'MinimumDisplaySpec.exe -DisplayMonitorModes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('MinimumDisplaySpec.exe -DisplayMonitorModes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 36340 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(36340, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: "Display Monitor Modes - Check EDID support" test failure that monitor fails to support required resolution', 'HLK failure reports monitor EDID does not support 640x480 60Hz, 800x600 60Hz and 1024x768 60Hz modes.', 'Temporary exception until test is updated.', '2029-10-01T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify each display meets resolution support requirements.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Established timings EDID byte', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-10-01T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 37057 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%scsicompliance.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%scsicompliance.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 37057 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(37057, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: SCSI compliance test failure for SAS drives with error "The device does not comply with current standards or is using reserved values (07)"', 'HLK Errata: SCSI compliance test failure for SAS drives with error "The device does not comply with current standards or is using reserved values (07)"', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","8.100.9600","10.1.17763","10.1.15063","10.1.20348"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows Server 2008 Release 2 x64","Windows v10.0 Server x64 RS1 Full","Windows 7 Client x86","Windows 7 Client x64","Windows 8 Client x86","Windows 8 Client x64","Windows 8 Server x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Client x64 RS1 Full","Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=ASSERTION: INQUIRY Checking Identification Descriptors in VPD page 0x83.', 'ASSERTION: INQUIRY VERSION Field Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=ASSERTION: INQUIRY Checking Identification Descriptors in VPD page 0x83.', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'The device does not comply with current standards or is using reserved values \(07\).', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 37193 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestVideoCapture%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestVideoCapture%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 37193 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(37193, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MediaCapture - TestVideoCapture WVC1 Transcodes fail on certain devices', 'WVC1 Content sometimes fails with a buffer overflow with WMA9.', 'Errata Issued', '2030-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Warn:UserText=.*C00D36B2', '.*Audio Subtype.*WMA9', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Warn:UserText=.*', '.*80040003', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 37712 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'lullaby2'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('lullaby2')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 37712 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(37712, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio::Erratum: Lullaby2 tests can fail with ERROR_TIMEOUT during cleanup.', 'The Lullaby test occasionally times out while waiting for the power monitoring thread to terminate. This happens when Driver Verifier causes other activities on the system during resume to take longer than usual.', 'Apply this erratum. The test will be updated in the future to allow more time.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Lullaby Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Could not terminate thread: ERROR_TIMEOUT', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'CleanUpSleepResume returned failing hr: ERROR_TIMEOUT', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 38068 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WrapIFSTests.cmd%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WrapIFSTests.cmd%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 38068 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(38068, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: IFS Test FlushBuffersRootTest failure', 'IFS Test FlushBuffersRootTest failure', 'This is an acceptable failure', '2030-01-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver[contains(.,"vrnsfilter.sys") or contains(.,''nmpfilter.sys'') or contains(.,''FsMonitor.sys'') or contains(.,''snclonevault.sys'') or contains(.,''1394ohci.sys'')]) ', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'FlushBuffersRootTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'FlushBuffersRootTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*IFSTEST_TEST_STATISTICS_ERROR.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 38124 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11precision.exe [[]MODIFIEDCMDLINE] -11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11precision.exe [[]MODIFIEDCMDLINE] -11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 38124 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(38124, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata : D3D12 - 11 on 12 - WGF11 Precision failure with INT comparison failed', 'The 32-bit value is -524,288 (0xFFF80000). This value isn’t representable using 16 bits, but the test is using min16int.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1002")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Client ARM64 RS4 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LowPrecision\\PixelShader\\Input', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'INT comparison failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 38128 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 38128 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(38128, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'QC 8998 does not support VP9 HW Decode', 'QC 8998 chips do not support VP9 decode. This causes the SW-DRM VP9 test to fail as it is not gated on DXVA support for VP9. This problem was fixed for the next release kit but remains an issue for QC in Windows 10, version 1803.', 'The solution is to grant a waiver specific to the 8998 for Windows 10, version 1803', '2025-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''ACPI\VEN_QCOM'') and (contains(.,''DEV_007C'') and contains(.,''SUBSYS_CLS08998''))])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64","Windows v10.0 Client ARM"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_VP9_Video1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Playback failed with error: c00d36d5', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 38246 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%HAPTest.dll%Certification%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%HAPTest.dll%Certification%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 38246 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(38246, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Audio::Erratum: Hardware Offload test fails with error that SNR is too low for some systems running at lower timer resolution', 'The Hardware Offload of Audio Processing Mix and MixOffloadDifferentFormat tests incorrectly fail due to glitches introduced because of lower timer resolutions.', 'Apply this filter. The test will be updated in future releases.', '2030-08-08T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"HDAUDIO\FUNC_01&VEN_10EC")])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"PCI\VEN_1022&DEV_15E3")])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Server x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::Mix*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal / magNoise\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::MixOffloadDifferentFormat*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal / magNoise\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::Raw*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal / magNoise\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-08T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 38375 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%AdapterPowerManagement%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%AdapterPowerManagement%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 38375 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(38375, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: System Audio - Device Power State Transition Test failed with MIDI devices', 'Device power state transition test - DeviceResponsivenessTest::PowerChangeHCK_ScreenOn_ResponseFast fails with MIDI devices because this test is not handling MIDI devices. The test is built directly on KS and enumerates media class devices looking for audio endpoints, it''s not using the normal mmdevices or audio API''s. ', 'This errata overturns the failure.
', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Client x86 RS3 Full","Windows v10.0 Client x64 RS3 Full","Windows v10.0 Server x64 RS3 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DeviceResponsivenessTest::PowerChangeHCK_ScreenOn_ResponseFast.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'There were 0 active endpoints for device: .*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED(DeviceUnderTestIncreasePinCount( &spAudioClient )) - Value (0x8000ffff)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 38857 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 38857 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(38857, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 - DXIL 16-bit Types Test - Sin/Cos/Tan instructions', 'This test cases are for feature Shader Model 6.2. This is a test bug - the precision of expected values is wrong.', 'Error will be filtered until HLK test cases are fixed to correct the precision of expected values.', '2030-01-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//DISPLAY_BLOCK/Device[@Type=''DEVICE_TYPE_RENDER'']/GraphicsInfo/RenderInfo[D3D12HighestShaderModel>=98])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#SinHalf', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#CosHalf', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::UnaryHalfOpTest#TanHalf', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 39167 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%tpm20ppitestcs.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%tpm20ppitestcs.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 39167 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(39167, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS4 Errata: TPM20 PPI TestMorBits test failure due to ACPU enforcement ', 'RS4 has tests that enforce ACPI, which is insecure.', 'These tests were removed for RS5.', '2025-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client ARM RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*TestMorBits', 'WEX::TestExecution::Tpm20PPITest::Tpm20PPITest::TestMorBits', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.* failed\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 39466 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll %'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll %')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 39466 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(39466, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: SW-DRM Video tests fails with error "Playback failed with error: c0262500 (retry count: 1)" for vGPU in virtual machine', 'HLK Errata: SW-DRM Video tests fails with error "Playback failed with error: c0262500 (retry count: 1)" for vGPU in virtual machine', 'The error will be filtered until a fix is available.', '2030-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE&DEV_13BD") or contains(., "VEN_10DE&DEV_13F2") or contains(., "VEN_10DE&DEV_13F3") or contains(., "VEN_10DE&DEV_15F7") or contains(., "VEN_10DE&DEV_15F8") or contains(., "VEN_10DE&DEV_15F9") or contains(., "VEN_10DE&DEV_1B38") or contains(., "VEN_10DE&DEV_1BB3") or contains(., "VEN_10DE&DEV_1BB4") or contains(., "VEN_10DE&DEV_1DB1") or contains(., "VEN_10DE&DEV_1DB3") or contains(., "VEN_10DE&DEV_1DB4") or contains(., "VEN_10DE&DEV_1DB5") or contains(., "VEN_10DE&DEV_1DB6") or contains(.,"VEN_10DE&DEV_1EB8") or contains(.,''VEN_10DE&DEV_1E30'') or contains(.,''VEN_10DE&DEV_2235'') or contains(.,''VEN_10DE&DEV_2236'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=AVQuality::DRMTest::SoftwareDRM_VP9_Video1', 'AVQuality::DRMTest::SoftwareDRM_VP9_Video1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Playback failed with error: c0262500', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=AVQuality::DRMTest::SoftwareDRM', 'AVQuality::DRMTest::SoftwareDRM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'OnPartialMediaFailureDetected called', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40179 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'fnddraw.exe dd_sbvv.pro -l"fnswtt.dll"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('fnddraw.exe dd_sbvv.pro -l"fnswtt.dll"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40179 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40179, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK2.1 Errata: Blt - Stretch - VMem to Primary test hit FAILURE  (NVBug 200431378) due to missing sync between blt and Lock', 'Blt - Stretch - VMem to Primary test hit FAILURE  (NVBug 200431378) due to missing sync between blt and Lock', 'This is a test issue', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_10DE")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows 7 Client x86","Windows 7 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'BLT Test cases\\BLT, Stretch, Complete Overlap, VMem\(primary\)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'completely mismatched between the DDRAW blt and the original image!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40180 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kstop%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kstop%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40180 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40180, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KsTopology test fails for KSPROPERTY_AUDIO_WAVERT_CURRENT_WRITE_LASTBUFFER_POSITION property.', 'Due to an OS issue, KsTopology test sometimes report failure for test cases related to KSPROPERTY_AUDIO_WAVERT_CURRENT_WRITE_LASTBUFFER_POSITION property.', 'This errata covers the failure.', '2029-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server ARM64 RS4 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Client ARM64 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Properties\\Check All Properties Access Flags', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_AUDIO_ENGINE.*KSPROPERTY_AUDIO_WAVERT_CURRENT_WRITE_LASTBUFFER_POSITION: Invalid KSPROPERTY_DESCRIPTION.AccessFlags', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Properties\\Check Property Descriptor Size and Headers', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_AUDIO_ENGINE.*KSPROPERTY_AUDIO_WAVERT_CURRENT_WRITE_LASTBUFFER_POSITION: Size of KSPROPERTY_DESCRIPTION.DescriptionSize is invalid', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_AUDIO_ENGINE.*KSPROPERTY_AUDIO_WAVERT_CURRENT_WRITE_LASTBUFFER_POSITION: KSPROPERTY_DESCRIPTION.PropTypeSet.Set should be GUID_NULL or KSPROPTYPESETID_General', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Properties\\Check Property Get and Set Ranges', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_AUDIO_ENGINE.*KSPROPERTY_AUDIO_WAVERT_CURRENT_WRITE_LASTBUFFER_POSITION: Invalid KSPROPERTY_DESCRIPTION.AccessFlags', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Properties\\Check Property: WaveRT Current Write Last Buffer Position', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_AUDIO_ENGINE.*KSPROPERTY_AUDIO_WAVERT_CURRENT_WRITE_LASTBUFFER_POSITION: Node must not support this property descriptor', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40184 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Conf_VideoDecodeHistogram%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Conf_VideoDecodeHistogram%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40184 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40184, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:  D3D11 - Decode Histogram: failure in group Conf_VideoDecodeHistogram::SingleFrameDecodeH264 with error IsTrue', 'We think it''s test issue because it should not send DXVA_Slice_H264_Short data when decoder is created with ConfigBitstreamRaw = 1

From spec:
bConfigBitstreamRaw : May be 0, 1, or 2.

0 : Picture data will be sent using macroblock control command buffers. The DXVA_Slice_H264_Long structure is used for slice control data.
1 : Picture data will be sent using raw bitstream buffers. The DXVA_Slice_H264_Long structure is used for slice control data.
2 : Same as 1, but the DXVA_Slice_H264_Short structure is used for slice control data.', 'Test data or 11on12 fixed.', '2030-12-29T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 18800])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(result\.codeFound\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-29T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40190 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11Precision.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11Precision.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40190 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40190, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3D12 - 11 on 12 - WGF11 Precision ', 'Min16 integer tests too strict with out of range integer values (should allow truncating)', 'Errata for now to give time for a test fix to be developed.', '2030-09-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Server x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LowPrecision\\PixelShader\\Input', 'LowPrecision\\PixelShader\\Input', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'CPrecisionTest::ValidateResult\(\) - INT comparison failed at position \(0,0\)\.  Expected -524288 or -32768, found 0\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-09-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40226 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40226 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40226, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: New name change requirement fails StandardizedKeywords Test in HLK with Private keywords must not start with ''*''', 'Test does not recognize *NetworkDirectTechnology as a standardized keyword and fails with *NetworkDirectTechnology is not a standardized keyword! Private keywords must not start with ''*''', 'This is an acceptable failure', '2028-10-02T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify that no non-standard keywords are present.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*NetworkDirectTechnology is not a standardized keyword', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*SSIdleTimeoutScreenOff is not a standardized keyword', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*PtpHardwareTimestamp is not a standardized keyword!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*SoftwareTimestamp is not a standardized keyword', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*UsoIPv4 is not a standardized keyword! Private keywords must not start with ''*''', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*UsoIPv6 is not a standardized keyword! Private keywords must not start with ''*''', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2028-10-02T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40229 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%SystemExposedPort%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%SystemExposedPort%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40229 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40229, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA WAIVER: USB Exposed Port System Test: acommodate virtual link ports for platforms incorporating NVidias add-in card.', 'VL ports have no high speed companion', 'Waive requirement for those ports', '2030-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'BUSES_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('BUSES_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'BUSES_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,"VEN_10DE") and //USBInfo/IsXhciController])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=END:.*', 'Failed to verify consistent USB 3.0 Port Mapping.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=END.*', 'START.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error', '.*High Speed Port Number: 6', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*Failing Exposed Connector.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error', '.*SuperSpeed Port Number: 3', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*Failing Exposed Connector.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40325 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'pwrtest.exe /sleep /c:1 /d:90 /p:60 /s:rnd /unattend /ln:VMPWR'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('pwrtest.exe /sleep /c:1 /d:90 /p:60 /s:rnd /unattend /ln:VMPWR')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40325 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40325, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'OptStandby-Video Memory Purge and Resume (does not support sleep states)', 'The test requires a system to sleep as part of the verification, some systems don''t support any sleep states.', 'Test will be updated to ignore systems with no sleep states.', '2029-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PwrTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'System does not support any sleep states', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40327 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40327 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40327, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Controls System Test - Camera_profiles - Verify KSCAMERAPROFILE HighQualityPhoto or VideoRecording', 'Camera Profile Tests were requiring HighQualityPhoto and VideoRecording, they should be if implemented', 'Tests will skip if profiles are not implemented', '2025-03-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=SUCCEEDED.*80070491', 'GetFirstProfile.*80070491', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40329 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestUAP::* /p:"TestRequiresMultipleOutputs%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestUAP::* /p:"TestRequiresMultipleOutputs%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40329 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40329, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'RS5 ONLY - "iFlip Present UAP - Multihead (Requires 2+ monitors)" - fails due to test bug', 'This test will fail on RS5 due to a test issue resulting in the window not be appropriately placed in the multiple monitor scenario.
', 'Filter will overturn the appropriate failures. 
      ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Error:UserText=.*', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40330 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PnPStop.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PnPStop.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40330 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40330, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK\HCK: WDDM PnPStop Test - Update and Rollback may fail on some systems with very slow PnPStop', 'HLK\HCK: WDDM PnPStop Test - Update and Rollback may fail on some systems with very slow PnPStop', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/CheckForStartedIHVDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Need a stoppable driver loaded for the test to execute', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40332 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40332 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40332, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 State Object Tests', 'Driver verifier crash in state object test', 'Disable driver verifier for test', '2029-12-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Raytracing_StateObjectTests', 'Raytracing_StateObjectTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '0x8', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'hg1IdentifierRTPSO', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40333 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40333 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40333, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK2.1 Errata - Web Servcies for Devices(WSD) test  failure due to DeviceMetadataStress failing', 'HCK2.1 Errata - Web Servcies for Devices(WSD) test  failure due to DeviceMetadataStress failing', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest ', 'DeviceMetadataStress_\(ID_NOT_SPECIFIED\)', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40470 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40470 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40470, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: DXR acceleration structure build test using 2 channel vertex formats buggy', 'Test not handling 2 channel vertex formats correctly in acceleration structure builds in DXR.', 'Errata for RS5, fixed in 19H1', '2029-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS5 OneCore","Windows v10.0 Client x64 RS5 OneCore","Windows v10.0 Client ARM RS5 OneCore","Windows v10.0 Client ARM64 RS5 OneCore","Windows v10.0 Server x64 RS5 OneCore","Windows v10.0 Client x86 RS5 OneCoreUAP","Windows v10.0 Client x64 RS5 OneCoreUAP","Windows v10.0 Client ARM RS5 OneCoreUAP","Windows v10.0 Client ARM64 RS5 OneCoreUAP","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full","Windows v10.0 Client x86 RS5 Mobile","Windows v10.0 Client ARM RS5 Mobile","Windows v10.0 Client ARM64 RS5 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=AccelerationStructureBuild', 'AccelerationStructureBuild', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'eometr|target', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40496 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%SystemDrive%\debuggers\PrintSpy_test.cmd pttest2 "pttest2.exe /testsuite=TestConfigFiles\WDKTestSuite.xml /dp=''[WDKPrinterName]''"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%SystemDrive%\debuggers\PrintSpy_test.cmd pttest2 "pttest2.exe /testsuite=TestConfigFiles\WDKTestSuite.xml /dp=''[WDKPrinterName]''"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40496 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40496, 4, 1, 1, 0, 1, 0, 1, @TestCommandLineId, 'PrintTicket Test Failure with no longs', 'PrintTicket Test is not returning logs as expected.', 'As PrintTicket Test is not in the HLK Compatibility Playlist, this is considered an acceptable failure.', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VMware_Universal_EMF_Printer") or contains(., "SWD\PRINTENUM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows 7 Client x86","Windows 7 Client x64","Windows 8 Client x86","Windows 8 Server x64","Windows 8 Client x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows Server 2008 Release 2 x64","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS2 Full","Windows v10.0 Server x64 RS4 Full","Windows v10.0 Server x64 RS3 Full"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40499 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging tpm20supplementaltest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging tpm20supplementaltest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40499 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40499, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM System Latency Delay Enforcement', 'TPM Interrupt Support Delay Enforcement Waiver', '19h1+ will require this test to be passed.', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WEX::TestExecution::Tpm20SupplementalTest::Tpm20SupplementalTest::SystemTPMLatencyTest', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40552 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40552 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40552, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 GPU based validation regression', 'debug layer regression affecting a GPU based validation test case', 'debug layer bug will have to be fixed when time permits', '2030-12-30T23:59:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SimpleInvalidResourceStateCommandListOps#17', 'SimpleInvalidResourceStateCommandListOps#17', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test case 8', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T23:59:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40639 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40639 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40639, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HW-DRM Video - Play protected content using hardware decryptor test failed acrocss all platform', 'HLK Errata: HW-DRM Video - Play protected content using hardware decryptor test failed acrocss all platform', 'This is an acceptable failure', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":2,"Values":["System.Fundamentals.Graphics"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_Video#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'HW-DRM is not available', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40640 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11Shader5x'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11Shader5x')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40640 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40640, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - 11 on 12 - WGF11 Shader 5x: Fails indexable input tests on DXIL driver - DxilConv produces incorrect Dxil signatures', 'DXBC assembled by Shader5x to test indexable inputs is not translated correctly to indexable inputs in Dxil by DxilConv, leading to failures of these HLK test cases.  Test group: Index\Temps Parameter: IndexingScenario=InputOutputNested.  This should not impact Dxil conversion of shaders produced by D3DCompiler.', 'Error will be filtered out until the DxilConv bug is fixed in the next OS release.', '2050-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Index\\Temps', 'Index\\Temps', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Shader result does not match expectation', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'IndexingScenario=InputOutputNested', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40693 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40693 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40693, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Raytracing test fixes not showing up in EEAP', 'Fixes for several raytracing tests have been made but don''t appear to have made it into latest EEAP builds.  Issuing errata to stop delaying IHVs.', 'IHVs can see the fixed binaries in 19H1 HLK.', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=AnyHitTests', 'AnyHitTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=RecursionTests', 'RecursionTests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TraceRay', 'TraceRay', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '800706BE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Watertightness', 'Watertightness', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'AreEqual', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40695 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'crashdumptest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('crashdumptest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40695 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40695, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Crashdump Support Test (LOGO)]- Virtual Memory Test sporadically fails to verify page file ', 'HLK Errata: Crashdump Support Test (LOGO)]- Virtual Memory Test sporadically fails to verify page file ', 'This is an acceptable failure', '2025-10-14T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.16299","10.1.17134","10.1.18362","10.1.18363"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'Paging File Name paged out', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'A2191D89-AACE-46C4-82E3-3F6786B2BA43', 'TUID', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'Unable to get page file name', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'A2191D89-AACE-46C4-82E3-3F6786B2BA43', 'TUID', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'StartTest:Title=Virtual Memory Test', 'Paging File Name paged out', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-14T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40774 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%[Devfund_ChaosTest_WLK.dll|Devfund_PnPDTest%.dll]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%[Devfund_ChaosTest_WLK.dll|Devfund_PnPDTest%.dll]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40774 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40774, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: DF - Concurrent Hardware And Operating System (CHAOS) Test and DF - PNP Surprise Remove Device Test may fail when ran on Network devices due to a gatherer issues (FIXED in 19H1)', 'The DF - Concurrent Hardware And Operating System (CHAOS) Test and DF - PNP Surprise Remove Device Test may fail when ran on Network devices due to a gatherer issues. 
Failure is identified in the Run test task as:
WDTF_PNP : Result: Failed to receive IRP_MN_REMOVE_DEVICE after receiving IRP_MN_SURPRISE_REMOVAL. Ensure that there are no open handles or references to the test device (in user mode or in kernel mode) preventing IRP_MN_REMOVE_DEVICE from being sent. You may need to terminate any processes or services that may have open user mode handles to this device.
A secondary failure in the Reboot for Device Discovery task will also be seen and can be identified:
WDTF_TEST : Found a device that has a non-zero problem code or is phantom. Logging device info. ', 'Partners are provide an updated binary to replace be replaced one the system under test once the HLK client has been installed. 
The reason the failure is not just being waived is the error message could represent a real driver problem of not being able to handle a surprise remove request. To obtain the binary please contact CSS and reference this Errata ID 40774.
Once the binary has been updated rerun the test. If the same failures remain these should be investigated as true driver bugs.  Additional information can be found here for investigating a driver bug:https://docs.microsoft.com/en-us/windows-hardware/test/hlk/testref/review-common-device-fundamentals-reliability-test-failures', '2030-09-19T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-09-19T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40775 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40775 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40775, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS5 Errata: NDISTest 6.5 - [1 Machine] OffloadRSSv2 test fails with "Adapter does not support RSSv2"', 'NDISTest 6.5 - [1 Machine] OffloadRSSv2 test fails with "Adapter does not support RSSv2"', 'This is acceptable failure', '2027-11-11T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VMMQ - Query \*MaxRssProcessors settings', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Adapter does not support RSSv2', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-11-11T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40795 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMediaCaptureScenarios#*%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMediaCaptureScenarios#*%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40795 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40795, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MediaCapture Scenarios test for VPS has XML tag failure', 'Variable Photo Sequence Subtest had an incorrect XML tag, this caused an exception to be thrown.', 'Fixed test XML, Errata Issued', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Warn:UserText=.*Fail to parse method arguments', 'Exception.*102.*RunTest', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40873 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGIPresent.exe FSPresentMS%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGIPresent.exe FSPresentMS%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40873 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40873, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: DXGI Presentation Testing - FSPresent: CPresentFS::CreateDeviceAndSwapChain: SetFullscreenState failed on 4K display', 'Test fails because of OS issue causing cmd.exe to be set as Foreground window, which causes test app to fail to SetFullscreenState and fail test cases.', 'Error will be filtered for RS4. Shell team will fix the OS bug in RS5.', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS4 Full","Windows v10.0 Client x86 RS4 Full","Windows v10.0 Client ARM64 RS4 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'CPresentFS::CreateDeviceAndSwapChain:  SetFullscreenState failed with error 0x887a0022.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'CFSWinTransitionSequential::TransitionBeforePresent SetFullscreenState failed hr=0x887a0022', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'HRESULT: DXGI_STATUS_OCCLUDED \(0x87a0001\).', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40881 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40881 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40881, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS5 Errata - "NDISTest 6.5 - [2 Machine] - VMQBasicVerification" fails when "Virtual Switch RSS" enabled', 'In the "Run NDISTest Client" step of the test "NDISTest 6.5 - [2 Machine] - VMQBasicVerification", you will receive an error with error code 0x88888 when you enable Virtual Switch RSS.', 'Fix will ship with the next version, and an errata is granted for RS5 to cover the test failure.', '2030-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Query VMQ and NicSwitch capabilities', 'Query VMQ and NicSwitch capabilities', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '0x88888', 'ErrCode', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40957 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::FlipModes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40957 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40957, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'RS5 TestFlipModes crashes', 'TestFlipModes test crashes when run', 'The test has been removed from the RS5 playlist', '2030-12-31T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 19041])
', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'VidMm::ConfigurableWorkloadTest::FlipModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'A crash with exception code 0xC0000409 occurred in module "ucrtbase.dll" in the process hosting the test code while invoking a test operation', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue..istenerContext..stablePresentPredicate.frameStats.PresentCount . previousPresentCount..', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40958 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40958 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40958, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Raytracing tests have bugs in system values and large structs tests', 'raytracing HLSLTests bugs', 'bugs to be investigated/fixed in 19H1', '2029-12-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_Raytracing_HLSLTests#1::SystemValuesAndIntrinsics', 'D3DConf_12_Raytracing_HLSLTests#1::SystemValuesAndIntrinsics', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_Raytracing_HLSLTests::LargeStructs', 'D3DConf_12_Raytracing_HLSLTests::LargeStructs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'CreateStateObject', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_Raytracing_HLSLTests::SystemValuesAndIntrinsics', 'D3DConf_12_Raytracing_HLSLTests::SystemValuesAndIntrinsics', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 40994 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 40994 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(40994, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: DirectML D3D12 Metacommands HLK fail GEMM/CopyTensor validation of resources size after rounding up to multiples of 4', 'DirectML tests fail while testing D3D12 metacommands with the error "Incorrect size argument", affecting various GPU/VPU vendors and video card models.

This affects MetacommandHlkTestsTaef "D3D12 - Metacommands - General Matrix Multiplication" and "D3D12 - Metacommands - Copy Tensor" under kits specification "Device.Graphics.AdapterRender.D3D12Metacommands.CoreRequirement". DirectML was updated to round ID3D12Resource byte sizes to 4 bytes, but test cases for GEMM and CopyTensor then started to fail because the GPU resource byte sizes no longer matched the size of the original tensor data uploaded from the CPU. The test code is fixed for the next Windows release, but the fix missed the Windows RS5 release cutoff.', 'If IHV''s see, "TestFailed: metacommandhlkteststaef.cpp(764)\MetacommandHlkTests.dll!00007FFF0EA87597: (caller: 00007FFF0EA86803) Exception(1) tid(2894) 800705B6 Incorrect size argument", they can apply this errata. Specifically this affects cases of float16 tensor with an odd number of elements, not float32 or an even element count.', '2029-12-30T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'MetacommandHlkTestsTaef::CopyTensorOperation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'End', 'Test case index: \#3; Graph: CopyTensor', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'metacommandhlkteststaef.cpp.*764.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'Metacommand operation failed testing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'End', 'MetacommandHlkTestsTaef::CopyTensorOperation', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'End', 'Test case index: \#3; Graph: CopyTensor', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'MetacommandHlkTestsTaef::GeneralMatrixMultiplicationOperation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'End', 'Test case index: \#13; Graph: GeneralMatrixMultiplication', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'metacommandhlkteststaef.cpp.*764.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!End', 'Metacommand operation failed testing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'End', 'MetacommandHlkTestsTaef::GeneralMatrixMultiplicationOperation', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'End', 'Test case index: \#13; Graph: GeneralMatrixMultiplication', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-30T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41004 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41004 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41004, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Processor Power Management: Test failure on multi-group systems', 'When a system has multiple processor groups, and a P-state domain spans more than one processor group, the test encounters a failure attempting to determine which processors are in the P-state domain.', 'This is a test issue and will be addressed in a future release of the HLK.', '2029-08-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["System.Fundamentals.PowerManagement.Processor"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '!Msg', '^SUCCEEDED\(EtwConsumer\.OpenTrace\(\)\)$', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '^GetPayloadProperty failed for property: Group\[1\].Number$', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-08-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41007 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41007 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41007, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Raytracing Barriers test has issues due to uninitialized DispatchRays call', 'raytracing barriers test issues', 'to be investigated and fixed in 19H1', '2029-12-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_Raytracing_Barriers::BasicBarriers', 'D3DConf_12_Raytracing_Barriers::BasicBarriers', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41009 v15.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41009 AND Version = 15
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41009, 15, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'PeriodicFrameNotification - TestPrecision - relax performance requirements', 'Performance requirement relaxed', 'Requirement relaxed while investigating fix', '2031-03-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PeriodicFrameNotification::TestPrecision', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification latency exceeds the target of 0.000100', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification time is consistently earlier than the notification target by more than 0.000050', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification latency exceeds the target of 0.000750', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification latency exceeds the target of 0.000150', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification time is consistently earlier than the notification target by more than 0.000150', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification time is consistently earlier than the notification target by more than 0.000750', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PeriodicFrameNotification::TestSimultaneousActiveNotifications', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification time is consistently earlier than the notification target by more than 0.000050', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification latency exceeds the target of 0.000100', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification latency exceeds the target of 0.000750', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Average notification time is consistently earlier than the notification target by more than 0.000100', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-03-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41044 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41044 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41044, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS5 Errata - "NDISTest 6.5 - [2 Machine] - VMQStressTest" fails when "Virtual Switch RSS" enabled', 'In the "Run NDISTest Client" step of the test "NDISTest 6.5 - [2 Machine] - VMQStress", you will receive an error with error code 0x88888 when you enable Virtual Switch RSS', 'Fix will ship with the next version, and an errata is granted for RS5 to cover the test failure', '2030-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Exception occurred', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught exception\: Failed to send CMD_LOG_SET_LOGLEVEL to the driver  NDIS_STATUS_FILE_NOT_FOUND', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unknwon exception is caught', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unknown exception handling cleanup and restore previous VMQ state', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to send CMD_LOG_SET_LOGLEVEL to the driver', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Test terminated abnormally with an Exception', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41051 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%win6_4.mbn.%.testconnect.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%win6_4.mbn.%.testconnect.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41051 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41051, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '"Win6_4.MB.GSM.Data.TestMPDP" fails in RS5 device/system HLK test for MBB LTE module', 'Test fails in last step: "Attempt to download web_doc, failed". It can pass in RS5 build 17754, but still fail in build 17763.1.', 'This is an acceptable failure on RS5', '2023-05-10T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client x86 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN\:\:TestConnect\:\:ConnectAndTraffic', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Attempt to download web doc\, failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-10T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41108 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41108 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41108, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS5: HEVC Test 20 Playback tests failing ', 'HEVC playback test 20 was set to use P010 textures as it was marked as 10-bit content. The media test file is 8-bit content. There are issues with using P010 textures with 8-bit content that are currently being investigated’', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1002") or contains(.,''VEN_QCOM'')]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest20', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Checksums don''t match.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest20', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Checksums don''t match.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41109 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% thirdpartyapo.unittests.dll /name:CApoDeviceTests::TestAPODataStreaming'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% thirdpartyapo.unittests.dll /name:CApoDeviceTests::TestAPODataStreaming')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41109 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41109, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio APO - Verify APO Streams Data - TestAPODataStreaming" Inplace APOs Cause Failures', 'The TestAPODataStreaming test has additional checks for Inplace APOs that are too strict causing test failures when there aren''t any failures. ', 'An errata is created to show that the test passes if the overly strict Inplace APO check occurs in the test. ', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Client x86 RS5 OneCoreUAP","Windows v10.0 Client x64 RS5 OneCoreUAP","Windows v10.0 Client ARM RS5 OneCoreUAP","Windows v10.0 Client ARM64 RS5 OneCoreUAP","Windows v10.0 Server x64 RS5 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["Device.Audio.APO"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'FAIL: APOProcess for inplace apo output', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Test APO Data Streaming failed with error:', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41204 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'PnPMultiModeSwitchTest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('PnPMultiModeSwitchTest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41204 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41204, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK\HCK: WDDMPnPMultiModeSwitch Test may fail on some systems with very slow PnPStop', 'The test fails on some systems with very slow PnPStop.', 'Skip the test on those systems with very slow PnPStop.', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.15063","10.1.14393","8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'Root Node/CheckForStartedIHVDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Root Node/CheckForStartedIHVDevice|||Need a stoppable driver loaded for the test to execute.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Root Node/CheckForStartedIHVDevice|||Need a stoppable driver loaded for the test to execute.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/CheckForStartedIHVDevice.Postwalk', 'Title', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41247 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41247 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41247, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NVMe SCSI compliance test doesn’t support V1.5 compliant devices', 'HLK Errata: NVMe SCSI compliance test doesn’t support V1.5 compliant devices', 'This is acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_F1A6") or contains(.,"PCI\VEN_8086&DEV_F1A8") or contains(.,"PCI\VEN_8086&DEV_0953") or contains(.,"PCI\VEN_8086&DEV_0A53") or contains(.,"PCI\VEN_8086&DEV_0A54") or contains(.,"PCI\VEN_8086&DEV_0A55") or contains(.,"PCI\VEN_8086&DEV_2700") or contains(.,"PCI\VEN_8086&DEV_2701") or contains(.,"PCI\VEN_1C58&DEV_0023") or contains(.,"PCI\VEN_15B7&DEV_2001") or contains(.,"PCI\VEN_1B96&DEV_2200") or contains(.,"PCI\VEN_1B96&DEV_2400") or contains(.,"PCI\VEN_1B96&DEV_2401") or contains(.,"PCI\VEN_1B96&DEV_2402") or contains(.,"PCI\VEN_1B96&DEV_2500") or contains(.,"PCI\VEN_8086&DEV_FAF0") or contains(.,"PCI\VEN_1344&DEV_51B1") or contains(.,"PCI\VEN_8086&DEV_0B60") or contains(.,"PCI\VEN_8086&DEV_4140") or contains(.,"PCI\VEN_8086&DEV_2525") or contains(.,"PCI\VEN_8086&DEV_5845")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600","10.1.14393","10.1.17134","10.1.16299","10.1.15063","10.1.18362","10.1.18363","10.1.17763","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Temperature log page Test', 'Temperature log page Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=ASSERTION: INQUIRY Check all fields of Inquiry Data', 'ASSERTION: INQUIRY Check all fields of Inquiry Data', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Logging an error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41364 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ___fund%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ___fund%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41364 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41364, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Reinstall PnP Tests fail for devices that require reboot', 'RS3 Functionality Reinstall was changed. The Camera Plugin for DevFund was not updated for these new changes.', 'Errata Issued. Plugin to be updated', '2030-10-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Server x64 Vb Full","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client ARM64 19H1 Mobile","Windows v10.0 Client ARM 19H1 Mobile","Windows v10.0 Client x86 19H1 Mobile","Windows v10.0 Server ARM64 19H1 Full","Windows v10.0 Server x64 19H1 Full","Windows v10.0 Client ARM64 19H1 Full","Windows v10.0 Client x64 19H1 Full","Windows v10.0 Client x86 19H1 Full","Windows v10.0 Client ARM64 19H1 OneCoreUAP","Windows v10.0 Client ARM 19H1 OneCoreUAP","Windows v10.0 Client x64 19H1 OneCoreUAP","Windows v10.0 Server x64 19H1 OneCore","Windows v10.0 Client ARM64 19H1 OneCore","Windows v10.0 Client ARM 19H1 OneCore","Windows v10.0 Client x64 19H1 OneCore","Windows v10.0 Client x86 19H1 OneCore","Windows v10.0 Client ARM64 RS5 Mobile","Windows v10.0 Client ARM RS5 Mobile","Windows v10.0 Client x86 RS5 Mobile","Windows v10.0 Server ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client ARM64 RS5 OneCoreUAP","Windows v10.0 Client x64 RS5 OneCoreUAP","Windows v10.0 Client x86 RS5 OneCoreUAP","Windows v10.0 Server x64 RS5 OneCore","Windows v10.0 Client ARM64 RS5 OneCore","Windows v10.0 Client x64 RS5 OneCore","Windows v10.0 Client x86 RS5 OneCore"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'WDTF_SIMPLE_IO.*0xC00D7167', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-10-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41370 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% verifyrunfromstoreandmatchingversions.dll /name:DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% verifyrunfromstoreandmatchingversions.dll /name:DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41370 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41370, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '"Verify run from driver store support and file versioning (Graphics Drivers)" reporting lower FeatureScore than expected', '"Verify run from driver store support and file versioning (Graphics Drivers)" reporting lower FeatureScore than expected, which causes the test to fail.', 'This is considered an acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsLessThan\(FeatureScore, \(UINT\)0x[a-fA-F0-9]+\) - Values \([0-9]+, [0-9]+\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41391 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te.exe FileIOTestW.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te.exe FileIOTestW.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41391 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41391, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: SMB FileIObvt LOGO test failure Server2019 17763 with .CPP errors', 'HLK Errata: SMB FileIObvt LOGO test failure Windows Server 2016 or Windows Server 2019  with .CPP errors', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Failed in AddEasAndStreamsToDirectory.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'File has not been deleted', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'The file still exists', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'File still exists - even after del', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Checking target file contents', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'EA not found on target file', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'The file should have an object Id but it doesn\''t', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Checking target \(failure\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Checking data stream contents', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41392 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41392 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41392, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HEVC Playback tests (37/46/47/18/48) failures due to a crash with an exception that occurred in "mf.....dll"', 'HLK Errata: HEVC Playback tests (37/46/47/18/48) failures due to a crash with an exception that occurred in "mf.....dll"', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1002&DEV_98E4")]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest37', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\(A crash with exception code 0xC0000005 occurred in module "mf.hlk.playback.quality.tests.dll"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest47', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\(A crash with exception code 0xC0000005 occurred in module "mf.hlk.playback.quality.tests.dll"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest18', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\(A crash with exception code 0xC0000005 occurred in module "mf.hlk.playback.quality.tests.dll"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest46', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\(A crash with exception code 0xC0000005 occurred in module "mf.hlk.playback.quality.tests.dll"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest19', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\(A crash with exception code 0xC0000005 occurred in module "mf.hlk.playback.quality.tests.dll"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest20', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Checksums don''t match', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41398 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41398 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41398, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HEVC 10-Bit playback tests 1 and 17 failures in HLK RS5', 'HLK Errata: HEVC 10-Bit playback tests 1 and 17 failures in HLK RS5', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1002")]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVC_10bitPlaybackQualityTest1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(spHWReader->SetCurrentMediaType\(MF_SOURCE_READER_FIRST_VIDEO_STREAM,nullptr,spOutType.Get\(\)\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(MF_E_NOT_FOUND\): Not using D3D11 for Playback - Value \(0xc00d36d5\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest17', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(spHWReader->SetCurrentMediaType\(MF_SOURCE_READER_FIRST_VIDEO_STREAM,nullptr,spOutType.Get\(\)\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVC_10bitPlaybackQualityTest2#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(MF_E_NOT_FOUND\): Not using D3D11 for Playback - Value \(0xc00d36d5\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41445 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41445 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41445, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDIStest 6.5 - [1 Machine] - OffloadVMMQ test on OffloadHWvRSS tests for NICs that support symmetric queue pairs', 'HLK Errata: NDIStest 6.5 - [1 Machine] - OffloadVMMQ test on OffloadHWvRSS tests for NICs that support symmetric queue pairs', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_1137&DEV_0043")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for non-Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to create VPort0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41521 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%SCRIPT_NAME%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%SCRIPT_NAME%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41521 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41521, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata Errata: TDR2 - Multiple TDR Graphics Lockout and Recovery Tests hard hangs', 'Machine Rebooted Unexpectedly when Task "Run [SCRIPT_NAME]" was running', 'This issue is an acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_10DE")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 8 Client x86","Windows 8 Client x64","Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows 8 Server x64","Windows 7 Client x86","Windows 7 Client x64","Windows Server 2008 Release 2 x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PreemptionTest\\WorkHorse', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41542 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41542 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41542, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [2 Machine] - ConfigCheck is incorrectly detecting NDIS version', 'NDISTest 6.5 - [2 Machine] - ConfigCheck is incorrectly detecting uplevel NDIS versions as lower NDIS versions.', 'An errata was created to cover this test failure.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[
contains(.,"PCI\VEN_8086&DEV_154C") or 
contains(.,"PCI\VEN_8086&DEV_1571") or 
contains(.,"PCI\VEN_8086&DEV_1889") or 
contains(.,"PCI\VEN_8086&DEV_1565") or 
contains(.,"PCI\VEN_8086&DEV_15A8") or 
contains(.,"PCI\VEN_8086&DEV_15C5") or 
contains(.,"PCI\VEN_8086&DEV_1564") or 
contains(.,"PCI\VEN_8086&DEV_15A9") or 
contains(.,"PCI\VEN_8086&DEV_15B4") or 
contains(.,"PCI\VEN_8086&DEV_37CD")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763","20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Validate NDIS stack minimum version is >= miniport NDIS version', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'The miniport stack minimum NDIS major version is less than the miniport NDIS version.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41717 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%/name:D3DConf_12_0_ShaderCache::*%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%/name:D3DConf_12_0_ShaderCache::*%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41717 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41717, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3DConf_12_0_ShaderCache::D3D11AndD3D12MatchSupport - mismatching support for D3D11 and D3D12', 'The Intel driver doesn''t support the D3D11 driver shader cache, but does support the D3D12 driver shader cache. This is invalid according to this test.', 'We''ll probably remove the test.', '2029-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'AreEqual\(b11SupportsCache, b12SupportsCache\): Shader cache support must match between D3D11 and D3D12. - Values \(0, 1\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41782 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TestUcsi::UcsiCommandInterfaceTests::TestUnsupportedCommand%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TestUcsi::UcsiCommandInterfaceTests::TestUnsupportedCommand%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41782 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41782, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UCSI Unsupported Command test uses command that is supported in v1.1', 'Test uses cmd 0x14 in RS4 and earlier, this command is now used in v1.1 UCSI.', 'Updated test uses different unsupported cmd value.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.17134"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'Sending Unsupported Command:.*14.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41927 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%WaveTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%WaveTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41927 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41927, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wave Test fails because it enforces RAW and/or DEFAULT on HWKWS pin.', 'Wave Test fails because it requires HWKWS pin to support RAW or DEFAULT mode. HWKWS pins don''t have to support either RAW or DEFAULT mode. ', 'If you encountered this error and you believe the failing pin is the keyword detector pin, please contact CSS for verification and to obtain the updated test binary.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.17754.17754","10.1.14393.14393","10.1.15063.15063","10.1.16299.16299","10.1.17134.17134","10.1.17763.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::WaveTest::TAEF_Capture_VerifyRawOrDefaultProcessingSupported.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL:.*Capture supports for Raw Mode is required.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'FAIL:.*Support for Raw or Default Mode is required.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual(dwRes, (DWORD)FNS_FAIL) - Values (1, 1)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 41928 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%KsTopTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%KsTopTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 41928 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(41928, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Ks Topology Test fails because it enforces RAW and/or DEFAULT on HWKWS pin.', 'Ks Topology Test fails because it requires HWKWS pin to support RAW or DEFAULT mode. HWKWS pins don''t have to support either RAW or DEFAULT mode. ', 'If you encountered this error and you believe the failing pin is the keyword detector pin, please contact CSS for verification and to obtain the updated test binary.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.17763.17763","10.1.14393.14393","10.1.15063.15063","10.1.16299.16299","10.1.17134.17134","10.1.17754.17754"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Pins\\Check Processing Modes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*: All pins \(other than offload and loopback\) must support RAW or DEFAULT mode', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42033 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42033 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42033, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5[1 Machine] StandardizedKeyword test failure in a driver with RSC is not enabled', 'The test was ran in a VF environment. NetVSC sits above the VF miniport driver. When RSC offload support is checked in the VM, VF miniport driver returns no support, which matches the hardware’s response; however NetVSC will always support it, as it can do software RSC offload. ', 'This is an acceptable failure', '2030-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_8086&DEV_1571") or contains(.,"VEN_8086&DEV_1889") or contains(.,"VEN_8086&DEV_37D0") or contains(.,"VEN_8086&DEV_37CD") or contains(.,"VEN_8086&DEV_1593") or contains(.,"VEN_8086&DEV_1592") or contains(.,''VEN_1AF4&DEV_1000'') or contains(.,''VEN_1AF4&DEV_1041'') or contains(.,"VEN_1924&DEV_0B03") or contains(.,"VEN_1924&DEV_0A03")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS5 Full","Windows v10.0 Client x86 19H1 Full","Windows v10.0 Client x64 19H1 Full","Windows v10.0 Server x64 19H1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*RSCIPv4', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'The feature is supported but keyword "\*RSCIPv4" is not present!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*RSCIPv4 NDI\\Params\\Default is not "0" as expected!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*RSCIPv6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'The feature is supported but keyword "\*RSCIPv6" is not present!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*RSCIPv6 NDI\\Params\\Default is not "0" as expected!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42292 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42292 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42292, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:  HEVC 10-bit playback cases are failing due to "Checksums don''t match. Frame: 1" (Device Specific)', 'HLK Errata:  HEVC 10-bit playback cases are failing due to "Checksums don''t match. Frame: 1" (Device Specific)', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_QCOM")]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVC_10bitPlaybackQualityTest1.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCPlaybackQualityTest17.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVC_10bitPlaybackQualityTest2.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42297 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %devfund_sleep_with_io_during_wlk_certification.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %devfund_sleep_with_io_during_wlk_certification.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42297 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42297, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: "DF - Sleep with IO During (Reliability)" may fail due to gatherer issues', 'Failure is identified in the Run Test task, containing "WDTF_SIMPLEIO_SENSOR : Failed to get sensor type from interface" in the error message.

For the next version of Windows, the sensors must be V2, and the failures will be upheld.  Please see https://docs.microsoft.com/en-us/windows-hardware/drivers/sensors/index for more information.', 'Partners are provide an updated binary to replace be replaced one the system under test once the HLK client has been installed.
 
The reason the failure is not just being waived is the error message could represent a real driver problem of not being able to handle a surprise remove request. To obtain the binary please contact CSS and reference this Errata ID ####.

Once the binary has been updated rerun the test. If the same failures remain these should be investigated as true driver bugs.  Additional information can be found here for investigating a driver bug:https://docs.microsoft.com/en-us/windows-hardware/test/hlk/testref/review-common-device-fundamentals-reliability-test-failures', '2030-09-19T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-09-19T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42615 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42615 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42615, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [1 Machine] - StandardizedKeywords failed - *RSCIPv NDI\Params\Default is not "1"', 'This is a test bug', 'This is an acceptable failure', '2030-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"MLX4\ConnectX-3") or contains(.,"PCI\VEN_14E4&DEV_1614") or contains(.,"PCI\VEN_14E4&DEV_16C9") or contains(.,"PCI\VEN_14E4&DEV_16CA") or contains(.,"PCI\VEN_14E4&DEV_16CE") or contains(.,"PCI\VEN_14E4&DEV_16CF") or contains(.,"PCI\VEN_14E4&DEV_16E0") or contains(.,"PCI\VEN_14E4&DEV_16E4") or contains(.,"PCI\VEN_14E4&DEV_16D0") or contains(.,"PCI\VEN_14E4&DEV_16D1") or contains(.,"PCI\VEN_14E4&DEV_16D2") or contains(.,"PCI\VEN_14E4&DEV_16D5") or contains(.,"PCI\VEN_14E4&DEV_16D6") or contains(.,"PCI\VEN_14E4&DEV_16D7") or contains(.,"PCI\VEN_14E4&DEV_16D8") or contains(.,"PCI\VEN_14E4&DEV_16D9") or contains(.,"PCI\VEN_14E4&DEV_16DF") or contains(.,"PCI\VEN_14E4&DEV_16E2") or contains(.,"PCI\VEN_14E4&DEV_16E3") or contains(.,"PCI\VEN_14E4&DEV_16E9") or contains(.,"PCI\VEN_14E4&DEV_16F1") or contains(.,"PCI\VEN_14E4&DEV_1614") or contains(.,"PCI\VEN_14E4&DEV_1750") or contains(.,"PCI\VEN_14E4&DEV_1751") or contains(.,"PCI\VEN_14e4&DEV_1752") or contains(.,"PCI\VEN_14E4&DEV_16D7")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*RSCIPv4', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*RSCIPv4 NDI\\Params\\Default is not "1" as expected!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*RSCIPv6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*RSCIPv6 NDI\\Params\\Default is not "1" as expected!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42733 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%volume.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%volume.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42733 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42733, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'Volume Texture D3D9On12 dynamic map failures (Blocked test cases)', 'D3D9On12 had a bug causing CPU access to mips other than mip 0 of volume textures to produce incorrect D3D12 commands, resulting in D3D9 errors which failed tests.', 'The D3D9On12 bug is fixed in 19H1.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full","Windows v10.0 Client ARM64 RS5 Mobile","Windows v10.0 Client ARM64 RS5 OneCoreUAP","Windows v10.0 Client ARM64 RS5 OneCore"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTestGroup', 'EndTestGroup', 'Volume MipMap \(LockCopy\).+', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42745 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%AudioLogo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%AudioLogo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42745 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42745, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Audio logo test sometimes fail on exclusive mode capture tests.', 'Due to an OS issue, Audio logo exclusive mode capture tests sometimes fail.', 'This errata overturns the failure.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Pull Mode\\Capture Exclusive', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'FAIL: initialize capturer with default format \[IAudioStreamingCapture::Initialize\]\(AUDCLNT_E_UNSUPPORTED_FORMAT\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42905 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe /auto /client /dvi /u /target:Miniport%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe /auto /client /dvi /u /target:Miniport%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42905 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42905, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HLK 1c_mini6rssoid and 2c_mini6RSSSendRecv failure due to tests are not aware of the Default Processor (introduced during VMMQ).', 'HLK Errata: HLK 1c_mini6rssoid and 2c_mini6RSSSendRecv failure due to tests are not aware of the Default Processor (introduced during VMMQ).', 'Please open a support case with Microsoft HCK support if you are encountering this issue, and have reason for a lower default RSS queue count.', '2025-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'NETWORK_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('NETWORK_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'NETWORK_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//NetworkAdapter/IsRSSv2Capable[.=(''true'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying supported Indirection table sizes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Required Indirection table size', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Hash \( NdisHashFunctionToeplitz NDIS_HASH_TCP_IPV4 \) with Valid 2 element indirection table', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'The miniport should have accepted this set request', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Hash \( NdisHashFunctionToeplitz NDIS_HASH_TCP_IPV4 \) with Valid 2 element indirection table', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Miniport did not correctly support either RSS or hashing while setting supported hashes, this is a failure', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 42971 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGIGammaVM.exe [[]MODIFIEDCMDLINE]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGIGammaVM.exe [[]MODIFIEDCMDLINE]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 42971 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(42971, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Gamma ramp HLK test failing in desktop mode randomly', 'HLK Errata: Gamma ramp HLK test failing in desktop mode randomly', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22000])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Curve', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'SetGammaControl failed with error 0x887a0001', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 43052 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 43052 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(43052, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Overlapping Resources Test: Failing on resources larger than 4Gb on some legacy Nvidia hardware', 'Legacy NV drivers do not support allocating resources larger than 4GB', 'None.  Plan to waive legacy devices for foreseeable future.', '2030-12-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/Driver[contains(@Version,"24.21.14.1")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceHeap::OverlappingResourcesTest', 'D3DConf_12_0_ResourceHeap::OverlappingResourcesTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'SUCCEEDED\(m_Device->CreateHeap\(', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', '', 'Driver Verifier', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 43117 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WrapIFSTests.cmd%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WrapIFSTests.cmd%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 43117 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(43117, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'AutoTriage: Filter.Driver: Installable File System Filter Test: Use of a simple configuration may avoid un-necessary failures', 'IFS Test ExecuteAccessTest failure', 'This is an acceptable failure', '2033-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 RS5 Full","Windows v10.0 Client x64 RS5 Full","Windows 7 Client x86","Windows 7 Client x64","Windows Server 2008 Release 2 x64","Windows v10.0 Server x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ExecuteAccessTest', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2033-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 43824 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% sensorsv2clx.e2e.tests.dll /name:RequiredThresholdsVerificationTests::RelativeOrientationSensorThresholdsVerificationTests%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% sensorsv2clx.e2e.tests.dll /name:RequiredThresholdsVerificationTests::RelativeOrientationSensorThresholdsVerificationTests%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 43824 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(43824, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'RequiredThresholdsVerificationTests::RelativeOrientationSensorThresholdsVerificationTests Delayed Enforcement', 'SLPI/Sensor Core only supports thresholding for physical sensors like Accelerometer, gyroscope, magnetometer, etc.  SLPI does not support thresholding for any fusion sensors like orientation, relative orientation sensors etc.  Thresholding on fusion sensors was not POR for SDM850 1.2 and SLPI team does not plan on this support for the SDM850 timeframe.  
This has been the case for multiple chips.
', 'Filter RequiredThresholdsVerificationTests::RelativeOrientationSensorThresholdsVerificationTests and RequiredThresholdsVerificationTests::OrientationSensorThresholdsVerificationTests', '2023-12-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/CompatID[contains(.,"VEN_QCOM&DEV_049F") or contains(.,"VEN_QCOM&DEV_0308") or contains(.,"VEN_QCOM&DEV_0421")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.17754","10.1.18362","10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=.*', '.*ACPI.QCOM.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Required threshold PKEY.SensorData.RotationAngle.Degrees was not found', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 43972 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestFrameReader#*%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestFrameReader#*%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 43972 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(43972, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:TestFrameReader on Method 2 cameras does not wait long enough for frames', 'TestFrameReader on a Method 2 camera does not wait for frames', 'Errata Issued, Test Updated', '2025-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Release MediaCapture object', '.*Photo.*Image', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=Test failed.*80004005', 'FrameReader.*recieved count.*0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 44033 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'graphicshdmitest.exe -c logo_win7_graphicshdmitest.pro -l "s98wtt_u.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('graphicshdmitest.exe -c logo_win7_graphicshdmitest.pro -l "s98wtt_u.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 44033 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(44033, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: Unplugged audio endpoints with inbox driver on legacy hardware', 'Unplugged audio endpoints with inbox driver on legacy hardware causes HDMI Power Management events failures', 'Filter covers failures.', '2050-12-04T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/HardwareID[contains(.,''VEN_10DE'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'FAIL\: node.*has nothing plugged in. Plug in and rerun the test.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', '\sFAIL: Expected values - Presence Detect = true - ELD Valid = false', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-04T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 44081 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 44081 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(44081, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS5 Errata: NDISTest 6.5 - [1 Machine] - OffloadVMMQ failed to set RSS parameters (numQueues=16) for Default VPort, Error Code 16', 'NDISTest 6.5 - [1 Machine] - OffloadVMMQ failed to set RSS parameters (numQueues=16) for Default VPort, Error Code 16', 'This is an acceptable failure on RS5', '2025-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"CHT6BUS")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Failed to set RSS parameters \(numQueues=16\) for Default VPort, Error Code 16', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'No more test cases will be executed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 44088 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 44088 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(44088, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS5 Errata: decode tests playback timeout isn''t long enough on some low cost systems', 'HLK RS5 Errata: decode tests playback timeout isn''t long enough on some low cost systems', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002&DEV_98E4'') or contains(.,''PCI\VEN_1002&DEV_9874'')]) ', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCFuzzTest1#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(hr\) - Value \(0x80070102\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 44324 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'biotest.exe -config EngineTestConfig.xml%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('biotest.exe -config EngineTestConfig.xml%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 44324 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(44324, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS5 Errata: Fingerprint Reader Logo Tests failure due to Sensor adapter interface version is incorrect', 'HLK RS5 Errata: Fingerprint Reader Logo Tests failure due to Sensor adapter interface version is incorrect', 'This is an acceptable failure', '2025-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'EA_QI_1: WbioQueryEngineInterface valid values', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'DebugInfo: Engine adapter interface version is incorrect, expected: 1, 2, 3, or 4, actual: 5|6', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 44784 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 44784 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(44784, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: NDISTest 6.5 - [2 Machine] - Stats test failures on RX NBL with multiple MDLs', 'HCK Errata: NDISTest 6.5 - [2 Machine] - Stats test failures on RX NBL with multiple MDLs', 'This is an acceptable failure.
', '2050-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'NETWORK_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('NETWORK_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'NETWORK_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/NETWORK_BLOCK/NDIS/NetworkAdapter[./description[contains(.,"Amazon Elastic Network Adapter") ]])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking if breakpoints were hit', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'total breakpoints were hit in the protocol driver while this test was executing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 44876 v11.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%hlk.bluetooth.singledevicetests.dll%BluetoothHLK::ReportedLESupportedStates%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%hlk.bluetooth.singledevicetests.dll%BluetoothHLK::ReportedLESupportedStates%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 44876 AND Version = 11
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(44876, 11, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Bluetooth - LE Supported States - Peripheral Role Support and Scatternet Support', 'Windows has new requirements to support LE Peripheral Role and LE Scatternet (Link Layer Topology), but not all existing radios can/do support the new requirements.', 'This errata allows partners to ship/update existing inventory of radios that don''t support the new requirements.', '2024-01-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[DeviceID[
contains(text(), "USB\VID_03F0&PID_311D") or
contains(text(), "USB\VID_0489&PID_E015") or
contains(text(), "USB\VID_0489&PID_E027") or
contains(text(), "USB\VID_0489&PID_E02C") or
contains(text(), "USB\VID_0489&PID_E036") or
contains(text(), "USB\VID_0489&PID_E03C") or
contains(text(), "USB\VID_0489&PID_E03D") or
contains(text(), "USB\VID_0489&PID_E043") or
contains(text(), "USB\VID_0489&PID_E048") or
contains(text(), "USB\VID_0489&PID_E04A") or
contains(text(), "USB\VID_0489&PID_E04C") or
contains(text(), "USB\VID_0489&PID_E04D") or
contains(text(), "USB\VID_0489&PID_E04E") or
contains(text(), "USB\VID_0489&PID_E056") or
contains(text(), "USB\VID_0489&PID_E057") or
contains(text(), "USB\VID_0489&PID_E05F") or
contains(text(), "USB\VID_0489&PID_E060") or
contains(text(), "USB\VID_0489&PID_E061") or
contains(text(), "USB\VID_0489&PID_E076") or
contains(text(), "USB\VID_0489&PID_E078") or
contains(text(), "USB\VID_0489&PID_E07D") or
contains(text(), "USB\VID_0489&PID_E081") or
contains(text(), "USB\VID_0489&PID_E082") or
contains(text(), "USB\VID_0489&PID_E083") or
contains(text(), "USB\VID_0489&PID_E085") or
contains(text(), "USB\VID_0489&PID_E088") or
contains(text(), "USB\VID_0489&PID_E08B") or
contains(text(), "USB\VID_0489&PID_E093") or
contains(text(), "USB\VID_0489&PID_E094") or
contains(text(), "USB\VID_0489&PID_E095") or
contains(text(), "USB\VID_0489&PID_E09E") or
contains(text(), "USB\VID_04C5&PID_1330") or
contains(text(), "USB\VID_04C5&PID_1471") or
contains(text(), "USB\VID_04C5&PID_15D7") or
contains(text(), "USB\VID_04CA&PID_17EA") or
contains(text(), "USB\VID_04CA&PID_3000") or
contains(text(), "USB\VID_04CA&PID_3001") or
contains(text(), "USB\VID_04CA&PID_3002") or
contains(text(), "USB\VID_04CA&PID_3004") or
contains(text(), "USB\VID_04CA&PID_3005") or
contains(text(), "USB\VID_04CA&PID_3006") or
contains(text(), "USB\VID_04CA&PID_3007") or
contains(text(), "USB\VID_04CA&PID_3008") or
contains(text(), "USB\VID_04CA&PID_3009") or
contains(text(), "USB\VID_04CA&PID_300A") or
contains(text(), "USB\VID_04CA&PID_300B") or
contains(text(), "USB\VID_04CA&PID_300C") or
contains(text(), "USB\VID_04CA&PID_300D") or
contains(text(), "USB\VID_04CA&PID_300F") or
contains(text(), "USB\VID_04CA&PID_3010") or
contains(text(), "USB\VID_04CA&PID_3014") or
contains(text(), "USB\VID_04CA&PID_3018") or
contains(text(), "USB\VID_04CA&PID_4000") or
contains(text(), "USB\VID_04CA&PID_4001") or
contains(text(), "USB\VID_04CA&PID_4002") or
contains(text(), "USB\VID_04CA&PID_4003") or
contains(text(), "USB\VID_04CA&PID_4004") or
contains(text(), "USB\VID_04F2&PID_AFF1") or
contains(text(), "USB\VID_04F2&PID_AFF3") or
contains(text(), "USB\VID_04F2&PID_AFF4") or
contains(text(), "USB\VID_04F2&PID_AFFD") or
contains(text(), "USB\VID_04F2&PID_AFFE") or
contains(text(), "USB\VID_04F2&PID_B49A") or
contains(text(), "USB\VID_04F2&PID_B49B") or
contains(text(), "USB\VID_04F2&PID_B49C") or
contains(text(), "USB\VID_04F2&PID_B49F") or
contains(text(), "USB\VID_04F2&PID_B4A0") or
contains(text(), "USB\VID_04F2&PID_B4A5") or
contains(text(), "USB\VID_05AC&PID_8282") or
contains(text(), "USB\VID_0930&PID_0215") or
contains(text(), "USB\VID_0930&PID_0218") or
contains(text(), "USB\VID_0930&PID_0219") or
contains(text(), "USB\VID_0930&PID_021C") or
contains(text(), "USB\VID_0930&PID_0220") or
contains(text(), "USB\VID_0930&PID_0222") or
contains(text(), "USB\VID_0930&PID_0227") or
contains(text(), "USB\VID_0930&PID_0228") or
contains(text(), "USB\VID_0930&PID_022A") or
contains(text(), "USB\VID_0930&PID_022F") or
contains(text(), "USB\VID_0930&PID_0231") or
contains(text(), "USB\VID_0A5C&PID_E027") or
contains(text(), "USB\VID_0A5C&PID_E028") or
contains(text(), "USB\VID_0B05&PID_1783") or
contains(text(), "USB\VID_0B05&PID_179C") or
contains(text(), "USB\VID_0B05&PID_17D0") or
contains(text(), "USB\VID_0B05&PID_17DC") or
contains(text(), "USB\VID_0B05&PID_185C") or
contains(text(), "USB\VID_0B05&PID_1865") or
contains(text(), "USB\VID_0BDA&PID_0821") or
contains(text(), "USB\VID_0BDA&PID_0823") or
contains(text(), "USB\VID_0BDA&PID_3508") or
contains(text(), "USB\VID_0BDA&PID_3509") or
contains(text(), "USB\VID_0BDA&PID_3540") or
contains(text(), "USB\VID_0BDA&PID_8199") or
contains(text(), "USB\VID_0BDA&PID_8724") or
contains(text(), "USB\VID_0BDA&PID_8753") or
contains(text(), "USB\VID_0BDA&PID_8754") or
contains(text(), "USB\VID_0BDA&PID_8821") or
contains(text(), "USB\VID_0BDA&PID_B001") or
contains(text(), "USB\VID_0BDA&PID_B002") or
contains(text(), "USB\VID_0BDA&PID_B003") or
contains(text(), "USB\VID_0BDA&PID_B004") or
contains(text(), "USB\VID_0BDA&PID_B005") or
contains(text(), "USB\VID_0BDA&PID_B006") or
contains(text(), "USB\VID_0BDA&PID_B007") or
contains(text(), "USB\VID_0BDA&PID_B008") or
contains(text(), "USB\VID_0BDA&PID_B009") or
contains(text(), "USB\VID_0BDA&PID_B00A") or
contains(text(), "USB\VID_0BDA&PID_B00B") or
contains(text(), "USB\VID_0BDA&PID_B010") or
contains(text(), "USB\VID_0BDA&PID_B011") or
contains(text(), "USB\VID_0BDA&PID_B023") or
contains(text(), "USB\VID_0BDA&PID_B028") or
contains(text(), "USB\VID_0BDA&PID_B029") or
contains(text(), "USB\VID_0BDA&PID_B030") or
contains(text(), "USB\VID_0BDA&PID_B031") or
contains(text(), "USB\VID_0BDA&PID_B033") or
contains(text(), "USB\VID_0BDA&PID_B718") or
contains(text(), "USB\VID_0BDA&PID_B719") or
contains(text(), "USB\VID_0BDA&PID_B720") or
contains(text(), "USB\VID_0BDA&PID_B721") or
contains(text(), "USB\VID_0BDA&PID_B722") or
contains(text(), "USB\VID_0BDA&PID_B723") or
contains(text(), "USB\VID_0BDA&PID_B725") or
contains(text(), "USB\VID_0BDA&PID_B728") or
contains(text(), "USB\VID_0BDA&PID_B72A") or
contains(text(), "USB\VID_0BDA&PID_B72B") or
contains(text(), "USB\VID_0BDA&PID_B739") or
contains(text(), "USB\VID_0BDA&PID_B820&MI_00") or
contains(text(), "USB\VID_0BDA&PID_B822") or
contains(text(), "USB\VID_0BDA&PID_B82C&MI_00") or
contains(text(), "USB\VID_0BDA&PID_C024") or
contains(text(), "USB\VID_0BDA&PID_C025") or
contains(text(), "USB\VID_0BDA&PID_C030") or
contains(text(), "USB\VID_0BDA&PID_C820&MI_00") or
contains(text(), "USB\VID_0BDA&PID_C821") or
contains(text(), "USB\VID_0BDA&PID_C823") or
contains(text(), "USB\VID_0BDA&PID_C824") or
contains(text(), "USB\VID_0BDA&PID_C825") or
contains(text(), "USB\VID_0BDA&PID_C827") or
contains(text(), "USB\VID_0BDA&PID_D720") or
contains(text(), "USB\VID_0BDA&PID_D723&MI_00") or
contains(text(), "USB\VID_0C62&PID_B010") or
contains(text(), "USB\VID_0C62&PID_B011") or
contains(text(), "USB\VID_0CF3&PID_3002") or
contains(text(), "USB\VID_0CF3&PID_3004") or
contains(text(), "USB\VID_0CF3&PID_3006&MI_02") or
contains(text(), "USB\VID_0CF3&PID_3008") or
contains(text(), "USB\VID_0CF3&PID_311D") or
contains(text(), "USB\VID_0CF3&PID_311E") or
contains(text(), "USB\VID_0CF3&PID_311F") or
contains(text(), "USB\VID_0CF3&PID_3121") or
contains(text(), "USB\VID_0CF3&PID_3122") or
contains(text(), "USB\VID_0CF3&PID_312D&MI_02") or
contains(text(), "USB\VID_0CF3&PID_817A") or
contains(text(), "USB\VID_0CF3&PID_E003") or
contains(text(), "USB\VID_0CF3&PID_E004") or
contains(text(), "USB\VID_0CF3&PID_E019") or
contains(text(), "USB\VID_0CF3&PID_E020") or
contains(text(), "USB\VID_0CF3&PID_E021") or
contains(text(), "USB\VID_10AB&PID_0063") or
contains(text(), "USB\VID_10AB&PID_0064") or
contains(text(), "USB\VID_10AB&PID_0081") or
contains(text(), "USB\VID_10AB&PID_0088") or
contains(text(), "USB\VID_13D3&PID_3283") or
contains(text(), "USB\VID_13D3&PID_3293") or
contains(text(), "USB\VID_13D3&PID_3294") or
contains(text(), "USB\VID_13D3&PID_3296") or
contains(text(), "USB\VID_13D3&PID_3304") or
contains(text(), "USB\VID_13D3&PID_3320") or
contains(text(), "USB\VID_13D3&PID_3362") or
contains(text(), "USB\VID_13D3&PID_3363") or
contains(text(), "USB\VID_13D3&PID_3373") or
contains(text(), "USB\VID_13D3&PID_3374") or
contains(text(), "USB\VID_13D3&PID_3375") or
contains(text(), "USB\VID_13D3&PID_3393") or
contains(text(), "USB\VID_13D3&PID_3395") or
contains(text(), "USB\VID_13D3&PID_3397") or
contains(text(), "USB\VID_13D3&PID_3398") or
contains(text(), "USB\VID_13D3&PID_3402") or
contains(text(), "USB\VID_13D3&PID_3408") or
contains(text(), "USB\VID_13D3&PID_3410") or
contains(text(), "USB\VID_13D3&PID_3414") or
contains(text(), "USB\VID_13D3&PID_3416") or
contains(text(), "USB\VID_13D3&PID_3422") or
contains(text(), "USB\VID_13D3&PID_3423") or
contains(text(), "USB\VID_13D3&PID_3424") or
contains(text(), "USB\VID_13D3&PID_3429") or
contains(text(), "USB\VID_13D3&PID_3430") or
contains(text(), "USB\VID_13D3&PID_3432") or
contains(text(), "USB\VID_13D3&PID_3458T") or
contains(text(), "USB\VID_13D3&PID_3459") or
contains(text(), "USB\VID_13D3&PID_3460") or
contains(text(), "USB\VID_13D3&PID_3461") or
contains(text(), "USB\VID_13D3&PID_3462") or
contains(text(), "USB\VID_13D3&PID_3472") or
contains(text(), "USB\VID_13D3&PID_3474") or
contains(text(), "USB\VID_13D3&PID_3477") or
contains(text(), "USB\VID_13D3&PID_3478") or
contains(text(), "USB\VID_13D3&PID_3479") or
contains(text(), "USB\VID_13D3&PID_3480") or
contains(text(), "USB\VID_13D3&PID_3486") or
contains(text(), "USB\VID_13D3&PID_3487") or
contains(text(), "USB\VID_13D3&PID_3489") or
contains(text(), "USB\VID_13D3&PID_3490") or
contains(text(), "USB\VID_13D3&PID_3494") or
contains(text(), "USB\VID_13D3&PID_3507") or
contains(text(), "USB\VID_13D3&PID_3524") or
contains(text(), "USB\VID_13D3&PID_3525") or
contains(text(), "USB\VID_13D3&PID_3526") or
contains(text(), "USB\VID_13D3&PID_3529") or
contains(text(), "USB\VID_13D3&PID_3530") or
contains(text(), "USB\VID_13D3&PID_3531") or
contains(text(), "USB\VID_13D3&PID_3532") or
contains(text(), "USB\VID_13D3&PID_3533") or
contains(text(), "USB\VID_13D3&PID_3535") or
contains(text(), "USB\VID_13D3&PID_3536") or
contains(text(), "USB\VID_13D3&PID_3537") or
contains(text(), "USB\VID_13D3&PID_3538") or
contains(text(), "USB\VID_13D3&PID_3539") or
contains(text(), "USB\VID_13D3&PID_3542") or
contains(text(), "USB\VID_13D3&PID_3545") or
contains(text(), "USB\VID_145F&PID_0197") or
contains(text(), "USB\VID_145F&PID_0198") or
contains(text(), "USB\VID_1690&PID_0751") or
contains(text(), "USB\VID_1690&PID_0754") or
contains(text(), "USB\VID_1690&PID_0755") or
contains(text(), "USB\VID_1690&PID_0763") or
contains(text(), "USB\VID_1690&PID_0765") or
contains(text(), "USB\VID_2FF8&PID_3541") or
contains(text(), "USB\VID_2FF8&PID_3543") or
contains(text(), "USB\VID_2FF8&PID_B010") or
contains(text(), "USB\VID_2FF8&PID_B011") or
contains(text(), "USB\VID_3341&PID_8050") or
contains(text(), "USB\VID_5160&PID_30B0") or
contains(text(), "USB\VID_7392&PID_A611") or
contains(text(), "USB\VID_7392&PID_B611") or
contains(text(), "USB\VID_8087&PID_07DC") or
contains(text(), "USB\VID_8087&PID_0A2A") or
contains(text(), "USB\VID_B49A&PID_04F2") or
contains(text(), "USB\VID_1286&PID_204B") or
contains(text(), "USB\VID_1286&PID_204C") or
contains(text(), "USB\VID_0CF3&PID_817B") or
contains(text(), "USB\VID_0CF3&PID_E005") or
contains(text(), "USB\VID_0CF3&PID_E006") or
contains(text(), "USB\VID_0CF3&PID_0036") or
contains(text(), "USB\VID_04CA&PID_301D") or
contains(text(), "USB\VID_0B05&PID_18EA") or
contains(text(), "USB\VID_0B05&PID_18EB") or
contains(text(), "USB\VID_0BDA&PID_D739") or
contains(text(), "USB\VID_0BDA&PID_C031") or
contains(text(), "USB\VID_13D3&PID_3556") or
contains(text(), "USB\VID_13D3&PID_3557") or
contains(text(), "USB\VID_13D3&PID_3558") or
contains(text(), "USB\VID_13D3&PID_3559") or
contains(text(), "USB\VID_0BDA&PID_B00E") or
contains(text(), "USB\VID_0BDA&PID_C032") or
contains(text(), "USB\VID_0BDA&PID_C829") or
contains(text(), "USB\VID_0BDA&PID_C831")
]])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["18362","22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=BluetoothHLK::ReportedLESupportedStates::Test_Scatternet', 'BluetoothHLK::ReportedLESupportedStates::Test_Scatternet', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsTrue\(WI_AreAllFlagsSet\(m_localRadioHardwareCapacity.LELocalSupportedStates, requiredLESupportedStates\)\): Reported LE States Supported \[0x[0-9a-f]+\], expected states to be supported \[0x2090c00cc00\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=BluetoothHLK::ReportedLESupportedStates::Test_PeripheralRole', 'BluetoothHLK::ReportedLESupportedStates::Test_PeripheralRole', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsTrue\(WI_AreAllFlagsSet\(m_localRadioHardwareCapacity.LELocalSupportedStates, requiredLESupportedStates\)\): Reported LE States Supported \[0x[0-9a-f]+\], expected states to be supported \[0x400030008f\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 45215 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'SmbConnect.exe -S [Support] -h smbconnectshare -T 5000 /verbose /refresh'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('SmbConnect.exe -S [Support] -h smbconnectshare -T 5000 /verbose /refresh')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 45215 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(45215, 5, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HLK RS1 | SMB SmbConnect LOGO test Fails due to timeout', 'This is a test issue in RS1.', 'This is considered an acceptable test failure ', '2025-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_15B3&DEV_1017") or contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_15B3&DEV_101B") or contains(.,"PCI\VEN_15B3&DEV_1013") or contains(.,"PCI\VEN_15B3&DEV_1019") or contains(.,"PCI\VEN_15B3&DEV_101D")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["14393","17763"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 45532 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Tpm20PreOsTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Tpm20PreOsTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 45532 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(45532, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM 2.0 UEFI Preboot Interface Test WoW64 for ARM64', 'In ARM64, this test cannot find bcdedit.exe because of a redirection problem.', 'The test will be waived for RS5 on ARM64 devices.', '2029-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=PreOsTestWrapper.RunPreOsSetup', 'PreOsTestWrapper.RunPreOsSetup', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'System.ComponentModel.Win32Exception: The system cannot find the file specified', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=PreOsTestWrapper.CleanupBcdSettings', 'PreOsTestWrapper.CleanupBcdSettings', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'System.ComponentModel.Win32Exception: The system cannot find the file specified', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=PreOsTestWrapper.ParseAndLogFile', 'PreOsTestWrapper.ParseAndLogFile', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Log file incomplete.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 45916 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 45916 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(45916, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: System - Sleep with IO Before and After (Reliability SysFund): HD Audio device is disabled following sleep and resume', 'If the display is not turned back on prior to test cases executing, HD audio devices may be in a disabled state ...High Definition Audio ...Device is reporting a problem code ...', 'This is an acceptable failure', '2030-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Sleep_With_IO_BeforeAndAfter::Sleep_With_IO_BeforeAndAfter_Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Open\(High Definition Audio', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Sleep_With_IO_BeforeAndAfter::Sleep_With_IO_BeforeAndAfter_Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Open\(High Definition Audio', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Device Status: Status', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46215 v14.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46215 AND Version = 14
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46215, 14, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '"NDISTest 6.5 - [2 Machine] - OffloadChecksum" & "NDISTest 6.5 - [2 Machine] - InvalidPackets" failing due to test exception', 'The tests "NDISTest 6.5 - [2 Machine] - OffloadChecksum" and "NDISTest 6.5 - [2 Machine] - InvalidPackets" are failing with an exception in NDISTest.NDISTestCore.TestServices.NDISOperationException .', 'This is considered an acceptable test failure.', '2024-01-08T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_15B3&DEV_1013") or contains(.,"PCI\VEN_15B3&DEV_1017") or contains(.,"MLX4\CONNECTX-3PRO_ETH") or contains(., "CHT6BUS\CHNET") or contains(.,"PCI\VEN_15B3&DEV_1019") or contains(.,"PCI\VEN_15B3&DEV_101B") or contains(.,"PCI\VEN_14E4&DEV_1750") or contains(.,"PCI\VEN_14E4&DEV_16") or contains(.,"PCI\VEN_14E4&DEV_D8") or contains(.,"PCI\VEN_1137&DEV_0043") or contains(.,"PCI\VEN_1924&DEV_0B03") or contains(.,"PCI\VEN_1924&DEV_0A03") or contains(.,"PCI\VEN_10DF&DEV_0720")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'ETH \+ IPv4\(invalid header length\) \+ UDP \+ NDTest\.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Test terminated abnormally with an Exception NDISTest\.NDISTestCore\.TestServices\.NDISOperationException', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checksum offload - Test Udp receive checksum offload with Ipv4  \( Udp checksum recv offload: On/Ipv4 Option: Off\)\. Packet count: 30; Packet header size: 42; Packet total size 55', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Test terminated abnormally with an Exception NDISTest\.NDISTestCore\.TestServices\.NDISOperationException', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Restoring RSC state on test and support adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to restore saved RSC state to the support adapter.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-08T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46339 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCaptureTests::Controls::TaefMediaCaptureControlTests::Test%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCaptureTests::Controls::TaefMediaCaptureControlTests::Test%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46339 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46339, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB Exposure controls default is not reset correctly', 'USB Exposure controls default is not reset correctly.', 'Errata Issued, OS Fixed', '2030-01-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TEST CASE.*', '.*Validating default state of Auto.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Default state of Auto .* true', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TEST CASE.*', '.*Validating default Preset value.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Default Preset value is NOT Auto', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46713 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% offerreclaim.dll /name:VidMm::OfferReclaim12::BasicTestVM'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% offerreclaim.dll /name:VidMm::OfferReclaim12::BasicTestVM')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46713 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46713, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'GRFX Kernel VM WDDM2 - OfferReclaim12 - Basic Test fails due to test problem', 'This test will fail because it relies on a test escape that is currently not working. In a gpu paravirtualization scenario, this test escape (D3DKMT_ESCAPE_ADAPTER_VERIFIER_OPTION) isn''t correctly implemented and it will fail for all partners. This filter identifies the failing escape for this VM scenario test.', 'This test will be fixed for the Vibranium release. Another bug fix that happened for 19H1 unblocked this testpass and the problem was discovered too late to be fixed for this release.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'VidMm::OfferReclaim12::BasicTestVM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(HRESULT_FROM_NT\(Status\)\): Executing escape with type 29 - Value \(0xd00000bb\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46718 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::TestPrecisionVM'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% periodicframenotification.dll /name:PeriodicFrameNotification::TestPrecisionVM')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46718 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46718, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'GRFX Kernel VM WDDM2.2 Periodic frame notification failing due to test error', 'This test will fail because it relies on a test escape that is currently not working. In a gpu paravirtualization scenario, this test escape (D3DKMT_ESCAPE_VIDSCH) isn''t correctly implemented and it will fail for all partners. This filter identifies the failing escape for this VM scenario test.', 'This test will be fixed for the Vibranium release. Another bug fix that happened for 19H1 unblocked this testpass and the problem was discovered too late to be fixed for this release.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PeriodicFrameNotification::TestPrecisionVM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'NtSuccess\(CallKernelEscape\(m_KMTDevice\.GetHandle\(\), m_Adapter\.GetDxgAdapter\(\), D3DKMT_ESCAPE_VIDSCH, VidSchEscape\)\) - Value \(0xc00000bb\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46873 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% makeresident.dll /name:VidMm::MemoryResidency::VerifyStandardVM'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% makeresident.dll /name:VidMm::MemoryResidency::VerifyStandardVM')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46873 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46873, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'GRFX Kernel VM WDDM2 - Make Resident - Verify Standard Test', 'This test will fail because it relies on a test escape that is currently not working. In a gpu paravirtualization scenario, this test escape (D3DKMT_ESCAPE_ADAPTER_VERIFIER_OPTION) isn''t correctly implemented and it will fail for all partners. This filter identifies the failing escape for this VM scenario test.', 'This test will be fixed for the Vibranium release. Another bug fix that happened for 19H1 unblocked this testpass and the problem was discovered too late to be fixed for this release.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VidMm::MemoryResidency::VerifyStandardVM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(HRESULT_FROM_NT\(D3DKMTEscape\(&Escape\)\)\): Setting process budget - Value \(0xd00000bb\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46875 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46875 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46875, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HEVC video extension automatically updated by OS causes HEVC Fuzz Test 3 to fail', 'HEVC video extension automatically updated by OS causes HEVC Fuzz Test 3 to fail', 'This is an acceptable failure', '2030-03-31T18:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 18800])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVCFuzzTest3#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Playback failed with error', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_HEVCFuzzTest3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Playback failed with error:', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T18:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46880 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%d3dconf_12_core%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%d3dconf_12_core%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46880 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46880, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WHQL HLK 19H1 18340 SIGMA:D3D12 - Index Buffer Format and Strip Cut test failed with app crashed (GP10x and newer)', 'The test destroys a resource referenced by the command list (CL) before closing the CL.  This is invalid and can cause driver crashes and/or hardware faults.', 'Close the command list prior to releasing resources.', '2029-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=D3DConf_12_0_ResourceBindingAdditional::TestMethodCleanup', 'A failure occurred while running a test operation: ', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 46952 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandHlkTestsTaef::PoolingOperation%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandHlkTestsTaef::PoolingOperation%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46952 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(46952, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectML Metacommands HLK fail Pooling validation of strides and windowSizes bigger than 3 ', 'The Pooling MetaCommand HLK tests still use the old DirectML spec to create the test tensors. In RS5, we specified arrays of 4 or 5 dimensions for startPadding, endPadding, strides and windowSize. But in 19H1, we have validation to force it to be 2 or 3 dimensions. We found this problem too late into Tell Mode to be able to fix it.', 'If IHV''s see, "apiconverters.cpp(343)\MetacommandHlkTests.dll!00007FFBED326BAD: (caller: 00007FFBED43B17F) Exception(1) tid(4e38) 80070057 The parameter is incorrect.", they can apply this errata. Specifically this affects Pooling test cases that use 4 or 5 dimension arrays for windowSize and strides, instead of 2 or 3 dimension arrays.', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'Test:#\d+; Graph:Pooling;', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'apiconverters\.cpp.*343.*The parameter is incorrect\.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Metacommand operation failed testing', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47110 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Win6_4.MBN.GSM.TestWake.dll /name:Win6_3MBN::GSM::TestWake::SmsMessage%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Win6_4.MBN.GSM.TestWake.dll /name:Win6_3MBN::GSM::TestWake::SmsMessage%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47110 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47110, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK errata: Win6_4.MB.GSM.Data.TestWake.SmsMessage test failed if AOAC is not supported ', 'Win6_4.MB.GSM.Data.TestWake.SmsMessage test failed if AOAC is not supported ', 'The test should be skipped instead of failing. Will be regarded as an acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"VID_8087&PID_0AC9") or contains(.,"VID_8087&PID_0A2B") or contains(., "VID_1508&PID_1001")])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::GSM::TestWake::SmsMessage', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Platform does not support always on always connected', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47199 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:DxilConfTest::DotTest#Dot%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll /name:DxilConfTest::DotTest#Dot%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47199 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47199, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Vega fails dot2add validation because it uses float32 math internally and doesn''t report INF', 'The dot2add inf float16 test verifies that the result is INF when the multiplication of 2 half2 vector elements is bigger than FLOAT16_MAX. Most IHVs and hardware succeed that test, but since Vega uses float32 math underneath, they don''t saturate and don''t report INF as the result, even when the precise flag isn''t set.

To fix this test, we''ll have to split the INF test in 2: one test that uses the precise flag, and one test that doesn''t use it.', 'If IHV''s see, "Error: Verify: IsTrue(CompareFloatEpsilon(output, ref, (float)tolerance, mode)) [File: onecoreuap\windows\directx\dxg\d3dtest\conf\d3d12\dxil\dxilconf.cpp, Function: VerifyOutputWithExpectedValueFloat, Line: 3606]", they can apply this errata. dot2add is the only ML intrinsic that uses floats, so other ML intrinsics will never fail inside that function.', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'DxilConfTest::DotTest#Dot', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'dxilconf\.cpp', 'File', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '3606', 'Line', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsTrue\s*\(\s*CompareFloatEpsilon\s*\(\s*output,\s*ref,\s*\(\s*float\s*\)\s*tolerance,\s*mode\s*\)\s*\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47299 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandPreprocessHlkTestsTaef::PreprocessMetaCommand%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandPreprocessHlkTestsTaef::PreprocessMetaCommand%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47299 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47299, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectML Metacommand Preprocessing tests don''t always set the descriptor heaps on the command list', 'DirectML Metacommand Preprocessing tests don''t always set the descriptor heaps on the command list. Nvidia started implementing preprocessing for metacommands after tell mode was over, so it couldn''t be fixed in time for 19H1. Currently, only the Convolution, Gemm, Pooling and Normalization metacommands are being implemented so it affects those, but IHVs are free to implement other metacommands as well before Vibranium (10 in total).', 'If IHV''s see, "[HRESULT 0x800706BE] A failure occurred while running a test operation: ''MetacommandPreprocessHlkTestsTaef::test_name''. (A crash with exception code 0xC0000005 occurred in module ''module_name''; in the process hosting the test code while invoking a test operation.)", they can apply this errata.', '2029-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'Test case index: #\d+; Preprocess Metacommand: \w+', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '\[HRESULT .*\] A failure occurred while running a test operation: ''MetacommandPreprocessHlkTestsTaef::PreprocessMetaCommand\w+''. \(A crash with exception code .* occurred in module .* in the process hosting the test code while invoking a test operation.\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'A log grouping named .* was ended when the active group was .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47353 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandPreprocessHlkTestsTaef::PreprocessMetaCommand%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandPreprocessHlkTestsTaef::PreprocessMetaCommand%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47353 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47353, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectML Metacommand Preprocessing tests don''t set the "IsNull" flag on tensors that are expected to be null', 'DirectML Metacommand Preprocessing tests don''t set the "IsNull" flag on tensors that are expected to be null. We found this bug a while a go, but it was too late into tell mode to make an HLK change. Nvidia just recently started working on their GEMM metacommand preprocessing, and they stumbled upon that bug in the HLK. Metacommand creations are also not forced to succeed and can failed if they decide to not support a certain set of parameters, so maybe the HLK tests are a bit too restrictive in this regard.', 'If IHV''s see, "TestFailed: SUCCEEDED(m_d3dDevice-&gt;CreateMetaCommand(...) - Value (0x887a0004)", they can apply this errata.', '2029-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'Test case index: #\d+; Preprocess Metacommand: \w+', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(.*CreateMetaCommand\(.*\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47476 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47476 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47476, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Multiple D3D12 H264 Fuzz / Playback tests fail with error "No DXVA support found for Type:0 SUCCEEDED(hr) - Value (0x887a0004)"', 'D3D12 H264 tests are failing due to the gatherer  checking for a D3D12 device using feature level 11.0, and the test checking with a feature level of 12.0', 'This is an acceptable failure', '2030-03-31T18:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_10DE&DEV_1380") or contains(., "PCI\VEN_10DE&DEV_1381") or contains(., "PCI\VEN_10DE&DEV_1382") or contains(., "PCI\VEN_10DE&DEV_13BA") or contains(., "PCI\VEN_10DE&DEV_13BB") or contains(., "PCI\VEN_10DE&DEV_13BC") or contains(., "PCI\VEN_10DE&DEV_13B9") or contains(., "PCI\VEN_10DE&DEV_13B4") or contains(., "PCI\VEN_10DE&DEV_139D") or contains(.,"PCI\VEN_10DE&DEV_13B6")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 18800])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'VerifyDXVASupported failed with hr = 0x887A000', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'No DXVA support found for Type:0', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(hr\) - Value \(0x887a0004\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T18:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47612 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% verifyrunfromstoreandmatchingversions.dll /name:DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% verifyrunfromstoreandmatchingversions.dll /name:DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47612 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47612, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '"Verify run from driver store support and file versioning (Graphics Drivers)" fails when newer WDDM driver run on downlevel OS', '"Verify run from driver store support and file versioning (Graphics Drivers)" fails when newer WDDM driver run on downlevel OS.', 'This is considered an acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The driver version number did not meet the expected value for this WDDM version. Version expected to begin with 25, found 26', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The driver version number did not meet the expected value for this WDDM version. Version expected to begin with 25, found 27', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The driver version number did not meet the expected value for this WDDM version. Version expected to begin with 25, found 30', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The driver version number did not meet the expected value for this WDDM version. Version expected to begin with 25, found 31', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47664 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% infverifhlk.dll /name:InfVerif::RunInfVerif /p:%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% infverifhlk.dll /name:InfVerif::RunInfVerif /p:%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47664 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47664, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: [System HMFTs]:  DF - InfVerif INF Verification has failure "Failed to get extension INFs, error 0x00000002"', 'Media team’s gatherer did not correctly expose the device ID for this virtual device (INF test depends on a valid device ID to work).  ', 'Temporary test errata be issued ', '2030-03-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'HMFT_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('HMFT_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'HMFT_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//HMFTDevice/Description[contains(.,"System HMFTs")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Failed to get primary INF, error 0x00000002', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47797 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Te.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Te.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47797 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47797, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wi-Fi Direct Service Pairing and Reconnect Tests failing during Profile connect', 'HCK Errata: Wi-Fi Direct Service Pairing and Reconnect Tests fail on 19H1', 'This is a known issue with the tests and failure is expected.', '2025-04-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//BuildLab[contains(.,"19h1_release")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Microsoft.Test.Networking.Wireless.WiFiDirect.ServicesConnectTests.AdvancedForgottenGroupAutoAcceptAdvertiser', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught exception while executing service connect scenario: System.Runtime.InteropServices.COMException \(0x80004005\): Error HRESULT E_FAIL has been returned from a call to a COM component', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught exception while executing service discover/connect scenario: System.Exception: Connect failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Error 0x00000000', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Microsoft.Test.Networking.Wireless.WiFiDirect.ServicesConnectTests.AdvancedForgottenGroupAutoAcceptAdvertiser', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught exception while executing service connect scenario: System.Runtime.InteropServices.COMException \(0x80004005\): Error HRESULT E_FAIL has been returned from a call to a COM component', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Caught exception while executing service discover/connect scenario: System.Exception: Connect failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Error 0x00000000', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-04-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 47950 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%HstiLogoTest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%HstiLogoTest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 47950 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(47950, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HSTI test failure due to HSTI version mismatch', 'The HSTI currently incorrectly checks the version field in HstiTest::VerifyHstiVersion() for version 3. This version field is set to 1 by bootmgr and should only be checked to equal to 1. The LibVerifyHSTI() method already checks for the version field in each adapter information to be 3.', 'Error will be filtered until HstiTest::VerifyHstiVersion() is fixed to correctly match that version field to 1.', '2030-06-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest=HstiTest::VerifyHstiVersion', 'HstiTest::VerifyHstiVersion', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!=!', 'HSTI Version: \d+ -- Minimum Version: \d+', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48001 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% variablerefreshratetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% variablerefreshratetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48001 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48001, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WDDM 2.6- Variable Refresh Rate Support Test fails - need FreeSync monitor to run this test', 'The test is expecting a particular predetermined Frames per seconds (FPS) number on the running hardware. If the actual FPS is not within the predetermined range then test throws an error. ', 'This is an acceptable failure', '2030-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VariableRefreshRateTest::TestVariableRefreshRateSupport', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End=Fps not between Min and Max range for no-tearing', 'For FlipImmediateNoTearing flips, Fps should be atleast 10pct above monitor RefreshRate and atleast 20pct below Test''s Present Rate', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48003 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48003 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48003, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MediaCapture Photo tests fail on Method2 cameras if Preview is not started', 'Some MediaCapture photo tests will take a photo without preview started. For Method2 cameras, the photo pin is a ''dependent'' pin, and returns a failure.', 'Errata Issued, OS Driver fixed', '2030-02-02T15:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=Test failed.*8007001F', '.*8007001F', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Async Error.*8007001F', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*No samples of length.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-02-02T15:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48004 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48004 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48004, 3, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Autotriage: MediaCapture System tests are scheduled with the wrong deviceID', 'MediaCapture Tests schedule on incorrect device', 'Tests fixed, Updated test binaries available. To obtain the binary please contact CSS and reference this Errata ID 48004', '2030-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=Test Setup failed', 'Unable to find device with deviceID.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48007 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11filter.exe%-11on12%-DisableBackgroundThreads12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11filter.exe%-11on12%-DisableBackgroundThreads12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48007 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48007, 2, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'D3D11On12 WGF11Filter fails to execute', 'Job configuration error caused the test to not produce a log file.', 'Job configuration is fixed for Vibranium.', '2030-02-28T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-02-28T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48152 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48152 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48152, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'System – PNP (disable and enable) with IO Before and After (reliability) fails on 4 or more socket system on ARM64', 'There is a known issue in HLK RS5 that might cause this failure.', 'To be fixed in a later release', '2023-07-21T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PNP_DisableEnable_With_IO_BeforeAndAfter::PNP_DisableEnable_With_IO_BeforeAndAfter_Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error:UserText', '.*The program issued a command but the command length is incorrect', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-21T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48364 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PNPSurpriseRemoveAndRestartDevice%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PNPSurpriseRemoveAndRestartDevice%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48364 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48364, 5, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'DF - PNP Surprise Remove Device Test (Reliability) test fails with Failed to receive IRP_MN_REMOVE_DEVICE after receiving IRP_MN_SURPRISE_REMOVAL', 'DF - PNP Surprise Remove Device Test (Reliability) test may fail for devices with a connected monitor.', 'The issue will be fixed in a future version of the OS.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(Devnode/Class[. =''Display'' or ''Monitor''])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Failed to receive IRP_MN_REMOVE_DEVICE after receiving IRP_MN_SURPRISE_REMOVAL', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Failed to open the EDT device', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Error : PNP_VetoLegacyDevice : Instance Path', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48366 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48366 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48366, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 Raytracing conformance test refcounting bug crashes', 'refcounting bug', 'code fixed in furture release', '2030-03-31T18:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '.*while destroying.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T18:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48427 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%hlk%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%hlk%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48427 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48427, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Bluetooth - Support for remote public key validation (Bring Up)', 'Radios that fixed the security vulnerability specified in Bluetooth erratum 10734 may not have a way to report that the radios were fixed (i.e. unable to implement the HCI commands/events specified in the erratum).', 'After working with Microsoft to verify the security vulnerability is fixed, the radio will be allowed to pass via this errata.', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'count(//Devnode[DeviceID[
contains(text(), "USB\VID_8087&PID_07DC")
]])=1', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=BluetoothHLK::RadioControllerCapabilities::Test_SupportErratum10734', 'BluetoothHLK::RadioControllerCapabilities::Test_SupportErratum10734', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Support for Erratum 10734 is required but not reported by the Bluetooth controller', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48476 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%KsPosTst%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%KsPosTst%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48476 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48476, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Ks Position Test fails on device only support 5.1 surround format', 'Ks Position Test by default uses mono/stereo/5.1 (channel mask: KSAUDIO_SPEAKER_5POINT1) formats to run the test. Device(CX20926) that only supports 5.1 (channel mask: KSAUDIO_SPEAKER_5POINT1_SURROUND) will fail the test. ', 'This errata overturns the failure.', '2029-02-28T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"USB\VID_03F0&PID_0168&MI_00")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::KsPosTest::TAEF_Capture_Latency#CaptureDefault51Format#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual\(dwRes, \(DWORD\)FNS_FAIL\) - Values \(1, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::KsPosTest::TAEF_Capture_DurationLength#CaptureDefault51Format#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual\(dwRes, \(DWORD\)FNS_FAIL\) - Values \(1, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::KsPosTest::TAEF_Capture_Progression#CaptureDefault51Format#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual\(dwRes, \(DWORD\)FNS_FAIL\) - Values \(1, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-02-28T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48525 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48525 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48525, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Remove requirement for Protected Resources with Motion Estimation', 'There was a late decision to cut Protected Resource Support for Motion Estimation.', 'Remove protected resources post 19H1.', '2029-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 18800])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Conf_MotionEstimation::GroundTruthComparison.*_Protected', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48584 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hvcihlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hvcihlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48584 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48584, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HyperVisor Code Integrity Readiness Test}: {memory is not writable and executable in context of user process', 'The Software Device job listed below fails when ran on code calling ZwAllocateVirtualMemory with the error: WDTF_TEST : Non-zero Code Integrity statistic found:: Execute Page Protection Count : 10445
Software Device - HyperVisor Code Integrity Readiness Test', 'The failure above will be waived', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HvciHlkTest::HvciTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_TEST                 : Non-zero Code Integrity statistic found:: Execute Page Protection Count', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48650 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Te.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Te.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48650 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48650, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Conf_Video9on12::VideoProcessorBlt#D3D12Driver Fails with E_INVALIDARG from VideoProcessBltHD', 'The D3D9on12 implementation ignored driver state sets.', 'Fixed in Vibranium', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '.*VideoProcessBltHD.*0x80070057.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 48679 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%KsPosTst%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%KsPosTst%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 48679 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(48679, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Test Errata: Ks Position Test fails on standard looped streaming pin with format with low sample rates.', 'Ks Position Test fail on standard looped streaming pin with format with low sample rate and less number of channels because the test is using an loop threshold to determine whether the current position reaches the end of the buffer and loops back the beginning. But this arbitrary threshold doesn''t successfully find out that the streaming has already looped.
Currently the filter applies to 1or2/8000/16(16) and 1/16000/16(16) formats.', 'This errata overturns the failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.18362","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::KsPosTest::TAEF_Render_GetPositionMult.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*Format.nChannels = 1.*\nFormat.nSamplesPerSec = 8000.*\n.*\n.*\nFormat.wBitsPerSample = 16.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual\(dwRes, \(DWORD\)FNS_FAIL\) - Values \(1, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::KsPosTest::TAEF_Render_GetPositionMult.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*Format.nChannels = 2.*\nFormat.nSamplesPerSec = 8000.*\n.*\n.*\nFormat.wBitsPerSample = 16.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual\(dwRes, \(DWORD\)FNS_FAIL\) - Values \(1, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::KsPosTest::TAEF_Render_GetPositionMult.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*Format.nChannels = 1.*\nFormat.nSamplesPerSec = 16000.*\n.*\n.*\nFormat.wBitsPerSample = 16.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'AreNotEqual\(dwRes, \(DWORD\)FNS_FAIL\) - Values \(1, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 49172 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'sdioctltst.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('sdioctltst.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 49172 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(49172, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: SD-Ioctl Test fails with SDXC UHS-1 Class Memory Card connected to the system.', 'This is a test issue and it is fixed in the next release, Partners are provide an updated binary to replace be replaced on the HLK Controller.

', 'To obtain the binary please contact CSS and reference this Errata ID 49172.
Once the binary has been updated rerun the test', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test_Read_SCR', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SD Security Spec Version should be in range 0 - 3', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 49176 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%hlk%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%hlk%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 49176 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(49176, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Bluetooth - Optional - HciExtension (Development and Integration): Unable to connect to DUT', 'In subtests HciExtensions1 and HciExtensions2, the SUT can fail to connect to DUT over BR because the DUT is not connectable.', 'This errata allows partners that consistently fail this due to failure to connect to pass until the issue is fixed on the host.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'count(//Devnode[DeviceID[
contains(text(), "USB\VID_8087&PID_0AA7") or
contains(text(), "USB\VID_8087&PID_0A2A")
]])=1', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=HciExtensions[12]', 'HciExtensions[12]', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'ERROR: HciExtensions[12] ERROR - Failed to accept connection from SLAVE \[0xffffffff\]', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'ERROR: HciExtensions[12] ERROR - Failed to request connection to MASTER \[0xc00000b5\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 49697 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 49697 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(49697, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [1 Machine] - StandardizedKeywords failed - *RSCIPv NDI\Params\Default is not "0"', 'This is a test bug', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''VEN_15B3&DEV_1015'') or contains(.,''VEN_15AD&DEV_07B0'') or contains(.,''VEN_14E4&DEV_16C8'') or contains(.,''VEN_14E4&DEV_16C9'') or contains(.,''VEN_14E4&DEV_16CA'') or contains(.,''VEN_14E4&DEV_16CE'') or contains(.,''VEN_14E4&DEV_16CF'') or contains(.,''VEN_14E4&DEV_16E0'') or contains(.,''VEN_14E4&DEV_16E4'') or contains(.,''VEN_14E4&DEV_16D0'') or contains(.,''VEN_14E4&DEV_16D1'') or contains(.,''VEN_14E4&DEV_16D2'') or contains(.,''VEN_14E4&DEV_16D5'') or contains(.,''VEN_14E4&DEV_16D6'') or contains(.,''VEN_14E4&DEV_16D7'') or contains(.,''VEN_14E4&DEV_16D8'') or contains(.,''VEN_14E4&DEV_16D9'') or contains(.,''VEN_14E4&DEV_16DF'') or contains(.,''VEN_14E4&DEV_16E2'') or contains(.,''VEN_14E4&DEV_16E3'') or contains(.,''VEN_14E4&DEV_16E9'') or contains(.,''VEN_14E4&DEV_16F1'') or contains(.,''VEN_14E4&DEV_1614'') or contains(.,''VEN_14E4&DEV_16F0'') or contains(.,''VEN_14E4&DEV_D802'') or contains(.,''VEN_14E4&DEV_D804'') or contains(.,''VEN_14E4&DEV_1750'') or contains(.,''VEN_14E4&DEV_1751'') or contains(.,''VEN_14E4&DEV_1752'') or contains(.,''VEN_15B3&DEV_1017'') or contains(.,''VEN_15B3&DEV_101B'') or contains(.,''VEN_15B3&DEV_A2D6'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*RSCIPv4', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*RSCIPv4 NDI\\Params\\Default is not "0" as expected!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*RSCIPv6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '\*RSCIPv6 NDI\\Params\\Default is not "0" as expected!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 49948 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%tpmksp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%tpmksp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 49948 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(49948, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM KSP Tests for 2016 LTSB', 'RS1 has a error code mismatches for these tests. ', 'Use the errata.', '2026-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=tpmksp::NCryptExportkeyTest::ParamTest#2', 'tpmksp::NCryptExportkeyTest::ParamTest#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual\(expected\, NCryptExportKey\(hKey\, hExportKey\, pszBlobType\, pParamList\, pbOutput\, cbOutput\, pcbResult\, dwFlags\)\) \- Values \(0x80290407\, 0x8009002d\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=tpmksp::NCryptExportkeyTest::ParamTest#2', 'tpmksp::NCryptDecryptTest::ParamTest#11', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual\(expected\, NCryptDecrypt\(hKey\, pbInputValue\, cbInputValue\, pPadInfo\, pbOutput\, cbOutput\, pcbResult\, dwFlags\)\) \- Values \(0x80290407\, 0x8009002d\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=tpmksp::SealUnSealTest::SealUnSealTestWithHmacAuth', 'tpmksp::SealUnSealTest::SealUnSealTestWithHmacAuth', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.. NCryptDecrypt.. with right authentication ticket . Value .0x8009002d.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 50183 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% infverifhlk.dll /name:InfVerif::RunInfVerif /p:%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% infverifhlk.dll /name:InfVerif::RunInfVerif /p:%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 50183 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(50183, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'InfVerif: Error 1384 to change to warning', 'New infverif checks 1384, error to be waived and changed to warning in future release.', 'Fixed in future releases.', '2023-03-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Code 1384.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-03-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 50258 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% sysfund_sleep_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% sysfund_sleep_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 50258 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(50258, 3, 2, 1, 0, 1, 0, 1, @TestCommandLineId, '19H1: Manual Waiver: System - Sleep with IO Before and After (Reliability SysFund) failing with unexpected reboot due to Bugcheck 0x1E or 0x7E', 'System - Sleep with IO Before and After (Reliability SysFund) failing with unexpected reboot due to Bugcheck 0x1E or 0x7E', 'Please contact CSS to obtain the private binary.
', '2030-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.18362.18362"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["System.Fundamentals.Reliability.SystemReliability"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 50260 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%SystemGuardTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%SystemGuardTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 50260 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(50260, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'SystemGuard - TXT CPU SRTM Status', 'This an endianness bug.', 'This was fixed in future builds and tests.', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestTxtCpuSrtmStat', 'SystemGuardTest::TestTxtCpuSrtmStat', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Did not recognize CPU SRTM Status value: 1000000\.\nExpected one of: .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 50261 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%SystemGuardTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%SystemGuardTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 50261 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(50261, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'SystemGuard - OS/SINIT Capabilities', 'This is a good value, but the test does not recognize it.', 'This was fixed in future builds and tests.', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.18363"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestOsSinitDataCap', 'SystemGuardTest::TestOsSinitDataCap', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Did not recognize OS/SINIT Capabilities value: e000000\.\nExpected one of: .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestNvInfo', 'SystemGuardTest::TestNvInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Did not recognize PS index location value: 0000\.\nExpected one of: .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestNvInfo', 'SystemGuardTest::TestNvInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.(knownSize, indexPublic.m_dataSize.): PS index size - Values.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 50676 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%thirdpartyapo.unittests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%thirdpartyapo.unittests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 50676 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(50676, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'LockForProcess fails if APO has a strict channel mask check', 'A custom LockForProcess method that has a strict requirement on not having a channel mask of 0 will cause the test to fail.', 'An errata is created to show that the test passes if the a stricter LockForProcess method is used in the test.', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CApoDeviceTests::TestValidFrameCount', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'LockForProcess failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Test Valid Frame Count failed with error: \(0x887d0003\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Error Code: \(0x887d0003\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'IsTrue\(testSucceeded\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CApoDeviceTests::TestAPODataStreaming', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'LockForProcess failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Test APO Data Streaming failed with error: \(0x887d0003\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'IsTrue\(testSucceeded\) ', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Error Code: \(0x887d0003\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51099 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'NdkLogoTests.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('NdkLogoTests.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51099 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51099, 2, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'HLK Errata: NdkLogoTests chooses wrong IP address of synthetic device instead of VF when testing through HLK Studio.', 'NdkLogoTests chooses wrong IP address of synthetic device instead of VF when testing through HLK Studio.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Msg:UserText=Global initialization has failed.', 'GlobalInitHandler: Ndk tests require both v4 & v6 to be bound', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51100 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'NdkLogoTests.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('NdkLogoTests.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51100 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51100, 2, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK Errata: NdkLogoTests chooses wrong IP address of synthetic device instead of VF when testing through HLK Studio.', 'NdkLogoTests chooses wrong IP address of synthetic device instead of VF when testing through HLK Studio.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'Global initialization has failed.', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'fnShell: Test case execution is blocked', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51346 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%hlk%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%hlk%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51346 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51346, 2, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'Bluetooth - HciExtensions tests do not account for lowered scanning duty cycle', 'HciExtensions tests 4-8 do not account for the changed scanning duty cycle (from 15% to 10%).', 'In addition to this errata, please run the following command in an elevated command prompt on primary and secondary systems:
sc config cdpsvc start= disabled
sc stop cdpsvc

To recover from workaround:
sc config cdpsvc start= delayed-auto
sc start cdpsvc

', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=HciExtensions\d', '^ERROR: HciExtensions\d ERROR - Received 1[2-5] advertisements, but expected at least 15.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=HciExtensions\d', '^ERROR: HciExtensions\d ERROR - Received an error failure notification, failing test', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51348 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pagefault.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pagefault.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51348 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51348, 3, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HLK Errata: VM WDDM2 - Page Fault Test - Induce Fault 9 Test Failing where D3D9 is not supported in these cases', 'HLK Errata: VM WDDM2 - Page Fault Test - Induce Fault 9 Test Failing where D3D9 is not supported in these cases', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51548 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te.exe%haptest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te.exe%haptest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51548 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51548, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Hardware Audio Offload test fails on hardware with Sense tone higher than 50Hz', 'The Hardware Audio Offload test fails on speaker hardware that uses a sense tone over 50Hz. Sense tones higher than 50 Hz are acceptable.', 'Apply this filter. The test will be updated in the next version.', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::Mix', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Power between 50 Hz', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Noise: 0\.0[^0]', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::Raw', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Power between 50 Hz', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Noise: 0\.0[^0]', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsGreaterThan\(DbFromMagnitude\(magSignal', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51566 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=0x0" /p:"MFTrace=FALSE" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls"* '
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=0x0" /p:"MFTrace=FALSE" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls"* ')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51566 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51566, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Controls System Test - CAMERA_PROFILES - Verify KSCAMERAPROFILE_CUSTOM enum all, rec and preview uses invalid Index value', 'Capture Engine Profile test uses an index value that is not described by the device due to a coding error. This causes the test to try and select and invalid index.', 'Test Fixed, Errata Issued', '2025-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=InitCaptureEngine Failed .*0xC00D36BB.*', '.*0xC00D36BB.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51568 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestFrameReader#*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestFrameReader#*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51568 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51568, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'FrameServer Crashes on certain FrameReader tests with use of Method 2', 'This is a bug in FrameReader using the Method 2 pin when it should not. this Causes FrameServer to crash', 'OS Fixed. Errata Issued', '2030-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Async Error.*remote procedure call failed.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=Test failed.*800705B4', '.*StopFrameReader.*bSingleFrameMode.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51569 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCaptureTests::Controls::TaefMediaCaptureControlTests::%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCaptureTests::Controls::TaefMediaCaptureControlTests::%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51569 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51569, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MediaCapture Controls Tests fail on Method2 camera when preview is not started', 'Method2 cameras cannot take photo without preview, these tests do not start preview. ', 'OS Fixed, Errata Issued', '2030-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=Test failed.*8007001F', '.*FAILED.*CapturePhotoAsync.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51823 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51823 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51823, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'PNP (disable and enable) with IO Before and After (Reliability) failing with Error: Status=1806400 (DN_HAS_PROBLEM DN_DISABLEABLE DN_REMOVABLE DN_NT_ENUMERATOR DN_NT_DRIVER ) Problem=a (CM_PROB_FAILED_START)', 'System - PNP (disable and enable) with IO Before and After (Reliability) failing with following errors:
WDTF_PNP : Result: Successful , but device not started, ( Status=1806400 (DN_HAS_PROBLEM DN_DISABLEABLE DN_REMOVABLE DN_NT_ENUMERATOR DN_NT_DRIVER ) Problem=a (CM_PROB_FAILED_START) )..
WDTF_PNP : Result: Failed, device gone, ( Status=0 () Problem=0 () ).. 
', 'Fix will ship with the next version, and an errata is granted for 19H1 to cover the test failure.', '2030-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//HardwareID[contains(.,''PCI\VEN_8086&DEV_15EB'') or contains(.,''PCI\VEN_8086&DEV_15E8'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PNP_DisableEnable_With_IO_BeforeAndAfter::PNP_DisableEnable_With_IO_BeforeAndAfter_Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Successful , but device not started', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Failed, device gone', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51936 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Win6_4.MBN.GSM.TestWake.dll /name:Win6_3MBN::GSM::TestWake::SmsMessage%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Win6_4.MBN.GSM.TestWake.dll /name:Win6_3MBN::GSM::TestWake::SmsMessage%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51936 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51936, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK errata: Win6_4.MB.GSM.Data.TestWake.SmsMessage test failed with "wait wake event was not triggered" error on 19H1', 'Win6_4.MB.GSM.Data.TestWake.SmsMessage test failed with "wait wake event was not triggered" error on 19H1', 'The test should be skipped instead of failing. Will be regarded as an acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::GSM::TestWake::SmsMessage', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Wait wake event was not triggered', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 51961 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'lullaby2%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('lullaby2%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51961 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(51961, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio: Erratum: Lullaby test fails with Bluetooth reconnection issues', 'Lullaby test is failing with some Bluetooth endpoints due to system volatility immediately after return from Hibernate.', 'Apply this filter. The test will be updated in the next version.', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Lullaby.*(Hibernate|Suspend|Connected).*WASAPI.*(Sync|Async)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'PnP ID      = INTELAUDIO\\CTLR_DEV_.*&LINKTYPE_03&DEVTYPE_00&VEN_8086&DEV_AE30', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'It took .* seconds to wake up', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The Connector to the System/External Bus is NOT Software_IO in DoesPathSupportOffload.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*AUDCLNT_E_DEVICE_INVALIDATED.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 52318 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52318 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(52318, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM Stress: WHCKTpmTbsAdminStress', 'RS1 is not suitable to execute this TPM2.0 v1.38 TPM test.', 'This is an acceptable error.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TSS Error: Error Attributes was expected but command CreatePrimary succeeded', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestCreatePrimaryFaults failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 52319 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSCryptoOperationsAndRNG.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSCryptoOperationsAndRNG.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52319 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(52319, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM Cryptographic Operations and RNG: WHCKTpmTbsAdminHmac + WHCKTpmTbsAdminHmac2', 'RS1 is not suitable to execute these TPM2.0 v1.38 TPM tests.', 'This is an acceptable error.', '2030-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSCryptoOperationsAndRNG.WHCKTpmTbsAdminHmac', 'LibTester.LibTesterTBSCryptoOperationsAndRNG.WHCKTpmTbsAdminHmac', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSCryptoOperationsAndRNG.WHCKTpmTbsAdminHmac', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TPM Error: Attributes\. Error {Attributes} was returned for command Create\.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestHmac failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'WHCK TPM 2.0 Hardware Interface test WHCKTpmTbsAdminHmac failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSCryptoOperationsAndRNG.WHCKTpmTbsAdminHmac2', 'LibTester.LibTesterTBSCryptoOperationsAndRNG.WHCKTpmTbsAdminHmac2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSCryptoOperationsAndRNG.WHCKTpmTbsAdminHmac2', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TPM Error: Attributes\. Error {Attributes} was returned for command Create\.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestHmac2 failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'WHCK TPM 2.0 Hardware Interface test WHCKTpmTbsAdminHmac2 failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 52321 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSFunctional.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSFunctional.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52321 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(52321, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM Functional: WHCKTpmTbsAdminRawTestSaltedBoundAuthSession', 'RS1 is not suitable to execute this TPM2.0 v1.38 TPM test.', 'This is an acceptable error.', '2030-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSFunctional.WHCKTpmTbsAdminRawTestSaltedBoundAuthSession', 'LibTester.LibTesterTBSFunctional.WHCKTpmTbsAdminRawTestSaltedBoundAuthSession', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSFunctional.WHCKTpmTbsAdminRawTestSaltedBoundAuthSession', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TPM Error: AuthFail\. Error {AuthFail} was returned for command NvWrite\.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestSaltedBoundAuthSession failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'WHCK TPM 2.0 Hardware Interface test WHCKTpmTbsAdminTestSaltedBoundAuthSession failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 52322 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52322 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(52322, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM NVStorage: WHCKTpmTbsAdminCreatePrimaryFaults', 'RS1 is not suitable to execute this TPM2.0 v1.38 TPM test.', 'This is an acceptable error.', '2030-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Client x64 RS1 Full","Windows v10.0 Client x86 RS1 Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminCreatePrimaryFaults', 'LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminCreatePrimaryFaults', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminCreatePrimaryFaults', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TSS Error: Error Attributes was expected but command CreatePrimary succeeded', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestCreatePrimaryFaults failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'WHCK TPM 2.0 Hardware Interface test WHCKTpmTbsAdminCreatePrimaryFaults failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 52461 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'lullaby2'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('lullaby2')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52461 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(52461, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio: Erratum: OS fails to reconnect BTHFP device on resume from hibernate for ARM64 platform', 'OS will fail to reconnect with BT HFP device after returning from Hibernate.', 'Apply this filter. The OS will be updated in the next release.', '2029-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WASAPI', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'PnP ID      = AUDD\\VEN_QCOM', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed Activating MMDevice\(hr = AUDCLNT_E_DEVICE_INVALIDATED\) after 30 seconds', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 52527 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52527 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(52527, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wave Test failed because failed to load WaveTest.dll', 'Wave Test failed because failed to load wavetest.dll', 'This is an acceptable failure ', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', '.*Failed to load.*WaveTest.dll.*BuildResourceList failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'The selection criteria did not match any tests.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'No test cases were executed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', '.*Failed to load.*WaveTest.dll.*BuildResourceList failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'The selection criteria did not match any tests.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End:PFRollup', '.*Failed to load.*WaveTest.dll.*BuildResourceList failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End:PFRollup', 'IsTrue\(FALSE == FilterList.IsEmpty\(\)\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 52904 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PhotoPrintTest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PhotoPrintTest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52904 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(52904, 1, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HCK Errata: Photo Print Test failure at Run PhotoPrintTest.exe', 'Print Phot Test failure at Run PhotoPrintTest.exe', 'This is acceptable test failure', '2029-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Print_Printer/DeviceID[contains(.,"Canon_imagePRESS_C710_series_PS3_US") or contains(.,"Canon_imagePRESS_C810_series_PS3_US") or contains(.,"Canon_imagePRESS_C910_series_PS3_US")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 53056 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% Devfund_PnPDTest_WLK%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% Devfund_PnPDTest_WLK%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 53056 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(53056, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: DF - PNP Surprise Remove Device Test (Certification) ERROR : Skipping Surprise Remove test case on a SOC critical device', 'DF - PNP Surprise Remove Device Test (Certification) ERROR : Skipping Surprise Remove test case on a SOC critical device', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"ACPI\VEN_INT&DEV_3450")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.PNPDTest.PNPSurpriseRemoveAndRestartDevice', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'the device or one of it''s descendants is marked as a SOC critical device', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 53358 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestValidateFaceAuthProfileForHello%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestValidateFaceAuthProfileForHello%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 53358 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(53358, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Face Auth Profile test fails to copy over Frame Attribute', '
Inbox DMFT fails to copy a required attribute, causing test fo fail', 'OS Fixed. Errata issued', '2029-12-31T23:59:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=.*RunWindowsHelloProfileRequirement.*', 'We are missing the MF.DEVICESTREAM.ATTRIBUTE.FRAMESOURCE.TYPES attribute.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T23:59:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 54050 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% SensorsV2Clx.E2E.Tests.dll /name:PropDataVerificationTest::AmbientLightSensorSingletonPropertiesVerificationTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% SensorsV2Clx.E2E.Tests.dll /name:PropDataVerificationTest::AmbientLightSensorSingletonPropertiesVerificationTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 54050 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(54050, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Ambient Light Sensor Singleton Properties Verification Test: Test fails due to not checking enumeration values', 'However, the test only checks if the sensor is reporting it and not what value it has. This causes false positives on systems where the property is explicitly reported as false. Take for example this system with two ambient light sensors configured like so:
Sensor 1: 
DEVPKEY_LightSensor_AdaptiveColorPreferred = true
DEVPKEY_LightSensor_AutoBrightnessPreferred = false
Sensor 2: 
DEVPKEY_LightSensor_AdaptiveColorPreferred = false
DEVPKEY_LightSensor_AutoBrightnessPreferred = true', 'Error will be filtered until the test is fixed by OS team in Vibranium.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=there should only be at most one sensor on the system reporting this.*', 'Duplicate property DEVPKEY_LightSensor_AdaptiveColorPreferred.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=there should only be at most one sensor on the system reporting this.*', 'DEVPKEY_LightSensor_AdaptiveColorPreferred.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 54507 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestVideoProfileWithValidPreviewResolution%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestVideoProfileWithValidPreviewResolution%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 54507 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(54507, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - TestVideoProfileWithValidPreviewResolution', 'Test fails on Custom Profiles, where the test is enforcing Preview Aspect Ratios when it shouldn''t.', 'Test Fixed, Errata Issued', '2029-11-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Release MediaCapture.*', 'Reject Preview Resolution.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'No matching Preview resolution found.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-11-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 54675 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%/p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls%"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%/p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls%"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 54675 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(54675, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Controls Device Test - CAMERA_PROFILES - Verify KSCAMERAPROFILE_CUSTOM enum all, rec and preview uses invalid Index value', 'Capture Engine Profile test uses an index value that is not described by the device due to a coding error. This causes the test to try and select and invalid index.', 'Test Fixed, Errata Issued', '2023-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=InitCaptureEngine Failed .*0xC00D36BB.*', '.*0xC00D36BB.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 54723 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 54723 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(54723, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: SES Test fail "Did not find disk designation descriptor in all SES enclosure paths"', 'SES Test fail "Did not find disk designation descriptor in all SES enclosure paths"', 'This is an acceptable errata', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,"SCSI\ENCLOSURE&VEN_AIC_12G&PROD_4U78SWAPHUB")])  ', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: INQUIRY Testing access to 0x83 Device Identification VPD Page.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'scsi#enclosure&ven_aic_12g&prod_4u78swaphub', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Did not find disk designation descriptor in all SES enclosure paths', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 54821 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogomanual.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogomanual.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 54821 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(54821, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Secure Boot Manual Logo Test fails request to delete PK', 'New added support for SecureBoot Audit and Deployed Mode features. With the updated BIOS code changes, the SecureBoot mode cannot be changed directly.  it requires a reset first. The BIOS returns RESET_REQUIRED when deleting PK and this prevents the transition to Setup Mode. This is permitted in the UEFI specification.

UEFI Spec 2.7 Errata B, Section 31.3:

"Mode transitions to Setup Mode or Audit Mode may either take effect immediately (recommended) or after a reset."', 'This is an acceptable failure.', '2030-08-21T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Manual.Tests.CreateFabrikam.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End=FAILED while deleting PK Database.', 'Unexpected Powershell Exception: System.Management.Automation.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-21T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 54993 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 54993 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(54993, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio lullaby test sometimes fail on Display Port/HDMI endpoints if after hibernate these endpoints takes longer to come back or receives mode change event causing endpoint to temporarily go away.', 'Audio lullaby test sometimes fail on Display Port/HDMI endpoints if after hibernate these endpoints takes longer to come back or receives mode change event causing endpoint to temporarily go away.', 'If you encountered this error and test is failing on Display Port or HDMI endpoint please contact CSS for verification and obtain updated test binary.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Lullaby Test\\Hibernate\(SH\)\\WASAPI Render Sync', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*AUDCLNT_E_DEVICE_INVALIDATED.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Lullaby Test\\Hibernate\(SH\)\\WASAPI Render Offload Sync', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*AUDCLNT_E_DEVICE_INVALIDATED.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 55081 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Sysfund_PNP_DisableEnable_With_IO_BeforeAndAfter%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Sysfund_PNP_DisableEnable_With_IO_BeforeAndAfter%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 55081 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(55081, 2, 1, 1, 0, 1, 1, 1, @TestCommandLineId, 'PNP (disable and enable) with IO Before and After (Reliability) ', 'Issue with UcsiCx hid client', 'Driver fix', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[Service="SurfaceUcmUcsiHidClient"])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 55731 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Sysfund_PNP_DisableEnable_With_IO_BeforeAndAfter%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Sysfund_PNP_DisableEnable_With_IO_BeforeAndAfter%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 55731 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(55731, 3, 1, 1, 0, 1, 1, 1, @TestCommandLineId, 'PNP (disable and enable) with IO Before and After (Reliability)', 'System - PNP (disable and enable) with IO Before and After (Reliability) can crash due to an issue in PCI.sys', 'Fix in upcomming OS release.', '2030-07-01T01:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 19H1 Full"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T01:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 55958 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% featurecheck.dll /name:FeatureCheck::IsHwSchDisabled'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% featurecheck.dll /name:FeatureCheck::IsHwSchDisabled')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 55958 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(55958, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'GRFX Kernel WDDM 2.7 Hardware Scheduling Disabled Errata', 'This test will fail on drivers that have HW scheduling enabled by default. ', 'For IHVs that have good looking driver stability data from AB testing, this errata will be issued allowing them to certify drivers with HW scheduling enabled by default.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb Full","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Client x86 Mn OneCore","Windows v10.0 Client x86 Mn OneCoreUAP","Windows v10.0 Client x86 Mn Full","Windows v10.0 Client x64 Mn OneCore","Windows v10.0 Client x64 Mn OneCoreUAP","Windows v10.0 Client x64 Mn Full","Windows v10.0 Server x64 Mn OneCore","Windows v10.0 Server x64 Mn OneCoreUAP","Windows v10.0 Server x64 Mn Full","Windows v10.0 Client ARM Mn OneCore","Windows v10.0 Client ARM Mn OneCoreUAP","Windows v10.0 Client ARM64 Mn OneCore","Windows v10.0 Client ARM64 Mn OneCoreUAP","Windows v10.0 Client ARM64 Mn Full","Windows v10.0 Server ARM64 Mn OneCore","Windows v10.0 Server ARM64 Mn OneCoreUAP","Windows v10.0 Server ARM64 Mn Full","Windows v10.0 Client x86 Fe OneCore","Windows v10.0 Client x86 Fe OneCoreUAP","Windows v10.0 Client x86 Fe Full","Windows v10.0 Client x64 Fe OneCore","Windows v10.0 Client x64 Fe OneCoreUAP","Windows v10.0 Client x64 Fe Full","Windows v10.0 Server x64 Fe OneCore","Windows v10.0 Server x64 Fe OneCoreUAP","Windows v10.0 Server x64 Fe Full","Windows v10.0 Client ARM Fe OneCore","Windows v10.0 Client ARM Fe OneCoreUAP","Windows v10.0 Client ARM64 Fe OneCore","Windows v10.0 Client ARM64 Fe OneCoreUAP","Windows v10.0 Client ARM64 Fe Full","Windows v10.0 Server ARM64 Fe OneCore","Windows v10.0 Server ARM64 Fe OneCoreUAP","Windows v10.0 Server ARM64 Fe Full","Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'FeatureCheck::IsHwSchDisabled', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsFalse\(AdapterCaps.HwSchEnabled\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 56230 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%trim.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%trim.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 56230 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(56230, 3, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HCK errata - Windows 7 Trim test', 'Kaspersky failed Windows 7 Trim test. ', 'Errata was granted. ', '2030-10-04T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver[contains(.,"klfde.sys")]) ', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":0,"Values":["Device.Storage.Hd.Trim"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["Device.Storage.Hd.Trim.BasicFunction"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows 7 Client x86","Windows 7 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Trim Command Completion Performance$', 'Trim Command Completion Performance$', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Trim Command Completion Performance$', 'scenarios failed to meet the requirement. See above for failure details.$', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Trim Command Completion Performance With IO', 'Trim Command Completion Performance With IO', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Trim Command Completion Performance With IO', 'scenarios failed to meet the requirement. See above for failure details.$', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Trim Performance Degradation Test', 'Trim Performance Degradation Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Trim Performance Degradation Test', 'failures because the latency caused by Trim exceeded the requirement.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-10-04T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 56269 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WrapIFSTests-Virus.cmd%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WrapIFSTests-Virus.cmd%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 56269 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(56269, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Antivirus Installable File System Filter Test failure due to 3rd party driver not able to detect EICAR Standard Anti-Virus Test File', 'Antivirus Installable File System Filter Test failure due to 3rd party driver not able to detect EICAR Standard Anti-Virus Test File.', 'This is an acceptable failure.', '2030-10-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Driver/FileName[(.=''csagent.sys'')] or //Driver/FileName[(.=''fortishield.sys'')] or //Driver/FileName[(.=''fortimon3.sys'')] or //Driver/FileName[(.=''fortiaptfilter.sys'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","8.100.9600","10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*IFSTEST_TEST_VIRUS_FAIL_DETECT*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*eicar.com*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*IFSTEST_TEST_VIRUS_FAIL*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Not detected = 1*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-10-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 56312 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 56312 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(56312, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: TxFlowControl Test Failure due to test changing the registry', 'When the driver is first installed the enum value is set to 4 (auto-neg). When the test runs ... it gets changed to 5 (which is invalid) ', 'If you do not manually add the "AllowFlowControlUnderdebugger" set to 1 regkey under the NDIS Service in the registry the test will fail if any of the systems used (Test or support) are booted from a bcdedit entry that has the "Debug" = on setting
 
HKLM:''\SYSTEM\CurrentControlSet\Services\NDIS\Parameters'' -Name:''AllowFlowControlUnderDebugger'' -Type:''DWORD'' -Value:1 -Force
', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Check the current Link Status.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Adapter failed to report "Tx Flow Control" setting as enabled.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 56651 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 56651 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(56651, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: QoS tests failure due to test chooses to send ethernet traffic tagged with PCP = 7', 'When the test chooses to send ethernet traffic tagged with PCP = 7, the test will fail. This is because, in a UCS systems, PCP = 7 is a reserved priority and cannot be used to run ethernet traffic (on WS2016 and WS2019)', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(., "VEN_1137&DEV_0043")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 19H1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Priority Flow Control Test\] Test Priority Flow Control', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Control Measurement Failure: Priority-7 Received Less-than', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[QOS Priority Flow Control Test\] Test Priority Flow Control Disabled', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Priority-7 Received Less-than', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '\[TC Underutilization\] Configuring QoS Parameters on Test Adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to configure OID_QOS_PARAMETERS. Status NDIS_STATUS_FAILURE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 56949 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'gdpm_ComponentParams.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('gdpm_ComponentParams.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 56949 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(56949, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Graphics Device Runtime Power Management Component Validation 19H1', 'Graphics Device Runtime Power Mgmt component validation test has been failing. The issue is being investigated', 'Issuing Errata to unblock IHVs', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002&'') or contains(.,''PCI\VEN_8086&'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Server x64 Vb Full","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client ARM64 19H1 Mobile","Windows v10.0 Client ARM 19H1 Mobile","Windows v10.0 Client x86 19H1 Mobile","Windows v10.0 Server ARM64 19H1 Full","Windows v10.0 Server x64 19H1 Full","Windows v10.0 Client ARM64 19H1 Full","Windows v10.0 Client x64 19H1 Full","Windows v10.0 Client x86 19H1 Full","Windows v10.0 Client ARM64 19H1 OneCoreUAP","Windows v10.0 Client ARM 19H1 OneCoreUAP","Windows v10.0 Client x64 19H1 OneCoreUAP","Windows v10.0 Client x86 19H1 OneCoreUAP","Windows v10.0 Server x64 19H1 OneCore","Windows v10.0 Client ARM64 19H1 OneCore","Windows v10.0 Client ARM 19H1 OneCore","Windows v10.0 Client x64 19H1 OneCore","Windows v10.0 Client x86 19H1 OneCore","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', '.*Root Node/EnableDRTEscape/DPMPowerComponentInfo*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', '.*Failed reported State validation*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 57061 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PrintDrvStress.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PrintDrvStress.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 57061 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(57061, 1, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'Print Driver Stress Test: PrintSpy was unable to continue! DispatchCallbacks failed! Error code: 0x8001000a', 'Print Driver Stress Test: PrintSpy was unable to continue! DispatchCallbacks failed! Error code: 0x8001000a in PrintSpy_PrintDrvStress.xml', 'This is acceptable failure.', '2030-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/HardwareID[contains(.,"OceimagePRESS_C710D1AD") or contains(.,"OceimagePRESS_C810D1AD") or contains(.,"OceimagePRESS_C910D1AD") or contains(.,"OceVarioPrint_61807F18")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 57243 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% queryadapterperfdata.dll /name:QueryAdapterPerfData::TestNodePerfData'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% queryadapterperfdata.dll /name:QueryAdapterPerfData::TestNodePerfData')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 57243 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(57243, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM2.7 Query Adapter Perf Data - Test Node Perf Data', 'This test will fail to index correctly on gpu linked systems such as Sli or Crossfire.', 'This issue will be fixed in future releases.', '2025-10-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/GraphicsInfo[@IsLDA="1"])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'QueryAdapterPerfData::TestNodePerfData', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'D3DKMTQueryAdapterInfo failed, Status: c000000d', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 57276 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kstop%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kstop%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 57276 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(57276, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Test Errata: KsTopology test sometimes incorrectly fails for properties on KSNODETYPE_SUPERMIX.', 'KsTopology test does not currently implement KSPROPERTY_AUDIO_MIX_LEVEL_TABLE and KSPROPERTY_AUDIO_MIX_LEVEL_CAPS properties correctly causing them to fail on certain devices. MSDN currently describes KSPROPERTY_AUDIO_MIX_LEVEL_TABLE property to be SET capable however USB Audio 2.0 specification allows devices to create this property without SET capability when the controls are not programmable causing test to fail on those devices.', 'This errata overturns the failure.', '2025-10-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Properties\\Check All Properties Access Flags', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_SUPERMIX.*KSPROPERTY_AUDIO_MIX_LEVEL_TABLE: Should have the KSMETHOD_TYPE_WRITE set for KSPROPERTY_DESCRIPTION.AccessFlags', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_SUPERMIX.*KSPROPERTY_AUDIO_MIX_LEVEL_CAPS: Should NOT have the KSMETHOD_TYPE_WRITE set for KSPROPERTY_DESCRIPTION.AccessFlags', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_SUPERMIX.*can not be performed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Properties\\Check Property Get and Set Ranges', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_SUPERMIX.*KSPROPERTY_AUDIO_MIX_LEVEL_TABLE: Should have the KSMETHOD_TYPE_WRITE set for KSPROPERTY_DESCRIPTION.AccessFlags', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_SUPERMIX.*KSPROPERTY_AUDIO_MIX_LEVEL_CAPS: Should NOT have the KSMETHOD_TYPE_WRITE set for KSPROPERTY_DESCRIPTION.AccessFlags', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL:.*KSNODETYPE_SUPERMIX.*can not be performed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 57277 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%hvcihlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%hvcihlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 57277 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(57277, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: HyperVisor Code Integrity Readiness Test fails on ScsiIrpTestFilter.sys when testing NVMe device', 'The test falsely fails the test for the vendor when in fact it is a failure in a Microsoft HLK driver ', 'This is an acceptable failure for verified drivers.', '2029-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*scsiirptestfilter.sys.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Non-zero Code Integrity statistic found: Execute Pool Type Count*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Non-zero Code Integrity statistic found: Execute Page Mapping Count.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 57415 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging nodemetadata.tests.dll /name:WEX::NodeMetaData::ValidateEngineTypes'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging nodemetadata.tests.dll /name:WEX::NodeMetaData::ValidateEngineTypes')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 57415 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(57415, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Validate Engine Meta Data Basic Support'' test fails with error ''IsTrue(bError==false)''', 'Failure repro''d only when we ran the test on a system which ran WHQL tests  - ''WDDM PnPStop Test'' or ''WDDM PnPStopModeSwitch Test''  and not rebooted prior to ''Validate Engine Meta Data Basic Support'' test. The test is passing flawlessly if we ran the tests prior to WDDM PnP* tests. The test is passing flawlessly if we ran the tests after a reboot from a repro state. Failure repro''d only on a  multi-GPU system. Repro observed with both SLI Enabled and SLI Disabled testing. No repo observed with Single GPU systems.

Inconsistent repros make this difficult to debug and provide a fix right now. ', 'For now, we''d like to issue an errata and aim to fix this for the next release.', '2029-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb Full","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Client x86 19H1 OneCore","Windows v10.0 Client x64 19H1 OneCore","Windows v10.0 Client ARM 19H1 OneCore","Windows v10.0 Client ARM64 19H1 OneCore","Windows v10.0 Server x64 19H1 OneCore","Windows v10.0 Client x86 19H1 OneCoreUAP","Windows v10.0 Client x64 19H1 OneCoreUAP","Windows v10.0 Client ARM 19H1 OneCoreUAP","Windows v10.0 Client ARM64 19H1 OneCoreUAP","Windows v10.0 Client x86 19H1 Full","Windows v10.0 Client x64 19H1 Full","Windows v10.0 Client ARM64 19H1 Full","Windows v10.0 Server x64 19H1 Full","Windows v10.0 Server ARM64 19H1 Full","Windows v10.0 Client x86 19H1 Mobile","Windows v10.0 Client ARM 19H1 Mobile","Windows v10.0 Client ARM64 19H1 Mobile"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WEX::NodeMetaData::ValidateEngineTypes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsTrue\(bError==false\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'WEX::NodeMetaData::ValidateForm:803 ? 3D engines for Adapter*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 57463 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging lidstatetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging lidstatetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 57463 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(57463, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Delayed Enforcment Errata: Lid basic Requirement test – shouldn’t run on a Non LID systems', 'This errata covers any failures of the Lid Basic Verification test. The test is only applicable to systems with a lid, and it verifies that the system is properly reporting its lid state to ensure that input is properly suppressed when the lid is closed. If this fails on a system with a lid, then it is at risk of remaining active, overheating, and draining excess battery while in a lid closed sleep state. 
', 'If this system has a lid, then ensure the system properly reports its lid state. This test will be enforced for certification requirements in a later release. ', '2023-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PowerManagement::Lidtest::BasicLidTest', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 57543 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'nvmeshim.exe /DriveNumber%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('nvmeshim.exe /DriveNumber%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 57543 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(57543, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NVMe Queue Pause-Resume Test (LOGO) due to invalid doorbell write to an I/O queue', 'NVMe Queue Pause-Resume Test (LOGO) due to invalid doorbell write to an I/O queue', 'The errors will be filtered until the test is updated.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'IO Workload with ((No |)Pause/Resume of Q\(s\)|Queue Statistics)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'There were \d* occurrences of reset events', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 58066 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%d3dconf_12_core%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%d3dconf_12_core%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 58066 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(58066, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Debug Layer GBV - Simple Resource State for Non Shader Access resources Validation fails', 'New runtime validation causes error output not expected by the test.', 'Filter out failing test cases.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'SimpleInvalidResourceStateCommandListOps#(19|20)#[01]', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'NumDebugMessagesProduced', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 58590 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%T%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%T%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 58590 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(58590, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WHQL HLK 19H1 RTM TDR2 tests are failing with error ''Did not recieved DdiResetEngine(5051) event when SupportPerEngineTDR is true''', 'This test is submitting a shader in a big loop to cause a TDR, but new shader compiler optimization, optimizes this away and breaks the underlying rationale of the test, and we never TDR.', 'Need to re-write test to generate TDRs in a different way.', '2023-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PreemptionTest*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Expecting TDR but did not recieve one', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 58643 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 58643 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(58643, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TestWindowsHelloDeviceRequirement fails SensorGroup due to single Device Profile', 'Test uses single device Profile when running Dual Device SensorGroup. This causes the test to mis-index the IR stream, resulting in a stream not found error.', 'Test fixed. Errata Issued.', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*TestWindowsHelloDeviceRequirement.*SWD.*', '.*TestWindowsHelloDeviceRequirement.*SWD.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Unable to to find the FaceAuth IR Stream after initialization', 'Check for FaceAuth Control support on IR Stream.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 58853 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 58853 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(58853, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Filter: DFx System Level Verification test -- USB root hub device should pass', 'USB Root hub failures are exempted from the DFx verification test.', 'No action needs to be taken.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''USB Root Hub \(USB 3.0\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''ROOT\\USB\\0000''', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''PCI Express Root Port', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 59393 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 59393 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(59393, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS1 errata:D3D12 - UMH - Reserved Resource Copy Tiles Test fails on RS1 with "Images mismatch!" error', 'HLK Errata: D3D12 - UMH - Reserved Resource Copy Tiles Test fails on RS1 with "Images mismatch!" error.', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_3E9B")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'D3DConf_12_0_ReservedResource::CopyTilesTest.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Images mismatch!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 59458 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 59458 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(59458, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 Mesh Shader test bugs in VB release (fixed post-VB)', 'Mesh shader test issues in VB', 'Fixed in Mn+', '2029-12-01T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb Full","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_MeshShaders*', 'D3DConf_12_0_MeshShaders*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'CreatePipelineState.*0x80070057', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_MeshShaders2::PrimitiveID*', 'D3DConf_12_0_MeshShaders2::PrimitiveID*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsFalse', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-01T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 59505 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd /c powershell ./IoTContainerExecution.ps1 -WttRunWorkingDir%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd /c powershell ./IoTContainerExecution.ps1 -WttRunWorkingDir%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 59505 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(59505, 2, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'WDDM 2.7 Onecore Container Test uses incorrect Feature Level', 'This waiver should be to mark all failures on Nvidia Kepler GPUs (see attached for DevIDs) as the test will always fail on this architecture due to a test bug. This will be fixed for the next OS release.', 'This will be fixed for the next OS release where the device feature level will be queried first, rather than assuming the hardware supports the feature level.', '2030-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[contains(.,''PCI\VEN_10DE'') and (false  or contains(.,''11b0'') or contains(.,''0FF0'') or contains(.,''1030'') or contains(.,''11A0'') or contains(.,''0FA0'') or contains(.,''0FD4'') or contains(.,''0FD1'') or contains(.,''0FFB'') or contains(.,''0E0D'') or contains(.,''0FD3'') or contains(.,''0FD2'') or contains(.,''11BC'') or contains(.,''11BD'') or contains(.,''11AA'') or contains(.,''11BB'') or contains(.,''11B1'') or contains(.,''11BA'') or contains(.,''0FA7'') or contains(.,''11A4'') or contains(.,''11A3'') or contains(.,''1189'') or contains(.,''11A5'') or contains(.,''11BF'') or contains(.,''118F'') or contains(.,''0FCB'') or contains(.,''0FEF'') or contains(.,''11E2'') or contains(.,''11C3'') or contains(.,''0FD9'') or contains(.,''0FF9'') or contains(.,''12AF'') or contains(.,''119F'') or contains(.,''12B1'') or contains(.,''118B'') or contains(.,''0FE5'') or contains(.,''0FF7'') or contains(.,''12AD'') or contains(.,''12AE'') or contains(.,''12BA'') or contains(.,''0FF6'') or contains(.,''1290'') or contains(.,''1292'') or contains(.,''1004'') or contains(.,''103B'') or contains(.,''1021'') or contains(.,''11D1'') or contains(.,''11FC'') or contains(.,''11A7'') or contains(.,''12A0'') or contains(.,''11B7'') or contains(.,''0FE1'') or contains(.,''0FE7'') or contains(.,''0FF5'') or contains(.,''1291'') or contains(.,''1282'') or contains(.,''1293'') or contains(.,''0FE9'') or contains(.,''0FE8'') or contains(.,''0FEA'') or contains(.,''119D'') or contains(.,''103A'') or contains(.,''0fcd'') or contains(.,''1192'') or contains(.,''1024'') or contains(.,''1023'') or contains(.,''11AC'') or contains(.,''102A'') or contains(.,''102B'') or contains(.,''1284'') or contains(.,''100A'') or contains(.,''118E'') or contains(.,''102c'') or contains(.,''1298'') or contains(.,''1199'') or contains(.,''1193'') or contains(.,''1191'') or contains(.,''1022'') or contains(.,''11C0'') or contains(.,''11C1'') or contains(.,''11D0'') or contains(.,''11D2'') or contains(.,''11E0'') or contains(.,''11E1'') or contains(.,''11C2'') or contains(.,''11B8'') or contains(.,''0FE3'') or contains(.,''12B9'') or contains(.,''1026'') or contains(.,''1001'') or contains(.,''1027'') or contains(.,''100B'') or contains(.,''11C8'') or contains(.,''102F'') or contains(.,''11B4'') or contains(.,''1195'') or contains(.,''11af'') or contains(.,''0FC8'') or contains(.,''0FF3'') or contains(.,''103F'') or contains(.,''0FED'') or contains(.,''1294'') or contains(.,''0FEC'') or contains(.,''1194'') or contains(.,''0FC9'') or contains(.,''119E'') or contains(.,''1295'') or contains(.,''101E'') or contains(.,''1296'') or contains(.,''1029'') or contains(.,''1198'') or contains(.,''1289'') or contains(.,''102D'') or contains(.,''11ad'') or contains(.,''0fd6'') or contains(.,''0fd7'') or contains(.,''0FC0'') or contains(.,''0FC1'') or contains(.,''0FC2'') or contains(.,''0FC4'') or contains(.,''0FDD'') or contains(.,''0FDE'') or contains(.,''0FD0'') or contains(.,''11F0'') or contains(.,''0CE0'') or contains(.,''11A1'') or contains(.,''11BE'') or contains(.,''0FFC'') or contains(.,''1180'') or contains(.,''1183'') or contains(.,''0E16'') or contains(.,''0FDC'') or contains(.,''0FD5'') or contains(.,''0FFD'') or contains(.,''0FC6'') or contains(.,''0FD8'') or contains(.,''0FDA'') or contains(.,''0FDB'') or contains(.,''0FDF'') or contains(.,''0FFA'') or contains(.,''0FFE'') or contains(.,''0FFF'') or contains(.,''0FE0'') or contains(.,''0FC7'') or contains(.,''1182'') or contains(.,''0FCA'') or contains(.,''12B0'') or contains(.,''1188'') or contains(.,''0FCF'') or contains(.,''11A2'') or contains(.,''0FCE'') or contains(.,''11F8'') or contains(.,''0FF1'') or contains(.,''1020'') or contains(.,''1003'') or contains(.,''1187'') or contains(.,''1185'') or contains(.,''11C4'') or contains(.,''11FA'') or contains(.,''0FF8'') or contains(.,''0FF2'') or contains(.,''118A'') or contains(.,''11B6'') or contains(.,''0FE2'') or contains(.,''0FE4'') or contains(.,''118C'') or contains(.,''118D'') or contains(.,''1028'') or contains(.,''0FE6'') or contains(.,''11C6'') or contains(.,''1280'') or contains(.,''11D3'') or contains(.,''101F'') or contains(.,''0FC5'') or contains(.,''1281'') or contains(.,''11E3'') or contains(.,''1283'') or contains(.,''1285'') or contains(.,''11FF'') or contains(.,''1184'') or contains(.,''1005'') or contains(.,''119a'') or contains(.,''100C'') or contains(.,''1286'') or contains(.,''102E'') or contains(.,''11C5'') or contains(.,''103C'') or contains(.,''11ae'') or contains(.,''1287'') or contains(.,''1288'') or contains(.,''1007'') or contains(.,''1008'') or contains(.,''1299'') or contains(.,''129A'') or contains(.,''0FCC'') or contains(.,''11CB'') or contains(.,''129B'') or contains(.,''0FEE'') or contains(.,''128A'') or contains(.,''128B'') or contains(.,''1297'') or contains(.,''11C7'') or contains(.,''1381'') or contains(.,''13BB'') or contains(.,''13B2'') or contains(.,''1382'') or contains(.,''13B9'') or contains(.,''134E'') or contains(.,''139D'') or contains(.,''179C'') or contains(.,''1380'') or contains(.,''13BC'') or contains(.,''13B4'') or contains(.,''13B6'') or contains(.,''139A'') or contains(.,''13B0'') or contains(.,''13BA'') or contains(.,''139B'') or contains(.,''13B1'') or contains(.,''134D'') or contains(.,''137B''))])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb Full","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb Full"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 59999 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll /name:CPlaybackQualityTests::D3D12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll /name:CPlaybackQualityTests::D3D12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 59999 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(59999, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK VB Errata: AMD Waiver for D3D12 Tests', 'AMD Drivers require that reference only allocations are needed in order to instantiate a D3D12 device. We have an OS bug in the reference only allocations path for D3D12 device instantiation where we are not passing in the deny shader resource flag along with the reference only allocations flag. This causes a failure to create a D3D12 device and the tests failing for all D3D12 tests', 'This is acceptable failure', '2030-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb Full","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 60149 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 60149 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(60149, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 - DebugLayer GBV - Subresource State Validation in Shader Instructions Test false positive failure', 'D3D12 - DebugLayer GBV - Subresource State Validation in Shader Instructions Test false positive failure', 'This is an acceptable failure', '2023-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.17763","10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_DebugLayerScenarios', 'D3DConf_12_0_DebugLayerScenarios', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Driver Verifier error: Driver returned a non-pow2 value or zero in D3D12DDI_RESOURCE_ALLOCATION_INFO_0022::ResourceDataAlignment, which is not supported.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Driver Verifier error: Driver returned a non-pow2 value or zero in D3D12DDI_RESOURCE_ALLOCATION_INFO_0022::AdditionalDataHeaderAlignment, which is not supported.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Driver Verifier error: Driver returned a non-pow2 value or zero in D3D12DDI_RESOURCE_ALLOCATION_INFO_0022::AdditionalDataAlignment, which is not supported.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Driver Verifier error: Driver returned an invalid texture layout in D3D12DDI_RESOURCE_ALLOCATION_INFO_0022::Layout when parameterized swizzle must be supported.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Driver Verifier error: The driver didn''t call AllocateCb with a runtime hResource handle when a heap was being created. The driver is not allowed to defer this nor omit the resource handle.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(pDevice->CreateCommittedResource\( \&CD3DX12_HEAP_PROPERTIES\(D3D12_HEAP_TYPE_DEFAULT\), D3D12_HEAP_FLAG_NONE, pDesc, pResource->State\[0\], pClearValue, IID_PPV_ARGS\(\&pResource->pResource\)\)\) - Value \(0x887a0005\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(pDevice->CreateCommittedResource\( \&CD3DX12_HEAP_PROPERTIES\(D3D12_HEAP_TYPE_DEFAULT\), D3D12_HEAP_FLAG_NONE, pDesc, pResource->State\[0\], pClearValue, IID_PPV_ARGS\(\&pResource->pResource\)\)\) - Value \(0x8007000e\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 60458 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te%wavetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te%wavetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 60458 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(60458, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wave test fail when trying to test ACX Display Audio', 'Due to a test bug, Wave test fails to identify ACX display audio driver as a non-AVstream driver and doesn’t run any test cases.', 'This errata overturns the failure.', '2023-04-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/ImagePath[contains(.,"AcxHdAudio.sys")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'IsTrue\(varDeviceService\.vt == VT_LPWSTR && varDeviceService.pwszVal != nullptr\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', '\(hr = IsAVStream\(pDevice, &isAVStream\)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', '\(hr = AddTestResourceForConnector\(resourceList, deviceId, deviceName, spDevice.get\(\), eHostProcessConnector, dataFlow\)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'AddTestResourcesForDevice\(resourceList, id\.get\(\), friendlyName\.get\(\), render\)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'The selection criteria did not match any tests.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'No test cases were executed.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-04-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 60604 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te%kspostst.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te%kspostst.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 60604 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(60604, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KS Position test fail when trying to test ACX Display Audio', 'Due to a test bug, KS Position test fails to identify ACX display audio driver as a non-AVstream driver and doesn’t run any test cases.', 'This errata overturns the failure.', '2023-04-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/ImagePath[contains(.,"AcxHdAudio.sys")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'IsTrue\(varDeviceService\.vt == VT_LPWSTR && varDeviceService.pwszVal != nullptr\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', '\(hr = IsAVStream\(pDevice, &isAVStream\)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', '\(hr = AddTestResourceForConnector\(resourceList, deviceId, deviceName, spDevice.get\(\), eHostProcessConnector, dataFlow\)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'AddTestResourcesForDevice\(resourceList, id\.get\(\), friendlyName\.get\(\), render\)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'The selection criteria did not match any tests.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'No test cases were executed.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-04-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 60664 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te%kspostst.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te%kspostst.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 60664 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(60664, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KS Position test do not allow the pin to be above a maximum time', 'KS Position test fails the latency test case if the pin reports a position that is greater than the time the stream has been playing (as measured by the test).', 'This errata overturns the failure.', '2025-05-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::KsPosTest::TAEF_Latency.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-05-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 60871 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging infverifhlk.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging infverifhlk.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 60871 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(60871, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:  DF - InfVerif INF Verification incorrectly fails when DIRID13 is used in registry', 'InfVerif may treat %13% as a string token in old versions', 'Allow %13% to be specified in registry values', '2027-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299","10.1.17134","10.1.14393","10.1.15063"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Code 1235.* String token ''13'' not defined in \[Strings\] section.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 60932 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 60932 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(60932, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3DConf_12_SamplerFeedback: HLK test takes dependency on unsigned shader code', 'The test has an unwanted dependency on being run with developer mode. The reason for that is the compiled shader binaries were produced with validation disabled, because a shader validator bug existed with sampler feedback language elements. 

The shader validator has since been fixed but not in time for the test''s shaders to be recompiled.', 'The test is fixed in a future release.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_SamplerFeedback', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Caught an unidentified', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(result[[]i] == 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 60964 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 60964 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(60964, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: DXR 1.1 TraceRay test bugs for Vb fixed in Mn', 'raytracing TraceRay executeIndirect bugs', 'Bugs fixed post Vb', '2030-01-01T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_Raytracing_TraceRay::TestTraceRayFaceCulling#0#2', 'D3DConf_12_Raytracing_TraceRay::TestTraceRayFaceCulling#0#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Images mismatch!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_Raytracing_TraceRay::TestTraceRayFaceCulling#1#2', 'D3DConf_12_Raytracing_TraceRay::TestTraceRayFaceCulling#1#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Images mismatch!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_Raytracing_TraceRay::TestTraceRayFaceCulling#2#2', 'D3DConf_12_Raytracing_TraceRay::TestTraceRayFaceCulling#2#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Images mismatch!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'D3DConf_12_Raytracing_TraceRay::TestTraceRayInstanceMasks#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Images mismatch!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-01T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61017 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% winrtsensors.functests.cppcx.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% winrtsensors.functests.cppcx.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61017 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61017, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK 20H1 Errata: Accelerometer DriverFramework Validation test is failing for SFH UMDF Driver', 'Failure is due to the test needing a dependency that doesn''t exist, false positive', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest=AccelerometerTests::DriverFrameworkValidation', 'A failure occurred while preparing to run tests', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61018 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% winrtsensors.functests.cppcx.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% winrtsensors.functests.cppcx.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61018 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61018, 2, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK 20H1 Errata: Accelerometer DriverFramework Validation test is failing for SFH UMDF Driver', 'Failure is due to the test needing a dependency that doesn''t exist, false positive', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AccelerometerTests::DriverFrameworkValidation', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61063 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61063 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61063, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK 20H1 Errata: Multiple H264 SW-DRM Video tests fail because apphelp.dll is not page signed', 'Failure is due to apphelp.dll is not page signed', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_H264_Video', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'PageHashFoundInCatalog, File: \\Device\\HarddiskVolume1\\Windows\\System32\\apphelp.dll', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_H264_Video', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Completing LA with failure.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM_H264_Video', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Completing LA with failure.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Win32Succeeded\(pPlayBack->WaitCompletion\(\)\) - Value \(0xc00d36dd\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'PageHashFoundInCatalog, File: \\Device\\HarddiskVolume1\\Windows\\System32\\apphelp.dll', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61168 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61168 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61168, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HEVC 10-bit Playback Test 1 failure', 'HLK Errata: HEVC 10-Bit Playback Test 1 failure', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::HEVC_10bitPlaybackQualityTest1#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Playback failed with error: 0x80070057. Expected: 0x0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(MF_E_UNEXPECTED\) - Value \(0xc00d36bb\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61169 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61169 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61169, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HEVC HW-DRM Video 8 failure', 'HLK Errata: HEVC HW-DRM Video 8 failure', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_10DE")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_HEVC_Video8#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Playback failed with error: 80070057 \(retry count: 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61259 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% iflip.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% iflip.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61259 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61259, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK iFlip Present UAP & iFlip Present Desktop tests fail', 'This test is failing due to a OS issue in dwm.', 'This issue has been resolved in future releases.', '2029-04-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[contains(.,''PCI\VEN_1002'')] or //Device/@HardwareID[contains(.,''PCI\VEN_8086'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestDesktop::iFlipPresent_Desktop_NonNative#metadataSet1#export0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestDesktop::iFlipPresent_Desktop#metadataSet1#export1#4#3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestDesktop::iFlipPresent_Desktop_NonNative#metadataSet1#export1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestUAP::iFlipPresent_UAP_NonNative#metadataSet1#export0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestDesktop::iFlipPresent_Desktop#metadataSet0#export0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestDesktop::iFlipPresent_Desktop#metadataSet0#export1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestDesktop::iFlipPresent_Desktop#metadataSet1#export1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'iFlipPresentTestDesktop::iFlipPresent_Desktop#metadataSet1#export0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test failed after 3 attempts', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-04-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61340 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61340 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61340, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Filter: DFx System Level Verification test -- scfilter failures should be ignored ', 'Scfilter failures are exempted from the DFx verification test.', 'No action needs to be taken.', '2025-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/InfPath[contains(.,"wudfusbcciddriver")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'ScFilter.* does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SCFILTER.* does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61341 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd /c powershell ./IoTContainerExecution.ps1 -WttRunWorkingDir%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd /c powershell ./IoTContainerExecution.ps1 -WttRunWorkingDir%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61341 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61341, 2, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'WDDM 2.7 Onecore Container Test incorrect failure on AMD hardware', 'This waiver should be to mark all failures on Intel and AMD GPUs as passes since there are test bugs preventing a successful pass. The test runs on AMD hardware that doesn''t support the feature being tested and additionally due to AMD''s test environment, the test won''t run correctly. For Intel, the 20H2 update broke the way the container is pulled from docker. If other IHVs encounter the same issues their VendorIDs should be added to this waiver.', 'Next OS release the test bugs will be fixed.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[contains(.,''PCI\VEN_1002'')] or //Device/@HardwareID[contains(.,''PCI\VEN_8086'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb Full","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb Full"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61445 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te.exe%UcsiComplianceCMuttTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te.exe%UcsiComplianceCMuttTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61445 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61445, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UCSI USB Operation Mode command - UFP to DFP & UFP to UFP connection [Type-C MUTT] tests fail', 'UCSI USB Operation Mode command - UFP to DFP and UFP to UFP connection [Type-C MUTT] and UCSI Get Connector Status - PD Reset Complete [Type-C MUTT] tests fail.', 'This is an acceptable failure. The issue is being and should available in future releases.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.18363","10.1.19041","10.1.21390","10.1.22000","10.1.22543","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'EndTest', '', 'TestUcsi::UcsiTest::TestUFPModeToDFP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'MUTT devices found *', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'No Type-C MUTT Found.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'EndTest', '', 'TestUcsi::UcsiTest::TestUFPModeToUFP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'MUTT devices found *', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'No Type-C MUTT Found.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'EndTest', '', 'TestUcsi::UcsiTest::TestPDResetNotification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'MUTT devices found *', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'No Type-C MUTT Found.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61533 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestInfraredTorchControlMetadata%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestInfraredTorchControlMetadata%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61533 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61533, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test: IRTorch control test device query string is invalid', 'Device string selector is incorrectly formatted in the test', 'Errata issued, Test fixed', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'EndTest:UserText=Test Setup failed!', 'Fail to enumerate devices.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=Test Setup failed.*', 'No Capture Device available', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61536 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61536 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61536, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - Concurrent Streaming tests on Hybrid IR/RGB Cameras', 'Test assumes RGB and IR Cameras are two separate entities. Creating a list of devices including a hybrid camera places the device in the list twice. This camera cannot stream at the same time AS itself, so the test fails.', 'Errata Issued, Test Fixed', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestConcurrentStreaming', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Async Error.*C00D3EA3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Error: No samples of length > 0 received. Failing the case.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestConcurrentWarmStart', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Async Error.*C00D3EA3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Error: No samples of length > 0 received. Failing the case.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61627 v19.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11Shader5x%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11Shader5x%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61627 AND Version = 19
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61627, 19, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WGF11 Shader5x tests', 'Shader 5x LoadStore\store_uav_typed test uses too tight a precision tolerance.', 'Just issuing a filter for affected hw', '2030-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_1002'') and (contains(.,''DEV_731F'') or contains(.,''DEV_73A0'') or contains(.,''DEV_73A2'') or contains(.,''DEV_73A3'') or contains(.,''DEV_73A1'') or contains(.,''DEV_73AB'') or contains(.,''DEV_73AE'') or contains(.,''DEV_73BF'') or contains(.,''DEV_73C0'') or contains(.,''DEV_73C1'') or contains(.,''DEV_73DF'') or contains(.,''DEV_73C3'') or contains(.,''DEV_73FF'') or contains(.,''DEV_73E0'') or contains(.,''DEV_73E1'') or contains(.,''DEV_73E2'') or contains(.,''DEV_73E3'') or contains(.,''DEV_73AF'') or contains(.,''DEV_164D'') or contains(.,''DEV_164E'') or contains(.,''DEV_7420'') or contains(.,''DEV_7422'') or contains(.,''DEV_743F'') or contains(.,''DEV_73EF'') or contains(.,''DEV_1681'') or contains(.,''DEV_7424'') or contains(.,''DEV_73A5'') or contains(.,''DEV_1506'') or contains(.,''DEV_73F0'') or contains(.,''DEV_73C8'') or contains(.,''DEV_744C'')or contains(.,''DEV_7480'')or contains(.,''DEV_7481'')or contains(.,''DEV_7483'')or contains(.,''DEV_7489'')or contains(.,''DEV_748B'')or contains(.,''DEV_749F'')or contains(.,''DEV_15BF'')or contains(.,''DEV_15C8'')or contains(.,''DEV_7448''))])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'store_uav_typed', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Ulp difference:', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 61996 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 61996 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(61996, 3, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Filter: DFx System Level Verification test -- USB root hub device should pass', 'Failures on WinUSB devices with idle enabled are exempted from the DFx System Verification Test.', 'Review steps should be followed.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//ImagePath[contains(.,''WinUSB.SYS'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Vb Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'failed because device ''USB\\VID_', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62000 v17.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%verifytpmexists.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%verifytpmexists.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62000 AND Version = 17
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62000, 17, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '20H1 Approved TPMs Filter', 'TPMs are expected to meet requirements for n-1 kit.', 'Meet the published TPM device requirements.', '2023-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 3\..*\..*\.3', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 3\..*\..*\.4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 3\..*\..*\.5', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 7\.85\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 13\.11\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 15\.20\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 303\.12\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 403\.0\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 500\.5\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 500\.6\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 500\.10\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 500\.14\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 500\.16\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 600\.7\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 600\.15\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTC - 7\.2\.2\.0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTZ - 7\.51\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTZ - 7\.55\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'QCOM - 3.6.0.1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 1\.257\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 1\.258\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 74\.64\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 74\.68\.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62054 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe /inproc wavetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe /inproc wavetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62054 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62054, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Wave Test incorrectly enforces WaveRT requirement on AVStream drivers', 'AVStream drivers are exempt from the WaveRT requirement.', 'This errata overturns the failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[./ImagePath[contains(.,"RtUsbA64") or contains(.,"RtkUsbAD") or contains(.,"ksUSBaud") or contains(.,"ksUSBa64") or contains(.,"ksaud")] and ./DeviceID[starts-with(.,"USB")]])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::WaveTest::TAEF_VerifyPinWaveRTConformance.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsTrue\(bIsRTCapable\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62199 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'fpo_check.exe 1.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('fpo_check.exe 1.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62199 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62199, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WHQL FPO optimization check for kernel video driver(s) tests are failing incorrectly', 'This is likely some sort of test or automation error.

The goal of the test is to ensure that your binary is NOT compiled with frame pointer omission compiler option (/Oy) because doing so breaks the stack EBP chain that we use to capture stack backtrace in ETW and other insfrastructure. However, Nvidia has confirmed they are not using that compiler option and the test is still failing.', ' A waiver will be submitted for both 19H1 and 20H1 until the test can be fixed.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 18362])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '/StartTest', 'Root Node', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Root Node/Execute\|\|\|Not a large enough sampling set, Samples=0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62257 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11depthstencil.exe%-11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11depthstencil.exe%-11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62257 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62257, 2, 1, 1, 0, 1, 0, 1, @TestCommandLineId, 'D3D11On12 WGF11DepthStencil test crashes due to d3d12 driver verifier bug', 'D3D12 driver verifier causes this test to crash', 'An updated driver verifier component will fix the issue', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62259 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11multisample.exe%-11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11multisample.exe%-11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62259 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62259, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D11On12 WGF11Multisample test fails due to d3d12 driver verifier bug', 'D3D12 driver verifier causes this test to fail', 'An updated driver verifier component will fix the issue', '2030-04-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Vb"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '0x887a0005|0x887a0020|0x887a0007', 'ErrCode', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Not enough memory resources are available to complete this operation.', 'ErrorText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test group had aborts\.', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-04-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62260 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11multisample.exe%-11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11multisample.exe%-11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62260 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62260, 2, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'D3D11On12 WGF11Multisample test aborts due to d3d12 driver verifier bug', 'D3D12 driver verifier causes this test to fail', 'An updated driver verifier component will fix the issue', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test Initialization', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62522 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TDRWatch.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TDRWatch.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62522 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62522, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D11On12 WGF11DepthStencil/WGF11Multisample test TDRWatch failures due to d3d12 driver verifier bug', 'D3D12 driver verifier causes this test to fail', 'An updated driver verifier component will fix the issue', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Vb"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DF13A8AB\-C45A\-4B05\-AD82\-5ED0904E6ED0', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '5222EA60\-485B\-4A6D\-B5EE\-E05BB5084AF8', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62553 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'audiologo'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('audiologo')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62553 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62553, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio: Erratum: Audio Logo test fails due to Hardware Override registry value being present', 'Audio Logo test ensures specific drivers are not used on unsupported devices. There are some devices that are supported but don''t match expected hardware IDs.', 'Fix is available in later releases.', '2030-04-08T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,''VEN_8086&DEV_2814'') or contains(.,''VEN_8086&DEV_2819'') or contains(.,''SYSVAD'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["19H1","Vb"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*Verify all endpoints available', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Media device contains OverrideHardwareSupportValidation key', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-04-08T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62629 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62629 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62629, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [1 Machine] - StandardizedKeywords - NDI\Params\*FlowControl\Default is not "4" as expected!', 'NDISTest 6.5 - [1 Machine] - StandardizedKeywords - NDI\Params\*FlowControl\Default is not "4" as expected!', 'This is an acceptable failure.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393","10.1.17763","10.1.18362","10.1.18363","10.1.19041","10.1.20348","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying correct behavior for keyword \*FlowControl', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'NDI\\Params\\\*FlowControl\\Default is not \"4\" as expected!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62638 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'wgf11resourceaccess.exe [MODIFIEDCMDLINE] -11on12'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('wgf11resourceaccess.exe [MODIFIEDCMDLINE] -11on12')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62638 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62638, 2, 1, 1, 0, 1, 1, 1, @TestCommandLineId, 'WHQL - D3D12 - 11 on 12 - WGF11 Resource Access - FAIL - 20H1', 'WHQL - D3D12 - 11 on 12 - WGF11 Resource Access - FAIL - 20H1', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 62805 v10.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% devfund_pnpdtest_wlk_certification.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% devfund_pnpdtest_wlk_certification.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62805 AND Version = 10
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(62805, 10, 1, 1, 1, 1, 0, 1, @TestCommandLineId, '"DF - PNP Rebalance Fail Restart Device Test (Reliability)" and "DF - PNP Surprise Remove Device Test (Reliability)" tests fail with Error : PNP_VetoLegacyDevice', 'DF - PNP Rebalance Fail Restart Device Test (Reliability) and DF - PNP Surprise Remove Device Test (Reliability) tests fail with Error : PNP_VetoLegacyDevice', 'This filter will be used to resolve the issue.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"ROOT\AMDLOG") or contains(.,"Root\AMDRMDRIVER")  or contains(.,"root\LEGACY_ICDCOM") or contains(.,"Root\VBFLASHDRIVER") or contains(.,"ROOT\KeyManager") or contains(.,"ROOT\SYSTEM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041","10.1.21390","10.1.20348","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PNPDTest::PNPTryStopDeviceAndFailRestart#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to open the EDT device', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Error : PNP_VetoLegacyDevice', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PNPDTest::PNPCancelRemoveDevice#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to open EDT devices', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PNPDTest::PNPSurpriseRemoveAndRestartDevice#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Error : PNP_VetoLegacyDevice', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63119 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63119 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63119, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: H264 playback test cases are failing due to "Checksums don''t match. Frame: 1" (Device Specific)', 'HLK Errata: H264 playback test cases are failing due to "Checksums don''t match. Frame: 1" (Device Specific)', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_QCOM")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest7#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest9#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest22#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63250 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63250 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63250, 2, 2, 1, 0, 1, 0, 1, @TestCommandLineId, 'PNP (disable and enable) with IO Before and After (Reliability) test may hit a 0xC4 on MbbCx.sys', 'In some circumstances a memory leak could occur when running the System-PnP (Disable and Enable) with IO Before and After (Reliability) test. The issue is in an OS binary and a private is available upon request from CSS.', 'To be fixed in a later release', '2025-03-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'PNP_DisableEnable_With_IO_BeforeAndAfter::PNP_DisableEnable_With_IO_BeforeAndAfter_Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error:UserText', '.*The program issued a command but the command length is incorrect', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63335 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kstoptest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kstoptest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63335 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63335, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KsTopology test incorrectly enforces all devices to support KSPROPERTY_JACK_DESCRIPTION and KSPROPERTY_JACK_DESCRIPTION2 properties.', 'KsTopology test incorrectly enforces all devices to support KSPROPERTY_JACK_DESCRIPTION and KSPROPERTY_JACK_DESCRIPTION2 properties.', 'This filter overturns the failure.', '2030-04-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"USB\VID_045E&PID_095A&MI_00") or starts-with(.,"USB\VID_045E&PID_0C0C&MI_00")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '(?i).*check.*jack.*desc.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*FAIL.*DeviceIoControl.*ERROR_MORE_DATA.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*KSPROPERTY_JACK_DESCRIPTION.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '(?i).*check.*jack.*desc.*2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*FAIL.*DeviceIoControl.*ERROR_MORE_DATA.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*KSPROPERTY_JACK_DESCRIPTION2.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-04-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63411 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%HAPTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%HAPTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63411 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63411, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Surface Hub 2s fails HAP test since it does not implement hardware peakmeter.', 'Surface Hub 2s does not support peakmeter node which is required by HAPtest.', 'This filter allows the Surface Hub 2s to pass this test.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"USB\VID_045E&PID_095A&MI_00") or starts-with(.,"USB\VID_045E&PID_0C0C&MI_00")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::HardwarePeakMeter.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'AreEqual\(actualSupport & requiredSupport, requiredSupport\).*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63662 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::Test%VideoCapture%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::Test%VideoCapture%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63662 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63662, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test: TestVideoCapture/TestLowLagVideoCapture HEVC fails on Vb due to HEVC Muxer', 'TestVideoCapture of HEVC content fails due to an issue with HEVC Muxer. This causes the file to be unable to playback', 'HEVC Muxer fixed (and serviced). Errata Issued', '2029-11-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.18362","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Release MediaCapture object', 'MediaEncodingProfile Encoding Properties', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Release MediaCapture object', '.*Video Subtype.*HEVC', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Release MediaCapture object', 'Initializing the MediaFileParser', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Warn:UserText=.*The byte stream type of the given URL is unsupported.*', 'Exception.*RunTest', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-11-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63768 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%audiologo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%audiologo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63768 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63768, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio Logo test uses incorrect audio format for Pull Mode Capture Exclusive test. ', 'Audio Logo test uses incorrect audio format for Pull Mode Capture Exclusive test. Because of this, test fails with unsupported format error.', 'This erratum overturns the failure.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"USB\VID_045E&PID_095A&MI_00") or starts-with(.,"USB\VID_045E&PID_0C0C&MI_00")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Pull Mode.*Capture Exclusive', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'FAIL: initialize capturer with default format \[IAudioStreamingCapture::Initialize\]\(AUDCLNT_E_UNSUPPORTED_FORMAT\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63809 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Te.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Te.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63809 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63809, 2, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'WLAN Detect Deprecated Native Wi-Fi Drivers', 'Qualcomm Atheros AR956x driver is not WDI based.', 'Granting exception for an updated driver to fix security issues.', '2023-07-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_168C")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DriverVersion[contains(., "10.0.3.462")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/ImagePath[contains(., "athw10x.sys")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Microsoft.Test.Networking.Wireless.Outerloop.SystemTests.DeviceTest_VerifyAdapterSupportsWdi', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'This is NOT a WDI driver', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63811 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63811 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63811, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK 20H1 Errata: DFX System Verification Test fails for RST software components when storport support for DFx is disabled', 'DFX System Verification Test fails for RST software components when storport support for DFx is disabled', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error=does not support DFX', 'Intel RST VMD Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel\(R\) 6th Generation Core Processor Family Platform I/O SATA AHCI Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel\(R\) 300 Series Chipset Family SATA AHCI Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel\(R\) 400 Series Chipset Family SATA AHCI Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel\(R\) 500 Series Chipset Family SATA AHCI Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel\(R\) Chipset SATA/PCIe RST Premium Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel\(R\) Chipset SATA/PCIe RST Optane Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel\(R\) NVMe Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel RST VMD Controller 9A0B \(TGL\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel RST VMD Controller 9A0B', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel RST VMD Controller 467F \(ADL\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel RST VMD Controller 467F', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Intel RST VMD Managed Controller 09AB', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 63859 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '_TestExe_ -c _TestPro_ -l "s98wtt.dll"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('_TestExe_ -c _TestPro_ -l "s98wtt.dll"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63859 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(63859, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Gaudit test fails to get a buffer for streaming in some ARM64 devices', 'GAudit sometimes requests incorrect buffer size on ARM/ARM64 devices.', 'This errata overturns the failure.', '2023-05-12T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM","Windows v10.0 Client ARM64","Windows v10.0 Server ARM64"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*KSPROPERTY_AUDIO_MIX_LEVEL_CAPS.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!Msg', 'Error!  Could not get KSRTAUDIO_BUFFER: error 31', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!Msg', 'ERROR: Could not allocate 32-millisecond buffer for RT audio pin', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-12T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64123 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% drmtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64123 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64123, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HEVC/H264 HW-DRM Renderer Quality Video 1 test failure', 'HLK Errata: HEVC/H264 HW-DRM Renderer Quality Video 1 test failure', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_HEVC_FrameVerification_Video1#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Shader Failed to Process Frames', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Shader Quality Frames Contain Mismatched Checksums', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_H264_FrameVerification_Video1#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Shader Failed to Process Frames', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Shader Quality Frames Contain Mismatched Checksums', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_HEVC_FrameVerification_Video1#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Win32Succeeded\(pPlayBack->WaitCompletion\(\)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64303 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% servercorecheck.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% servercorecheck.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64303 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64303, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Operate in Server Core Test fails because mshidkmdf.sys is not included in Server Core.', 'Server Core has known issues for some products that uses functionality not in its version', 'This is an acceptable failure', '2026-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"ROOT\WINACTOR\")]) ')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ServerCoreCheck::ServerCoreCheck::ServerCoreCheckWithRegistry', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'System operating in Server', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64586 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ucmendtoend.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ucmendtoend.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64586 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64586, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB Type-C UCM Disable Enable Test - No Type-C MUTT Found. ', 'UcmTest::UcmEndToEndTests::UcmDisableEnable failing with Failed to send disconnect and reconnect command to CMutt. HRESULT: 0x80004005', 'Issue with the test incorrectly asking for CMutt when the system doesn''t have an external exposed USB-C port', '2025-02-28T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_10DE&DEV_1AED&SUBSYS_145E10DE") or contains(.,"PCI\VEN_10DE&DEV_2182") or contains (.,"PCI\VEN_10DE&DEV_2184") or contains (.,"PCI\VEN_10DE&DEV_1F08") or contains (.,"PCI\VEN_10DE&DEV_1F06") or contains (.,"PCI\VEN_10DE&DEV_21C4") or contains (.,"PCI\VEN_10DE&DEV_2187") or contains (.,"PCI\VEN_10DE&DEV_1F15")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x86 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'UcmTest::UcmEndToEndTests::UcmDisableEnable', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error=No Type-C MUTT Found.', 'No partner attached.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-02-28T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64633 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcmEndtoEnd.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcmEndtoEnd.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64633 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64633, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB Type-C UCM Disable Enable Test failed with "Connector status is detached but expected to be attached." or "Failed to get connector state after enabling UCM devices. HRESULT: 0x80070490"', 'USB Type-C UCM Disable Enable Test failed with "Connector status is detached but expected to be attached." or "Failed to get connector state after enabling UCM devices. HRESULT: 0x80070490"', 'This is an acceptable failure', '2023-05-08T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_9A13") or contains(.,"PCI\VEN_8086&DEV_34ED") or contains(.,"PCI\VEN_8086&DEV_02ED") or contains(.,"PCI\VEN_8086&DEV_15EC") or contains(.,"PCI\VEN_8086&DEV_06ED") or contains(.,"PCI\VEN_8086&DEV_9A60") or contains(.,"PCI\VEN_8086&DEV_51ED") or contains(.,"PCI\VEN_8086&DEV_461E")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'UcmTest::UcmEndToEndTests::UcmDisableEnable', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Connector status is detached but expected to be attached.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to get connector state after enabling UCM devices. HRESULT: 0x80070490', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-08T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64720 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mf.hlk.playback.quality.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64720 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64720, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Multiple D3D12 HEVC/VP9 Playback Tests failed with D3D12 HEVC Playback Tests and D3D12 VP9 Playback Tests failed with Error Value (0xc00d36b4) / Value (0x80004002)', 'Multiple D3D12 HEVC Playback Tests and D3D12 VP9 Playback Tests failed with Error Value (0xc00d36b4) / Value (0x80004002)', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"ACPI\VEN_QCOM&DEV_083A")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Vb Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_VP9PlaybackQualityTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '.* - Value \(0xc00d36b4\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Checksums don''t match. Frame: 1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_HEVCPlaybackQualityTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '.* - Value \(0x80004002\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_HEVCPlaybackQualityTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '.* - Value \(0x800706BE\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_HEVCPlaybackQualityTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '.* - Value \(0xc00d36b4\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64759 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%D3DSystemCheck.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%D3DSystemCheck.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64759 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64759, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WGF11 D3DSystemCheck - Hybrid test failed with Error that LoadLibraryW() failed for the DList dll.', 'WGF11 D3DSystemCheck - Hybrid test failed with Error that LoadLibraryW() failed for the DList dll.', 'This is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Hybrid\\DiscreteList', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'LoadLibraryW\(\) failed for the DList dll.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64811 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ucmendtoend.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ucmendtoend.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64811 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64811, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB Type-C UCM Disable Enable Test is failing with Connector status is detached but expected to be attached.', 'USB Type-C UCM Disable Enable Test is failing with Connector status is detached but expected to be attached.', 'Please disable other UCM device and keep only ACPI\USBC000 and re-run the test. ', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,"USB\VID_045E&PID_078F")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x86 Vb Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'UcmTest::UcmEndToEndTests::UcmDisableEnable', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error=Connector status is detached but expected to be attached', 'No partner attached.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64860 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"WDKDeviceID=%" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraControlsDeviceTests#*%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"WDKDeviceID=%" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraControlsDeviceTests#*%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64860 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64860, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Removal of Camera Profile Index 0 tests', 'Tests invalid since Profile no longer requires indexing at 0', 'Tests removed from playlist. Errata issued in interm', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=.*CameraControlsDeviceTest.*', '.*Verify KSCAMERAPROFILE.* set first index', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64931 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% internalusbdevicetests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% internalusbdevicetests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64931 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64931, 8, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB Internal Device Idle Test', 'USB Internal Device Idle Test failing with not entering selective suspend', 'Contingency for the following devices:
1639h
163Ah
163Bh
163Ch
162Ch
163Bh
162Dh
15E0h
15E1h
15E5h
15D4h
15D5h
148Ch
148Ch
13EDh

13EEh
149Ch
149Ch
7316h
7317h
7366h
7367h
7346h
7348h
73A6h
73A7h
73C6h
73C7h
73E6h
73E7h

', '2023-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1022&DEV_1639") or contains(.,''PCI\VEN_1022&DEV_163A'') or contains(.,''PCI\VEN_1022&DEV_163B'') or contains(.,''PCI\VEN_1022&DEV_163C'') or contains(.,''PCI\VEN_1022&DEV_162C'') or contains(.,''PCI\VEN_1022&DEV_163B'') or contains(.,''PCI\VEN_1022&DEV_162D'') or contains(.,''PCI\VEN_1022&DEV_15E0'') or contains(.,''PCI\VEN_1022&DEV_15E1'') or contains(.,''PCI\VEN_1022&DEV_15E5'') or contains(.,''PCI\VEN_1022&DEV_15D4'') or contains(.,''PCI\VEN_1022&DEV_15D5'') or contains(.,''PCI\VEN_1022&DEV_148C'') or contains(.,''PCI\VEN_1022&DEV_13ED'') or contains(.,''PCI\VEN_1022&DEV_13EE'') or contains(.,''PCI\VEN_1022&DEV_149C'') or contains(.,''PCI\VEN_1002&DEV_7316'') or contains(.,''PCI\VEN_1002&DEV_7317'') or contains(.,''PCI\VEN_1002&DEV_7366'') or contains(.,''PCI\VEN_1002&DEV_7367'') or contains(.,''PCI\VEN_1002&DEV_7346'') or contains(.,''PCI\VEN_1002&DEV_7348'') or contains(.,''PCI\VEN_1002&DEV_73A6'') or contains(.,''PCI\VEN_1002&DEV_73A7'') or contains(.,''PCI\VEN_1002&DEV_73C6'') or contains(.,''PCI\VEN_1002&DEV_73C7'') or contains(.,''PCI\VEN_1002&DEV_73E6'') or contains(.,''PCI\VEN_1002&DEV_73E7'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.22621","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft::Windows::USB::InternalDeviceTests::IdleTest', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error=At least one host controller failed to selective suspend. Please look at the errors above.', 'USB Host Controller not Entering Selective Suspend', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 64932 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11depthstencil.exe%-11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11depthstencil.exe%-11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 64932 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(64932, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - 11 on 12 - WGF11 Depth Stencil test failed: Not enough memory resources are available to complete this operation.', 'D3D12 - 11 on 12 - WGF11 Depth Stencil test failed: Not enough memory resources are available to complete this operation.', 'This is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_10DE")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Vb"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Not enough memory resources are available to complete this operation.', 'ErrorText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Result=Fail', 'Test group had aborts', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65185 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65185 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65185, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Photo Sequence tests don''t use Photo Sequence Profile and fail Camera Driver Control -CAMERA_PROFILE Photo Sequence test', 'Photo Sequence tests don''t use Photo Sequence Profile', 'Test Fixed, Errata Issued', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=.*PhotoSequence.*', 'SKIP_IF .* KSCAMERAPROFILE_PhotoSequence', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=SetPhotoSequence.*ERROR_*', 'SetPhotoSequence.*ERROR_*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*PhotoSequence.*', 'SUCCEEDED.hr.*Value.*0x80070057.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=SetPhotoSequence Failed with error ERROR_NOT_SUPPORTED \(0x80070032\)', 'SetPhotoSequence Failed with error ERROR_NOT_SUPPORTED \(0x80070032\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'SetPhotoSequence.*ERROR_NOT_SUPPORTED.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*PhotoSequence.*', 'SUCCEEDED.hr.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65253 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65253 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65253, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Directed FX System Verification Test -- UFS Host Controller failed because device does not support DFX', 'Directed FX System Verification Test -- UFS Host Controller failed because device does not support DFX', 'No action needs to be taken.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', '.*Universal Flash Storage \(UFS\) Host Controller .* failed because device .* does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65397 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraControlsSystemTests#*'' AND @ID=[5-7]"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraControlsSystemTests#*'' AND @ID=[5-7]"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65397 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65397, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Photo Thumbnail tests don''t use Photo Sequence Profile', 'Photo Thumbnail tests don''t use Photo Sequence Profile', 'Test Fixed, Errata Issued', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=.*Thumbnail.*', 'SKIP_IF .* PHOTOTHUMBNAIL', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=SetPhotoSequence.*ERROR_SET_NOT_FOUND.*', 'SetPhotoSequence.*ERROR_SET_NOT_FOUND.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*Thumbnail.*', 'SUCCEEDED.hr.*Value.*0x80070492.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65559 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65559 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65559, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Directed FX System Verification Test -- Standard NVM Express Controller failed because device does not support DFX', 'Directed FX System Verification Test -- Standard NVM Express Controller failed because device does not support DFX', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error=does not support DFX', 'SCSI\\Disk&Ven_NVMe', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65644 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe RenderOnlyTests.dll /name:*Swapchain* /enablewttlogging /logfile:swapchain.wtl /p:logo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe RenderOnlyTests.dll /name:*Swapchain* /enablewttlogging /logfile:swapchain.wtl /p:logo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65644 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65644, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: RenderOnly Swapchain Test fails Navi12 with should return DXGI_STATUS_OCCLUDED error', 'RenderOnly Swapchain Test fails Navi12 with should return DXGI_STATUS_OCCLUDED error', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevX::GRFX::BaseVideo::RenderOnly::Swapchain::Fullscreen', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Fullscreen swapchain creation on RO device should return DXGI_STATUS_OCCLUDED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65645 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wgf11depthstencil.exe%-11on12%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wgf11depthstencil.exe%-11on12%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65645 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65645, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'D3D12 - 11 on 12 - WGF11 Depth Stencil test failed: Test Initialization Blocked', 'D3D12 - 11 on 12 - WGF11 Depth Stencil test failed: Test Initialization Blocked', 'This is an acceptable failure.', '2030-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_10DE")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Vb"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Result=Blocked', 'Test Initialization', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65646 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#SensorControls"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#SensorControls"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65646 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65646, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Photo Sequence tests don''t use Photo Sequence Profile and fail Camera Driver Control -CAMERA_PROFILE Photo Sequence test', 'Photo Sequence tests don''t use Photo Sequence Profile', 'Test Fixed, Errata Issued', '2023-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=.*PhotoSequence.*', 'SKIP_IF .* KSCAMERAPROFILE_PhotoSequence', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=SetPhotoSequence.*ERROR_INVALID_PARA.*', 'SetPhotoSequence.*ERROR_INVALID_PARA.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*PhotoSequence.*', 'SUCCEEDED.hr.*Value.*0x80070057.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*PhotoSequence.*', 'SUCCEEDED.hr.*Value.*0x80070492.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=SetPhotoSequence.*ERROR_SET_NOT_FOUND.*', 'SetPhotoSequence.*ERROR_SET_NOT_FOUND.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65709 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65709 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65709, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NVMe SCSI Compliance Test (LOGO) test fails in the Read_6 subtest due to unexpected status (07/20/02)', 'HLK Errata: NVMe SCSI Compliance Test (LOGO) test fails in the Read_6 subtest due to unexpected status (07/20/02)', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ASSERTION: READ \(6\) Basic Verification Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error=Logging an error', 'READ \(6\) command not supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65732 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65732 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65732, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Device ''USB xHCI Compliant Host Controller XXXX failed because device ''UNKNOWN DEVICE'' does not support DFX.', 'Device ''USB xHCI Compliant Host Controller XXXX failed because device ''UNKNOWN DEVICE'' does not support DFX.', 'Review steps should be followed.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//ImagePath[contains(.,''usbser.sys'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'failed because device ''UNKNOWN DEVICE'' does not support DFX', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 65970 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%te.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%te.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 65970 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(65970, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 - Latest Versions test fails.', 'The intent of the test is to verify that drivers do not ship with a non-Final version of the DDI targeting an experimental feature. Between releases we often rev the extended feature version several times while we stabalize a feature, so it''s important that drivers only publicly release on the final version.

The test does this by comparing the latest extended feature version supported on a given core DDI version.  When we add a new extended feature version that doesn''t have to update the core DDI dependency, this test becomes incorrect.  Driver may be targeting a release version of the extended feature version from the previous DDK. This should be allowed.  Test should be fixed for Cobalt+, test errata for now.', 'Fix test in Nickel', '2050-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Driver does not support the latest feature version for the DDI version reported*.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Driver does not support the latest build version for the interface version reported*.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66015 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66015 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66015, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Bluetooth - SIMPLE_IO Action running on all Bluetooth class devnodes', 'The Bluetooth SimpleIO Action Plugin should not be running on devnodes that are not a descendant of the Bluetooth radio.', 'This errata targets known devices under the Bluetooth class that are not a descendant of the Bluetooth radio.', '2023-06-20T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg', 'BluetoothSimpleIo: DeviceIoControl failed to send IOCTL_BTH_GET_LOCAL_INFO to get local radio', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-20T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66168 v11.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66168 AND Version = 11
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66168, 11, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Directed FX System Verification Test failed on MBB Device', 'HLK Errata: Directed FX System Verification Test failed on MBB Device', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_03F0&DEV_0A'') or contains(.,''PCI\VEN_03F0&PID_0A'') or contains(.,''PCI\VEN_105B&DEV_E0'') or contains(.,''PCI\VEN_14C0&DEV_98'') or contains(.,''PCI\VEN_17CB&DEV_0304'') or contains(.,''PCI\VEN_1C5D&DEV_10'') or contains(.,''USB\VEN_03F0&PID_0A'') or contains(.,''USB\VID_03F0&PID_08'') or contains(.,''USB\VID_03F0&PID_0981'') or contains(.,''USB\VID_03F0&PID_0A81'') or contains(.,''USB\VID_0489&PID_E0'') or contains(.,''USB\VID_05C6&PID_90'') or contains(.,''USB\VID_1199&PID_90'') or contains(.,''USB\VID_13D3&PID_56EA'') or contains(.,''USB\VID_1BC7&PID_19'') or contains(.,''USB\VID_2C7C&PID_01'') or contains(.,''USB\VID_2C7C&PID_0125'') or contains(.,''USB\VID_2C7C&PID_03'') or contains(.,''USB\VID_2C7C&PID_05'') or contains(.,''USB\VID_2C7C&PID_0600'') or contains(.,''USB\VID_413C&PID_81D'') or contains(.,''USB\VID_413C&PID_81E'') or contains(.,''USB\VID_8087&PID_0A'') or contains(.,''USB\VID_1E2D&PID_006D'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_03F0&DEV_0A', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_03F0&PID_0A', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_105B&DEV_E0', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_14C0&DEV_98', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_17CB&DEV_0304', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'PCI\\VEN_1C5D&DEV_10', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VEN_03F0&PID_0A', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_03F0&PID_08', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_03F0&PID_0981', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_03F0&PID_0A81', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_0489&PID_E0', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_05C6&PID_90', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_1199&PID_90', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_13D3&PID_56EA', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_1BC7&PID_19', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_2C7C&PID_01', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_2C7C&PID_03', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_2C7C&PID_05', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_2C7C&PID_0600', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_413C&PID_81D', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_413C&PID_81E', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_8087&PID_0A', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'USB\\VID_1E2D&PID_006D', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66202 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging% modernstandbybasictest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging% modernstandbybasictest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66202 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66202, 4, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Autotriage: Modern Standby Basic Requirement Test on AC/DC-power Source is failing with  IsLessThanOrEqual(Summary.ExitLatencyInMs,ModernStandbyExitLatencyThreshold)', 'Modern Standby Basic Requirement Test on AC-power Source or Modern Standby Basic Requirement Test on DC-power Source is failing with IsLessThanOrEqual(Summary.ExitLatencyInMs,ModernStandbyExitLatencyThreshold)', 'Contact CSS to check if this issue is in an OS binary and a private might be available to address this failure', '2023-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.18362","10.1.21390","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PowerManagement::ModernStandby::BasicRequirementTestOnAc Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error=IsLessThanOrEqual\(Summary.ExitLatencyInMs, m_ModernStandbyExitLatencyThreshold\)', 'Validating that the measured Modern Standby Exit Latency', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PowerManagement::ModernStandby::BasicRequirementTestOnDc Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error=IsLessThanOrEqual\(Summary.ExitLatencyInMs, m_ModernStandbyExitLatencyThreshold\)', 'Validating that the measured Modern Standby Exit Latency', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66286 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlk.bluetooth.singledevicetests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlk.bluetooth.singledevicetests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66286 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66286, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Bluetooth - LE Supported States - Peripheral Role Support and Scatternet Support - HIGH_DUTY_CYCLE requirement', 'Minimum requirements have been updated to require high duty cycle directed advertising and related states.', 'This errata allows existing devices that do not support the new requirements to continue being updated.', '2023-06-20T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[HardwareID[
starts-with(text(), "USB\VID_1286&PID_204C")
]])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18632","10.1.19041","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Verifying preferred requirement for LE scatternet support', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Reported LE States Supported.*expected states to be supported \[0x1200000000\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'Verifying preferred requirement for peripheral role support', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Reported LE States Supported.*expected states to be supported \[0x8000000000\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-20T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66413 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% apivalidatortest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% apivalidatortest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66413 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66413, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WDDM2.5_Universal_ApiValidator_Test_[D3D12_x64] and more', '“The test failure was a bug in older kits that has been fixed for Mn. With Vb sdk, it appears that KeGetCurrentIrql was missing from ApiValidator data. Also, this effect could happen for new APIs added, that is, if you take a dependency on a new API then a past SDK validator will flag it. But this seems to be a kit bug in this case since KeGetCurrentIrql has been around forever.”

', 'This has already been fixed in future releases.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.18632","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '/StartTest', 'ApiValidatorTest::VerifyDriverApiOneCore*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'KeGetCurrentIrql', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg', 'ApiValidator output does not not report driver is universal', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '/StartTest', 'ApiValidatorTest::VerifyDriverApi*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'KeGetCurrentIrql', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg', 'ApiValidator output does not not report driver is universal', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '/StartTest', 'ApiValidatorTest::VerifyDriverApiOneCore*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'WinVerifyTrust', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg', 'ApiValidator output does not not report driver is universal', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '/StartTest', 'ApiValidatorTest::VerifyDriverApi*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'WinVerifyTrust', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg', 'ApiValidator output does not not report driver is universal', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66422 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66422 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66422, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [2 Machine] - TxFlowControl fails to report "Tx Flow Control" setting as enabled', 'NDISTest 6.5 - [2 Machine] - TxFlowControl fails to report "Tx Flow Control" setting as enabled', 'This is an acceptable failure.', '2030-07-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EntTest', 'Check the current Link Status.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'failed to report \"Tx Flow Control\" setting as enabled.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-07-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66521 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ucmendtoend.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ucmendtoend.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66521 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66521, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Filter: USB Type-C UCM Disable Enable Test -- CM_Disable_DevNode failure CR_REMOVE_VETOED (0x17)', 'USB Type-C UCM Disable Enable test fails due to CM_Disable_DevNode failure CR_REMOVE_VETOED (0x17).', 'CM_Disable_DevNode failure CR_REMOVE_VETOED (0x17) are exempted from USB Type-C UCM Disable Enable test.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'UcmTest::UcmEndToEndTests::UcmDisableEnable', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'CM_Disable_DevNode failed. CR=0x17', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Partner is attached, expected to be detached.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66649 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66649 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66649, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HLK Failures due to removing support for DX9 PAVP Protocol on TGL', 'HLK Errata: HLK Failures due to removing support for DX9 PAVP Protocol on TGL', 'This is an acceptable failure', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086'')])
')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVATAEF::H264PlaybackTest[1|2|3|4|5|6|7|8|9]', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 66907 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'if /i [[]EnableTrace]==TRUE (ParseTrace.exe LowPower-Trace.et%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('if /i [[]EnableTrace]==TRUE (ParseTrace.exe LowPower-Trace.et%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 66907 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(66907, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Connected Standby IO Stress fails on Summary', 'Connected Standby IO Stress fails on Summary', 'This is an acceptable failure.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.19042","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Summary', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Device \\_SB.PC00.VMD0 had \[.*\] transitions to .*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Device \\_SB.PC00.VMD0 had \[.*\] transitions from .*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Device \\_SB.PC00.VMD0..* had \[.*\] transitions to .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Summary', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Device \\_SB.PC00.SAT0 had \[.*\] transitions to .*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Device \\_SB.PC00.SAT0 had \[.*\] transitions from .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Summary', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Device \\_SB.PCI0.GP18.SATA had \[.*\] transitions to .*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Device \\_SB.PCI0.GP18.SATA had \[.*\] transitions to .*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 67037 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Blt.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Blt.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 67037 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(67037, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WDDM Blt tests fail due to possible test timing issue', 'HLK Errata: WDDM Blt tests fail due to possible test timing issue
• WDDM Blt
• WDDM Blt (WoW64)
• WDDM Blt - Stretch
• WDDM Blt - Stretch (WoW64)', 'This filter will be used to resolve the issue.', '2030-08-06T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_4905")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/Device/RTBlt', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'CreateDC failed on device', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'FatalError', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'User asked the test to quit early', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/DeviceDwnOff', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Monitor index was too high', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-06T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 67039 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'BVT2.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('BVT2.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 67039 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(67039, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WDDM BVT2 tests fail due to possible test timing issue', 'HLK Errata: WDDM BVT2 tests fail due to possible test timing issue
• WDDM BVT2
• WDDM BVT2 (WoW64)', 'This filter will be used to resolve the issue.', '2030-08-06T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_4905")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/Device/DynamicTexture', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'CreateDC failed on device', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'FatalError', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'User asked the test to quit early', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-06T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 67093 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 67093 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(67093, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Autotriage: TPM 2.0 - Supplemental test fails with error TBSLogGenerator.exe return code: -2147467259', 'TPM 2.0 - Supplemental test fails with error TBSLogGenerator.exe return code: -2147467259', 'Contact CSS to check if this issue is in an OS binary and a private might be available to address this failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WEX::TestExecution::Tpm20SupplementalTest::Tpm20SupplementalTest::CollectFirstTBSLog', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Error generating TBS Log 1. TBSLogGenerator.exe return code: -2147467259', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WEX::TestExecution::Tpm20SupplementalTest::Tpm20SupplementalTest::CollectSecondTBSLog', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Error generating TBS Log 2. TBSLogGenerator.exe return code: -2147467259', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WEX::TestExecution::Tpm20SupplementalTest::Tpm20SupplementalTest::TBSCompareTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'Failed to find start key "| PCR[00]" in log.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 67284 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 67284 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(67284, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Device ''USB xHCI Compliant Host Controller'' failed because device ''SWD\XXXX’ does not support DFX', 'Device ''USB xHCI Compliant Host Controller'' failed because device ''SWD\XXXX’ does not support DFX.', 'This is an aceptable failure.', '2024-06-10T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Device ''USB xHCI Compliant Host Controller.*'' failed because device ''SWD\\DRIVERENUM\\.*'' does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Device ''USB xHCI Compliant Host Controller.*'' failed because device ''SWD\\MMDEVAPI\\.*'' does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-06-10T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 67877 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestValidateFaceAuthProfileForHello%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestValidateFaceAuthProfileForHello%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 67877 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(67877, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Windows Hello Face Authentication Profile Validation fails for non-zero indicies', 'Windows Hello Face Authentication Profile Validation fails for non-zero indicies', 'Test Updated, Errata Issued', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=.*RunWindowsHelloProfileRequirement.*', 'Face Auth profile is defined. but the profile index is not 0', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 68520 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%D3DConf_12_Core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%D3DConf_12_Core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 68520 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(68520, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 Raytracing Barriers', 'D3D12 Raytracing Barrier test bug ', 'Fixed post-VB', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTests:Title=D3DConf_12_Raytracing_Barriers.*BasicBarriers', 'D3DConf_12_Raytracing_Barriers.*BasicBarriers', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsTrue\(errorCount == 0\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 68707 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva_hevc.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva_hevc.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 68707 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(68707, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK RS3 Errata: HEVCFuzz Test 122 fails with error 0xC00D3E8C (MF_E_INVALID_FORMAT) ', 'HEVCFuzz Test 122 fails with error 0xC00D3E8C (MF_E_INVALID_FORMAT)', 'This is an acceptable failure since the test is being removed from the playlist post RS3', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.16299"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 68783 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TrimPerf.exe /DriveNumber [StorageDriveNumber] /LogDriveLetter [LoggerDriveLetter]: /DeviceType [DeviceType] /Scenario [Scenario] /DiskSize [DiskSize] /Cooldown 2'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TrimPerf.exe /DriveNumber [StorageDriveNumber] /LogDriveLetter [LoggerDriveLetter]: /DeviceType [DeviceType] /Scenario [Scenario] /DiskSize [DiskSize] /Cooldown 2')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 68783 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(68783, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NVMe Deallocate Test (LOGO) fails with error "Bus type not recognized."', 'HLK Errata: NVMe Deallocate Test (LOGO) fails with error "Bus type not recognized."', 'This issue described is an acceptable failure. ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_F1A6")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.18363","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'WTTLogger_CPP_GitEnlistment', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Bus type not recognized.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'Matching VDS Disk not found', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Getting disk failed. Error Code: 0x00000001', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 69179 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ShellRunner.exe -x [[]DISPLAYLOGOLEVEL] -c [[]PROFILENAME] -l "[[]WTTRunWorkingDir]\s98wtt_u.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ShellRunner.exe -x [[]DISPLAYLOGOLEVEL] -c [[]PROFILENAME] -l "[[]WTTRunWorkingDir]\s98wtt_u.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 69179 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(69179, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver:  OPM CSS DVD HDCP Test', 'Unclear documentation to IHV''s on how to handle enable HDCP.  The test assumes it can immediately query HDCP state, expecting it to succeed, but the sequence to enable HDCP can take seconds, depending on implementation.', 'Working with all IHV''s to get consensus on how drivers and the test should act', '2027-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["ARM"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041","10.1.20348","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CSSDVD', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'test case failed: current local level does not match the set level \(current level: 0, set level: 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 69427 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Win6_4.MBN.GSM.TestReadyInfo.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Win6_4.MBN.GSM.TestReadyInfo.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 69427 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(69427, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MBN.GSM.TestReadyInfo fails that Content of two consecutive ReadyInfo messages are not same', 'HLK Errata: Win6_4.MBN.GSM.TestReadyInfo fails that Content of two consecutive ReadyInfo messages are not same', 'This filter will be used to resolve the issue.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"USB\VID_8087&PID_0AC9") or contains(.,''PCI\VEN_14C3&DEV_4D75'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestReadyInfo::Query', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Content of two consecutive ReadyInfo messages are not same', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 69552 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 69552 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(69552, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:  D3D12 - Mesh Shaders test fails due to tests use more than 3 bits of RenderTargetArrayIndex without checking the cap for whether that''s allowed', 'D3D12 - Mesh Shaders test fails', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002&DEV_73BF") or contains(.,"PCI\VEN_1002&DEV_164D") or contains(.,"PCI\VEN_1002&DEV_73A0") or contains(.,"PCI\VEN_1002&DEV_73BF") or contains(.,"PCI\VEN_1002&DEV_73A1") or contains(.,"PCI\VEN_1002&DEV_73A2") or contains(.,"PCI\VEN_1002&DEV_73A3") or contains(.,"PCI\VEN_1002&DEV_73AB") or contains(.,"PCI\VEN_1002&DEV_73AE") or contains(.,"PCI\VEN_1002&DEV_73DF") or contains(.,"PCI\VEN_1002&DEV_73C1") or contains(.,"PCI\VEN_1002&DEV_73C3") or contains(.,"PCI\VEN_1002&DEV_73E0") or contains(.,"PCI\VEN_1002&DEV_73E2") or contains(.,"PCI\VEN_1002&DEV_73FF") or contains(.,"PCI\VEN_1002&DEV_73E1") or contains(.,"PCI\VEN_1002&DEV_7421") or contains(.,"PCI\VEN_1002&DEV_7422") or contains(.,"PCI\VEN_1002&DEV_7423") or contains(.,"PCI\VEN_1002&DEV_743F") or contains(.,"PCI\VEN_1002&DEV_73AF") or contains(.,"PCI\VEN_1002&DEV_73E3") or contains(.,"PCI\VEN_1002&DEV_164E")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'D3DConf_12_0_MeshShaders.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Images mismatch!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'D3DConf_12_0_MeshShaders.*NoPS', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'SUCCEEDED\(E_FAIL\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'D3DConf_12_0_MeshShaders.*::ViewInstancing', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '\[HRESULT 0x800706BE\] A failure occurred while running a test operation: ''D3DConf_12_0_MeshShaders::ViewInstancing''. \(A crash with exception code 0x0000087D occurred in module \"KERNELBASE.dll\" in the process hosting the test code while invoking a test operation.\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 69688 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%Te.exe /enablewttlogging Utility_DeviceStatusCheck.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%Te.exe /enablewttlogging Utility_DeviceStatusCheck.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 69688 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(69688, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'SurfaceSarManager 3.25.139.0 failing HLK DF tests and cannot be WHQL signed', 'SurfaceSarManager 3.25.139.0 failing HLK and cannot be WHQL signed', 'This is a test issue', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''SURFACESARMANAGER'')])

')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error=Found a device that has a non-zero problem code or is phantom. Logging device info', 'Target: Surface Radio Monitor', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 69819 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMft0GetService%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMft0GetService%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 69819 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(69819, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - MediaCapture - TestMFT0GetService', 'Driver model is outdated, but allowing partners to defer upgrade for a limited time.', 'Delayed Enforcement Errata Issued', '2025-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'MFT0 reg key is found. This is unsupported in this release and onwards. Moving forward, the functionality of MFT0 should be moved to the DeviceMFT.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 70087 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%SystemGuardTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%SystemGuardTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 70087 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(70087, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Autotriage: SystemGuard Test fails with multiple Error parsing DRTM log ... errors', 'HLK Autotriage: SystemGuard Test fails with multiple Error parsing DRTM log ... errors', 'Please contact CSS to obtain the private binary.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["System.Fundamentals.Security.SystemGuard"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'SystemGuardTest::TestSGSinitSigner', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error parsing DRTM log for SINIT signer: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'SystemGuardTest::TestTxtCpuSrtmStat', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error parsing DRTM log for CPU SRTM status: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'SystemGuardTest::TestTxtOsSinitDataCap', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error parsing DRTM log for OS/SINIT Capabilities: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'SystemGuardTest::TestTxtLcpControl', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error parsing DRTM log for LCP Control: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'SystemGuardTest::TestTxtLcpAuthorities', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error parsing DRTM log for LCP authorities value: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'SystemGuardTest::TestTxtNvInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Error parsing DRTM log for NV Info: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 70997 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%UcmTest::UcmEndToEndTests::UcmDisableEnable%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%UcmTest::UcmEndToEndTests::UcmDisableEnable%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 70997 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(70997, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: USB Type-C UCM Disable Enable Test - Wait for CMutt attach timed out.', 'HLK Errata: USB Type-C UCM Disable Enable Test - Wait for CMutt attach timed out.', 'Issue with test when run on systems with URS (USB role switch)', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/CompatID[contains(.,"ACPI\PNP0CA1")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Wait for CMutt attach timed out.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error ', 'End', 'Ucm disable enable tests failed.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 71315 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.testpacketservice.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.testpacketservice.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 71315 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(71315, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Win6_4.MB.GSM.Data.TestPacketService is failing because of AvailableDataClass is not valid', 'Errata: Win6_4.MB.GSM.Data.TestPacketService is failing because of AvailableDataClass is not valid.', 'This is an acceptable failure.', '2023-05-08T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_14C3&DEV_4D75")])
')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestPacketService::AttachDetach', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'AvailableDataClass \(0x20\) is not valid', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'AvailableDataClass \(0x40\) is not valid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-08T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 71399 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%D3DConf_12_Core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%D3DConf_12_Core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 71399 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(71399, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Large allocation in D3D12 - Overlapping Resources Test', 'Large allocation in overlapping resources test.   Granting errata for IHV not yet supporting heaps &gt; 4GB in size.', 'Will just let errata expire eventually.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086") ])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=D3DConf_12_0_ResourceHeap::OverlappingResourcesTest#3', 'D3DConf_12_0_ResourceHeap::OverlappingResourcesTest#3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Driver Verifier error: The driver didn''t call AllocateCb with a runtime hResource handle when a heap was being created. The driver is not allowed to defer this nor omit the resource handle.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(m_Device->CreateHeap\( &heapDesc, __uuidof\(Heap\), \(void\*\*\)&Heap\)\) - Value \(0x887a0005\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Large Resource*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 71578 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 71578 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(71578, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Microsoft’s USB ccid smart card reader devices not support DFx', 'Microsoft’s USB ccid smart card reader devices not support DFx', 'This is an acceptable failure', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''USB\VID_0A5C&PID_5842&MI_01'') or contains(.,''USB\VID_0A5C&PID_5843&MI_02'') or contains(.,''USB\VID_0A5C&PID_5843&MI_01'') or contains(.,''USB\VID_0A5C&PID_5842&MI_02'') or contains(.,''USB\VID_0A5C&PID_5844&MI_01'') or contains(.,''USB\VID_0A5C&PID_5845&MI_01'')])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'USB\\VID_0A5C&PID_5842&MI_01', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'USB\\VID_0A5C&PID_5842&MI_02', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'USB\\VID_0A5C&PID_5843&MI_01', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'USB\\VID_0A5C&PID_5843&MI_02', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'USB\\VID_0A5C&PID_5844&MI_01', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'USB\\VID_0A5C&PID_5845&MI_01', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 71652 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandHlkTestsTaef::DataModificationBetweenExecutions%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll /name:MetacommandHlkTestsTaef::DataModificationBetweenExecutions%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 71652 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(71652, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: D3D12 - Metacommands - Data modification between executions Caught Exception Incorrect size argument.', 'Errata: D3D12 - Metacommands - Data modification between executions Caught Exception Incorrect size argument.', 'If IHV''s see, "metacommandhlkteststaef.cpp(764)\MetacommandHlkTests.dll!00007FF8F7D77597: (caller: 00007FF8F7D76803) Exception(1) tid(1814) 800705B6 Incorrect size argument.", they can apply this errata.', '2025-03-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'MetacommandHlkTestsTaef::DataModificationBetweenExecutions', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'metacommandhlkteststaef\.cpp.*764.*Incorrect size argument\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-03-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 71900 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Devfund_PnPDTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Devfund_PnPDTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 71900 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(71900, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK - DQT-Devfund-PnPDTest-"Failed to open EDT device" error may be seen during PNP tests when testing some root enumerated devices', 'PNP tests need a test filter to be installed as an upper filter on the device stack. This isn''t allowed on some software device stacks. Our tests fail with "Failed to open EDT device" error message when testing these devices.', 'This filter will be used to resolve the issue.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/Enumerator[.=''ROOT''])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1","10.1.*"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', '.*Failed to open.*EDT.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 72151 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[[]TestExe] -c [[]TestPro] -l "s98wtt.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[[]TestExe] -c [[]TestPro] -l "s98wtt.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 72151 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(72151, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio Converter at node X - UAA system test failure', 'System Audio - UAA Test (Manual) – Desktop test recognizes disabled PinWidgets as Converter Widgets and as a result, the test fails.', 'This filter overturns the failure.', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[starts-with(.,"HDAUDIO\FUNC_01&VEN_10DE&DEV_009A") or starts-with(.,"HDAUDIO\FUNC_01&VEN_10DE&DEV_009C") or starts-with(.,"HDAUDIO\FUNC_01&VEN_10DE&DEV_009D") or starts-with(.,"HDAUDIO\FUNC_01&VEN_10DE&DEV_009E") or starts-with(.,"HDAUDIO\FUNC_01&VEN_10DE&DEV_009F") or starts-with(.,"HDAUDIO\FUNC_01&VEN_10DE&DEV_00A0") or starts-with(.,"HDAUDIO\FUNC_01&VEN_10DE&DEV_00A2")])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*Error: Audio Converter at node.*did not set Stream/Channel as requested.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 72313 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 72313 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(72313, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK 2.1 Errata: The Sleep and PNP (disable and enable) with IO Before and After (Certification) may improperly fail hibernation during the Run Test with the error message, To Hibernate the system with SetSuspendState(...) failed  : 50', 'The Sleep and PNP (disable and enable) with IO Before and After (Certification) may improperly fail hibernation during the Run Test with the error message, To Hibernate the system with SetSuspendState(...) failed  : 50', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows Server 2008 x64","Windows Server 2008 Release 2 x64","Windows v6.3 Server x64","Windows 8 Server x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_SYSTEM               : To Sleep the system with SetSuspendState\(...\) failed  : 50', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_SYSTEM               : To Hibernate the system with SetSuspendState\(...\) failed  : 50', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'WDTF_SYSTEM               : To Hibernate the system with SetSuspendState\(...\) failed  : 2', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 72318 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%WaveTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%WaveTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 72318 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(72318, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: VMware Virtual Audio failed Wave Test WaveRT requirement', 'VMware Virtual Audio driver failed Wave Test WaveRT testcase because it''s using the WavePci/WaveCyclic which are deprecated. This Errata is to cover this failure on 20H1/20H2.', 'This errata overturns the failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[./ImagePath[contains(.,"vmwvaudio.sys")]])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::WaveTest::TAEF_VerifyPinWaveRTConformance.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'IsTrue\(bIsRTCapable\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 72441 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% libtester_wlk.dll /name:LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% libtester_wlk.dll /name:LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 72441 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(72441, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: TPM 2.0 - NV Storage, Policy, Error Handling, and Attestation TestNvOwnerClear failed for Windows Server 2016', 'The test is trying to use the lockout authorization with the TPM2_Clear command. The Windows Server 2016 version fails, because the test in the framework is not present.', 'The test will be waived for Windows Server 2016.', '2029-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminNvOwnerClear', 'LibTester.LibTesterTBSNV_Policy_ErrorHandling_Attestation.WHCKTpmTbsAdminNvOwnerClear', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'TestNvOwnerClear', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'WHCK TPM 2.0 Hardware Interface test WHCKTpmTbsAdminNvOwnerClear failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 72895 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%uefisecurebootlogomanual.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%uefisecurebootlogomanual.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 72895 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(72895, 2, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Secure Boot Manual Logo Test incorrectly appearing in native ARM64', 'Secure Boot Manual Logo test runs in native ARM64 failing without logs. Need to waive this instance until the test is fixed.', 'This waiver will be removed when the test is fixed', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server ARM64","Windows v10.0 Client ARM64"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 73438 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 73438 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(73438, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Secure Mode - Verify Correct Pin test doesn''t work on USB single pin cameras', 'USB Cameras have a single pin, so the API enum for different pin types all maps internally to the same one. This causes the negative use cases to succeed, failing the tests.', 'Test Updated, Errata Issued', '2025-02-28T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.20231"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=.*CameraEngineTestCleanup.*', '.*ExtendedControlNotExist name SECURE.MODE.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=checkControl Failed with error E.FAIL.*', 'Control should not be exposed on .*PHOTO', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*ExtendedControl.*SECURE.MODE.*VerifyPin', 'SUCCEEDED.*80004005.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-02-28T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 73445 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% hlkcameracontrolstest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 73445 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(73445, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Secure Mode Streaming Tests fail when using DxManager', 'USB Cameras cannot have a DxManager inserted into the pipeline for secure tests.', 'Test Updated, Errata Issued', '2025-02-28T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=.*CameraEngineTestCleanup.*', '.*ExtendedControlNotExist name SECURE.MODE.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'Error:UserText=StopRec Failed with error.*80070005', 'MF.CAPTURE.ENGINE.ERROR FAILED with error.*80070005', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*ExtendedControl.*SECURE.MODE.*SecureSettings.*', 'SUCCEEDED.*80070005.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-02-28T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 74293 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WrapIFSTests.cmd%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WrapIFSTests.cmd%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 74293 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(74293, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK: IFS Test DataImageCoherencyTest failure', 'HLK: IFS Test DataImageCoherencyTest failure.', 'This is an acceptable failure.', '2029-01-08T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver[contains(.,"drvhookcsmf_amd64.sys" or contains(.,"scauthfsflt2.sys"))])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DataImageCoherencyTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DataImageCoherencyTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', '.*IFSTEST_TEST_STATISTICS_ERROR.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-01-08T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 74526 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'multisample.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('multisample.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 74526 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(74526, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Multisample.exe test fails with Windows Vibranium (version 10.0.19041.508) when DX9on12 is enabled', 'Multisample.exe test fails with Windows Vibranium (version 10.0.19041.508) when DX9on12 is enabled', 'This is an acceptable failure', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_4680'') or contains(.,''VEN_8086&DEV_46A0'') or contains(.,''VEN_8086&DEV_4F80'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.19042"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Sample Verification', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Centroid multisample verification', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 74982 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kstoptest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kstoptest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 74982 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(74982, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KS Topology test is enforcing jack description properties on USB sideband devices', 'KS Topology test is failing to recognize some devices as USB and forces them to support the KSJACK_DETECTION property.

NOTE: The requirements for Nickel have change and now all devices are required to support KSPROPERTY_JACK_DESCRIPTION and KSPROPERTY_JACK_DESCRIPTION2 will be optional.', 'This errata overturns the failures for not supporting KSJACK_DETECTION properties.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[starts-with(.,"INTELAUDIO\CTLR_DEV_A74F") or starts-with(.,"INTELAUDIO\CTLR_DEV_98C8") or starts-with(.,"INTELAUDIO\CTLR_DEV_A0C8") or starts-with(.,"INTELAUDIO\CTLR_DEV_43C8") or starts-with(.,"INTELAUDIO\CTLR_DEV_4B55") or starts-with(.,"INTELAUDIO\CTLR_DEV_4B58") or starts-with(.,"INTELAUDIO\CTLR_DEV_7A50") or starts-with(.,"INTELAUDIO\CTLR_DEV_7AD0") or starts-with(.,"INTELAUDIO\CTLR_DEV_51C8") or starts-with(.,"INTELAUDIO\CTLR_DEV_51CA") or starts-with(.,"INTELAUDIO\CTLR_DEV_51CB") or starts-with(.,"INTELAUDIO\CTLR_DEV_51CC") or starts-with(.,"INTELAUDIO\CTLR_DEV_51CE") or starts-with(.,"INTELAUDIO\CTLR_DEV_51CF") or starts-with(.,"INTELAUDIO\CTLR_DEV_54C8")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.18362","10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '(KS Topology Filters\\KS Pins\\Check KSPROPERTY_JACK_DESCRIPTION)|(KsTopTest::TC_CheckJackDesc)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*DeviceIoControl failed to return ERROR_MORE_DATA.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', '.*Failed to query KSPROPERTY_JACK_DESCRIPTION.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'AreEqual\(\(DWORD\)FNS_PASS,\ testResult\)\ -\ Values\ \(0,\ 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75038 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestWindowsHelloDeviceRequirement%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestWindowsHelloDeviceRequirement%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75038 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75038, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Windows Hello Requirement test with Secure USB Camera has timestamp mismatch', 'Test fails due to arrival time being before timestamp. This is due to VTL1 and VTL0 having differing QPC times (most noticeable after sleep). This is addressed in newer OS.', 'Errata Issued, OS Fixed', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Test completed', 'SetPropertyAsync.*1CB79112.C0D2.4213.9CA6.CD4FDB927972..36.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Test completed', 'SetPropertyAsync.*succeeded', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=Test completed', 'Timestamp resolution not set to significant enough duration for frame.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75042 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogomanual.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogomanual.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75042 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75042, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Secure Boot Manual Logo Test fails because of a difference in reset type (CF9/TXT Reset)', 'Secure Boot Manual Logo Test fails because of a difference in reset type (CF9/TXT Reset)', 'This is an acceptable failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Manual.Tests.CreateFabrikam''*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Fail: pressanykey1 did not boot after applying Content Bin.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75045 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75045 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75045, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: Validate engine type test (device specific)', 'Error in loading test dependencies:  0x80070002 - The system cannot find the file specified.', 'The test will be fixed in a future release of the HLK. ', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/@HardwareID[contains(.,''PCI\VEN_10DE'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'WEX\:\:NodeMetaData\:\:*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 's', 'Value \(0x80070002\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75132 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.testsetup.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.testsetup.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75132 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75132, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.GSM.Data.TestSetup Error: NetAdapterCx based drivers should only be used after informing Microsoft', 'HLK Errata: Win6_4.MB.GSM.Data.TestSetup Error: NetAdapterCx based drivers should only be used after informing Microsoft', 'Reasoning : “the purpose of the change was to find out which partners are using NetAdapterCx based drivers. In Vb, only MBB drivers were released officially.”', '2025-10-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_14C3&DEV_4D75") or contains(.,''VID_0489&PID_E0D5_QCNETADAPTER'') or contains(.,''VID_0489&PID_E0D1_QCNETADAPTER'') or contains(.,''{7DCB3244-C836-4A0C-A1E9-BD68D385AA2B}\QCNETADAPTER'') or contains(.,''{7DCB3244-C836-4A0C-A1E9-BD68D385AA2B}\QCMBBNETADAPTER'') or contains(.,''{C75D4061-ED72-4CC0-911C-C10CDC8F28D6}\SWI_NETADAPTER_SDX55'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'End', 'Win6_3MBN::TestSetup::NDISSetup', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'NetAdapterCx based drivers should only be used after informing Microsoft', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75226 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestDesktop::* /p:"TestRequiresMultipleOutputs%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% iflip.dll /name:iFlipPresentTestDesktop::* /p:"TestRequiresMultipleOutputs%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75226 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75226, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: "iFlip Present Desktop - Multihead (Requires 2+ monitors)" fails due to the limitation of only supporting a single monitor', 'HLK Errata: "iFlip Present Desktop - Multihead (Requires 2+ monitors)" fails due to the limitation of only supporting a single monitor
', 'Filter will overturn the appropriate failures. 
      ', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_4C9A") or contains(.,"PCI\VEN_1002&DEV_7360") or contains(.,"PCI\VEN_1002&DEV_73A1") ])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'Error:UserText=.*', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75283 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75283 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75283, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: ''Surface Serial Hub Driver'' does not support DFX', 'HLK Errata: ''Surface Serial Hub Driver'' does not support DFX', 'This is an acceptable failure', '2050-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'failed because device ''Surface Serial Hub Driver \(\\_SB.SSH\)'' does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75335 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.testmpdp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.testmpdp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75335 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75335, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MBN.GSM.TestMPDP is failing with error  "Attempt to download web doc, failed"', 'HLK Errata: Win6_4.MBN.GSM.TestMPDP is failing with error  "Attempt to download web doc, failed"', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'')])

')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestMPDP::ConnectAndTrafficOnAdditionalPDPAndDefaultPDP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Attempt to download web doc, failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75392 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%libtester_wlk.dll /name:LibTester.LibTesterTBSStress.%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75392 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75392, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WS2016 - TPM Stress TestCreatePrimaryFaults Failure', 'The TPM 2.0 - Stress test incorrectly marks value instead of attributes as error.', 'Fixed in newer releases of the HLK.', '2031-12-28T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Server x64 RS1 Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=LibTester.LibTesterTBSStress.WHCKTpmTbsAdminStress', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestCreatePrimaryFaults.*\nTPM Error: Value', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'TestCreateEccPrimary failed.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'WHCK TPM 2.0 Hardware Interface test profile MinTpmAdmin in stress mode failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-12-28T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75470 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging uniqueidtest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging uniqueidtest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75470 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75470, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: Verifies PS2 Devices have a unique Plug and Play ID fails', 'The following hidden PS2 devices started showing in 20H2 OS from build 19042.508 onwards:
  - Microsoft PS/2 Mouse ACPI\PNP0F03
  - Standard PS/2 Keyboard ACPI\PNP0303
This issue appears to be fixed/verified with clean OS install of 19042.685, however the fix does not appear to hold if a customer updates their way to 19042.685.  ', 'Please perform a fresh installation of the 20H2 RTM ISO (build greater or equal to 10.0.19042.685) to pass this test. ', '2023-05-08T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.MS.UniqueIdTest.UniqueIdTestClass.UniqueIdTestClassTest1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'ACPI\\PNP0F03\\4&215D0F95&0 is not a unique ID because it contains ACPI\\PNP', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'ACPI\\PNP0303\\4&215D0F95&0 is not a unique ID because it contains ACPI\\PNP', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-08T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75536 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging win6_4.mbn.gsm.testwake.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging win6_4.mbn.gsm.testwake.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75536 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75536, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_3MBN.GSM.TestWake fails with “Device didnt enter to AoAC state. Current power state: D3”', 'HLK Errata: Win6_3MBN.GSM.TestWake fails with “Device didnt enter to AoAC state. Current power state: D3”', 'This filter will be used to resolve the issue.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'') or contains(.,''{7DCB3244-C836-4A0C-A1E9-BD68D385AA2B}\QcNetAdapter'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device didnt enter to AoAC state. Current power state: D3', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75596 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogomanual.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% uefisecurebootlogomanual.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75596 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75596, 2, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK Errata: Secure Boot Manual Logo Test fails because because several tasks are blocked.', 'HLK Errata: Secure Boot Manual Logo Test fails because because several tasks are blocked.', 'This is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.UefiSecureBootLogo.Manual.Tests.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75598 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%HAPTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%HAPTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75598 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75598, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[OS Errata] AMD devices are failing HAP test due to the OS not having the required resource management', 'AMD devices fail HAP test due to resource management issues.', 'This errata overturns the failures.', '2024-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/AssociatedPNPID[starts-with(.,"PCI\VEN_1022&DEV_15E2")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::BufferSize#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(pAudioClient2->IsFormatSupported\( AUDCLNT_SHAREMODE_SHARED, &wfx\.Format, &pClosest \)\) - Value \(0x88890008\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::VolumeImmediate#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(pAudioStreaming->Initialize\(NULL\)\) - Value \(0x88890008\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::Mix#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(rpAudioStreamingOffload.*->Initialize\( \(bDifferentFormats && i > 0\) . static_cast.*\(pwfxSavedFormat\) : nullptr \)\) - Value \(0x88890008\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::SupportedFormatsPcm#', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'No standard PCM formats are supported!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CHapTest::MixOffloadDifferentFormat#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(rpAudioStreamingOffload.*->Initialize\( \(bDifferentFormats && i > 0\) . static_cast.*\(pwfxSavedFormat\) : nullptr \)\) - Value \(0x88890008\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75599 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%KsTopTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%KsTopTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75599 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75599, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'AMD devices are failing KS Topology test due to the OS not having the required resource management', 'AMD devices fail KS Topology test due to resource management issues.', 'This errata overturns the failures.', '2024-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/AssociatedPNPID[starts-with(.,"PCI\VEN_1022&DEV_15E2")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Nodes\\Audio Engine Property Check', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'ERROR: Node.* does not support KSPROPERTY.* through the pin', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KS Topology Filters\\KS Pins\\Check Processing Modes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL: Pin\[.*\] : Pin creation failed for AUDIO_SIGNALPROCESSINGMODE_DEFAULT', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KsTopTest::TC_NodeCheck_AudioEngine', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'ERROR: Node.* does not support KSPROPERTY.* through the pin', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KsTopTest::TC_CheckProcessingModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Pin creation failed for AUDIO_SIGNALPROCESSINGMODE_DEFAULT', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75600 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby2%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby2%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75600 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75600, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[OS Errata] AMD devices are failing Lullaby test due to the OS not having the required resource management', 'AMD devices fail Lullaby test due to resource management issues.', 'This errata overturns the failures.', '2024-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/AssociatedPNPID[starts-with(.,"PCI\VEN_1022&DEV_15E2")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'Failed IAudioStreamingRender::.*AUDCLNT_E_UNSUPPORTED_FORMAT\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'Failed Create Rendering Device \(hr = AUDCLNT_E_UNSUPPORTED_FORMAT\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75601 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75601 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75601, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[OS Errata] AMD devices are failing Wave test due to the OS not having the required resource management', 'AMD devices fail Wave test due to resource management issues.', 'This errata overturns the failures.', '2024-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/AssociatedPNPID[starts-with(.,"PCI\VEN_1022&DEV_15E2")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = pDevice->Activate\( __uuidof\(IAudioOutputEndpointRT\).*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = CheckConnectorSupportForPeriodicity.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = DiscoverPeriodicityCharacteristicsForFormat.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = GetPreferredFormatPeriodicityCharacteristicsForConnector.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = AddTestResourceForConnector.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(AddTestResourcesForDevice.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75841 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% metacommandhlktests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75841 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75841, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Some DirectML Metacommands 19H1 HLK tests for MVN and Reduction have some tests with bad inputs that result in overflowing outputs', 'Some DirectML Metacommand tests for Reduction in 19H1 have inputs that yield outputs that overflow, which is undefined behavior. These tests have been removed in subsequent HLK releases, but since none of the drivers supported these metacommands before, we were not able to detect these test cases until now.', 'If IHV''s see the the ReductionOperation tests #19, #20, #21, #22, #25, #26, #27, #29 fail, they can apply this errata.', '2030-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test:#(19|20|21|22|25|26|27|29); Graph:Reduction; Executor:MetacommandOperatorExecutor_MetacommandsDisabled;', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Test:#(4|5|7); Graph:MeanVarianceNormalization; Executor:MetacommandOperatorExecutor_MetacommandsDisabled;', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 75906 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.test5gextensions.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.gsm.test5gextensions.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75906 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(75906, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.GSM.Data.Test5GExtensions failing with error "Attempt to find provisioned context of WwanContextTypeInternet failed"', 'HLK Errata: Win6_4.MB.GSM.Data.Test5GExtensions failing with error "Attempt to find provisioned context of WwanContextTypeInternet failed"', 'This is an acceptable failure', '2023-05-08T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'') or contains(.,''PCI\VEN_17CB&DEV_0306'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GExtensions::Verify5G_NSAExtensions', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Attempt to find provisioned context of WwanContextTypeInternet failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GExtensions::Verify5G_NSAExtensions', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Attempt to find provisioned context of WwanContextTypeInternet failed', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Attempt to connect using provisioned context failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GExtensions::Verify5G_NSAExtensions', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Attempt to find provisioned context of WwanContextTypeInternet failed', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Attempt to connect using provisioned context failed', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to connect', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-08T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 76265 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspostst%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspostst%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 76265 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(76265, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[OS Errata] AMD devices are failing KS Position test due to the OS not having the required resource management', 'AMD devices fail KS Position test due to resource management issues.', 'This errata overturns the failures.', '2024-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/AssociatedPNPID[starts-with(.,"PCI\VEN_1022&DEV_15E2")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = pDevice->Activate\( __uuidof\(IAudioOutputEndpointRT\).*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = CheckConnectorSupportForPeriodicity.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = DiscoverPeriodicityCharacteristicsForFormat.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = GetPreferredFormatPeriodicityCharacteristicsForConnector.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = AddTestResourceForConnector.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(AddTestResourcesForDevice.*Value \((0x887c0043|0x887c0034)\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 76329 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%HstiLogoTest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%HstiLogoTest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 76329 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(76329, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HSTI Test - VerifySecureBoot fails on Server', 'Servers are expected to possibly fail this test.', 'Error will be filtered for Server OS until test is updated.', '2024-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64 19H1 Full","Windows v10.0 Server ARM64 19H1 Full","Windows v10.0 Server x64 Vb Full","Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Server x64 Mn Full","Windows v10.0 Server ARM64 Mn Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Server ARM64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest=HstiTest::VerifySecureBoot', 'HstiTest::VerifySecureBoot', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!=!', 'Secure Boot is not bound! Please enable Secure Boot in UEFI and re-run this test!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 76756 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% sysfund_'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% sysfund_')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 76756 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(76756, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'PnP Sleep Tests do not handle MediaCapture Async errors when device is removed', 'OS has Race Condition during MediaCapture that during Power state changes, the device might be prempted causing random failures in the test.', 'Errata Issued, Test fixed', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*WebcamPlugin. CPlayer.*Win32.258', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*WebcamPlugin. CPlayer.*VerifyCorrectEventReceived.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*Device Status.*Problem Status.*0000000', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77471 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77471 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77471, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3DConf_12_0_ResourceClear::ClearColorTest* takes an incorrect hard dependency on Tiled Resource Tier > 1', 'The test uses tiled resource tier2+ behavior without checking a cap for tier2+.', 'The test needs to not take an accidental dependency on tiled resource 2+.', '2031-03-18T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Fe OneCore","Windows v10.0 Client x86 Fe OneCoreUAP","Windows v10.0 Client x86 Fe Full","Windows v10.0 Client x64 Fe OneCore","Windows v10.0 Client x64 Fe OneCoreUAP","Windows v10.0 Client x64 Fe Full","Windows v10.0 Server x64 Fe OneCore","Windows v10.0 Server x64 Fe OneCoreUAP","Windows v10.0 Server x64 Fe Full","Windows v10.0 Client ARM Fe OneCore","Windows v10.0 Client ARM Fe OneCoreUAP","Windows v10.0 Client ARM64 Fe OneCore","Windows v10.0 Client ARM64 Fe OneCoreUAP","Windows v10.0 Client ARM64 Fe Full","Windows v10.0 Server ARM64 Fe OneCore","Windows v10.0 Server ARM64 Fe OneCoreUAP","Windows v10.0 Server ARM64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_ResourceClear::ClearColorTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(m_Device->CreateHeap \( &CD3DX12_HEAP_DESC\( ResAllocInfo, D3D12_HEAP_TYPE_DEFAULT, D3D12_HEAP_FLAG_ALLOW_ONLY_RT_DS_TEXTURES \) , IID_PPV_ARGS\( &Heap \) \)\) - Value \(0x80070057\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-03-18T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77650 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Blt.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Blt.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77650 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77650, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77653 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DXGICrossProcSharing.exe [MODIFIEDCMDLINE'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DXGICrossProcSharing.exe [MODIFIEDCMDLINE')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77653 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77653, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: SC8280 0.5 Observing failure in WHCP test DXGICrossProcSharing post enabling UBWC for BGRX ', 'The D3D11 spec is a little vague on the expected behavior of whether data in the unused bits of BGRX formats should be preserved in memory or not.', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''ACPI\VEN_QCOM&DEV_0636'') or contains(.,''ACPI\VEN_QCOM&DEV_083A'') or contains(.,''ACPI\VEN_QCOM&DEV_043A'') or contains(.,''ACPI\VEN_QCOM&DEV_0A36'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DXGI\\In-Process\\VerifyContents', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'CDXGIResource_D3D10Texture2D::VerifyResources\(\): Wrong data found in texture', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'CDXGIResource_D3D10Texture2D::VerifyResources\(\): Max fail count reached, skipping reminder of resource.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'CDXGICrossProcShare_Verify: VerifyResources\(pattern 0\) failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77693 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% devfund_sleep_with_io_during_wlk_certification.dll /name:Sleep_With_IO_During::Sleep_With_IO_During_Test#*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% devfund_sleep_with_io_during_wlk_certification.dll /name:Sleep_With_IO_During::Sleep_With_IO_During_Test#*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77693 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77693, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Sleep with IO tests crashes in MF components due to unmapping', 'Sleep with IO tests crashes in MF components due to unmapping the samples ahead of user code, causing de-ref pointer crash', 'OS Fixed, Errata Issued', '2023-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=.*', 'WDTF.*WEBCAM.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*', '.*A crash with exception code 0xC0000005 occurred in module.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77934 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Coherency.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Coherency.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77934 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77934, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77936 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'deadlock.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('deadlock.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77936 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77936, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77938 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'LockConfirm.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('LockConfirm.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77938 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77938, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77940 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Locksmith.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Locksmith.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77940 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77940, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77941 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'managedprimary.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('managedprimary.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77941 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77941, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-22T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-22T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77942 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Maxcontexts.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Maxcontexts.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77942 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77942, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77943 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'lddmoverlay.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('lddmoverlay.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77943 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77943, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77944 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'PassThrough.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('PassThrough.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77944 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77944, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77946 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'PrimarySurf.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('PrimarySurf.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77946 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77946, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77947 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Sync.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Sync.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77947 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77947, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 77948 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'unmappedaperture.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('unmappedaperture.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 77948 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(77948, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 78044 v8.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ndisstudiotesthost.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ndisstudiotesthost.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 78044 AND Version = 8
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(78044, 8, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata:  Hardware Timestamp tests failed for ptpv2 packet', 'HLK Errata:  Hardware Timestamp tests failed for ptpv2 packet', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_14E4&DEV_16D7'') or contains(.,''PCI\VEN_14E4&DEV_1750'') or contains(.,''PCI\VEN_14E4&DEV_1751'') or contains(.,''PCI\VEN_14E4&DEV_1752'') or contains(.,''PCI\VEN_8086&DEV_1592'') or contains(.,''PCI\VEN_8086&DEV_124C'') or contains(.,''PCI\VEN_8086&DEV_124E'') or contains(.,''PCI\VEN_8086&DEV_124F'') or contains(.,''PCI\VEN_8086&DEV_151D'') or contains(.,''PCI\VEN_8086&DEV_124D'') or contains(.,''PCI\VEN_8086&DEV_188A'') or contains(.,''PCI\VEN_8086&DEV_188B'') or contains(.,''PCI\VEN_8086&DEV_188C'') or contains(.,''PCI\VEN_8086&DEV_188D'') or contains(.,''PCI\VEN_8086&DEV_188E'') or contains(.,''CHT5BUS\chnet'') or contains(.,''CHT6BUS\chnet'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Mn Full","Windows v10.0 Client x64 Mn Full","Windows v10.0 Client x86 Fe Full","Windows v10.0 Client x64 Fe Full","Windows v10.0 Server x64 Mn Full","Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdisStudioTestHost::HardwareTimeStamp::VerificationHardwareTimeStamp_PtpV2OverUdpIPv4EventMsgReceiveHw', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreNotEqual\(0u, timestamp\) - Values \(0, 0\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdisStudioTestHost::HardwareTimeStamp::VerificationHardwareTimeStamp_PtpV2OverUdpIPv4EventMsgReceiveHw_WithFlag', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreEqual\(\(DWORD\)WAIT_OBJECT_0, waitReturn\): The capture Nbl Tx timestamp has finished within the 2 seconds - Values \(0, 258\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdisStudioTestHost::HardwareTimeStamp::VerificationHardwareTimeStamp_PtpV2OverUdpIPv4EventMsgTransmitHw', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreNotEqual\(0u, timestamp\) - Values \(0, 0\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdisStudioTestHost::HardwareTimeStamp::VerificationHardwareTimeStamp_TaggedTransmitHw', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreNotEqual\(0u, timestamp\) - Values \(0, 0\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdisStudioTestHost::HardwareTimeStamp::VerificationHardwareTimeStamp_PtpV2OverUdpIPv4EventMsgReceiveHw', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreEqual\(\(DWORD\)WAIT_OBJECT_0, waitReturn\): The capture Nbl Tx timestamp has finished within the 2 seconds - Values \(0, 258\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 78271 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'RotateBlt.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('RotateBlt.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 78271 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(78271, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12: CreateI3D returned 0x80004005', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'CreateI3D\(\s*&pI3D\.p,.*\) returned 0x80004005 \(Unspecified error \)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 78272 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'BVT2.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('BVT2.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 78272 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(78272, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12: BVT2 test failures', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'CreateI3D\(\s*&pI3D\.p,.*\) returned 0x80004005 \(Unspecified error \)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 78554 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[SCRIPT_NAME]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[SCRIPT_NAME]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 78554 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(78554, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: DirectX 9 on 12 "Failed to create an I3D object" - TDR2 Run [SCRIPT_NAME]', 'Certain TDR2 tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/Device', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 79325 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging modernstandbybasictest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging modernstandbybasictest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 79325 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(79325, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: Modern Standby Basic Requirement Test on AC-power Source fails', 'The behavior is expected for MS inbox driver. It is for HDD Storage reliability. The first enter s0i3 take 10-15mins. The second and after enter s0i3 will less 5 mins. Average would still be well below one transition per 5 minutes.', 'Please put the system into Modern Standby once manually before running the HLK test (using the "pwrtest /delaywrite" to prevent the disk access from tool itself).
Our guidance to work around this is to leave the device for around 1 hr before running the test. We also recommend to ensure maintenance work is completed before running the test: https://www.tenforums.com/tutorials/40161-manually-start-stop-automatic-maintenance-windows-10-a.html
You can stop the maintenance work if it’s not yet complete via:
  Command to stop maintenance: MSchedExe.exe Stop', '2023-05-08T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'BasicRequirementTestOnAc Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsGreaterThanOrEqual\(Summary.SoftwareDripsPercentage, m_ModernStandbySDripsThreshold\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'BasicRequirementTestOnAc', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-08T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 79898 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 79898 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(79898, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Overlapping Resources Test fail - DX Runtime Size Limit on WS2016 only', 'HLK Errata: Overlapping Resources Test fail - DX Runtime Size Limit on WS2016 only', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_0_ResourceHeap::OverlappingResourcesTest#3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Value \(0x8007000e\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80447 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe [[]TestDll] /name=[[]TestName] /p:"APServer=[[]APControllerIPAddress]" /p:DeviceSupports5Ghz=[[]TestDeviceSupports5ghz] /p:"ServiceAPChannelAddress=[[]ServiceAPChannelAddress]"  /p:"DriverFullPath=[[]LocalDir]\" /inproc'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe [[]TestDll] /name=[[]TestName] /p:"APServer=[[]APControllerIPAddress]" /p:DeviceSupports5Ghz=[[]TestDeviceSupports5ghz] /p:"ServiceAPChannelAddress=[[]ServiceAPChannelAddress]"  /p:"DriverFullPath=[[]LocalDir]\" /inproc')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80447 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80447, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WLAN Wake - Packet Tests - Functional failed for Device power off more than 2 times during CS session', 'There is a HLK infrastructure issue which DUT''s HLKSVC keep sending unexpected name query packets though the current available connection during test run. This issue keep bring the new S0Idle power mode based wlan driver wake.', 'Needs to filter out the Power cycle count failture from the test result.', '2024-05-17T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=HckTests.WakeScenarioTests.WakeByPKT', 'HckTests.WakeScenarioTests.WakeByPKT', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg', 'Testing WIFICX Based Driver:True', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Device power off more than 2 times during CS session', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Device power on more than 2 times during CS session, see NicActive and WakeReason summary', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-05-17T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80453 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /script:{[TestScript]}'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /script:{[TestScript]}')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80453 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80453, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata 1c_KernelCalls Test', '"Failed on function call to DbgPrintEx in module NTOSKRNL.EXE! This is a debug version of the driver."', 'Acceptable Failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''MLX4\ConnectX-3Pro_Eth'') or contains(.,''PCI\VEN_8086&DEV_15F3'') or contains(.,''PCI\VEN_8086&DEV_15FC'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.14393","10.1.21390","10.1.22000","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verifying calls made to NTOSKRNL.EXE', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed on function call to DbgPrintEx in module NTOSKRNL.EXE! This is a debug version of the driver.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80454 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging offerreclaim.dll /name:VidMm::OfferReclaim12::BasicTest'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging offerreclaim.dll /name:VidMm::OfferReclaim12::BasicTest')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80454 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80454, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata WDDM2 - OfferReclaim12 - Basic Test - Display Only Drivers', 'OfferReclaim12 - Basic Test is currently incompatible with display only drivers.', 'In the future this test will not be scheduled to run on display only drivers.', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[
contains(.,''PCI\VEN_102B&DEV_0533'') or 
contains(.,''PCI\VEN_102B&DEV_0538'') or
contains(.,''PCI\VEN_102B&DEV_0532'') or
contains(.,''PCI\VEN_102B&DEV_0536'') or
contains(.,''PCI\VEN_102B&DEV_0522'') or
contains(.,''PCI\VEN_102B&DEV_0534'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'VidMm::OfferReclaim12::BasicTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText', 'SUCCEEDED.m_pStagingSurface..Map.0. nullptr. .pData.. . Value .0x887a0005.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80518 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd /c PowerTestHost.exe%LaunchCompatVM.ps1%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd /c PowerTestHost.exe%LaunchCompatVM.ps1%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80518 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80518, 4, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'WDDM 3.0 Backwards Compat VM test fails on Kepler Devices', 'This waiver should be to mark all failures on Nvidia Kepler GPUs (see attached for DevIDs) as the test will always fail on this architecture due to a test bug. This will be fixed for the next OS release.', 'This will be fixed for the next OS release where the device feature level will be queried first, rather than assuming the hardware supports the feature level.', '2025-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[contains(.,''PCI\VEN_10DE'') and (false  or contains(.,''11b0'') or contains(.,''0FF0'') or contains(.,''1030'') or contains(.,''11A0'') or contains(.,''0FA0'') or contains(.,''0FD4'') or contains(.,''0FD1'') or contains(.,''0FFB'') or contains(.,''0E0D'') or contains(.,''0FD3'') or contains(.,''0FD2'') or contains(.,''11BC'') or contains(.,''11BD'') or contains(.,''11AA'') or contains(.,''11BB'') or contains(.,''11B1'') or contains(.,''11BA'') or contains(.,''0FA7'') or contains(.,''11A4'') or contains(.,''11A3'') or contains(.,''1189'') or contains(.,''11A5'') or contains(.,''11BF'') or contains(.,''118F'') or contains(.,''0FCB'') or contains(.,''0FEF'') or contains(.,''11E2'') or contains(.,''11C3'') or contains(.,''0FD9'') or contains(.,''0FF9'') or contains(.,''12AF'') or contains(.,''119F'') or contains(.,''12B1'') or contains(.,''118B'') or contains(.,''0FE5'') or contains(.,''0FF7'') or contains(.,''12AD'') or contains(.,''12AE'') or contains(.,''12BA'') or contains(.,''0FF6'') or contains(.,''1290'') or contains(.,''1292'') or contains(.,''1004'') or contains(.,''103B'') or contains(.,''1021'') or contains(.,''11D1'') or contains(.,''11FC'') or contains(.,''11A7'') or contains(.,''12A0'') or contains(.,''11B7'') or contains(.,''0FE1'') or contains(.,''0FE7'') or contains(.,''0FF5'') or contains(.,''1291'') or contains(.,''1282'') or contains(.,''1293'') or contains(.,''0FE9'') or contains(.,''0FE8'') or contains(.,''0FEA'') or contains(.,''119D'') or contains(.,''103A'') or contains(.,''0fcd'') or contains(.,''1192'') or contains(.,''1024'') or contains(.,''1023'') or contains(.,''11AC'') or contains(.,''102A'') or contains(.,''102B'') or contains(.,''1284'') or contains(.,''100A'') or contains(.,''118E'') or contains(.,''102c'') or contains(.,''1298'') or contains(.,''1199'') or contains(.,''1193'') or contains(.,''1191'') or contains(.,''1022'') or contains(.,''11C0'') or contains(.,''11C1'') or contains(.,''11D0'') or contains(.,''11D2'') or contains(.,''11E0'') or contains(.,''11E1'') or contains(.,''11C2'') or contains(.,''11B8'') or contains(.,''0FE3'') or contains(.,''12B9'') or contains(.,''1026'') or contains(.,''1001'') or contains(.,''1027'') or contains(.,''100B'') or contains(.,''11C8'') or contains(.,''102F'') or contains(.,''11B4'') or contains(.,''1195'') or contains(.,''11af'') or contains(.,''0FC8'') or contains(.,''0FF3'') or contains(.,''103F'') or contains(.,''0FED'') or contains(.,''1294'') or contains(.,''0FEC'') or contains(.,''1194'') or contains(.,''0FC9'') or contains(.,''119E'') or contains(.,''1295'') or contains(.,''101E'') or contains(.,''1296'') or contains(.,''1029'') or contains(.,''1198'') or contains(.,''1289'') or contains(.,''102D'') or contains(.,''11ad'') or contains(.,''0fd6'') or contains(.,''0fd7'') or contains(.,''0FC0'') or contains(.,''0FC1'') or contains(.,''0FC2'') or contains(.,''0FC4'') or contains(.,''0FDD'') or contains(.,''0FDE'') or contains(.,''0FD0'') or contains(.,''11F0'') or contains(.,''0CE0'') or contains(.,''11A1'') or contains(.,''11BE'') or contains(.,''0FFC'') or contains(.,''1180'') or contains(.,''1183'') or contains(.,''0E16'') or contains(.,''0FDC'') or contains(.,''0FD5'') or contains(.,''0FFD'') or contains(.,''0FC6'') or contains(.,''0FD8'') or contains(.,''0FDA'') or contains(.,''0FDB'') or contains(.,''0FDF'') or contains(.,''0FFA'') or contains(.,''0FFE'') or contains(.,''0FFF'') or contains(.,''0FE0'') or contains(.,''0FC7'') or contains(.,''1182'') or contains(.,''0FCA'') or contains(.,''12B0'') or contains(.,''1188'') or contains(.,''0FCF'') or contains(.,''11A2'') or contains(.,''0FCE'') or contains(.,''11F8'') or contains(.,''0FF1'') or contains(.,''1020'') or contains(.,''1003'') or contains(.,''1187'') or contains(.,''1185'') or contains(.,''11C4'') or contains(.,''11FA'') or contains(.,''0FF8'') or contains(.,''0FF2'') or contains(.,''118A'') or contains(.,''11B6'') or contains(.,''0FE2'') or contains(.,''0FE4'') or contains(.,''118C'') or contains(.,''118D'') or contains(.,''1028'') or contains(.,''0FE6'') or contains(.,''11C6'') or contains(.,''1280'') or contains(.,''11D3'') or contains(.,''101F'') or contains(.,''0FC5'') or contains(.,''1281'') or contains(.,''11E3'') or contains(.,''1283'') or contains(.,''1285'') or contains(.,''11FF'') or contains(.,''1184'') or contains(.,''1005'') or contains(.,''119a'') or contains(.,''100C'') or contains(.,''1286'') or contains(.,''102E'') or contains(.,''11C5'') or contains(.,''103C'') or contains(.,''11ae'') or contains(.,''1287'') or contains(.,''1288'') or contains(.,''1007'') or contains(.,''1008'') or contains(.,''1299'') or contains(.,''129A'') or contains(.,''0FCC'') or contains(.,''11CB'') or contains(.,''129B'') or contains(.,''0FEE'') or contains(.,''128A'') or contains(.,''128B'') or contains(.,''1297'') or contains(.,''11C7'') or contains(.,''1381'') or contains(.,''13BB'') or contains(.,''13B2'') or contains(.,''1382'') or contains(.,''13B9'') or contains(.,''134E'') or contains(.,''139D'') or contains(.,''179C'') or contains(.,''1380'') or contains(.,''13BC'') or contains(.,''13B4'') or contains(.,''13B6'') or contains(.,''139A'') or contains(.,''13B0'') or contains(.,''13BA'') or contains(.,''139B'') or contains(.,''13B1'') or contains(.,''134D'') or contains(.,''137B''))])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80522 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe /enablewttlogging /appendwttlogging MapDefaultTexture.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe /enablewttlogging /appendwttlogging MapDefaultTexture.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80522 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80522, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM2 - Map Default Texture - Device-dependent layout test failing running on GA/TU + 20H2 + BFM coverage', 'NVIDIA reported some test failures when running d3d11 MapDefaultTexture HLK tests, it turns out that this is a runtime bug in d3d11. Errata is needed for Iron and Vibranium.', 'The d3d11 runtime bug that caused this issue has been fixed.', '2025-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CMapDefaultResourceLayoutTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80596 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% npctest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% npctest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80596 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80596, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[HLK] Clock Interrupt test Fails on Cobalt due to NtSetTimerResolution/NtQueryTimerResolution return value', 'This test is currently failing due to NtSetTimerResolution and NtQueryTimerResolution returning slightly different timer resolutions.', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NpcTest::NpcTests::ClockIntTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndError', 'NtSetTimerResolution indicated that the current timer resolution is .* but NtQueryTimerResolution indicated that the current timer resolution is', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndError', 'Explicitly setting previously discovered timer resolution.* via NtSetTimerResolution resulted in an unexpected change in timer resolution to.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80830 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe IovSystemTests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe IovSystemTests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80830 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80830, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: System Logo: Verify IOMMU presence and configuration: Run IommuTestAcpiTableValidationIOAPICs fails; WS22 HLK build 20329 passes same test/sub-tests', 'Some platforms expose both old and new data struct at the same time to describe a single IOMMU, which causes the same IOMMU would be enumerated twice in the IOMMU test. ', 'This is an acceptable test failure', '2023-05-19T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <=22350])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'IovSystemTests::IovSystemTests::IommuTestAcpiTableValidateIOAPICs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Vendor: AMD', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Duplicate entry found for IOAPIC ID', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-19T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 80905 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::HwFlipQueue'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash configurableworkloadtest.dll /name:VidMm::ConfigurableWorkloadTest::HwFlipQueue')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 80905 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(80905, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TestHwFlipQueue has failure "Failure: expected Present 20 Present:20, Refresh:13"', 'TestHwFlipQueue has a bug that runs it on WDDM 3.0 devices that don''t support hardware flip queue feature. We are unable to fix the test bug in Cobalt OS release, so we need to grant the waiver to all WDDM 3.0 Graphics IHVs.', 'Error will be filtered until we have a fixed test in Nickel.', '2025-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VidMm::ConfigurableWorkloadTest::HwFlipQueue', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81322 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81322 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81322, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK2.1 Errata:[NDISTest] NDISTest 6.5 - [2 Machine] - Stats should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'NDISTest 6.5 - [2 Machine] - Stats should not require an NDIS 6.0 miniport to implement obsolete OIDs.', 'This is an acceptable failure for verified devices.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_1D0F&DEV_0EC2") or contains(.,"PCI\VEN_1D0F&DEV_0EC2")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["8.100.9600"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Determine Test Parameters', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Unable to query OID_GEN_MAXIMUM_SEND_PACKETS on support adapter\. NT_STATUS \(0xC00000BB\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81479 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'D3D10MiscDevice.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('D3D10MiscDevice.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81479 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81479, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '"VM WGF Create Device" test fails for Nvidia Adapters', 'Virtualized Nvidia adapters fail to create a device.', 'This will be fixed in the next release.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/GraphicsInfo/@HostGpuHardwareId[contains(.,''PCI\VEN_10DE'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb OneCore","Windows v10.0 Client x86 Vb OneCoreUAP","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb OneCore","Windows v10.0 Client x64 Vb OneCoreUAP","Windows v10.0 Client x64 Vb Full","Windows v10.0 Server x64 Vb OneCore","Windows v10.0 Server x64 Vb OneCoreUAP","Windows v10.0 Server x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb OneCore","Windows v10.0 Client ARM64 Vb OneCoreUAP","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server ARM64 Vb OneCore","Windows v10.0 Server ARM64 Vb OneCoreUAP","Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Client x86 Mn OneCore","Windows v10.0 Client x86 Mn OneCoreUAP","Windows v10.0 Client x86 Mn Full","Windows v10.0 Client x64 Mn OneCore","Windows v10.0 Client x64 Mn OneCoreUAP","Windows v10.0 Client x64 Mn Full","Windows v10.0 Server x64 Mn OneCore","Windows v10.0 Server x64 Mn OneCoreUAP","Windows v10.0 Server x64 Mn Full","Windows v10.0 Client ARM Mn OneCore","Windows v10.0 Client ARM Mn OneCoreUAP","Windows v10.0 Client ARM64 Mn OneCore","Windows v10.0 Client ARM64 Mn OneCoreUAP","Windows v10.0 Client ARM64 Mn Full","Windows v10.0 Server ARM64 Mn OneCore","Windows v10.0 Server ARM64 Mn OneCoreUAP","Windows v10.0 Server ARM64 Mn Full","Windows v10.0 Client x86 Fe OneCore","Windows v10.0 Client x86 Fe OneCoreUAP","Windows v10.0 Client x86 Fe Full","Windows v10.0 Client x64 Fe OneCore","Windows v10.0 Client x64 Fe OneCoreUAP","Windows v10.0 Client x64 Fe Full","Windows v10.0 Server x64 Fe OneCore","Windows v10.0 Server x64 Fe OneCoreUAP","Windows v10.0 Server x64 Fe Full","Windows v10.0 Client ARM Fe OneCore","Windows v10.0 Client ARM Fe OneCoreUAP","Windows v10.0 Client ARM64 Fe OneCore","Windows v10.0 Client ARM64 Fe OneCoreUAP","Windows v10.0 Client ARM64 Fe Full","Windows v10.0 Server ARM64 Fe OneCore","Windows v10.0 Server ARM64 Fe OneCoreUAP","Windows v10.0 Server ARM64 Fe Full","Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Result=Fail', 'CreateDevice', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81480 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'MinimumDisplaySpec.exe -logname edidcheck.wtl -EdidCheck%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('MinimumDisplaySpec.exe -logname edidcheck.wtl -EdidCheck%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81480 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81480, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Delayed Enforcement Errata: Verify VESA and CEA required Display modes Test failure on Windows Server 2022', 'The HLK-Verify VESA and CEA required display modes is not a reasonable test case for Server. The server is usually not directly connected to the display and has only a very low level onboard VGA,', 'This is an acceptable failure', '2026-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81481 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%tpmksp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%tpmksp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81481 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81481, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Platform Crypto Provider Test - KeyAttestationTest 28 & 29', 'This test is expected to fail.', 'Fixed in the next Windows kit release.', '2023-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM Co Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server x64 Co Full","Windows v10.0 Server ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpAttTest::KeyAttestationTest#28', 'TAEF_Test::PcpAttTest::KeyAttestationTest#28', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, static_cast.HRESULT..VerifyClaimExpectResult.. - Values .0x0, 0x80070057.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpAttTest::KeyAttestationTest#29', 'TAEF_Test::PcpAttTest::KeyAttestationTest#29', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, static_cast.HRESULT..VerifyClaimExpectResult.. - Values .0x0, 0x80070057.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81622 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% usb4tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% usb4tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81622 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81622, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB4 SW CM HLK tests not applicable to Intel TGL FW CM systems', 'USB4 SW CM tests are not applicable to FW CM (Firmware Connection Manager) systems', 'The USB4 SW CM (Software Connection Manager) tests and requirements apply to SW CM based systems starting with the Windows October 2021 release. ', '2023-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086&DEV_9A1B") or contains(.,''PCI\VEN_8086&DEV_9A1D'') or contains(.,''PCI\VEN_8086&DEV_9A1F'') or contains(.,''PCI\VEN_8086&DEV_9A21'') or contains(.,''PCI\VEN_8086&DEV_1134'') or contains(.,''PCI\VEN_8086&DEV_1137'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error=Systems with USB4 host routers are expected to use the inbox Windows software connection manager driver', 'Systems with USB4 host routers are expected to use the inbox Windows software connection manager driver', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Usb4Tests::Usb4Tests::ValidateSystemMicrosoftUsbStack', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error=Requested device interfaces are not found on the system.', 'Requested device interfaces are not found on the system.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error=There are no virtual power PDO interfaces available to test on', 'There are no virtual power PDO interfaces available to test on', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error=Setup fixture ''Usb4Tests::Usb4Tests', 'Setup fixture ''Usb4Tests::Usb4Tests::TestClassSetup'' for the scope ''Usb4Tests::Usb4Tests'' failed.', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Usb4Tests::Usb4Tests::GraphicsDriverSupportsUSB4', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81734 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ndisstudiotesthost.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ndisstudiotesthost.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81734 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81734, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Network Adapter hardware timestamp PtpV2OverUdpIPv4EventMsgTransmitHW/PtpV2OverUdpIPv4EventMsgReceiveHW test failures', 'HLK Errata: Network Adapter hardware timestamp PtpV2OverUdpIPv4EventMsgTransmitHW/PtpV2OverUdpIPv4EventMsgReceiveHW test failures', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1077&DEV_8070'') or contains(.,''QEBDRV\L2ND&PCI_80701077'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdisStudioTestHost::HardwareTimeStamp::VerificationHardwareTimeStamp_PtpV2OverUdpIPv4EventMsgTransmitHw', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreEqual\(\(DWORD\)WAIT_OBJECT_0, waitReturn\): The capture Nbl Rx timestamp has finished within the 2 seconds - Values \(0, 258\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'NdisStudioTestHost::HardwareTimeStamp::VerificationHardwareTimeStamp_PtpV2OverUdpIPv4EventMsgReceiveHw', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreEqual\(\(DWORD\)WAIT_OBJECT_0, waitReturn\): The capture Nbl Rx timestamp has finished within the 2 seconds - Values \(0, 258\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81819 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81819 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81819, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Registration, Metadata Test fails due to removal of SetupAPI.dll redirect', 'Camera Driver Registration, Metadata Test fails due to removal of SetupAPI.dll redirect, the test cannot determine what binaries are part of the device and fail', 'Errata issued, Test updated', '2025-10-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 CO Full","Windows v10.0 Client ARM CO Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=.*Test Failed', 'ERROR. Could not get driver files', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=.*', 'No More Cameras', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Test Failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'End', 'DEVPKEY.*Camera', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81820 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% camerabasics.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81820 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81820, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Sensor Orientation fails due to incorrect API call', 'Test was only checking for PLD on DeviceInterface, not Device node. For certain cameras this was working, on others it did not.', 'Test fixed to check both locations, errata issued', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 CO Full","Windows v10.0 Client ARM CO Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=SUCCEEDED.*PhysicalDeviceLocation.*80070490', 'SUCCEEDED.*EnumeratorName', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81869 v9.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81869 AND Version = 9
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81869, 9, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Delayed Enforcement Errata: short term solution proposed removal of DFx support from Intel driver, to avoid BSODs in framework', 'Delayed Enforcement Errata: short term solution proposed removal of DFx support from Intel driver, to avoid BSODs in framework', 'This is an acceptable failure', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''Intel\(R\) Smart Sound Technology \(Intel\(R\) SST\) Audio Controller', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''Intel\(R\) Smart Sound Technology BUS', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''Intel® Smart Sound Technology', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''SoundWire Bus', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81975 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%tpm20keyattestationtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%tpm20keyattestationtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81975 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81975, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Key Attestation Test - Large RSA Export Blob', 'Static sized claim blob is too small.', 'Fixed in the next Windows kit release.', '2024-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server x64 Vb Full","Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Server ARM64 Fe Full","Windows v10.0 Server ARM64 RS5 Full","Windows v10.0 Server x64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Tpm20KeyAttestationTest::KeyAttestationTest#10', 'Tpm20KeyAttestationTest::KeyAttestationTest#10', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'TPM Information: NTC - 7\.2\.3\.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, static_cast.HRESULT..CreateClaimExpectResult.. - Values .0x80070057, 0x0.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, CreateClaimExpectResult. - Values .0x80070057, 0.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Tpm20KeyAttestationTest::KeyAttestationTest#11', 'Tpm20KeyAttestationTest::KeyAttestationTest#11', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'TPM Information: NTC - 7\.2\.3\.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, static_cast.HRESULT..CreateClaimExpectResult.. - Values .0x80070057, 0x0.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, CreateClaimExpectResult. - Values .0x80070057, 0.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Tpm20KeyAttestationTest::KeyAttestationTest#17', 'Tpm20KeyAttestationTest::KeyAttestationTest#17', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'TPM Information: NTC - 7\.2\.3\.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, static_cast.HRESULT..CreateClaimExpectResult.. - Values .0x80070057, 0x0.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.hr, CreateClaimExpectResult. - Values .0x80070057, 0.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 81998 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 81998 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(81998, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3D12 - DXIL Core Test - Shader Model 6.6 - Helper Lanes in Wave Operations', 'The test assumes active lanes in vertex shaders have sequential indexes. Contrary to compute or pixel shaders the layout of lanes in vertex shaders was not defined in a spec and therefore the tests cannot rely on any particular layout. A conforming implementation could, in the extreme case, decide to dispatch three waves that each process only a single vertex. The tests must be changed to accommodate that. ', 'Error will be filtered until the test is fixed to not rely on any particual lane layout for vertex shaders.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::HelperLaneTest*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82067 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'StorFirmware -hbatest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('StorFirmware -hbatest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82067 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82067, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Storage HBA Firmware Update for Virtual Miniport', 'HLK Errata: Storage HBA Firmware Update for Virtual Miniport', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//ImagePath[contains(.,''DcsSpm.sys'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.14393"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Get device detail information', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Cannot open handle for the device.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Get firmware information by issuing IOCTL_STORAGE_FIRMWARE_GET_INFO.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Get Firmware Information - IOCTL_STORAGE_FIRMWARE_GET_INFO Failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82253 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82253 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82253, 3, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: WLAN Association Tests - OPEN_WPA2_AES failed due to mishandling of EAP M1 after resume from hibernate', 'HLK AutoTriage: WLAN Association Tests - OPEN_WPA2_AES failed due to mishandling of EAP M1 after resume from hibernate', 'Updated private binary nwifi.sys available. To obtain the binary please contact CSS and reference this Errata ID 82253', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HlkTest.AssociationTests.AssociationTests.Associate_OPEN_WPA2_AES', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Exception from HRESULT: 0x8007139F', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82264 v16.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%verifytpmexists.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%verifytpmexists.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82264 AND Version = 16
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82264, 16, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '21H2 Approved TPMs Filter', 'TPMs are expected to meet requirements for n-1 kit.', 'Meet the published TPM device requirements.', '2024-10-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 3\..*\.2.4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 3\..*\.2.5', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 6\..*\..*\.6', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 15\.20\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 15\.21\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 15\.22\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 16\.10\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 17\.10\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 600\.7\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'INTC - 600\.18\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTC - 7\.2\.2\.0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTC - 7\.2\.3\.0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTZ - 7\.55\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'QCOM - 3\.6\.0\.2', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'QCOM - 3\.7\.0\.0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 1\.258\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 1\.512\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'MSFT - 6\.3\.1\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTC - 7\.2\.3\.1', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 3\..*\.0\.4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 3\..*\.0\.5', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 16\.12\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IFX - 17\.12\.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82265 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe  /inproc EffectsDiscoveryCPPTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe  /inproc EffectsDiscoveryCPPTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82265 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82265, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio EffectsDiscovery with Spatial False Failure', 'Having spatial set for this test will cause a VirtualHeadphones to be added to the Raw pin, which isn''t allowed in the test, but is valid code in the OS for Spatial only.', 'An errata is created to exempt the spatial audio failure associated with VirtualHeadpones type.', '2031-06-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'In Raw mode effects list contains an enhancement of unacceptable type: VirtualHeadphones', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'In Raw mode effects list contains an enhancement of unacceptable type: VirtualSurround', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-06-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82334 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestValidateVariablePhotoSequenceFrameMetadata'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestValidateVariablePhotoSequenceFrameMetadata')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82334 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82334, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - MediaCapture - TestValidateVariablePhotoSequenceFrameMetadata fails for ExposureValues', 'Camera Driver System Test - MediaCapture - TestValidateVariablePhotoSequenceFrameMetadata doesn''t check global/local correctly in the test, leading to always failing.', 'Errata Issued, Test Updated.', '2023-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*', 'FallBackToGlobalSettings.*Exposure.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*ExposureCompensation.*', '.*Frame.*ExposureTime Expected.*DOES NOT.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82339 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%tpmksp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%tpmksp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82339 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82339, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Platform Crypto Provider Test - Large RSA Export Blob', 'Static sized claim blob is too small.', 'Fixed in the next Windows kit release.', '2024-10-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server x64 Vb Full","Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Server ARM64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TAEF_Test::PcpRsaTest::Cleanup', 'TAEF_Test::PcpRsaTest::Startup', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::KspProviderCreateClaimTest', 'TAEF_Test::PcpRsaTest::KspProviderCreateClaimTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptCreateClaim.KEY, NCRYPT_CLAIM_AUTHORITY_AND_SUBJECT. - Value .0x80070057.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::AutomaticKeyAttestationTest', 'TAEF_Test::PcpRsaTest::AutomaticKeyAttestationTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptExportKey.. - Value .0x80290406.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::KeyExportTest', 'TAEF_Test::PcpRsaTest::KeyExportTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptExportKey.. - Value .0x80290406.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TAEF_Test::PcpEccTest::Cleanup', 'TAEF_Test::PcpEccTest::Startup', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpEccTest::AutomaticKeyAttestationTest', 'TAEF_Test::PcpEccTest::AutomaticKeyAttestationTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptExportKey.. - Value .0x80290406.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpAttTest::KeyAttestationTest#16', 'TAEF_Test::PcpAttTest::KeyAttestationTest#16', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'TPM Information: NTC - 7\.2\.3\.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpAttTest::KeyAttestationTest#17', 'TAEF_Test::PcpAttTest::KeyAttestationTest#17', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'TPM Information: NTC - 7\.2\.3\.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpAttTest::KeyAttestationTest#23', 'TAEF_Test::PcpAttTest::KeyAttestationTest#23', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!EndTest', 'TPM Information: NTC - 7\.2\.3\.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=TAEF_Test::PcpKspTest::Cleanup', 'TAEF_Test::PcpKspTest::Startup', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpKspTest::HMKDExportKspImportTest', 'TAEF_Test::PcpKspTest::HMKDExportKspImportTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.result = NCryptExportKey.hStorageKey, NULL, BCRYPT_OPAQUE_KEY_BLOB, NULL, pabStorageKeyBlob, sizeof.pabStorageKeyBlob., .cbStorageKeyBlob, 0.. - Value .0x80290406.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82341 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%tpmksp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%tpmksp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82341 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82341, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Platform Crypto Provider Test - RSA 1024 Support', 'Test imports unsupported RSA1024 key.', 'Fixed in the next Windows kit release.', '2024-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client ARM Vb OneCore","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Server x64 Vb Full","Windows v10.0 Server ARM64 Vb Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Server ARM64 Fe Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Server ARM64 RS5 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#0$', 'TAEF_Test::NCryptSignHashTest::KeyTest#0$', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#0', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#1$', 'TAEF_Test::NCryptSignHashTest::KeyTest#1$', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#1', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#2', 'TAEF_Test::NCryptSignHashTest::KeyTest#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#2', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#3', 'TAEF_Test::NCryptSignHashTest::KeyTest#3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#3', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=tpmksp::NCryptSignHashTest::KeyTest#2', 'tpmksp::NCryptSignHashTest::KeyTest#2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=tpmksp::NCryptSignHashTest::KeyTest#2', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey, 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=tpmksp::NCryptSignHashTest::KeyTest#3', 'tpmksp::NCryptSignHashTest::KeyTest#3', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=tpmksp::NCryptSignHashTest::KeyTest#3', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey, 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#4', 'TAEF_Test::NCryptSignHashTest::KeyTest#4', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#4', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#5', 'TAEF_Test::NCryptSignHashTest::KeyTest#5', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#5', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#6', 'TAEF_Test::NCryptSignHashTest::KeyTest#6', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#6', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#7', 'TAEF_Test::NCryptSignHashTest::KeyTest#7', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#7', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#8', 'TAEF_Test::NCryptSignHashTest::KeyTest#8', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#8', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#9', 'TAEF_Test::NCryptSignHashTest::KeyTest#9', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#9', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#10', 'TAEF_Test::NCryptSignHashTest::KeyTest#10', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#10', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#11', 'TAEF_Test::NCryptSignHashTest::KeyTest#11', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::NCryptSignHashTest::KeyTest#11', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey.get.., 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::GenerateEphemeralKeysTest', 'TAEF_Test::PcpRsaTest::GenerateEphemeralKeysTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.lengths.dwMinLength, 1024UL.: lengths.dwMinLength == 1024 - Values .2048, 1024.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::GenerateNamedKeysTest', 'TAEF_Test::PcpRsaTest::GenerateNamedKeysTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.lengths.dwMinLength, 1024UL.: lengths.dwMinLength == 1024 - Values .2048, 1024.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::GenerateNamedMachineKeysTest', 'TAEF_Test::PcpRsaTest::GenerateNamedMachineKeysTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.lengths.dwMinLength, 1024UL.: lengths.dwMinLength == 1024 - Values .2048, 1024.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::AutomaticKeyAttestationTest', 'TAEF_Test::PcpRsaTest::AutomaticKeyAttestationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::PcpRsaTest::AutomaticKeyAttestationTest', 'Creating Key TestKey-1024Bit with 1024 bits.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::EncryptDecryptTest', 'TAEF_Test::PcpRsaTest::EncryptDecryptTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::PcpRsaTest::EncryptDecryptTest', 'Creating Key TestKey-1024Bit with 1024 bits.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::SignValidateTest', 'TAEF_Test::PcpRsaTest::SignValidateTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TAEF_Test::PcpRsaTest::SignValidateTest', 'Creating Key TestKey-1024Bit with 1024 bits.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::SignPSSTest', 'TAEF_Test::PcpRsaTest::SignPSSTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.keyHandle, 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::KeyImportTest', 'TAEF_Test::PcpRsaTest::KeyImportTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::KeyExportTest', 'TAEF_Test::PcpRsaTest::KeyExportTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::UsageAuthTest', 'TAEF_Test::PcpRsaTest::UsageAuthTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::PolicyBoundKeyWithHmac', 'TAEF_Test::PcpRsaTest::PolicyBoundKeyWithHmac', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::RawPolicyCreateKeyTest', 'TAEF_Test::PcpRsaTest::RawPolicyCreateKeyTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::RawPolicyImportKeyTest', 'TAEF_Test::PcpRsaTest::RawPolicyImportKeyTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.CreateGeneralKey.m_hProv\.get.., .hRsaKey, NCRYPT_RSA_ALGORITHM, keyNameImport, properties, NCRYPT_OVERWRITE_KEY_FLAG, NCRYPT_SILENT_FLAG.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::RawPolicyHandlesSignTest', 'TAEF_Test::PcpRsaTest::RawPolicyHandlesSignTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: CreateGeneralRSAKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TAEF_Test::PcpRsaTest::RenameKeyTest', 'TAEF_Test::PcpRsaTest::RenameKeyTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.hr.: NCryptFinalizeKey.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=tpmksp::NCryptSignHashTest::KeyTest#.*', 'tpmksp::NCryptSignHashTest::KeyTest#.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=tpmksp::NCryptSignHashTest::KeyTest#.*', 'Generate Key Length: 1024', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SUCCEEDED.NCryptFinalizeKey.hRealKey, 0.. - Value .0x80280084.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82567 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /script:{[TestScript]}'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest\bin\ndtest.exe /auto /client /dvi /u /target:Miniport /tc:[queryTestDeviceID] /script:{[TestScript]}')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82567 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82567, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.0 - [1 Machine] - , Supported list does not contain required Oid', 'HLK Errata: NDISTest 6.0 - [1 Machine] - 1c_IOCTLCoverage test for NetAdapterCx driver, Supported list does not contain required Oid', 'This is an acceptable failure', '2024-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_15F3'') or contains(.,''PCI\VEN_10EC&DEV_8168'') or contains(.,''PCI\VEN_10EC&DEV_8136'') or contains(.,''PCI\VEN_10EC&DEV_8125'') or contains(.,''PCI\VEN_10EC&DEV_8225'') or contains(.,''PCI\VEN_10EC&DEV_8162'') or contains(.,''USB\VID_0BDA&PID_8050'') or contains(.,''USB\VID_0BDA&PID_8152'') or contains(.,''USB\VID_0BDA&PID_8153'') or contains(.,''USB\VID_0BDA&PID_8155'') or contains(.,''USB\VID_0BDA&PID_8156'') or contains(.,''USB\VID_0BDA&PID_8157'') or contains(.,''USB\VID_0BDA&PID_A157'') or contains(.,''USB\VID_0BDA&PID_A15A'') or contains(.,''USB\VID_0BDA&PID_815A'') or
contains(.,''USB\VID_2717&PID_0011'') or contains(.,''USB\VID_2B73&PID_0007'') or contains(.,''USB\VID_050D&PID_047A'') or contains(.,''USB\VID_043E&PID_9820'') or 
contains(.,''USB\VID_2357&PID_0602'') or contains(.,''USB\VID_2357&PID_0603'') or contains(.,''USB\VID_045E&PID_07AB'') or contains(.,''USB\VID_056E&PID_4013'') or 
contains(.,''USB\VID_056E&PID_9013'') or contains(.,''USB\VID_2B73&PID_0031'') or contains(.,''USB\VID_050D&PID_048A'') or contains(.,''USB\VID_043E&PID_9819'') or 
contains(.,''USB\VID_2357&PID_0601'') or contains(.,''USB\VID_2357&PID_0604'') or contains(.,''USB\VID_2001&PID_7E34'') or contains(.,''USB\VID_2001&PID_A710'') or 
contains(.,''USB\VID_17EF&PID_304F'') or contains(.,''USB\VID_17EF&PID_7205'') or contains(.,''USB\VID_17EF&PID_3502'') or contains(.,''USB\VID_17EF&PID_720A'') or 
contains(.,''USB\VID_17EF&PID_720C'') or contains(.,''USB\VID_17EF&PID_3054'') or contains(.,''USB\VID_17EF&PID_3052'') or contains(.,''USB\VID_17EF&PID_3057'') or
contains(.,''USB\VID_17EF&PID_3062'') or contains(.,''USB\VID_17EF&PID_3069'') or contains(.,''USB\VID_17EF&PID_7214'') or contains(.,''USB\VID_17EF&PID_3065'') or
contains(.,''USB\VID_17EF&PID_A359'') or contains(.,''USB\VID_17EF&PID_3082'') or contains(.,''USB\VID_17EF&PID_721E'') or contains(.,''USB\VID_17EF&PID_A387'') or
contains(.,''USB\VID_17EF&PID_3098'') or contains(.,''USB\VID_17EF&PID_A3C1'') or contains(.,''USB\VID_17EF&PID_8153'') or contains(.,''USB\VID_17EF&PID_309B'') or
contains(.,''USB\VID_17EF&PID_309C'') or contains(.,''USB\VID_17EF&PID_309D'') or contains(.,''USB\VID_13B1&PID_0041'') or contains(.,''USB\VID_04E8&PID_A101'') or
contains(.,''USB\VID_1025&PID_104E'') or contains(.,''USB\VID_0F21&PID_8153'') or contains(.,''USB\VID_2D1C&PID_8153'') or contains(.,''USB\VID_208E&PID_D003'') or
contains(.,''USB\VID_0930&PID_0416'') or contains(.,''USB\VID_30F3&PID_0425'') or contains(.,''USB\VID_30F3&PID_0419'') or contains(.,''USB\VID_30DA&PID_5101'') or
contains(.,''USB\VID_14FF&PID_1400'') or contains(.,''USB\VID_17AA&PID_6117'') or contains(.,''USB\VID_045E&PID_07C6'') or contains(.,''USB\VID_045E&PID_0927'') or
contains(.,''USB\VID_045E&PID_09A0'') or contains(.,''USB\VID_310E&PID_0060'') or contains(.,''USB\VID_310E&PID_0061'') or contains(.,''USB\VID_2D01&PID_0030'') or
contains(.,''USB\VID_056E&PID_4017'') or contains(.,''USB\VID_2001&PID_B301'') or contains(.,''USB\VID_0781&PID_CFFE'') or contains(.,''USB\VID_2D01&PID_0031'') or
contains(.,''USB\VID_0B05&PID_18D1'') or contains(.,''USB\VID_0B05&PID_1976'') or contains(.,''USB\VID_20F4&PID_E02B'') or contains(.,''USB\VID_0DF4&PID_0025'') or
contains(.,''USB\VID_1A56&PID_3100'') or contains(.,''USB\VID_310E&PID_0062'') or contains(.,''USB\VID_2D01&PID_0032'') or contains(.,''USB\VID_065F&PID_3200'') or
contains(.,''USB\VID_413C&PID_B097'') or contains(.,''USB\VID_2BAF&PID_0012'') or contains(.,''PCI\VEN_8086&DEV_15FC'') or contains(.,''USB\VID_045E&PID_085C'')  or contains(.,''PCI\VEN_10EC&DEV_8161'') or contains(.,''PCI\VEN_10EC&DEV_8166'') or contains(.,''PCI\VEN_10EC&DEV_2502'') or contains(.,''PCI\VEN_10EC&DEV_2600'') or contains(.,''PCI\VEN_10EC&DEV_3000'') or contains(.,''PCI\VEN_10EC&DEV_5000'') or contains(.,''PCI\VEN_10EC&DEV_8126'') or contains(.,''PCI\VEN_10EC&DEV_A126'') or contains(.,''PCI\VEN_10EC&DEV_8127'') or contains(.,''PCI\VEN_10EC&DEV_A127'') or contains(.,''USB\VID_0B05&PID_65F1'') or contains(.,''USB\VID_045E&PID_0C5E'') or contains(.,''USB\VID_2655&PID_8153'') or contains(.,''USB\VID_2001&PID_B302'') or contains(.,''USB\VID_20F4&PID_E02C'')
])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Check for all required oids', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Supported list does not contain required Oid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking/Querying OIDs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query OID', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking/Querying OIDs', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query all statistics', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying GUID for this adapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Call to WmiQuerySingleInstance failed for the OID', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MAXIMUM_LOOKAHEAD as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MAXIMUM_FRAME_SIZE as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_LINK_SPEED as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_CURRENT_LOOKAHEAD as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_DRIVER_VERSION as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MAXIMUM_TOTAL_SIZE as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MAC_OPTIONS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_CURRENT_PACKET_FILTER as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MEDIA_CONNECT_STATUS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_PERMANENT_ADDRESS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_CURRENT_ADDRESS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_MULTICAST_LIST as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_MAXIMUM_LIST_SIZE as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_RCV_ERROR_ALIGNMENT as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_XMIT_ONE_COLLISION as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_802_3_XMIT_MORE_COLLISIONS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_HARDWARE_STATUS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MEDIA_SUPPORTED as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MEDIA_IN_USE as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Querying OID_GEN_MAXIMUM_SEND_PACKETS as Administrator', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to query error ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82769 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash dxgiconf_hybriddlist.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash dxgiconf_hybriddlist.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82769 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82769, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: DXGI - Hybrid WDDM 3.0 - failure on a driver that is not reporting CASO feature as enabled', 'HLK Errata: DXGI - Hybrid WDDM 3.0 - failure on a driver that is not reporting CASO feature as enabled', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DXGIConf_HybridWDDM30::VerifyHybridIntegratedSupportsCrossAdapterResourceScanout', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(crossAdapterSupport.SupportTier == D3DKMT_CROSSADAPTERRESOURCE_SUPPORT_TIER_SCANOUT\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82771 v7.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest\bin\ndtest.exe /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest\bin\ndtest.exe /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82771 AND Version = 7
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82771, 7, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.0 - [1 Machine] - 2c_OidsNdisRequest', 'HLK Errata: NDISTest 6.0 - [1 Machine] - 1c_IOCTLCoverage test for NetAdapterCx driver, Supported list does not contain required Oid', 'This is an acceptable failure', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_15F3'') or contains(.,''PCI\VEN_10EC&DEV_8168'') or contains(.,''PCI\VEN_10EC&DEV_8136'') or contains(.,''PCI\VEN_10EC&DEV_8125'') or contains(.,''PCI\VEN_10EC&DEV_8225'') or contains(.,''PCI\VEN_10EC&DEV_8162'') or contains(.,''USB\VID_0BDA&PID_8050'') or contains(.,''USB\VID_0BDA&PID_8152'') or contains(.,''USB\VID_0BDA&PID_8153'') or contains(.,''USB\VID_0BDA&PID_8155'') or contains(.,''USB\VID_0BDA&PID_8156'') or contains(.,''USB\VID_0BDA&PID_8157'') or contains(.,''USB\VID_0BDA&PID_A157'') or contains(.,''USB\VID_0BDA&PID_A15A'') or contains(.,''USB\VID_0BDA&PID_815A'') or
contains(.,''USB\VID_2717&PID_0011'') or contains(.,''USB\VID_2B73&PID_0007'') or contains(.,''USB\VID_050D&PID_047A'') or contains(.,''USB\VID_043E&PID_9820'') or 
contains(.,''USB\VID_2357&PID_0602'') or contains(.,''USB\VID_2357&PID_0603'') or contains(.,''USB\VID_045E&PID_07AB'') or contains(.,''USB\VID_056E&PID_4013'') or 
contains(.,''USB\VID_056E&PID_9013'') or contains(.,''USB\VID_2B73&PID_0031'') or contains(.,''USB\VID_050D&PID_048A'') or contains(.,''USB\VID_043E&PID_9819'') or 
contains(.,''USB\VID_2357&PID_0601'') or contains(.,''USB\VID_2357&PID_0604'') or contains(.,''USB\VID_2001&PID_7E34'') or contains(.,''USB\VID_2001&PID_A710'') or 
contains(.,''USB\VID_17EF&PID_304F'') or contains(.,''USB\VID_17EF&PID_7205'') or contains(.,''USB\VID_17EF&PID_3502'') or contains(.,''USB\VID_17EF&PID_720A'') or 
contains(.,''USB\VID_17EF&PID_720C'') or contains(.,''USB\VID_17EF&PID_3054'') or contains(.,''USB\VID_17EF&PID_3052'') or contains(.,''USB\VID_17EF&PID_3057'') or
contains(.,''USB\VID_17EF&PID_3062'') or contains(.,''USB\VID_17EF&PID_3069'') or contains(.,''USB\VID_17EF&PID_7214'') or contains(.,''USB\VID_17EF&PID_3065'') or
contains(.,''USB\VID_17EF&PID_A359'') or contains(.,''USB\VID_17EF&PID_3082'') or contains(.,''USB\VID_17EF&PID_721E'') or contains(.,''USB\VID_17EF&PID_A387'') or
contains(.,''USB\VID_17EF&PID_3098'') or contains(.,''USB\VID_17EF&PID_A3C1'') or contains(.,''USB\VID_17EF&PID_8153'') or contains(.,''USB\VID_17EF&PID_309B'') or
contains(.,''USB\VID_17EF&PID_309C'') or contains(.,''USB\VID_17EF&PID_309D'') or contains(.,''USB\VID_13B1&PID_0041'') or contains(.,''USB\VID_04E8&PID_A101'') or
contains(.,''USB\VID_1025&PID_104E'') or contains(.,''USB\VID_0F21&PID_8153'') or contains(.,''USB\VID_2D1C&PID_8153'') or contains(.,''USB\VID_208E&PID_D003'') or
contains(.,''USB\VID_0930&PID_0416'') or contains(.,''USB\VID_30F3&PID_0425'') or contains(.,''USB\VID_30F3&PID_0419'') or contains(.,''USB\VID_30DA&PID_5101'') or
contains(.,''USB\VID_14FF&PID_1400'') or contains(.,''USB\VID_17AA&PID_6117'') or contains(.,''USB\VID_045E&PID_07C6'') or contains(.,''USB\VID_045E&PID_0927'') or
contains(.,''USB\VID_045E&PID_09A0'') or contains(.,''USB\VID_310E&PID_0060'') or contains(.,''USB\VID_310E&PID_0061'') or contains(.,''USB\VID_2D01&PID_0030'') or
contains(.,''USB\VID_056E&PID_4017'') or contains(.,''USB\VID_2001&PID_B301'') or contains(.,''USB\VID_0781&PID_CFFE'') or contains(.,''USB\VID_2D01&PID_0031'') or
contains(.,''USB\VID_0B05&PID_18D1'') or contains(.,''USB\VID_0B05&PID_1976'') or contains(.,''USB\VID_20F4&PID_E02B'') or contains(.,''USB\VID_0DF4&PID_0025'') or
contains(.,''USB\VID_1A56&PID_3100'') or contains(.,''USB\VID_310E&PID_0062'') or contains(.,''USB\VID_2D01&PID_0032'') or contains(.,''USB\VID_065F&PID_3200'') or
contains(.,''USB\VID_413C&PID_B097'') or contains(.,''USB\VID_2BAF&PID_0012'') or contains(.,''PCI\VEN_8086&DEV_15FC'') or contains(.,''USB\VID_045E&PID_085C'')  or contains(.,''PCI\VEN_10EC&DEV_8161'') or contains(.,''PCI\VEN_10EC&DEV_8166'') or contains(.,''PCI\VEN_10EC&DEV_2502'') or contains(.,''PCI\VEN_10EC&DEV_2600'') or contains(.,''PCI\VEN_10EC&DEV_3000'') or contains(.,''PCI\VEN_10EC&DEV_5000'') or contains(.,''PCI\VEN_10EC&DEV_8126'') or contains(.,''PCI\VEN_10EC&DEV_A126'') or contains(.,''PCI\VEN_10EC&DEV_8127'') or contains(.,''PCI\VEN_10EC&DEV_A127'') or contains(.,''USB\VID_0B05&PID_65F1'') or contains(.,''USB\VID_045E&PID_0C5E'') or contains(.,''USB\VID_2655&PID_8153'') or contains(.,''USB\VID_2001&PID_B302'') or contains(.,''USB\VID_20F4&PID_E02C'')
])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Check for all required oids', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Supported list does not contain required Oid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Checking if OID must be queried', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unable to Unable to query open instance', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82854 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCaptureTests::Controls::TaefMediaCaptureControlTests::TestDigitalWindowControl'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCaptureTests::Controls::TaefMediaCaptureControlTests::TestDigitalWindowControl')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82854 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82854, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, ' Camera Driver System Test - MediaCapture - DigitalWindow Invalid Checks fail.', 'Tests return on exception for API call, should be checked for failure and then continue.', 'Test Fixed, Errata Issued', '2023-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Test skipped hr . 0x80070057', '.*Validating cannot set DigitalWindow out.of.range. max Origin.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 82887 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash drmtest.dll /name:AVQuality::DRMTest::HardwareDRM_AV1Profile0_Video[4 | 5 | 6 | 7]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash drmtest.dll /name:AVQuality::DRMTest::HardwareDRM_AV1Profile0_Video[4 | 5 | 6 | 7]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 82887 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(82887, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WHQL - AV1 Profile0 HW-DRM Video 4-7 - ', 'HLK Errata: WHQL - AV1 Profile0 HW-DRM Video 4-7 - Failure', 'This is an acceptable failure', '2023-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Playback failed with error: c00d36cb', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83108 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash metacommandhlktests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash metacommandhlktests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83108 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83108, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Some DirectML Metacommand tests for Convolution in Cobalt compare their results against a bad shader optimization path that should never be taken', 'Some DirectML Metacommand tests for Convolution in Cobalt compare their results against a bad shader optimization path that should never be taken. As a result of this, the tests crash with no fault from the driver.', 'If IHV''s see the error message "8007007A The data area passed to a system call is too small.", they can apply this errata.', '2029-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!End', '8007007A The data area passed to a system call is too small.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2029-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83111 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging metacommandhlktests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging metacommandhlktests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83111 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83111, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Some DirectML Metacommand tests in Cobalt crash because of debug layer warnings', 'New debug layer warnings were added in D3D12 in Cobalt that make the DirectML MetaCommand tests crash with no fault from the driver.', 'If IHV''s see the error message "(A crash with exception code 0x0000087A occurred in module "KERNELBASE.dll" in the process hosting the test code while invoking a test operation.)", they can apply this errata.', '2030-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!End', '(A crash with exception code 0x0000087A occurred in module "KERNELBASE.dll" in the process hosting the test code while invoking a test operation.)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83295 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspostst%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspostst%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83295 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83295, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[Test errata] KS Pos. test fails to enumerate unified Bluetooth devices', 'Due to a test issue, KS Position test fails to enumerate some Bluetooth devices.', 'This filter overtuns the failure.', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/Image[contains(.,"bthhfenum.sys")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', 'IsTrue\(bFormatInList\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*GetPreferredFormatPeriodicityCharacteristicsForConnector.*\(0x80070490\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*AddTestResourceForConnector.*\(0x80070490\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*AddTestResourcesForDevice.*\(0x80070490\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83297 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%name:PowerManagement::ModernStandby::BasicRequirementTestOn%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%name:PowerManagement::ModernStandby::BasicRequirementTestOn%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83297 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83297, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Discrete GPUs failing Modern Standby Basic Requirement Test on AC/DC test', 'This is not a requirement for dGPUs and shouldn''t be enforced for any Discrete GPUs. See below for more info:

https://docs.microsoft.com/en-us/windows-hardware/design/device-experiences/modern-standby-graphics', 'This test can be fixed for the next release.', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")] or //Device[starts-with(@HardwareID,"PCI\VEN_1002")] or //Devnode[contains(.,''PCI\VEN_8086&DEV_46A6'')] or //Devnode[contains(.,''PCI\VEN_8086&DEV_5694'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=PowerManagement::ModernStandby::BasicRequirementTestOn*', 'PowerManagement::ModernStandby::BasicRequirementTestOn*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsLessThanOrEqual\(Summary.ExitLatencyInMs, m_ModernStandbyExitLatencyThreshold\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83371 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83371 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83371, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[Test errata] Wave test fails to enumerate unified Bluetooth devices', 'Due to a test issue, Wave test fails to enumerate some Bluetooth devices.', 'This filter overtuns the failure.', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DRIVERS_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DRIVERS_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Driver/Image[contains(.,"bthhfenum.sys")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', 'IsTrue\(bFormatInList\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*GetPreferredFormatPeriodicityCharacteristicsForConnector.*\(0x80070490\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*AddTestResourceForConnector.*\(0x80070490\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*AddTestResourcesForDevice.*\(0x80070490\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83472 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83472 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83472, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3D12 - DXIL Core Test -  Atomics (32-bit integer) test failing ', ' Mesh shader groupshared initialization and read were asymmetric, resulting in read of uninitialized data. The uninitialized data caused nondeterministic behaviour, so it would sometimes pass. It passes consistently with the fix.', 'Error will be filtered until the test is fixed to consistently initialize the groupshared values', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::AtomicsTest', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83523 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%name:FeatureCheck::SelfRefreshSupport%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%name:FeatureCheck::SelfRefreshSupport%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83523 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83523, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Self Refresh Supported Test failure', 'The Self Refresh Supported Test fails on Qualcomm GPUs due to a bug in the test. For AMD, they have discrete GPUs that use non Self-Refresh VRAM on Modern Standby systems so this test will always fail for that configuration. ', 'The Qualcomm bug will be fixed in the next release. The AMD issue is by design and we encourage all IHV partners to consider using Self-Refresh VRAM.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device[starts-with(@HardwareID,"ACPI\VEN_QCOM")] or //Device[starts-with(@HardwareID,"PCI\VEN_1002")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >=20348] and RUNTIME_BLOCK/BuildNumber[number(.) <=22000])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'FeatureCheck::SelfRefreshSupport', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(AdapterCaps\.SelfRefreshMemorySupported\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83590 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83590 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83590, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Conservative rasterization tests OuterCoverageTier2 and InnerCoverageConformance have test bugs', 'The tests OuterCoverageTier2 and InnerCoverageConformance use geometry which are in a very slightly incorrect location, making it possible for a valid implementation to produce a coverage result which is rejected by the tests.', 'The two tests have been updated to put their geometry in the right spot.', '2023-07-13T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OuterCoverageTier2', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Verify the implementation correctly rendered the expected number of pixels as that in the Spec', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'InnerCoverageConformance', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Inner Coverage incorrect on pixel', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-13T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83592 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[WTTRunWorkingDir]\ndistest.net\ndistest.exe /logo /auto /client /target:Miniport /tc:[queryTestDeviceID] /support:[SupportDeviceGuid0] /msg:[ClientMessageDeviceGuid] /jobs:[TestScript]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83592 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83592, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [2 Machine] - PM_WakeOnLinkChange', 'HLK Errata: NDISTest 6.5 - [2 Machine] - PM_WakeOnLinkChange test for NetAdapterCx driver, Supported list does not contain required Oid', 'This is an acceptable failure', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_15F3'') or contains(.,''PCI\VEN_10EC&DEV_8168'') or contains(.,''PCI\VEN_10EC&DEV_8136'') or contains(.,''PCI\VEN_10EC&DEV_8125'') or contains(.,''PCI\VEN_10EC&DEV_8225'') or contains(.,''PCI\VEN_10EC&DEV_8162'') or contains(.,''USB\VID_0BDA&PID_8050'') or contains(.,''USB\VID_0BDA&PID_8152'') or contains(.,''USB\VID_0BDA&PID_8153'') or contains(.,''USB\VID_0BDA&PID_8155'') or contains(.,''USB\VID_0BDA&PID_8156'') or contains(.,''USB\VID_0BDA&PID_8157'') or contains(.,''USB\VID_0BDA&PID_A157'') or contains(.,''USB\VID_0BDA&PID_A15A'') or contains(.,''USB\VID_0BDA&PID_815A'') or
contains(.,''USB\VID_2717&PID_0011'') or contains(.,''USB\VID_2B73&PID_0007'') or contains(.,''USB\VID_050D&PID_047A'') or contains(.,''USB\VID_043E&PID_9820'') or 
contains(.,''USB\VID_2357&PID_0602'') or contains(.,''USB\VID_2357&PID_0603'') or contains(.,''USB\VID_045E&PID_07AB'') or contains(.,''USB\VID_056E&PID_4013'') or 
contains(.,''USB\VID_056E&PID_9013'') or contains(.,''USB\VID_2B73&PID_0031'') or contains(.,''USB\VID_050D&PID_048A'') or contains(.,''USB\VID_043E&PID_9819'') or 
contains(.,''USB\VID_2357&PID_0601'') or contains(.,''USB\VID_2357&PID_0604'') or contains(.,''USB\VID_2001&PID_7E34'') or contains(.,''USB\VID_2001&PID_A710'') or 
contains(.,''USB\VID_17EF&PID_304F'') or contains(.,''USB\VID_17EF&PID_7205'') or contains(.,''USB\VID_17EF&PID_3502'') or contains(.,''USB\VID_17EF&PID_720A'') or 
contains(.,''USB\VID_17EF&PID_720C'') or contains(.,''USB\VID_17EF&PID_3054'') or contains(.,''USB\VID_17EF&PID_3052'') or contains(.,''USB\VID_17EF&PID_3057'') or
contains(.,''USB\VID_17EF&PID_3062'') or contains(.,''USB\VID_17EF&PID_3069'') or contains(.,''USB\VID_17EF&PID_7214'') or contains(.,''USB\VID_17EF&PID_3065'') or
contains(.,''USB\VID_17EF&PID_A359'') or contains(.,''USB\VID_17EF&PID_3082'') or contains(.,''USB\VID_17EF&PID_721E'') or contains(.,''USB\VID_17EF&PID_A387'') or
contains(.,''USB\VID_17EF&PID_3098'') or contains(.,''USB\VID_17EF&PID_A3C1'') or contains(.,''USB\VID_17EF&PID_8153'') or contains(.,''USB\VID_17EF&PID_309B'') or
contains(.,''USB\VID_17EF&PID_309C'') or contains(.,''USB\VID_17EF&PID_309D'') or contains(.,''USB\VID_13B1&PID_0041'') or contains(.,''USB\VID_04E8&PID_A101'') or
contains(.,''USB\VID_1025&PID_104E'') or contains(.,''USB\VID_0F21&PID_8153'') or contains(.,''USB\VID_2D1C&PID_8153'') or contains(.,''USB\VID_208E&PID_D003'') or
contains(.,''USB\VID_0930&PID_0416'') or contains(.,''USB\VID_30F3&PID_0425'') or contains(.,''USB\VID_30F3&PID_0419'') or contains(.,''USB\VID_30DA&PID_5101'') or
contains(.,''USB\VID_14FF&PID_1400'') or contains(.,''USB\VID_17AA&PID_6117'') or contains(.,''USB\VID_045E&PID_07C6'') or contains(.,''USB\VID_045E&PID_0927'') or
contains(.,''USB\VID_045E&PID_09A0'') or contains(.,''USB\VID_310E&PID_0060'') or contains(.,''USB\VID_310E&PID_0061'') or contains(.,''USB\VID_2D01&PID_0030'') or
contains(.,''USB\VID_056E&PID_4017'') or contains(.,''USB\VID_2001&PID_B301'') or contains(.,''USB\VID_0781&PID_CFFE'') or contains(.,''USB\VID_2D01&PID_0031'') or
contains(.,''USB\VID_0B05&PID_18D1'') or contains(.,''USB\VID_0B05&PID_1976'') or contains(.,''USB\VID_20F4&PID_E02B'') or contains(.,''USB\VID_0DF4&PID_0025'') or
contains(.,''USB\VID_1A56&PID_3100'') or contains(.,''USB\VID_310E&PID_0062'') or contains(.,''USB\VID_2D01&PID_0032'') or contains(.,''USB\VID_065F&PID_3200'') or
contains(.,''USB\VID_413C&PID_B097'') or contains(.,''USB\VID_2BAF&PID_0012'') or contains(.,''PCI\VEN_8086&DEV_15FC'') or contains(.,''USB\VID_045E&PID_085C'')])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WakeOnMediaDisconnect Test: Connect/Disconnect medium when the device is in AOAC mode.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Device failed to go into low power after the all the references were released. Status: NDIS_STATUS_FAILURE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unexpected Failure Outside of a Test Case or Action', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Wake on Media Disconnect test failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83659 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%DeviceScan.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%DeviceScan.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83659 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83659, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: DF - Reinstall with IO Before and After (Certification) fails for Win7 system in HCK ', 'This is an acceptable failure.', 'This is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows 7 Client x86","Windows 7 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify device counts and problem code counts for Hardware ID: Wintun', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify device counts and problem code counts for Hardware ID: \*ISATAP', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83718 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging% cethlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging% cethlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83718 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83718, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Hardware-enforced Stack Protection Compatibility Test ', 'HLK Delayed Enforcement Errata: Hardware-enforced Stack Protection Compatibility Test requirements', 'This is an acceptable failure', '2030-10-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(/Devnode[Manufacturer=''NVIDIA'' and starts-with(./DriverVersion, ''30.0.14.'') and number(substring-after(./DriverVersion, ''30.0.14.'')) > 7065 and number(substring-after(./DriverVersion, ''30.0.14.'')) < 9499 ])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CetHlkTest::CetCompatDeviceTest::CetCompatTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsTrue\(Response\): Verify that the user selected ''Y''', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-10-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83723 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83723 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83723, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: D3D12 - DXIL Core Test - QuadRead Intrinsics Setup Issues', 'QuadReadTest used invalid numthreads dimensions, didn''t check for waveops support, and used GroupIndex instead of WaveLaneIndex for tests, relying on associations not required by the spec', 'Invalid dimension tests are removed. Lack of WaveOps support will skip the test. wave lane index is used as the test value. Until these changes are available, failure of these tests will be filtered', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348","10.1.21390","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::QuadReadTest', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83737 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash runonlxss.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash runonlxss.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83737 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83737, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Some WSL DirectML Metacommand tests for Convolution in Cobalt compare their results against a bad shader optimization path that should never be taken', 'Some DirectML Metacommand tests for Convolution in Cobalt compare their results against a bad shader optimization path that should never be taken. As a result of this, the tests crash with no fault from the driver.', 'If Intel gets failures with the MetacommandHlkPictTests/ConvolutionOperation tests 1629, 1634, 1674, 1676, 1679, 1700, 1719, 1722, 1723, 1739, 1748, 1755 or 1857, they can apply this errata.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'MetacommandHlkPictTests/ConvolutionOperation\.Test/(1629|1634|1674|1676|1679|1700|1719|1722|1723|1739|1748|1755|1857)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'Nonzero return from Wsl test', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83812 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WrapOplocks.cmd [NTFS_DRIVE_LETTER] [CNTFS_DRIVE_LETTER] [FAT_DRIVE_LETTER] [FAT32_DRIVE_LETTER] [EXFAT_DRIVE_LETTER] [UDF_DRIVE_LETTER]  [REFS_DRIVE_LETTER]  [WTTRunWorkingDir]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WrapOplocks.cmd [NTFS_DRIVE_LETTER] [CNTFS_DRIVE_LETTER] [FAT_DRIVE_LETTER] [FAT32_DRIVE_LETTER] [EXFAT_DRIVE_LETTER] [UDF_DRIVE_LETTER]  [REFS_DRIVE_LETTER]  [WTTRunWorkingDir]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83812 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83812, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Oplock Test fails on compressed volumes during FileOplock-CNTFS scenario and verificaiton of TRIM operations "ControlFile(FSCTL_FILE_LEVEL_TRIM)"', 'Oplock Test fails during FileOplock-CNTFS scenario and verificaiton of TRIM operations "ControlFile(FSCTL_FILE_LEVEL_TRIM)"', 'This is an accepatable failure.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HelperBreakEnhanced', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HelperBreakLegacyL1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HelperBreakLegacyL2', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HelperBreakEnhancedRW', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HelperBreakEnhancedR', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HelperBreakEnhancedRWH', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HelperBreakLegacyBatch', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83939 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging verifyrunfromstoreandmatchingversions.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging verifyrunfromstoreandmatchingversions.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83939 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83939, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata- Verify run from driver store support and file versioning (Graphics Drivers) test fails driver version is 30. (WDDM 3.0 for Cobalt) (Device Specific)', 'HLK Errata- Verify run from driver store support and file versioning (Graphics Drivers) test fails driver version is 30. (WDDM 3.0 for Cobalt)', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_10DE'') or contains(.,''PCI\VEN_1002&DEV_73F0'') or contains(.,''PCI\VEN_1002&DEV_73BF'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue(pszInfDriverVersion[3] == L''1'' || pszInfDriverVersion[3] == L''2'')', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 83951 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %zerostatetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %zerostatetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83951 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(83951, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ZeroStateTransitions test failing', 'ZeroStateTransitions test failing', 'THIS IS AN ACCEPTABLE FAILURE', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.20348","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84024 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ShellRunner.exe -x [[]DISPLAYLOGOLEVEL] -c [[]PROFILENAME] -l "[[]WTTRunWorkingDir]\s98wtt_u.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ShellRunner.exe -x [[]DISPLAYLOGOLEVEL] -c [[]PROFILENAME] -l "[[]WTTRunWorkingDir]\s98wtt_u.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84024 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84024, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver for OPM HDCP / Protocol tests on Systems with display adapter but no monitor reporting at HCP capable.', 'OPM HDCP Tests on Server with Display but no monitor ouput or HDCP capability reported via diskplay driver is inccorect.', 'This filter removes it for this special case.', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002&DEV_73A1'') or contains(.,''PCI\VEN_1002&DEV_7360'') or contains (.,''PCI\VEN_1002&DEV_73A3'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 RS5 Full","Windows v10.0 Client x64 VB Full","Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OPM Winlogo Test Cases\\DX9\\Protocol Walkthrough', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'GetConfig: failed to query protection type \(ERROR_GRAPHICS_OPM_DRIVER_INTERNAL_ERROR\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OPM Winlogo Test Cases\\DX9\\Certificate validation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'GetConfig: failed to query protection type \(ERROR_GRAPHICS_OPM_DRIVER_INTERNAL_ERROR\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OPM Winlogo Test Cases\\DX9\\Support CSSDVD HDCP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'GetConfig: failed to query protection type \(ERROR_GRAPHICS_OPM_DRIVER_INTERNAL_ERROR\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OPM Winlogo Test Cases\\DX9\\Support HDCP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'GetConfig: failed to query protection type \(ERROR_GRAPHICS_OPM_DRIVER_INTERNAL_ERROR\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84029 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84029 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84029, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 - DXIL Core Test - Shader Model 6.6 - Atomics Float tests failing VEGA10', 'HLK Errata: D3D12 - DXIL Core Test - Shader Model 6.6 - Atomics Float tests failing VEGA10', 'Error will be filtered until the test is fixed to consistently initialize the groupshared values', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'DxilConfTest::AtomicsFloatTest', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DxilConfTest::AtomicsRawHeap64Test', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84083 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash devfund%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash devfund%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84083 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84083, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Plugin for DevFund times out on Photo Pins for Camera', 'FrameReader is selecting the First Frame Source regardless of type. For Photo pins, we don''t get the required frame count before RunIO times out.', 'Errata Issued', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=.*', 'SIMPLEIO.*WEBCAM.*RunIO Failed.*800705b4', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*This operation returned because the timeout period expired.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*No Error Info Provided.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84121 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.bluetooth.audio.functionaltests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.bluetooth.audio.functionaltests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84121 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84121, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata- Bluetooth - Audio Voice Interrupt music with A2DP Offload test failing due to checks if A2DP offload is in use before the connection is completed', 'HLK Errata- Bluetooth - Audio Voice Interrupt music with A2DP Offload test failing due to checks if A2DP offload is in use before the connection is completed', 'This is an acceptable failure', '2023-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''USB\VID_8087&PID_0033'') or contains(.,''USB\VID_8087&PID_0026'') or contains(.,''AUCD\VEN_QCOM&DEV_0629'') or contains(.,''ACPI\VEN_QCOM&DEV_066B'') or contains(.,''USB\VID_0CF3&PID_E600'') or contains(.,''USB\VID_0489&PID_E0D6'')  or contains(.,''QCA_SHB\UART_H4\3&387969C0'') or contains (.,''ACP\DEVTYPE_0004'')]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft::Bluetooth::AudioA2dpOffload::FunctionalTests::AudioA2dpOffloadTests::VoiceInterruptMusicAudioOffloadTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', '[[]BluetoothTestPlatform::DeviceAdapters::BtpDevicePluginImpl::PlayConstantTone[]]: Exception thrown', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84160 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmd.exe /c appverif -enable exceptions handles heaps leak locks memory srwlock threadpool -for te.processhost.exe te.exe svchost.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmd.exe /c appverif -enable exceptions handles heaps leak locks memory srwlock threadpool -for te.processhost.exe te.exe svchost.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84160 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84160, 2, 2, 1, 0, 1, 0, 0, @TestCommandLineId, 'AutoTriage: Camera: Arm64 AppVerifier Bugs are Non-Actionable', 'Arm64 AppVerifier Bugs are Non-Actionable', 'Remove/Disable AppVerifier tasks.

Open HLK Manager 
Select Explorers-Job Explorer 
Select Query- Name-&gt;Contains "Name of Job that is failing" 
Select Edit Job (Top center of screen) 
Select Tasks Tab under job 
Select Setup under Task Details
- At this step
Delete AppVerifierStart (Alternatively, you may edit the task to disable it, there is a checkmark available if you double click on the task)

Select Cleanup under Task Details 
Delete AppVerifierEnd

Save Job 

Rerun Test', '2050-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["ARM64"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.21390"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2050-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84248 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sysfund_sleep_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sysfund_sleep_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84248 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84248, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Plugin for DevFund times out on Photo Pins for Camera', 'FrameReader is selecting the First Frame Source regardless of type. For Photo pins, we don''t get the required frame count before RunIO times out.', 'Errata Issued', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=.*WEBCAM.*', 'SIMPLEIO.*WEBCAM.*RunIO Failed.*800705b4', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*This operation returned because the timeout period expired.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*No Error Info Provided.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84256 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% displayport.hlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% displayport.hlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84256 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84256, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Verify DisplayPort AUX and SBM tests fail', 'Verify DisplayPort AUX and SBM tests fail', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002'') or contains(.,''PCI\VEN_10DE'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OSG::GRFX::DisplayKernel::DisplayPort::VerifyRemoteDisplayPortMonitors', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Adapter specified did not pass VerifyRemoteDisplayPortMonitors at-least once', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed DxgkDdiDPSBMTransmission', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OSG::GRFX::DisplayKernel::DisplayPort::VerifyLocalDisplayPortMonitors', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Adapter specified did not pass VerifyLocalDisplayPortMonitors at-least once', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed DxgkDdiDPSBMTransmission', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84257 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testpldr.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testpldr.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84257 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84257, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: Interface arrival timed out, failed while validating Win6_4.MB.GSM.Data.TestPLDR', 'Errata: Interface arrival timed out, failed while validating Win6_4.MB.GSM.Data.TestPLDR', 'This is fixed by increased the interface-arrival timeout from 10 secs to 50 secs', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_14C3&DEV_4D75")]) ')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21370])
', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestPLDR::DoPlatformLevelDeviceReset', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Interface arrival timed out, failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84278 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% pagefault.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% pagefault.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84278 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84278, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: VM WDDM2 - Page Fault Test - Induce Fault 9/11/12 Test Failing', 'HLK Errata: VM WDDM2 Page Fault Test 9_11_12', 'This is an acceptable failure', '2030-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1414'') or contains(.,''PCI\VEN_1002'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'D3DKMTEscape failed at line', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Setup fixture ''VidMm::PageFault::ClassSetup'' for the scope ''VidMm::PageFault'' failed.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84329 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'multisample.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('multisample.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84329 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84329, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: AV in multisampling test', 'An AV occurs because a function returned a pointer to its local variable up to its caller.', 'Fixed the test to use pointers correctly for HLK versions in the future. For past and current HLK errata is needed.', '2031-07-17T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Masking', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ACCESS VIOLATION', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-07-17T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84331 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84331 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84331, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - DXGI MPEG4 Decoder HMFT Playback DXGISwapchain Test 1 test fails on Vega10 and Navi24', 'HLK Errata - DXGI MPEG4 Decoder HMFT Playback DXGISwapchain Test 1 test fails on Vega10 and Navi24', 'This is an acceptable failures', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::MPEG4_HMFTPlaybackDXGITest1#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Using a software decoder for HMFT Tests', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84476 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %d3dconf_12_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %d3dconf_12_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84476 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84476, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HLK - D3D12 - Raytracing DXR 1.1 Misc test - ReportHit() outside of AABB', 'HLK - D3D12 - Raytracing DXR 1.1 Misc test - ReportHit() outside of AABB', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_Raytracing_RayQuery::Basic', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Logging UAV contains incorrect data.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_Raytracing_RayQuery::SkipFlags#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Logging UAV contains incorrect data.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_Raytracing_RayQuery::SkipFlags#metadataSet1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Logging UAV contains incorrect data.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84598 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_5_RenderPass::%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_5_RenderPass::%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84598 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84598, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WHCP - Makena1.0 D3D12-Render Passes', 'Qualcomm reported that D3D12 D3DConf_12_5_RenderPass::EndingAccessResolve HLK test has been failing. This is because in the test there is a case where format and sample count combination is not supported. (More specifically, Qualcomm said that as per a6x_formats.xlsx they do not suppport 8x MSAA for this format R32G32B32A32_FLOAT)', 'The fix is to check for MSAA format support, and check if MSAA is not support for the current format, then we lower sample count to 4x or 2x to see if there is MSAA support for that. If none of the above formats are supported, we skip this test case', '2031-05-15T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'EndingAccessResolve', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-05-15T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84638 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testconnect.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testconnect.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84638 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84638, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Win6_4.MBN.SYS.TestConnect Test Failure ', 'Win6_4.MBN.SYS.TestConnect', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'')])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestConnect::ConnectWhenPacketServiceIsDetached', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'is not WWAN_STATUS_PACKET_SVC_DETACHED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84826 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84826 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84826, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Filter Errata : Directed FX System Verification Test USB4 components "Has a Constraint on a Component"', 'Devices with a component constraint are exempted from the DFx verification test.', 'No action needs to be taken.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'has a constraint on a component', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84827 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sysfund_pnp_disableenable_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84827 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84827, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Plugin for DevFund times out on Photo Pins for Camera', 'FrameReader is selecting the First Frame Source regardless of type. For Photo pins, we don''t get the required frame count before RunIO times out.', 'Errata Issued', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=.*', 'SIMPLEIO.*WEBCAM.*RunIO Failed.*800705b4', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*This operation returned because the timeout period expired.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*No Error Info Provided.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84917 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.test5gextensions.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.test5gextensions.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84917 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84917, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Win6_4.MB.GSM.Data.Test5GExtensions test failure due to MBIM Extended Version must be 3.0', 'HLK Win6_4.MB.GSM.Data.Test5GExtensions test failure due to MBIM Extended Version must be 3.0', 'This is an accpetable failure', '2025-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestDeviceCapsEx', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'MBIM Extended Version must be 3.0, exiting.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestReadyInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'MBIM Extended Version must be 3.0, exiting.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5GSA_TestPacketService', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'MBIM Extended Version must be 3.0, exiting.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'MBIM Extended Version must be 3.0, exiting.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84921 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn%testbasestationsinfo.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn%testbasestationsinfo.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84921 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84921, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - TestBaseStationsInfo fails due to mbbcx is not copying the baseStationsInfo response correctly.', 'TestBaseStationsInfo fails due to mbbcx is not copying the baseStationsInfo response correctly.', 'This is an acceptable failure', '2025-07-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestBaseStationsInfo::GetBaseStationsInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'does not match the total calculated size', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-07-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 84980 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% verifyrunfromstoreandmatchingversions.dll /name:DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% verifyrunfromstoreandmatchingversions.dll /name:DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84980 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(84980, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '"Verify run from driver store support and file versioning (Graphics Drivers)" fails on arm64', '"Verify run from driver store support and file versioning (Graphics Drivers)" fails when run on arm64.', 'This is considered an acceptable failure.', '2025-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'DriverRunFromStoreAndVersioning::VerifyDriverRunFromStoreAndVersioning::PerformVerification', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'pDriverStorePathExpanded', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85014 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mfcaptureenginehlktest.dll%CameraHLK_ScenarioTests%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mfcaptureenginehlktest.dll%CameraHLK_ScenarioTests%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85014 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85014, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Test - * - For IR Sensor Cameras should not be scheduled', 'Tests are scheduling RGB tests against IR Cameras', 'Filter all failures on Sensor Cam Devices', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=.*c00dabe0.*', 'Testing all cameras under', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85016 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll%CameraControls_Device%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll%CameraControls_Device%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85016 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85016, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Controls Device Test - * - For IR Sensor Cameras should not be scheduled', 'Tests are scheduling RGB tests against IR Cameras', 'Filter all failures on Sensor Cam Devices', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=.*c00dabe0.*', 'Testing DeviceID', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85018 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85018 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85018, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver System Test - MediaCapture * - For IR Sensor Cameras should not be scheduled', 'Tests are scheduling RGB tests against IR Cameras', 'Filter all failures on Sensor Cam Devices', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'WEBCAM_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('WEBCAM_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'WEBCAM_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//WebCamDevice[(DevicePath[contains(.,''24e552d7-6523-47f7-a647-d3465bf1f5ca'')]) and(WEX/SensorCam)])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Test Setup failed', 'Device Selector string', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85026 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%gaudit%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%gaudit%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85026 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85026, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UAC1 fails GAudiT::Generic_Ioctl_IOCTL_KS_WRITE_1_IOCTL_KS_WRITE_STREAM', 'The UAC1 class driver fails GAudiT''s Generic_Ioctl_IOCTL_KS_WRITE_1_IOCTL_KS_WRITE_STREAM test case.', 'This filter overturns the failure.', '2025-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/ImagePath[contains(.,"usbaudio.sys")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'GAudiT::Generic_Ioctl_IOCTL_KS_WRITE_1_IOCTL_KS_WRITE_STREAM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'AreEqual\(\(DWORD\)FNS_PASS, testResult\) - Values \(0, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85086 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'RotateBlt.exe %'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('RotateBlt.exe %')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85086 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85086, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM RotateBlt tests fails on Qualcomm', 'On some systems the RotateBlt test will fail to SetDisplayMode causing the test to fail.', 'We are investigating a fix for these issues.', '2025-07-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[contains(.,''VEN_QCOM'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.21390","10.1.21387","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/RestoreMode/SetDisplayMode', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Root Node/RestoreMode/SetDisplayMode', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-07-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85259 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging% cethlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging% cethlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85259 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85259, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Hardware-enforced Stack Protection Compatibility Test ', 'HLK Delayed Enforcement Errata: Hardware-enforced Stack Protection Compatibility Test requirements', 'This is an acceptable failure', '2030-10-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''USB\VID_17E9&PID_C05F'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CetHlkTest::CetCompatDeviceTest::CetCompatTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsTrue\(Response\): Verify that the user selected ''Y''', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-10-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85530 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash variablerefreshratetest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash variablerefreshratetest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85530 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85530, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Dx9 test failing in variable refresh rate HLK', 'There are multiple Variable refresh rate test failures on some hardwares. Given that this is a new test, and that we were unable to get hold of necessary hardware prior to Cobalt OS release lockdown, we are granting the test errata to unblock the driver release.', 'We are past the cut off for test fixes for SVOR anyways so will issue a test errata to unblock this issue.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"VIDEO\VEN_4D4F4351") or starts-with(@HardwareID,"PCI\VEN_1002&DEV_1636") or starts-with(@HardwareID,"PCI\VEN_1002&DEV_15D8") or starts-with(@HardwareID,"PCI\VEN_1002&DEV_1681")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VariableRefreshRateTest', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85597 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash virtualrefreshrate.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash virtualrefreshrate.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85597 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85597, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Virtual Refresh HLK failures', 'This new test is timing sensitive, and it has sporadic failures on QCOM hardware. Since we were unable to get repro HW in time for Cobalt release, we need to grant a waiver for it.', 'Issue a test errate for QCOM vendor ID for this test.', '2024-08-01T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"VIDEO\VEN_4D4F4351")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VirtualRefreshRate', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-08-01T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85793 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'Te.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('Te.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85793 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85793, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'SensorAPI crash causes PnP Failures', 'SensorAPI.dll causes a crash in the test', 'Errata issued.', '2023-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'A crash with exception code 0x80000003 occurred in module "vrfcore.dll" in process "WUDFHost.exe" ', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85794 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85794 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85794, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Multiple H264 playback Test and D3D12 H264 playback Test are failing due to "Checksums don''t match." (Device Specific)', 'HLK Errata: Multiple H264 playback Test and D3D12 H264 playback Test are failing due to "Checksums don''t match." (Device Specific)
H264 playback Test 2
H264 playback Test 7
H264 playback Test 9
H264 playback Test 17
H264 playback test 21
H264 playback test 22
D3D12 H264 playback Test 5
D3D12 H264 playback Test 7
D3D12 H264 playback Test 11
D3D12 H264 playback Test 14
D3D12 H264 playback test 15
D3D12 H264 playback test 16', 'This is an acceptable failure', '2023-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest2#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest7#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest9#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest17#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest21#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::H264PlaybackQualityTest22#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_H264PlaybackQualityTest5#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_H264PlaybackQualityTest7#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_H264PlaybackQualityTest11#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_H264PlaybackQualityTest14#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_H264PlaybackQualityTest15#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::D3D12_H264PlaybackQualityTest16#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SW: 0.*', 'Checksums don''t match.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85795 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll /name:WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraFlashControlManualTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll /name:WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraFlashControlManualTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85795 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85795, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Controls Test - FLASHMODE - fails for dual cameras where only one supports profile', 'Camera Driver Controls Test - FLASHMODE - fails for dual cameras where only one supports profile, first camera selects a profile and second camera fails due to having no mediatypes in that profile.', 'Errata Issued, Test Fixed', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=.*0xc00d36bb', 'SkipIf.*MF_E_UNEXPECTED', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85882 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'PassThrough.exe %'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('PassThrough.exe %')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85882 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85882, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM Pass Through tests incompatible with QC driver', 'On some systems the WDDM Pass Through tests fail to create a device using CreateI3D.', 'We are investigating a fix for these issues.', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device/@HardwareID[contains(.,''VEN_QCOM'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Root Node/Device', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Failed to create an I3D object. CreateI3D returned error code ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85884 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%apivalidatortest.dll /name:ApiValidatorTest::VerifyDriverApiOneCore%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%apivalidatortest.dll /name:ApiValidatorTest::VerifyDriverApiOneCore%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85884 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85884, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM2.7 OneCore ApiValidator Test failing for Qualcomm', 'Running the WDDM2.7 OneCore ApiValidator Test fails because of an error code returned by the aitstatic.exe process.', 'This will be investigated and fixed in a later release.', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device[starts-with(@HardwareID,"ACPI\VEN_QCOM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'ApiValidatorTest::VerifyDriverApiOneCore', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'ApiValidator output does not not report driver is universal*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 85888 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash indirectdisplay.hlk.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash indirectdisplay.hlk.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 85888 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(85888, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Indirect Display Pnp Stop-Start Render Adapter test fails on Windows11 ARM64/x64', 'HLK Errata: Indirect Display Pnp Stop-Start Render Adapter test fails on Windows11 ARM64/64', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''USB\VID_17E9&PID_6000'')]) or boolean(//Driver[contains(.,''dlidusb3.dll'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'OSG::Sigma::IndirectDisplay::HLKTest::PnpStopStartRenderAdapter', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IddCx reported an indirect display driver error with HRESULT = 0x8000000a', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86015 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%gaudit_mc.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%gaudit_mc.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86015 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86015, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Gaudit test fails to get a buffer for streaming in some ARM64 devices', 'GAudiT sometimes requests incorrect buffer size on ARM/ARM64 devices.', 'This erratum overturns the failure.', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni Full"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*KSPROPERTY_AUDIO_MIX_LEVEL_CAPS.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!Msg', 'Error!  Could not get KSRTAUDIO_BUFFER: error 31', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!Msg', 'ERROR: Could not allocate 32-millisecond buffer for RT audio pin', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86047 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86047 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86047, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB4 BIOS Handoff & Platform Capabilities Tests Incorrectly Rely on USB4OSNativeCMPresent', 'USB4 Bios Handoff and Platform Capabilities tests may incorrectly report failure even though the OSC has been properly implemented due to a test gap', 'The erratum will filter out USB4 Bios Handoff and Platform Capabilities test failures on systems with Microsoft SW CM loaded.', '2023-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,"PCI\USB4_MS_CM")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Usb4Tests::Usb4Tests::ValidatePlatformUSB4Capabilities', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'The platform does not support native USB4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Usb4Tests::Usb4Tests::ValidateBiosHandoff', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'The platform does not support native USB4', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86202 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'scsicompliance.exe /device [[]ScsiComplianceDevice] /verbosity [[]LoggingVerbosity]  /scenario [[]ScenarioId] /operation [[]OperationId] [[]Options]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('scsicompliance.exe /device [[]ScsiComplianceDevice] /verbosity [[]LoggingVerbosity]  /scenario [[]ScenarioId] /operation [[]OperationId] [[]Options]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86202 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86202, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: NVME SCSI Compliance HISUP Support', 'HISUP Support can be different depending on which version of NVMe SCSI Translation Guide is being followed', 'Filter out HISUP error messages', '2031-10-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'PFRollup', 'Scenario NVMe', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'PFRollup', 'INQUIRY Check all fields of Inquiry Data', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'HISUP shall be set to 1b indicating hierarchal addressing is supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2031-10-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86304 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby2.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby2.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86304 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86304, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Driver erratum] ACX HD Audio fails Lullaby test because of timing errors', 'The ACX HD Audio driver fails to come back on time after the system goes to S4/Hibernation.', 'This filter waives the failures until a fix is made.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/ImagePath[contains(.,"AcxHdAudio.sys")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'PnP ID      = (HDAUDIO\\SUBFUNC_01&VEN_8086)|(INTELAUDIO\\SUBFUNC_01&VEN_8086)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86519 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%EkCertTests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%EkCertTests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86519 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86519, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'EK Certificate Tests Verify Index Test', 'The EK certificate index is not mandated to be in a particular index in the required specification.', 'This will be required in a future version of the HLK.', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server ARM64 Fe Full","Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=EkCertTests::VerifyEkCertsInCorrectIndex', 'EkCertTests::VerifyEkCertsInCorrectIndex', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.TpmAlgID::TPM_ALG_RSA, ekCert.Type...: RSA Cert in RSA Index. - Values *', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AreEqual.TpmAlgID::TPM_ALG_ECC, ekCert.Type...: ECC Cert in ECC Index. - Values *', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86626 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86626 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86626, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage - TestBaseStationsInfo fails due to crash in module Win6_4.MBN.SYS.TestBaseStationsInfo.dll', 'TestBaseStationsInfo fails due to crash in module TestBaseStationsInfo.dll
Error: A crash with exception code 0xC0000005 occurred in module "ucrtbase.dll" in process "te.processhost.exe"
Error: [HRESULT 0x800706BE] A failure occurred while running a test operation: ''Win6_3MBN::TestBaseStationsInfo::GetBaseStationsInfo''. (A crash with exception code 0xC0000005 occurred in module "ucrtbase.dll" in the process hosting the test code while invoking a test operation.)
Error: A crash with exception code 0xC0000374 occurred in module "ntdll.dll" in process "te.processhost.exe"
Error: A crash with exception code 0xC0000005 occurred in module "Win6_4.MBN.SYS.TestBaseStationsInfo.dll" in process "te.processhost.exe"', 'Updated private binary Win6_4.MBN.SYS.TestBaseStationsInfo.dll available. To obtain the binary please contact CSS and reference this Waiver ID 86626.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) = 21382])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_105B&DEV_E0AB'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestBaseStationsInfo::GetBaseStationsInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'A crash with exception code 0xC0000005 occurred in module "ucrtbase.dll" in process', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'A failure occurred while running a test operation: ''Win6_3MBN::TestBaseStationsInfo::GetBaseStationsInfo''.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'A crash with exception code 0xC0000374 occurred in module "ntdll.dll" in process', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'A crash with exception code 0xC0000005 occurred in module "Win6_4.MBN.SYS.TestBaseStationsInfo.dll" in process', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86696 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /inproc /enablewttlogging /appendwttlogging% cethlktest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /inproc /enablewttlogging /appendwttlogging% cethlktest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86696 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86696, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Delayed Enforcement Errata: Hardware-enforced Stack Protection Compatibility Test requirements', 'HLK Delayed Enforcement Errata: Hardware-enforced Stack Protection Compatibility Test requirements', 'This is an acceptable failure', '2023-10-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22350])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''vrd.sys'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CetHlkTest::CetCompatDeviceTest::CetCompatTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsTrue\(Response\): Verify that the user selected ''Y''', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 86859 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.test.networking.wireless.singlemachine.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.test.networking.wireless.singlemachine.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 86859 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(86859, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Wlan Test - MAC Randomization test sporadically fails (due to failure of not served to Driver scan)', 'HLK Errata: Wlan Test - MAC Randomization test sporadically fails (due to failure of not served to Driver scan)', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_2726'')])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft.Test.Networking.Wireless.Outerloop.SystemTests.DeviceTest_MacRandomizationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error=Scan Results unavailable', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 87315 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testlteattach.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testlteattach.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 87315 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(87315, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.GSM.Data.TestLteAttach test fails as Indication length (0x4ec) is not valid.', 'HLK Errata: Win6_4.MB.GSM.Data.TestLteAttach test fails as Indication length (0x4ec) is not valid.', 'This is because a 4 byte ULONG NetworkError element has been added to WWAN_LTE_ATTACH_STATUS structure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_QCOM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestLteAttach::QueryLteAttachStatus', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Indication length \(0x4ec\) is not valid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 87316 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.%.testsms.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.%.testsms.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 87316 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(87316, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.GSM.Data.TestSms HLK test fails as Indication length (0x20) is not valid.', 'HLK Errata: Win6_4.MB.GSM.Data.TestSms HLK test fails as Indication length (0x20) is not valid.', 'This is acceptable failure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_QCOM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestSms::SmsConfigQuery', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Indication length \(0x20\) is not valid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 87328 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe% /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe% /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 87328 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(87328, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.GSM.Data* fails on 21H2 due to mismatch of OID_WWAN_DRIVER_CAPS minor version', 'HLK Errata: Win6_4.MB.GSM.Data* fails on 21H2 due to mismatch of OID_WWAN_DRIVER_CAPS minor version', 'This is acceptable failure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_QCOM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'ulMinorVersion \(0xa0\) is not valid, expected \(0xb5\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 87894 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%jobs:%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%jobs:%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 87894 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(87894, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata: NDISTest 6.5 - PM_Requirements and GenericMiniportRequirements - Not Applicable for MBB (Mobile Broadband)', 'This test does not apply to MBB (Mobile Broadband) devices and so failures can be ignored.', 'This is an acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'NETWORK_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('NETWORK_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'NETWORK_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//mediatype[contains(.,''WirelessWan'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"FeatureID","MatchType":2,"Values":["Network.MobileBroadband"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '.*', 'Title', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 87913 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash dxgiconf_hybridcrossadapterscanout.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash dxgiconf_hybridcrossadapterscanout.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 87913 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(87913, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: DXGI - Cross Adapter Resource Tier Support Validation fails with error "Test should run on a hybrid device"', 'HLK Errata: DXGI - Cross Adapter Resource Tier Support Validation fails with error "Test should run on a hybrid device"', 'This is acceptable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DXGIConf_HybridCrossAdapterScanOut::VerifyScanoutCapableForCrossAdapterPrimaryResource#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Test should run on a hybrid device', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 87915 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 87915 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(87915, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.GSM.Data.TestBaseStationsInfo test fails with an exception 0xC0000005.', 'HLK Errata: Win6_4.MB.GSM.Data.TestBaseStationsInfo test fails with an exception 0xC0000005.', 'This is considered an acceptable test failure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_QCOM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestBaseStationsInfo::GetBaseStationsInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'A crash with exception code 0xC0000005 occurred in module .Win6_4.MBN.SYS.TestBaseStationsInfo.dll.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 87916 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.test5gextensions.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.test5gextensions.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 87916 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(87916, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_4.MB.GSM.Data.Test5GExtensions test fails with error PreferredDataClasses is not valid', 'HLK Errata: Win6_4.MB.GSM.Data.Test5GExtensions test fails with error PreferredDataClasses is not valid', 'This is considered an acceptable test failure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_QCOM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GExtensions::Verify5G_NSAExtensions', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'PreferredDataClasses is not valid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestDeviceCapsEx', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'NOT Supporting 5G SA data class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestDeviceCapsEx', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Non-5G data class cannot have valid data subclass', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestDeviceCapsEx', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '5G data class does not have valid data sub-class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestReadyInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'NOT Supporting 5G SA data class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestReadyInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Non-5G data class cannot have valid data subclass', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestReadyInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '5G data class does not have valid data sub-class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5GSA_TestPacketService', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'NOT Supporting 5G SA data class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5GSA_TestPacketService', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Non-5G data class cannot have valid data subclass', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5GSA_TestPacketService', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '5G data class does not have valid data sub-class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5GSA_TestPacketService', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to query Modem Config Info failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5GSA_TestPacketService', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Failed to query modem configuration', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'NOT Supporting 5G SA data class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Non-5G data class cannot have valid data subclass', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '5G data class does not have valid data sub-class', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to query Modem Config Info failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Failed to query modem configuration', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 88048 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 88048 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(88048, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WLAN Wake - NLO Discovery - Functional failed by HLK tool', 'HLK Errata: WLAN Wake - NLO Discovery - Functional failed by HLK tool', 'This is acceptable failure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_17CB") or contains(.,"QCMS\VEN_QCOM") or contains(.,"WPSS\VEN_QCOM")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'HckTests.WakeScenarioTests.WakeByNLODiscovery', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Expect NIC to connect, but did not happen', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'NIC did not report wake reason as expected, May be the OS put NIC in D0 too soon. Rerun test', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 88360 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%AudioLogo_taef%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%AudioLogo_taef%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 88360 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(88360, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[Test erratum] AudioLogo fails Bluetooth check on offloaded devices', 'Bluetooth offload devices are enumerated entirely by Intel, so the test does not find the expected hardware ID prefix.', 'This filter overturns the error.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"INTELAUDIO\CTLR_DEV_") and contains(.,"LINKTYPE_03&DEVTYPE_00&VEN_8086&DEV_AE30")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=AudioLogoTaef::TC_Verify_BTH', 'AudioLogoTaef::TC_Verify_BTH', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'FAIL: BLuetooth is present on the system but there are no Bluetooth Audio Devices attached\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 88379 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby2.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby2.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 88379 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(88379, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[Test erratum] Lullaby test fails Bluetooth check on offloaded devices', 'Bluetooth offload devices are enumerated entirely by Intel, so the test does not find the expected hardware ID prefix.', 'This filter overturns the error.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"INTELAUDIO\CTLR_DEV_") and contains(.,"LINKTYPE_03&DEVTYPE_00&VEN_8086&DEV_AE30")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Lullaby Test\\Bluetooth Presence Testing\\Verify Bth Audio Presence', 'Lullaby Test\\Bluetooth Presence Testing\\Verify Bth Audio Presence', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'FAIL: BLuetooth is present on the system but there are no Bluetooth Audio Devices attached\.
Please attach one and rerun these tests\.
', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 88728 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Tpm20PreOsTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Tpm20PreOsTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 88728 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(88728, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM 2.0 UEFI Preboot Interface Test - SHA384 Support', 'Support for the SHA384 bank causes the test to compare SHA384 against SHA256.', 'Disable SHA384 PCR bank support in UEFI, or apply waiver. Test fixed in next release.', '2024-07-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server ARM64 Fe Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=PreOsTestWrapper.ParseAndLogFile', 'PreOsTestWrapper.ParseAndLogFile', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'SHA-384 PCR bank available\. SHA-384 digests will be used for the rest of the tests\.', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=End ''VerifyPCRsAreZero'' Test: FAIL', '----PCR.08. is not zero.', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=End ''VerifyTCGEventLogMatchesPCRs'' Test: FAIL', '----PCR hash algID.12. does not match WBCL algID.11..', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '----Verifying that the TCG Event Log has the data extended earlier to PCR.15.: FAIL', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '----Boot Manager event not found in PCR.4.: FAIL', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '----''LoadImage'' Boot Manager event not found in PCR.4.: FAIL', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-07-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 88913 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testdisableenable.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testdisableenable.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 88913 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(88913, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_3MBN::TestDisableEnable fails on 21H2 with the error Interface failed to Acquire ref count with 0x80340006', 'HLK Errata: Win6_3MBN::TestDisableEnable fails on 21H2 with the error Interface failed to Acquire ref count with 0x80340006', 'This is acceptable failure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_8086")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::DisableEnableWhileIdle', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'failed to Acquire ref count with 0x80340006', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::DisableEnableWhileIdle', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'OID_WWAN_RADIO_STATE failed, NTSTATUS \(UNKNOWN\[0xc0000001\]\) expected NDIS_STATUS_INDICATION_REQUIRED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::DisableEnableWhileIdle', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to set SwRadioState \(WwanRadioOn\[0x1\]\) failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'failed to Acquire ref count with 0x80340006', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'OID_WWAN_RADIO_STATE failed, NTSTATUS \(UNKNOWN\[0xc0000001\]\) expected NDIS_STATUS_INDICATION_REQUIRED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to set SwRadioState \(WwanRadioOn\[0x1\]\) failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'NtDeviceIoControlFile failed, NTSTATUS\(0xc0000001\) expected NDIS_STATUS_SUCCESS', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'OID_WWAN_REGISTER_STATE failed, NTSTATUS \(UNKNOWN\[0xc0000001\]\) expected NDIS_STATUS_INDICATION_REQUIRED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to query register state failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to connect, failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to connect using provided context failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Indication length \(0x0\) is not valid', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'OID_WWAN_CONNECT failed, NTSTATUS \(UNKNOWN\[0xc0000001\]\) expected NDIS_STATUS_INDICATION_REQUIRED', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Attempt to set connect context WwanActivationCommandDeactivate \(null\) \(null\) \(null\)\\, failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'failed to Release ref count with 0x6', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89122 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging devfund_dvltest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging devfund_dvltest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89122 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89122, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Static Tools Logo test requires DVL logs to get WHQL pass', 'SDV incorrectly reports a false-positive for the ParentObjectCheckLock rule for a specific NVIDIA driver.', 'This is an acceptable failure', '2025-09-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''UcmCxUcsiNvppc.sys'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.DvlTest.DvlCheckServer', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: DvlChecker: SDV DVL log has SDV_MUSTFIX_FAILED for driver ''ucmcxucsinvppc'' with the OS architecture ''x64''.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-09-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89123 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%CalabriaStress.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%CalabriaStress.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89123 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89123, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - Stress test failed with error message "The service has not been started & failed with error -2147023834"     ', 'Title', 'This is an acceptable failure', '2027-01-11T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CalabriaStress::Longhaul::PerformFailures', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Some workloads have stopped unexpectedly.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CalabriaStress::Longhaul::PerformFailures', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'One or more test action threads failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2027-01-11T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89250 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sysfund_sleep_with_io_beforeandafter_wlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sysfund_sleep_with_io_beforeandafter_wlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89250 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89250, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Sleep Plugin Should not run for IO Before/After Sysfund test', 'FrameServer service destroys the active handle to the device when sleep occurs. This means that we do not care about the scenario where we use an active device handle after sleep, we should be using a new device handle.', 'Test Fix Issued, Errata Issued', '2023-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=WDTF_SIMPLEIO_WEBCAM.*Close', 'WDTF_SIMPLEIO_WEBCAM.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*PerformIO.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*crash.*FrameServer*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89251 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMediaCaptureScenarios%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMediaCaptureScenarios%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89251 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89251, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MediaCaptureScenarios Test leaks sample pointers causing crashes', 'Fails to write samples due to leaking sample pointers which causes a crash when the memory for the sample is released.', 'Test Fixed, errata issued', '2023-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 19041])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=.*', 'Created file.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*', 'exception code.*C0000005.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89255 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89255 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89255, 2, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'Errata D2D DImage Effect Tests "DebugLayer is forced on/off by dxcpl.exe"', 'Errata D2D DImage Effect Tests "DebugLayer is forced on/off by dxcpl.exe" causes warnings as tests are blocked', 'This is an acceptable failure', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086'') or contains(.,''PCI\VEN_1002'') or contains(.,''ACPI\VEN_QCOM'')])

')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'End', 'DebugLayer is forced on\/off by dxcpl.exe. Please change the setting from dxcapl.exe before running the test.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89256 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89256 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89256, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[HLK Errata] Processor Power Management – PPM Test fails due to a known measurement issue when PPM QoS is enabled', 'Processor Power Management – PPM Test fails due to a known measurement issue when PPM QoS is enabled', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 19041])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PpmLogoTests::LogoTests::ProcessAndValidateTrace', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(Iter2->DeliveredPercent <= Iter2->MaxPercent\): Delivered performance greater than maximum', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89345 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging netvirttest.dll /name:TestQosOffload::VerifySqUpdateExtended'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging netvirttest.dll /name:TestQosOffload::VerifySqUpdateExtended')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89345 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89345, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: [HW QoS] Extended SQ update test failure', 'HLK Errata: [HW QoS] Extended SQ update test failure', 'This is an acceptable test failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_15B3&DEV_1015'') or contains(.,''PCI\VEN_15B3&DEV_1017'') or contains(.,''PCI\VEN_15B3&DEV_101B'') or contains(.,''PCI\VEN_15B3&DEV_101D'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestQosOffload::VerifySqUpdate', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '\[TestQosOffload\]Failed to create PF vPort with status 0xc000000d', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89347 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging netvirttest.dll /name:TestQosOffload::VerifySqUpdate'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging netvirttest.dll /name:TestQosOffload::VerifySqUpdate')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89347 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89347, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: [HW QoS] SQ update test failure', 'HLK Errata: [HW QoS] SQ update test failure', 'This is an acceptable test failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_15B3&DEV_1015'') or contains(.,''PCI\VEN_15B3&DEV_1017'') or contains(.,''PCI\VEN_15B3&DEV_101B'') or contains(.,''PCI\VEN_15B3&DEV_101D'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestQosOffload::VerifySqUpdate', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '\[TestQosOffload\]Failed to create a vPort for with FunctionID 65535 with status 0xc000000d', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89349 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging netvirttest.dll /name:TestQosOffload::VerifySqAssociation'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging netvirttest.dll /name:TestQosOffload::VerifySqAssociation')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89349 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89349, 2, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'HLK Errata: [HW QoS] Vport association and [HW QoS] Extended VPort association test failures', 'HLK Errata: [HW QoS] Vport association and [HW QoS] Extended VPort association test failures', 'These are acceptable test failures', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_15B3&DEV_1015'') or contains(.,''PCI\VEN_15B3&DEV_1017'') or contains(.,''PCI\VEN_15B3&DEV_101B'') or contains(.,''PCI\VEN_15B3&DEV_101D'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestQosOffload::VerifySqAssociation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '\[TestQosOffload\]Failed to create PF vPort with status 0xc000000d', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89430 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.%.testdisableenable.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.%.testdisableenable.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89430 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89430, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_3MBN::TestDisableEnable fails on 21H2 with the error Couldn''t Disable the Device 0x0 ConfigRet 0x17', 'HLK Errata: Win6_3MBN::TestDisableEnable fails on 21H2 with the error Couldn''t Disable the Device 0x0 ConfigRet 0x17', 'This is acceptable failure.', '2023-08-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"VEN_8086") or contains(.,"PCI\VEN_14C3&DEV_4D75")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::DisableEnableWhileIdle', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'Couldn''t Disable the Device 0x0 ConfigRet 0x17', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDisableEnable::ConnectDisableEnableConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'Couldn''t Disable the Device 0x0 ConfigRet 0x17', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTag', 'Status \(WWAN_STATUS_NO_DEVICE_SUPPORT\[0xc004000a\]\) is not WWAN_STATUS_SUCCESS\[0x0\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89693 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89693 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89693, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'AudioAPOStressTest Memory Usage with Appverifier Too High', 'There are scenarios where the memory usage is exageratted on APOs when they are run with AppVerifier.', 'An errata is created to deal with the memory usage being reported too high when running with AppVerifier.', '2023-10-18T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(maxAudioDGPagefileUsage < MAX_ALLOWED_PAGEFILE_USAGE_IN_BYTES\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'A crash with exception code 0xC0000409 occurred in module "ucrtbase.dll" in process "te.processhost.exe"', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', '[HRESULT 0x800706BE] A failure occurred while running a test operation: ''CAPOStressTest::AudioAPOStressTest''. (A crash with exception code 0xC0000409 occurred in module "ucrtbase.dll" in the process hosting the test code while invoking a test operation.)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-18T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 89844 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PowerTestHost.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PowerTestHost.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 89844 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(89844, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM 3.0 vGPU VM Backwards Compat Test - FAIL on Intel devices', 'The DX9 UMD name is not set and DXGI expects a certain failure code when asking a UMD name for DX9. In the VB guest a different error code is returned from the kernel. This was fixed in Iron, but not for the Vb guest that is used in this test.', 'We will look to service this change to fix the test in a future release.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_8086")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Result=Fail', 'LaunchCompatVM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '0x80004005', 'ErrCode', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 90184 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 90184 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(90184, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ThirdPartyAPO Notification Count Incorrect', 'The notification count on new sometimes send back an incorrect number of notifications received which can cause a test failure. ', 'An errata is created to deal with the scenario where the number of notifications sent back is incorrect. ', '2025-06-20T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(parser.GetCountOfAPONotifications\(\) > 0\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-06-20T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 90251 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash drmtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash drmtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 90251 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(90251, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HLK - AV1 Profile0 HW-DRM Video 1,2,3 fail with Playback failures', 'HLK Errata: HLK - AV1 Profile0 HW-DRM Video 1,2,3 fail with Playback failed with error: 8004dd2e', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 21390])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_AV1Profile0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Playback failed with error: 8004dd2e', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Win32Succeeded\(pPlayBack->WaitCompletion\(\)\) - Value \(0xc00d36dd\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 90425 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging win6_4.mbn.gsm.testdevicecapsex.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging win6_4.mbn.gsm.testdevicecapsex.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 90425 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(90425, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK - DeviceCapsEx failed due to comparison between DeviceCaps and DeviceCapsEx without masking 5G bit', 'HLK - DeviceCapsEx failed due to comparison between DeviceCaps and DeviceCapsEx without masking 5G bit', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestDeviceCapsEx::ValidateDeviceCapsEx', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'DataClass is different', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 90660 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'MSStress.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('MSStress.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 90660 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(90660, 1, 1, 1, 0, 1, 0, 1, @TestCommandLineId, 'Errata: Multisample Stability (WoW64) test waiver', 'Errata: Multisample Stability (WoW64) test waiver', 'This is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_56A5'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unknown Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Message', 'EndTest', 'CD3DTest::DrawStats: BeginScene failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unknown Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Message', 'EndTest', 'CD3DTest::DisplayFrame: Present failed (fullscreen). hr=D3DERR_INVALIDCALL(8876086c).', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Unknown Test Case', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Message', 'EndTest', 'CD3DTest::ProcessError: Encountered error 8007000e (E_OUTOFMEMORY).', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91033 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%updateallocationproperty.dll%TestUpdateAllocationProperty'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%updateallocationproperty.dll%TestUpdateAllocationProperty')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91033 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91033, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Update Allocation Property test fails due to test bug', 'There''s a test bug where no GPU VAs are mapped to allocations.', 'This has been fixed and will be working in the next HLK release.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_8086")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=VidMm::UpdateAllocationProperty::TestUpdateAllocationProperty', 'VidMm::UpdateAllocationProperty::TestUpdateAllocationProperty', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Testing set all supported segments', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Testing supported set to local - Value ', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91130 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%HstiLogoTest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%HstiLogoTest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91130 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91130, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HstiTest::VerifyHstiVersion Providers STATUS_NOT_SUPPORTED', 'Providers that do not support HSTI should be skipped.', 'Fixed in the next kit.', '2024-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM Co Full","Windows v10.0 Server x64 Fe Full","Windows v10.0 Server ARM64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=HstiTest::VerifyHstiVersion', 'HstiTest::VerifyHstiVersion', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Errors detected: 32', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Provider [0-9]+\n    ID: \n    Role: 0\n    UEFI Protocol Error: 0xC00000BB\n    Provider Errors: 0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91270 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_11_core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_11_core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91270 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91270, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HLK - Cross Adapter Scan Out (CASO)', 'HLK Errata: HLK - Cross Adapter Scan Out (CASO)', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002'') or contains(.,''PCI\VEN_8086'')])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 22000])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest=D3DConf_11_CrossAdapterResourceWDDM30::IsCrossAdapterScanOutDisabled', 'D3DConf_11_CrossAdapterResourceWDDM30::IsCrossAdapterScanOutDisabled', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'AreNotEqual\(crossAdapterCap.SupportTier, D3DKMT_CROSSADAPTERRESOURCE_SUPPORT_TIER_SCANOUT\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91345 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%AudioLogo_taef%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%AudioLogo_taef%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91345 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91345, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'AudioLogo (system) enforces channel count on default mode', 'AudioLogo incorrectly enforces a channel count on default mode.', 'This errata overturns the failure.', '2023-04-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=AudioLogoTaef::TC_VerifyMicArrayRawFormat', 'AudioLogoTaef::TC_VerifyMicArrayRawFormat', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL: Microphone array mix format has more channels in normal mode \(.*\) than in RAW mode \(.*\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-04-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91401 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll /name:Usb4Tests::Usb4Tests::GraphicsDriverSupportsUSB4'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll /name:Usb4Tests::Usb4Tests::GraphicsDriverSupportsUSB4')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91401 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91401, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'GraphicsDriverSupportsUSB4', 'Graphics Driver Supports USB4 fails with error "Graphics adapter with LUID 0xyz does not support Usb4 monitors" ', 'This is acceptable failure for this driver', '2023-11-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_10DE'') or contains(.,''PCI\VEN_1002'')])

')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Usb4Tests::Usb4Tests::GraphicsDriverSupportsUSB4', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsTrue\(DriverCap.Usb4MonitorSupport != 0\): Graphics adapter with LUID', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-11-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91481 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.sys.testreadyinfo.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% win6_4.mbn.sys.testreadyinfo.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91481 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91481, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_3MBN::TestReadyInfo is failing on OS 22000.258 due to device_reset changes', 'HLK Errata: Win6_4.MBN.GSM.TestReadyInfo fails that Content of two consecutive ReadyInfo messages are not same', 'This filter will be used to resolve the issue.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"USB\VID_8087&PID_0AC9") or contains(.,''PCI\VEN_14C3&DEV_4D75'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestReadyInfo::Query', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'ReadyState of two consecutive ReadyInfo messages are not same', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91809 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%VirtualMachineRender::RenderOpenCL_VM'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%VirtualMachineRender::RenderOpenCL_VM')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91809 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91809, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM2.7 - NonDX Paravirtualization - OpenCL VM fails QueryStatistics call', 'This call fails in the guest when trying to get the ClientHint. 

This does appear to be a test bug. For some reason the QueryStatistics call in the VM trying to get the hint is failing. Unfortunately the log doesn’t contain the version of the OS in the VM. The host is Win11 (22000), but the guest is unknown in this case, so I’m not sure if this is because the test is asking for a statistics that the guest doesn’t understand, or if there is another issue at play. We would need to run this under a debugger to quickly tell what’s going on, but in any case this failure is not AMD’s fault and we’ll need to provide them with a waiver for this one.

', 'This will be fixed in the next HLK release.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=VirtualMachineRender::RenderOpenCL_VM', 'VirtualMachineRender::RenderOpenCL_VM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'D3DKMTQueryStatistics', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Client hint must match the api being validated', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91812 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%AudioLogo.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%AudioLogo.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91812 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91812, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'AudioLogo (system) enforces channel count on default mode', 'AudioLogo incorrectly enforces a channel count on default mode.', 'This errata overturns the failure.', '2023-04-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Generic\\Verify Microphone Array RAW format', 'Generic\\Verify Microphone Array RAW format', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL: Microphone array mix format has more channels in normal mode \(.*\) than in RAW mode \(.*\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-04-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91922 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91922 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91922, 3, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: Win6_3MBN::TestBaseStationInfo is failing due to serving cell size mismatch', 'HLK AutoTriage: Win6_3MBN::TestBaseStationInfo is failing due to serving cell size mismatch
Win6_4.MBN::TestBaseStationInfo is failing with following errors:
• 5G - Total accumulated NR serving cell size (0x36) mismatch with total size (0x38) provided by modem
• LTE - LTEServingCellSize is NOT valid, expected 0x2a
• 5G - Total accumulated NR serving cell size (0x3a) mismatch with total size (0x3c) provided by modem
• LTE - LTEServingCellSize is NOT valid, expected 0x2e
', 'Updated private binary, Win6_4.MBN.SYS.TestBaseStationsInfo.dll and wwansvc.dll, are available. To obtain the binary please contact CSS and reference this Waiver ID 91922.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestBaseStationsInfo5GSA::GetBaseStationsInfo5GSA', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Total accumulated NR serving cell size \(0x36\) mismatch with total size \(0x38\) provided by modem', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'LTEServingCellSize is NOT valid, expected 0x2a', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Total accumulated NR serving cell size \(0x3a\) mismatch with total size \(0x3c\) provided by modem', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'LTEServingCellSize is NOT valid, expected 0x2e', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 91923 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ucsicompliancecmutttest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ucsicompliancecmutttest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 91923 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(91923, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - UCSI commands - Get Alternate Modes, SOP-DoublePrime [Type-C MUTT] test can fail', 'HLK Errata - UCSI commands - Get Alternate Modes, SOP-DoublePrime [Type-C MUTT] test is failed "IsTrue(m_Helper-&gt;GetAlternateModesForSopPP(connector, output))"', 'This is an accpetable failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_461E'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["19041","22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestUcsi::UcsiCommandInterfaceTests::GetAlternateModesForSopPP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(m_Helper->GetAlternateModesForSopPP\(connector, output\)\): GET_ALTERNATE_MODES command for Recipient Sop'''' failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 92431 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% devfund_dvltest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% devfund_dvltest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 92431 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(92431, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Static Tools logo test failure due to UMDF class driver and/or msdmfilt.sys', 'HLK Errata: Static Tools logo test failure due to UMDF class driver and/or msdmfilt.sys', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348","10.1.22000","10.1.21390","10.1.22616"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.DvlTest.DvlCheckClient', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Expected driver names: msdmfilt', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: DvlChecker: missing Semmle DVL log content for driver ''msdmfilt', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.DvlTest.DvlCheckClient', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Expected driver names: wudfrd', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: DvlChecker: missing Semmle DVL log content for driver ''wudfrd''', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.DvlTest.DvlCheckClient', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Expected driver names: wudfrd', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: C:\\dvl: no DVL files were found.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevfundTests.DvlTest.DvlCheckClient', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Expected driver names: msdmfilt', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: C:\\dvl: no DVL files were found.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 93024 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMediaCaptureScenarios'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll /name:MediaCapture::Tests::CPP::TaefMediaCaptureCppTests::TestMediaCaptureScenarios')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 93024 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(93024, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MediaCaptureScenarios Low Lag tests fail to set warmstart when streaming is off', 'LowLag Tests inside MediaCaptureScenarios try to toggle the warmstart control while streaming is still occuring. This creates a valid failure from the device that the test incorrectly assumes is a test failure', 'Errata Issued, OS to be Updated', '2024-04-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*', '.*LowLagVideoCapture.*PauseWithoutResume.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'EndTest:Title=.*', '.*80070016.*FinishAsync.*', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'Test .* hr = 0xA0000002', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*', '.*PhotoSequence.*InvalidAPICallDuringCapture2.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*', 'Test failed with unexpected exception', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-04-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 93030 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash% D3DConf_12_Core.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash% D3DConf_12_Core.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 93030 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(93030, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - D3D12: In-development UMD crash running D3DConf_12_0_ResourceBindingAdditional::NullIBVBSOV', 'HLK Erratra: D3D12 - Null IB VB SO test failure', 'This is acceptable test failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''VEN_10DE'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'EndTest', '', 'D3DConf_12_0_ResourceBindingAdditional::NullIBVBSOV', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'A crash with exception code 0xC0000005 occurred in module "nvwgf2umx_cfg.dll" in process "te.processhost.exe"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 93113 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 93113 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(93113, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.50 - Offload LSO test fails with claims of a USO incompatible capability', 'NDISTest 6.50 - Offload LSO test fails with claims of a USO incompatible capability', 'This is an acceptable failure on Win10/11', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Configure LSO Offload Setting of Test Open', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'The miniport''s offload status indication is unable to support this Test Case', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 93492 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe%Microsoft.Bluetooth.Audio.FunctionalTests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe%Microsoft.Bluetooth.Audio.FunctionalTests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 93492 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(93492, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Autotriage: Rerun test on AudioA2dpOffloadTests::CheckA2dpOffloadIsUsed2 failur', 'This is a known test issue with a race condition in checking the disposition property.', 'Other a2dp offload tests will provide coverage', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=Microsoft::Bluetooth::AudioA2dpOffload::FunctionalTests::AudioA2dpOffloadTests::CheckA2dpOffloadIsUsed', 'Microsoft::Bluetooth::AudioA2dpOffload::FunctionalTests::AudioA2dpOffloadTests::CheckA2dpOffloadIsUsed', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IsTrue\(disposition == CodecProviderKind::Inband\): Inband was used on system', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 93494 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ucsicompliancecmutttest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ucsicompliancecmutttest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 93494 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(93494, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HLK - UCSI commands - Get Cable Property [Type-C MUTT] test is failed with error\" IsTrue(m_Helper->GetCableProperty(connector, output)): GET_CABLE_PROPERTY for cable failed', 'HLK Errata: UCSI commands - Get Cable Property \Type-C MUTT\', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.18362","10.1.19041","10.1.22000"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client ARM64 Vb Full","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client x86 19H1 Full","Windows v10.0 Client x64 19H1 Full","Windows v10.0 Client ARM64 19H1 Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest=D3DConf_11_CrossAdapterResourceWDDM30::IsCrossAdapterScanOutDisabled', 'TestUcsi::UcsiCommandInterfaceTests::TestGetCableProperty', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(m_Helper->GetCableProperty\(connector, output\)\): GET_CABLE_PROPERTY for cable failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 94757 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndtest.exe /auto /client /dvi /u /target:Miniport%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndtest.exe /auto /client /dvi /u /target:Miniport%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 94757 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(94757, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv (Multi-Group Win8+) failed due to multigroup is enabled and NDIS send indirection tables with groups other than 0', 'HLK Errata: NDISTest 6.0 - [2 Machine] - 2c_Mini6RSSSendRecv (Multi-Group Win8+) failed due to multigroup is enabled and NDIS send indirection tables with groups other than 0', 'This is an acceptable failure', '2025-09-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,''VEN_1055&DEV_7430'') or contains(.,''VEN_1055&DEV_7431'') or contains(.,''VEN_1055&DEV_A001'') or contains(.,''VEN_1055&DEV_A011'') or contains(.,''VEN_1055&DEV_A021'') or contains(.,''VEN_1055&DEV_A031'') or contains(.,''VEN_1055&DEV_A041'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Miniport did not indicate all received net buffers on the expected processor', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-09-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 94828 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'GetRStat.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('GetRStat.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 94828 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(94828, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: GetRasterStatus and GetRasterStatus (WoW64) test failures for headless dGPU', 'HLK Errata: GetRasterStatus and GetRasterStatus (WoW64) test failures for headless dGPU', 'This filter removes it for this special case.', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002&DEV_73A1'') or contains (.,''PCI\VEN_1002&DEV_73A3'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.17763","10.1.22000","10.1.22621","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'GetRasterStatus\(Refresh=60, SwapChain:=0\)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test looped, but couldn''t reach the REFERENCE_SCANLINE.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'GetRasterStatus\(Refresh=67, SwapChain:=0\)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test looped, but couldn''t reach the REFERENCE_SCANLINE.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'GetRasterStatus\(Refresh=72, SwapChain:=0\)', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'End', 'Test looped, but couldn''t reach the REFERENCE_SCANLINE.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'GetRasterStatus\(Refresh=75, SwapChain:=0\)', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95232 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'mjolnir.hlk.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('mjolnir.hlk.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95232 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95232, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Manual errata: Bluetooth - L2CAP Performance (Reliability) test failure due to a 7F BSOD', 'Bluetooth - L2CAP Performance (Reliability) test failure due to a 7F BSOD', 'Just issuing a filter for affected hw', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''USB\VID_8087&PID_0029'') or contains(.,''USB\VID_8087&PID_0A2B'') or contains(.,''ACPI\VEN_INT&DEV_33E4'') or contains(.,''iBTSerialBus\UART_H4'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'L2capPerformance1', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR:', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'ERROR:', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95286 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testmpdp.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testmpdp.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95286 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95286, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: The test Win6_4.MB.GSM.Data.TestMPDP cannot be performed due to mobile network restrictions.', 'HLK Errata: The test Win6_4.MB.GSM.Data.TestMPDP cannot be performed due to mobile network restrictions.', 'This is acceptable test failure.', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''USB\VID_1199&PID_90B1'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestMPDP::ConnectDisconnectAdditionalPDPCtx', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Status \(WWAN_STATUS_FAILURE\[0xc0040003\]\) is not WWAN_STATUS_SUCCESS\[0x0\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestMPDP::ConnectAndTrafficOnAdditionalPDPCtx', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Auto packet attach failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Status \(WWAN_STATUS_FAILURE\[0xc0040003\]\) is not WWAN_STATUS_SUCCESS\[0x0\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestMPDP::ConnectAndTrafficOnAdditionalPDPAndDefaultPDP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Status \(WWAN_STATUS_FAILURE\[0xc0040003\]\) is not WWAN_STATUS_SUCCESS\[0x0\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestMPDP::TrafficOnAdditionalPDPAndDefaultPDPSimultaneous', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Auto packet attach failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Status \(WWAN_STATUS_FAILURE\[0xc0040003\]\) is not WWAN_STATUS_SUCCESS\[0x0\]', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95501 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usbserialnumber.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usbserialnumber.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95501 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95501, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: USB Serial Number Test failure', 'HLK Errata: USB Serial Number Test failure', 'This is acceptable test failure', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''USB\VID_04A9&PID_184C'') or contains(.,''USB\VID_04A9&PID_1852'') or contains(.,''USB\VID_04A9&PID_18D1'') or contains(.,''USB\VID_04A9&PID_18D2'')])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'USB::UsbSerialNumber::SerialNumber', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'AreEqual\(FALSE, device1HasSerial\): At least 2 connected devices are expected for devices that have serial number. - Values \(0, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95523 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%Tpm20PreOsTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%Tpm20PreOsTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95523 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95523, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM 2.0 UEFI Preboot - ParseAndLogFile - TPM2Table Test', 'ACPI Table Revision 5 is now accepted.', 'Fixed in next HLK release.', '2025-01-25T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=PreOsTestWrapper.ParseAndLogFile', 'PreOsTestWrapper.ParseAndLogFile', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=---..Invalid TPM2 Table Revision: 5 .0x05. .Expected 3 or 4.', '----Check TPM2 Table Revision: FAIL', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=End ''TPM2Table'' Test: FAIL', '----Finished checking the TPM2 ACPI table: FAIL', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-01-25T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95527 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%EkCertTests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%EkCertTests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95527 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95527, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Win10 TPM EK Certificate Test: On-Die Intermediate Certificate Support', 'On-Die Intermediate Certificate backport support.', 'Use the Win11 or newer test kit.', '2023-06-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=EkCertTests::VerifyEkCertIsKnownAuthority', 'TPM Information: INTC - 600\.7\.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=EkCertTests::VerifyEkCertIsKnownAuthority', 'EkCertTests::VerifyEkCertIsKnownAuthority', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Key ID: *', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=EkCertTests::VerifyEkCertIsKnownAuthority', 'TPM Information: INTC - 600\.18\.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=EkCertTests::VerifyEkCertIsKnownAuthority', 'EkCertTests::VerifyEkCertIsKnownAuthority', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Key ID: *', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95656 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %drmtest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %drmtest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95656 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95656, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: HLK - HW/SW-DRM Video - Play protected content using fails - error 0xc00d36dd', 'HLK Errata: HLK - HW/SW DRM Video - Play protected content using software decryptor fails with Playback error on headless display', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 19041])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002&DEV_73A1'') or contains (.,''PCI\VEN_1002&DEV_73A3'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::SoftwareDRM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'End', 'Playback failed with error: c0262500', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Win32Succeeded\(pPlayBack->WaitCompletion\(\)\) - Value \(0xc00d36dd\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Playback failed with error: c0262500', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Win32Succeeded\(pPlayBack->WaitCompletion\(\)\) - Value \(0xc00d36dd\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95875 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%EkCertTests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%EkCertTests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95875 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95875, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM EK Certificate Test: Pluton On-Die Intermediate Certificate Support', 'TPM EK Certificate Test: Pluton On-Die Intermediate Certificate Support', 'A change to tpmhli to include the MSFT manufacturer under TPMs that support local intermediate EK CA Certs', '2025-01-26T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=EkCertTests::VerifyEkCertIsKnownAuthority', 'TPM Information: MSFT - 6\.3\.1\.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=EkCertTests::VerifyEkCertIsKnownAuthority', 'EkCertTests::VerifyEkCertIsKnownAuthority', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Key ID: *', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-01-26T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 95998 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash ucsicompliancecmutttest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash ucsicompliancecmutttest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95998 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(95998, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - UCSI commands - Get Alternate Modes, SOP [Type-C MUTT] test is failed  ', 'HLK Errata - UCSI commands - Get Alternate Modes, SOP [Type-C MUTT] test is failed.', 'This is an accpetable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_461E'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","10.0.19042"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestUcsi::UcsiCommandInterfaceTests::GetAlternateModesForSop', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'GET_ALTERNATE_MODES command for Recipient Sop failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96057 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash ucsicompliancecmutttest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash ucsicompliancecmutttest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96057 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96057, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - UCSI commands - Get Alternate Modes, SOP-Prime [Type-C MUTT] test is failed  ', 'HLK Errata - UCSI commands - Get Alternate Modes, SOP-Prime [Type-C MUTT] test is failed.', 'This is an accpetable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_461E'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestUcsi::UcsiCommandInterfaceTests::GetAlternateModesForSopP', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'GET_ALTERNATE_MODES command for Recipient Sop'' failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96061 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96061 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96061, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - Directed DFX System Verification Test fail; failed because GPIO driver does not support DFX', 'HLK Errata - Directed DFX System Verification Test fail; failed because GPIO driver does not support DFX', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''Intel\(R\) UsbGpio Device \(.+\)'' does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96197 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll /name:Usb4Tests::Usb4Tests::ValidateAllTypeCPortsSupportUSB4'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll /name:Usb4Tests::Usb4Tests::ValidateAllTypeCPortsSupportUSB4')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96197 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96197, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: "USB4 Systems Have Support For All Type-C connectors" test fails with "Type-C port (X), hub ID (XXX) is not USB4 capable" error because IsConnectable() incorrectly checks a value of 1.', 'HLK Errata: "USB4 Systems Have Support For All Type-C connectors" test fails with "Type-C port (X), hub ID (XXX) is not USB4 capable" error because IsConnectable() incorrectly checks a value of 1.', 'Please contact CSS to get the Privates binary.', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Usb4Tests::Usb4Tests::ValidateAllTypeCPortsSupportUSB4', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'This Type-C port \(.*\), hub ID \(.*\) is not marked as connectable in ACPI UPC', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Type-C port \(.*\), hub ID \(.*\) is not USB4 capable', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96334 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ucsicompliancecmutttest.dll%GetAlternateModesForSop%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ucsicompliancecmutttest.dll%GetAlternateModesForSop%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96334 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96334, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'UCSI commands - Get Alternate Modes tests will be removed from compatibility playlist in near future', 'The following tests will be removed from the compatibility playlist:

UCSI commands - Get Alternate Modes, SOP-DoublePrime [Type-C MUTT]
UCSI commands - Get Alternate Modes, SOP - Prime [Type-C MUTT]
UCSI commands - Get Alternate Modes, SOP [Type-C MUTT]', 'This filter has been created as a stopgap for UCSI - Get Alternate Modes tests to unblock developers until the changes to the compatibility playlist have been finalized.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["19041","22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'TestUcsi::UcsiCommandInterfaceTests::GetAlternateModesForSopP*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96337 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe /inproc HAPTest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe /inproc HAPTest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96337 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96337, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: "System Audio - Hardware Offload of Audio Processing Test" fails', 'HLK Errata: "System Audio - Hardware Offload of Audio Processing Test" fails', 'This is acceptable test failure.', '2023-10-09T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''USB\VID_8087&PID_0033'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '', 'EnumerateOffloadPaths: Failed to Get the IMMEndpoint Id with HRESULT 0x80070490', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'SUCCEEDED\(hr = OffloadEnumerator::EnumerateOffloadPaths\( pLogger, dataFlow, &pOffloadPathCollection \)\) - Value \(0x80070490\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-09T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96435 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%devfund_dvltest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%devfund_dvltest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96435 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96435, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Static Tools Logo Test incorrectly fails because of missing SDV DVL log of a different driver.', 'Test "Static Tools Logo Test" incorrectly fails because of missing SDV DVL log of a different driver. ', 'This is an acceptable failure. ', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''CHT6BUS\chiscsi'') or contains(.,''CHT5BUS\chiscsi'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DevfundTests.DvlTest.DvlCheckServer', 'DevfundTests.DvlTest.DvlCheckServer', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: DvlChecker: missing SDV DVL log content for driver*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96497 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'te.exe /inproc HAPTest.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('te.exe /inproc HAPTest.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96497 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96497, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Audio Hardware Offload of Audio Processing Test fails in BuildResourceList on certain Bluetooth devices', 'Test fails in call to OffloadEnumerator::EnumerateOffloadPaths during "Begin BuildResourceList", before any test cases are run.
', 'If you encountered this error and you suspsect this is a test issue then please contact CSS for verification and to obtain the updated test binary.', '2024-02-08T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x86 Co OneCoreUAP"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '=Error', 'SUCCEEDED\(hr = OffloadEnumerator::EnumerateOffloadPaths\( pLogger, dataFlow, &pOffloadPathCollection \)\) - Value \(0x80070490\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-02-08T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 96503 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'VerifyMode.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('VerifyMode.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 96503 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(96503, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 - 11 on 12 - WGF11 D3DWDDM test failures for headless dGPU', 'HLK Errata: D3D12 - 11 on 12 - WGF11 D3DWDDM test failures for headless dGPU', 'This filter removes it for this special case.', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1002'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Fe Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'VerifyMode', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'VerifyMode|||Failure - Microsoft Basic Display device has been enumerated when IHV device has been expected', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 97506 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%SystemGuardTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%SystemGuardTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 97506 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(97506, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'SystemGuard on ARM devices', 'These are test errors for ARM devices.', 'Fixed in the next kit.', '2024-02-22T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Fe Full","Windows v10.0 Client ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestSLPerformed', 'SystemGuardTest::TestSLPerformed', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'SystemGuard is enabled on this platform.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestDmaProtection', 'SystemGuardTest::TestDmaProtection', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'IsTrue\(dmaGuardEnabled\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestSmmProtection', 'SystemGuardTest::TestSmmProtection', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error=IsTrue\(isSmmProtectionActive\)', 'SystemGuard is enabled on this platform.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestSGSinitSigner', 'SystemGuardTest::TestSGSinitSigner', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Error parsing DRTM log for SINIT signer\: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestTxtCpuSrtmStat', 'SystemGuardTest::TestTxtCpuSrtmStat', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Error parsing DRTM log for CPU SRTM status\: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestTxtOsSinitDataCap', 'SystemGuardTest::TestTxtOsSinitDataCap', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Error parsing DRTM log for OS/SINIT Capabilities\: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestTxtLcpControl', 'SystemGuardTest::TestTxtLcpControl', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Error parsing DRTM log for LCP Control\: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestTxtLcpAuthorities', 'SystemGuardTest::TestTxtLcpAuthorities', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Error parsing DRTM log for LCP authorities value\: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestTxtNvInfo', 'SystemGuardTest::TestTxtNvInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Error parsing DRTM log for NV Info\: No event data for SIPAEV_TXT_SINIT_PUBKEY_HASH was found in the DRTM log\.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-02-22T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 97515 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 97515 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(97515, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Directed FX System Verification Test - failed because RHPROXY does not support DFX', 'HLK Errata: Directed FX System Verification Test failed on RHPROXY Device', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'ACPI\\MSFT8000', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'does not support DFX.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 97580 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby2%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby2%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 97580 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(97580, 1, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Lullaby test fails on Yuan video capture cards', 'The Yuan video capture card exposes an audio function immediately after coming back from S3, but then requires firmware to be loaded before being functional, so there is a delay which is flagged by Lullaby test.', 'Since there is no end-user impact, a contingency is granted for this failure.', '2023-06-30T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"USB\VID_03F0&PID_4384")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'PnP ID      = USB\\VID_03F0&PID_4384.*', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'IAudioStreamingCapture::CaptureBuffer\(\*, 1152000\): 0x8445001F', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-30T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 97633 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging ucmendtoend.dll /name:UcmTest::UcmEndToEndTests::UcmDataRoleSwap'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging ucmendtoend.dll /name:UcmTest::UcmEndToEndTests::UcmDataRoleSwap')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 97633 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(97633, 3, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Contingency: USB Type-C UCM Data Role Swap Test is failing with error "Data role swap failed. Expected role: UcmDataRoleUfp. Actual role: UcmDataRoleDfp"', 'Contingency: USB Type-C UCM Data Role Swap Test is failing with error "Data role swap failed. Expected role: UcmDataRoleUfp. Actual role: UcmDataRoleDfp"', 'Temporary waiver before UCSI PPM or the PD controllers on the SUT platform will address the issue.', '2023-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_51ED'') or contains(.,''PCI\VEN_8086&DEV_54ED'') or contains(.,''PCI\VEN_8086&DEV_A71E'')or contains(.,''PCI\VEN_8086&DEV_464E'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'UcmTest::UcmEndToEndTests::UcmDataRoleSwap', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Data role swap failed. Expected role: UcmDataRoleUfp. Actual role: UcmDataRoleDfp', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 97706 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging%win6_4.mbn.%.testreadyinfo.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging%win6_4.mbn.%.testreadyinfo.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 97706 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(97706, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - Win6_4.MB.GSM.Data.TestReadyInfo', 'HLK Erratra: TestReadyInfo test failure', 'This is acceptable test failure.', '2024-10-07T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''USB\VID_1199&PID_90D6'') or contains(.,''SWI_NetAdapter_sdx55'')]) ', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestReadyInfo::Query', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Failed to receive unsolicited NDIS_STATUS_WWAN_READY_INFO \(WwanReadyStateInitialized\) indication', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Did not receive unsolicited readyInfo notification for WwanReadyStateInitialized', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-07T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 97732 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.testbasestationsinfo.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 97732 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(97732, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: The test Win6_4.MB.GSM.Data.TestBaseStationsInfo cannot be passed due to test environment restrictions.', 'HLK Errata: The test Win6_4.MB.GSM.Data.TestBaseStationsInfo cannot be passed due to test environment restrictions.', 'This is acceptable test failure.', '2023-10-02T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_17CB&DEV_0306'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestBaseStationsInfo5GSA::GetBaseStationsInfo5GSA', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Auto packet attach failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-02T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 97924 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[[]TestExe] -c [[]TestPro] -l "s98wtt.dll"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[[]TestExe] -c [[]TestPro] -l "s98wtt.dll"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 97924 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(97924, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HD Audio has been updated to relax the stopping time for a stream', 'The HD Audio standard has been modified to relax the required time to stop a stream.', 'This filter will overturn timing failures until the tests and bus are fixed.', '2024-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Controller Tests\\Testing controller''s DMA Reset Timing', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Engine .* \(1-based\) took .* microseconds to (enter|exit) reset; hdaudbus.sys will give up after 40 microseconds so we require reset to (enter|exit) in 30 microseconds or less', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 98458 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.test5gextensions.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash win6_4.mbn.sys.test5gextensions.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 98458 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(98458, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: The test Win6_4.MB.GSM.Data.Test5GExtensions cannot be passed since OEM does not have test environment.', 'HLK Errata: The test Win6_4.MB.GSM.Data.Test5GExtensions cannot be passed since PC vender might not have test environment.', 'This fail is acceptable failure, since the MBB modem that you are using has already passed this test by modem vendor.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'')])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5GSA_TestPacketService', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unsuccessfully registered on 5G', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::Test5GSAExtensions::Verify5G_TestConnect', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'Unsuccessfully registered on 5G', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 98608 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'ObCallbackTestCtrl.exe -regr'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('ObCallbackTestCtrl.exe -regr')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 98608 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(98608, 1, 1, 1, 0, 1, 0, 0, @TestCommandLineId, 'HCK Test ''Callback test for object Win7" failure altitude conflict error', 'callback test for object Win7 is failing on Windows 7, yet all tests on the same hardware are passing in Windows 8.1.', 'This is considered an acceptable test failure.', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', '[TC_AltitudeConflict|TC_FilterTerminateAccess]', 'Title', 0, 1)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Error 0x00000000', 'ErrorText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 98990 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash devfund_reinstall_with_io_beforeandafter_wlk_certification.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash devfund_reinstall_with_io_beforeandafter_wlk_certification.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 98990 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(98990, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Custom Source does not create SensorGroups after Reinstall', 'Custom Media Sources do no generate a new Sensor Group during DF - Reinstall with IO Before and After. This causes the test to be unable to create the FrameReader after reinstall', 'Errata Issued', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''ROOT\MMXVIRTUALCAMERA'') or contains(.,''root\MMXVirtualCamera'')])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*Stop.*', '.*Open.*ROOT.*GetMediaFrameSourceGroupByID.*C00D36D6.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 99153 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%gaudit_mc%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%gaudit_mc%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 99153 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(99153, 2, 2, 1, 0, 1, 0, 1, @TestCommandLineId, '[Erratum] GAudiT (Co) could fail on some drivers due to a test buffer being too small', 'This erratum is aimed at covering an error in GAudiT where an internal test buffer could not be big enough to send an IOCTL to the driver, which causes a test crash.

The erratum should only be applicable to "Audio Codec - General Audio Test".', 'There is no sure way of detect this issue, so if you encounter a crash on the test process, which can be seen as only having a .traces file, and believe this might be your problem, please contact CSS for verification and to obtain an updated test binary.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/Service[starts-with(.,"SdcaClass")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 99291 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll /name:DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest /p:"Cycles=[[]Cycles]" /p:"CycleDuration=[[]CycleDuration]"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 99291 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(99291, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Device ''USB xHCI Compliant Host Controller XXXX failed due to usbser.sys doesn''t support DFX', 'Device ''USB xHCI Compliant Host Controller XXXX failed due to usbser.sys does not support DFX yet.', 'Review steps should be followed.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//ImagePath[contains(.,''usbser.sys'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''USB\\VID_17EF&PID_6131&MI_00\\7&2827f671&0&0000'' does not support DFX', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''USB\\VID_1546&PID_01A8\\6&3c65812&0&2'' does not support DFX', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 99458 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[[]SystemDrive]\Data\Test\Packages\ApplyDriverUpdate\unifieddriverdeployer.exe [[]DriverFile]%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[[]SystemDrive]\Data\Test\Packages\ApplyDriverUpdate\unifieddriverdeployer.exe [[]DriverFile]%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 99458 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(99458, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: Failed to install BthCSTI driver on Bluetooth/USB/Networking related cases', 'Some Bluetooth tests might fail due to Failed to install bthcsti_mc.inf A required certificate is not within its validity period.', 'Contact Microsoft CSS and reference this Autotraige ID as it might be due to a known issue and there is a documented workaround in place.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'Desktop: Failed to install bthcsti_mc.inf', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Failed to stage driver', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 99537 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% directed-fx-taef-system.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 99537 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(99537, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Delayed Enforcement Errata: short term solution proposed removal of DFx support Qualcomm I2C device, to avoid BSODs in framework', 'Delayed Enforcement Errata: short term solution proposed removal of DFx support Qualcomm I2C device, to avoid BSODs in framework', 'This is an acceptable failure', '2024-10-07T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DirectedFx::Taef::DirectedFxSystemTest::SystemVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'failed because device ''Qualcomm\(R\) I2C Bus Device \(.+\)'' does not support DFX', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Device ''Qualcomm\(R\) I2C Bus Device \(.+\)'' does not support DFX', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-07T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 99745 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%QueryProperty.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%QueryProperty.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 99745 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(99745, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'ERRATA: Storage Query Property (LOGO) test fails with an adapter driver reporting an incorrect bus type (device-specific)', 'When testing a Raid Controllers, the Storage Query Property test fails to identify the RAID controller as RAID. This is a device-specific erratum.', 'If you are encountering this issue while testing a Raid Controllers and device BusType has been identified as BusTypeSas, please open a support case with Microsoft HLK Support to investigate whether your driver or device can be added.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_1000&DEV_00A5'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.17763.17763","10.1.20348.20348","10.1.19041.19041"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'STORAGE_DEVICE_DESCRIPTOR: Adapter must set the appropriate STORAGE_BUS_TYPE\(as determined by PCI class code\).', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'BusType BusTypeSas is not an acceptable STORAGE_BUS_TYPE for this adapter.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 100309 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe %win6_4.mbn.sys.testslot.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe %win6_4.mbn.sys.testslot.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 100309 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(100309, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLAutoTriage: Win6_4.MB.GSM.Data.TestSlot fails on Single SIM devices', 'HLK AutoTriage: HLK AutoTriage: Win6_4.MB.GSM.Data.TestSlot fails on Single SIM devices
Win6_4.MB.GSM.Data.TestSlot is failing with following errors:
Failed to receive unsolicited NDIS_STATUS_WWAN_READY_INFO (WwanReadyStateOff) indication', 'Updated private binary,Win6_4.MB.GSM.Data.TestSlot.dll are available. To obtain the binary please contact CSS and reference this Waiver ID 100309.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086&DEV_A0F0'') or contains(.,''PCI\VEN_17CB&DEV_1103'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client ARM64 Co Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestSlot::ValidateSlotInfoState', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to receive unsolicited NDIS_STATUS_WWAN_READY_INFO \(WwanReadyStateOff\) indication', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 100490 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash displayport.hlk.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash displayport.hlk.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 100490 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(100490, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Verify DisplayPort AUX local & SBM remote fail for AMD headless dGPUs without physical DP outputs on these PCBs', 'There are no physical DP outputs on these PCBs. All display types are virtual and therefore the HLK tests were never designed for this scenario in mind and cause "Failed DxgkDdiGetDPAddress" error', 'Provide filter to cover this failure', '2025-10-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(/DISPLAY_BLOCK/Device/@HardwareID[contains(.,"PCI\VEN_1002&DEV_73A1") or contains(.,"PCI\VEN_1002&DEV_73AE") or contains(.,"PCI\VEN_1002&DEV_7360") or contains(.,"PCI\VEN_1002&DEV_7362") or contains(.,"PCI\VEN_1002&DEV_6860") or contains(.,"PCI\VEN_1002&DEV_686C")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'OSG::GRFX::DisplayKernel::DisplayPort::VerifyRemoteDisplayPortMonitors', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Failed DxgkDdiGetDPAddress', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'OSG::GRFX::DisplayKernel::DisplayPort::VerifyLocalDisplayPortMonitors', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Failed DxgkDdiGetDPAddress', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 100587 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash% win6_4.mbn.sys.testpreferredprovider.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash% win6_4.mbn.sys.testpreferredprovider.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 100587 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(100587, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata - Win6_4.MB.GSM.Data.TestPreferredProvider is failing due to crash in NetworkMobileSettings.dll', 'HLK Erratra: TestPreferredrovider test failure', 'This is acceptable test failure.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'')]) ', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'in6_3MBN::TestPreferredProvider::AddRemovePreferredProvider', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'A crash with exception code 0xC0000005 occurred in module \"NetworkMobileSettings.dll\" in process \"ShellExperienceHost.exe\"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 100793 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%apivalidatortest.dll /name:ApiValidatorTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%apivalidatortest.dll /name:ApiValidatorTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 100793 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(100793, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM2.7 OneCore ApiValidator Test and WDDM2.5 Universal ApiValidator Test has failure "ApiValidator output does not report driver is universal" for libnvwgf2umx_wsa.so', 'Run the WDDM2.5 Universal ApiValidator Test and WDDM2.7 OneCore ApiValidator Test on a WDDM 3.1 driver and the WSA driver binaries will cause the test to fail incorrectly.', 'The binaries need to be excluded as they are not part of the OnecoreUAP or Onecore efforts that these tests are trying to validate. This will be fixed in a future update.', '2024-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Result=Fail', 'ApiValidatorTest::VerifyDriver*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Msg:UserText=Umd FileName: .*', 'Umd FileName: .*\.so', 'UserText', 0, 1, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 100797 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%VerifyWsaLogs%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%VerifyWsaLogs%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 100797 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(100797, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WHQL HLK 22H1 22572 [SLI]: ''WDDM 2.7 WSA Verifier'' test fails with ''Parse Cts Tests'' exception', 'This is due to the powershell command that gets the Win32_VideoController returning multiple adapters in an SLI configuration. ', 'This will be fixed in a later update', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(DISPLAY_BLOCK/Device/GraphicsInfo[@IsLDA="1"])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Result=Fail', 'Parse Cts Tests', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '0x80131500', 'ErrCode', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 100802 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%KsTopTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%KsTopTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 100802 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(100802, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'KS Topology Test incorrectly exercises on pins that don''t support KSCATEGORY_AUDIO (AMD Custom pin)', 'KS Topology Test incorrectly exercises on pins that don''t support KSCATEGORY_AUDIO (AMD Custom pin)', 'This errata overturns the failure.', '2024-04-21T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[starts-with(.,"ACP") and contains(.,"VEN_1022&DEV_15E2")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["22000","22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KsTopTest::TC_CheckProcessingModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL: Pin\[.*\] : Pin creation failed.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'AreEqual.*Values \(0, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-04-21T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 101036 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging win6_4.mbn.gsm.testbasestationsinfo.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging win6_4.mbn.gsm.testbasestationsinfo.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 101036 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(101036, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Win6_3MBN::TestBaseStationInfo is failing due to serving cell size mismatch (create for Win10 only)', 'Win6_4.MB.GSM.Data.TestBaseStationsInfo is failing with following errors:
• LTE - LTEServingCellSize is NOT valid, expected 0x2e
', 'This issue described is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_14C3&DEV_4D75'') or contains(.,''QCMBBNETADAPTER'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Win6_3MBN::TestBaseStationsInfo::GetBaseStationsInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'LTEServingCellSize is NOT valid, expected 0x2e', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 101038 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraControlsSystemTests#*'' AND @ID=2205"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#CameraControls" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::CameraControlsSystemTests#*'' AND @ID=2205"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 101038 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(101038, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Camera VideoHDR default test does not match actual use cases', 'Camera VideoHDR default tests validate that Preview stream cannot be selected for the control, however usage in Windows includes Preview stream for the control. While this DDI usage is wrong, to allow drivers to work with existing usage, this default check needs to be removed', 'Tests Updated, Errata Issued', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Msg:UserText=.*', 'Control should not be exposed on MF.CAPTURE.ENGINE.PREFERRED.SOURCE.STREAM.FOR.VIDEO.PREVIEW', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'checkControl Failed with error E.FAIL.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 101039 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#SensorControls" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::SensorCameraControlsSystemTests#*'' AND @ID=31805"%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll /p:"DriverVerifierExcludedFlags=[[]DriverVerifierExcludedFlags]" /p:"MFTrace=[[]MFTrace]" /p:"DS=Table:cameraDriverControlsHLKTests.xml#SensorControls" /select:"@name=''WEX::TestExecution::CaptureTaef::CaptureEngineTests::SensorCameraControlsSystemTests#*'' AND @ID=31805"%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 101039 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(101039, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Sensor Camera VideoHDR default test does not match actual use cases', 'Camera VideoHDR default tests validate that Preview stream cannot be selected for the control, however usage in Windows includes Preview stream for the control. While this DDI usage is wrong, to allow drivers to work with existing usage, this default check needs to be removed', 'Tests Updated, Errata Issued', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Msg:UserText=.*', 'Control should not be exposed on MF.CAPTURE.ENGINE.PREFERRED.SOURCE.STREAM.FOR.VIDEO.PREVIEW', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'checkControl Failed with error E.FAIL.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 101254 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '[TestExe] -c [TestPro] -l "s98wtt.dll" -h "[WDKDeviceID]"'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('[TestExe] -c [TestPro] -l "s98wtt.dll" -h "[WDKDeviceID]"')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 101254 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(101254, 1, 2, 1, 0, 1, 0, 1, @TestCommandLineId, '[Erratum] GAudiT (Vb) could fail on some drivers due to a test buffer being too small', 'This erratum is aimed at covering an error in GAudiT where an internal test buffer could not be big enough to send an IOCTL to the driver, which causes a test crash.

The erratum should only be applicable to "Audio Codec - General Audio Test - Desktop".', 'There is no sure way of detect this issue, so if you encounter a crash on the test process, which can be seen as only having a .traces file, and believe this might be your problem, please contact CSS for verification and to obtain an updated test binary.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/Service[starts-with(.,"SdcaClass")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.19041"]}')

-- Inserting filter log nodes
	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 101628 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 101628 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(101628, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: MJPEG Decoder HMFT Provides Displayable Resources'' fails with error ''MFSamples underlying D3D11Texture2D is not displaybale''', 'This requirement was created when displayables were expected to be required by WDDM3.0. That is no longer the case.', 'This is an acceptable failure', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_10DE'')] or contains(.,''PCI\VEN_1002''))')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 22350])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::MJPEG_HMFTProvidesDisplayablesTest#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'MFSamples underlying D3D11Texture2D is not displaybale. Must be created with D3D11_RESOURCE_MISC_SHARED_DISPLAYABLE', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 102198 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_CrossDimensionCopy::* [CustomTaefCommandArgs]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_CrossDimensionCopy::* [CustomTaefCommandArgs]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 102198 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(102198, 1, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 Cross dimension copy - Copy3Dto1D failing on AMD due to temporary SW limitation', 'Copy3Dto1D failing because of a SW limitation that will be addressed in the next release.   

From AMD:

This will be a Contingency (temporary AMD SW limitation).
The feature is adding support to DX12 to match some Vulkan implementation. This test failure is just one subcomponent of one of the subfeatures. In fact, our Vulkan implementation also couldn’t pass this test (Copy 3D to 1D) and we need flow time to implement the feature (work to implement will not align to SV2 target).
I would expect end-user impact to be very minimal. I would like to target full implementation to end of year or SV3.
', 'Error will be filtered until SV3, at which point AMD is expected to have addressed this gap.', '2023-05-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_1002")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["Device.Graphics.AdapterRender.D3D12.TextureCopyBetweenDimensions.CoreRequirement"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_CrossDimensionCopy::Copy3Dto1D', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 102605 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash winrtsensors.functests.cppcx.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash winrtsensors.functests.cppcx.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 102605 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(102605, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK errata: Human Presence Proximity Sensor related tests failed with QC drivers (Vendor Specific)', 'This is an acceptable failure', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[ contains(.,''ACPI\QCOM06D9'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000.22000","10.1.22621","10.1.22621.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'IsNotNull\(reading\): Current reading is present', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End', 'IsLessThanOrEqual\(sensor->MinDistanceInMillimeters->Value, c_maxMinDistanceInMillimeters\): Min distance less than or equal to max required min distance - Values \(300, 100\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End Test', '.*A crash with exception code 0xC0000005 occurred in module "Windows.Devices.Sensors.dll"', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End Test', 'IsLessThanOrEqual\(sensor->MinDetectableDistanceInMillimeters->Value, c_maxMinDetectableDistanceInMillimeters\): Min distance less than or equal to max required min distance - Values \(300, 100\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 102825 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TE.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TE.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 102825 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(102825, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK errata: Multiple DF related tests failed with "Win32 Error Code=234 - More data is available" for VirtIO drivers', 'This is an acceptable failure', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_1AF4&DEV_1000'') or contains(.,''PCI\VEN_1AF4&DEV_1001'') or contains(.,''PCI\VEN_1AF4&DEV_1002'') or contains(.,''PCI\VEN_1AF4&DEV_1003'') or contains(.,''ACPI\QEMU0001'')])
')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Server x64","Windows Server 2008 Release 2 x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'Win32 Error Code=234 - More data is available', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103178 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.bluetooth.audio.functionaltests.dll /'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.bluetooth.audio.functionaltests.dll /')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103178 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103178, 2, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: Use BM62 as replacement device for Bluetooth Audio A2DP offload testing', 'Please investigate the failure and contact CSS', 'Please open a support case with Microsoft CSS to request addition to the device-specific filter. Be prepared to provide the failing logs in a .hlkx package', '2024-05-03T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Exception thrown \(0x6|16', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-05-03T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103191 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103191 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103191, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Test EffectsList Default APO E_NOTIMPL', 'APOs can cause an error with how one of the MSFT inbox APOs functions in a test scenario. The inbox APO will return a value of E_NOTIMPL when the test expects otherwise. ', 'An errata is created to show that the test passes if a device is used and the E_NOTIMPL error occurs. ', '2024-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Ni Full","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co OneCore"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CTestEffectsList::TestGetEffectsList', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(audioEffectsManager->GetAudioEffects\(ppEffects, pNumEffects\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(audioEffectsManager->GetAudioEffects\(&controllableEffects, &numControllableEffects\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103544 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash dxgiconf_hybridcrossadapterscanout.dll /name:DXGIConf_HybridCrossAdapterScanOut::* [CustomTaefCommandArgs]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash dxgiconf_hybridcrossadapterscanout.dll /name:DXGIConf_HybridCrossAdapterScanOut::* [CustomTaefCommandArgs]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103544 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103544, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Cross Adapter Resource Tier Support Validation ', 'The CASO OEM test uses a buffer size of 1920x1080 to verify that the driver passes the static check flag and leads to using the one copy path. However, on systems that don''t support 1920x1080 or if the system is on a different resolution due to a previous test, it leads to the static check failing since the driver doesn''t support this MPO shrink scaling.', 'We will be issuing a waiver to waive any Static Check MPO failures for SV2. For SV3 and beyond, we''ll fix the test to use either 1080p or the systems native resolution, whichwever is smaller to prevent the need for scaling support,', '2024-12-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DXGIConf_HybridCrossAdapterScanOut::VerifyScanoutCapableForCrossAdapterPrimaryResource', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'IsTrue\(bDriverStaticCheckMPOSupport\): Driver should pass CheckMPO Static Check DDI with support to scan out the cross adapter backbuffer surface.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103610 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb4tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103610 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103610, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK errata: Graphic Driver Supports USB4 failed due to ID adapter is present in the system', 'This issue described is an acceptable failure.', 'This issue described is an acceptable failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\USB4_MS_CM'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22000.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'does not support Usb4 monitors', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103799 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_UnrestrictedAlignmentOffsetCopy::* [CustomTaefCommandArgs]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_UnrestrictedAlignmentOffsetCopy::* [CustomTaefCommandArgs]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103799 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103799, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Unrestricted buffer-texture row pitch copy failing due to test bug', 'D3DConf_12_UnrestrictedAlignmentOffsetCopy fails due to a test bug. Offsets in this test are unaligned according to the previous D3D12_TEXTURE_DATA_PITCH_ALIGNMENT restriction but do still need to be aligned according to the texel size of the underlying resource format. Not being aligned to the underlying resource format is the test bug causing false failures.', 'Bug is fixed; this waiver will not be valid for SV3.', '2023-05-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"RequirementID","MatchType":0,"Values":["Device.Graphics.AdapterRender.D3D12.UnrestrictedBufferTextureCopyPitch.CoreRequirement"]}')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Client x86 Ni","Windows v10.0 Client x64 Ni","Windows v10.0 Client ARM Ni","Windows v10.0 Client ARM64 Ni","Windows v10.0 Server x86 Ni","Windows v10.0 Server x64 Ni","Windows v10.0 Server ARM Ni","Windows v10.0 Server ARM64 Ni"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_UnrestrictedAlignmentOffsetCopy::.*', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103872 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103872 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103872, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'CTestEffectsList::TestGetEffectsList Co MEP Crash', 'The old version of CAPX relied on some legacy code that did not check for overflows in a way that would work in the buffer sized was increased in the future. This leads to a crash in the CTestEffectsList::TestGetEffectsList test. ', 'An errata is created to handle the crashing CTestEffectsList::TestGetEffectsList in Co. ', '2023-05-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co OneCore"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CTestEffectsList::TestGetEffectsList', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=A failure occurred while running a test operation: ''CTestEffectsList::TestGetEffectsList''. \(A crash with exception code 0x80000003 occurred in module "vrfcore.dll" in the process hosting the test code while invoking a test operation.\)', 'A crash with exception code 0xC0000421 occurred in module "verifier.dll" in process "te.processhost.exe"', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103875 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'zbuffer.exe   -M:[Monitor] [MODIFIEDCMDLINE]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('zbuffer.exe   -M:[Monitor] [MODIFIEDCMDLINE]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103875 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103875, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Discardable Depth Stencil - ZEnable tests fail when using d3d9on12 for pre-transformed and lit vertices', 'D3D9on12 has a bug that prevents it from understanding pre-transformed and lit vertices. This affects how depth culling works in some situations, causing this test to fail. ', 'This issue has been fixed by Microsoft and will be serviced soon.', '2030-01-30T23:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_8086") or starts-with(@HardwareID,"ACPI\VEN_QCOM")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":1,"Values":["Windows v10.0 Client x86","Windows v10.0 Client x64","Windows v10.0 Client ARM","Windows v10.0 Client ARM64","Windows v10.0 Server x64","Windows v10.0 Server ARM64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ZEnable: False, Green Triangle Visible: Yes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Image conformance of 0.00% was less than the required 85.00%.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-01-30T23:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 103935 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_5_RenderPass::*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_5_RenderPass::*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103935 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(103935, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 RenderPass EndingAccessResolve', 'Intel reported that D3D12 D3DConf_12_5_RenderPass::EndingAccessResolve HLK test has been failing. This is because a previous fix in the test breaks the test for Intel. We have submitted a fix and we now need an HLK errata.', 'We no longer make invalid CheckFeatureSupport calls in the test.', '2023-06-14T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf.*EndingAccessResolve', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '39', 'Line', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf.*IntraRenderPassSetDescriptorHeaps', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '-1', 'Line', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf.*IntraCommandListSuspendResume', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '-1', 'Line', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf.*InterCommandListSuspendResume', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '-1', 'Line', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf.*ResolveSubresourceRegionCompatibility', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', '-1', 'Line', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'LeakTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '124', 'Line', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-14T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 104741 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 104741 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(104741, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Wave test failure on unified Bluetooth devices', 'Wave test fails a multi-stream test because of limitations with A2DP and HFP on unified Bluetooth devices.', 'This erratum will cover the issue until the test is updated.', '2023-06-07T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/ImagePath[contains(.,"BthA2dp.sys")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'WDMAudio::WaveTest::TAEF_StreamMultipleModes', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '!Msg:UserText=First stream is in RAW mode', 'First stream is in (RAW|DEFAULT) mode', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'Second stream is in COMMUNICATIONS mode', 'UserText', 0, 1, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 3

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 3
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'SUCCEEDED\(hr = m_pDevice->Activate\( __uuidof\(IAudioOutputEndpointRT\), CLSCTX_INPROC_SERVER, &varActivationParameter, reinterpret_cast.*\(&spAudioOutputEndpointRT\)\)\) - Value \((0x887c0043|0x887c0036)\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 3

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-07T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 105154 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll%ID=2400%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash hlkcameracontrolstest.dll%ID=2400%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 105154 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(105154, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver Controls System Test - FaceDetection Default is invalid when using Platform Device MFT', 'Platform Device MFT implements the FaceDetection control internal to MSFT, and it''s default value is incorrect. This is penalizing drivers that opt in to Platform Device MFT', 'Errata Issued, Platform Device MFT implementation updated', '2024-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', 'Error:UserText=extControlVerify Failed with error E.FAIL .0x80004005.', 'Flags do Not Match expected. 0x0 Current. 0x3', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=.*', 'SUCCEEDED.*80004005.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 105385 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mfmanualcameratests.dll /name:WEX::TestExecution::MFManualCameraTestsHLK::MFManualCameraTests::TestHardwarePrivacy%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mfmanualcameratests.dll /name:WEX::TestExecution::MFManualCameraTestsHLK::MFManualCameraTests::TestHardwarePrivacy%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 105385 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(105385, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Delayed Enforcement Errata: Camera Driver Hardware Privacy Manual Test', 'Camera Driver Privacy Shutter Manual Test checks that systems with a shutter also implement the notification mechanism to allow applications to be alerted to when the shutter state has changed. This enforcement is delayed until May of 2023', 'Delayed Enforcement Errata', '2023-05-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Incorrect Answer. Camera does not report to support the HW shutter.*', 'Does this camera support HW shutter.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Privacy Shutter.*', 'FAILED', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest:Title=Privacy Shutter.*', 'Error.*Both.*hrVideo.*0x80004005.*hrSensor.*0x80004005.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 105812 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_Raytracing_RayQuery::* [CustomTaefCommandArgs]'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_core.dll /name:D3DConf_12_Raytracing_RayQuery::* [CustomTaefCommandArgs]')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 105812 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(105812, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Raytracing TDR because of high workload ', 'A low-end GPU was used to perform the raytracing conformance test. The raytracing test workload was too high, causing a TDR in the GPU.', 'A new conformance test is being deployed that lowers the workload from a 1920x1080 raytraced image to a 100x100 image.', '2023-06-28T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.22621.22621","10.1.22000.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_Raytracing_RayQuery::Basic', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(pReadBackStaging->Map\(0, NULL, reinterpret_cast<void\*\*>\(&pData\)\)\) - Value \(0x887a0005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '!Msg:UserText=D3DConf_12_Raytracing_RayQuery::TestMethodSetup', 'D3DConf_12_Raytracing_RayQuery::TestMethodSetup', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg', 'SUCCEEDED\(m_pDeviceWithRT->CreatePipelineState\(&StreamDesc, IID_PPV_ARGS\(&m_pRayQueryPSO\)\)\) - Value \(0x887a0005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_Raytracing_RayQuery::SkipFlags#metadataSet0', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_Raytracing_RayQuery::SkipFlags#metadataSet1', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'D3DConf_12_Raytracing_RayQuery::SkipFlags#metadataSet2', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-28T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 105905 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 105905 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(105905, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Inbox Proxy APO CAPX Failure', 'The inbox proxy APO can cause issues with the CAPX tests, which cause failures that are unexpected.', 'An errata is created to show that the test passes if the inbox proxy APO is used in the CAPX tests. ', '2032-06-15T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Ni Full","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CAPOLoggingFrameworkTest::LoggingFrameworkTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'There are no CAPX APOs to test', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'CapX notification framework test failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Cleanup fixture ''CAPOLoggingFrameworkTest::tearDownMethod'' for the scope ''CAPOLoggingFrameworkTest::LoggingFrameworkTest'' failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CAPOThreadingFrameworkTest::ThreadingFrameworkTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'There are no CAPX APOs to test', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'CapX notification framework test failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Cleanup fixture ''CAPOThreadingFrameworkTest::tearDownMethod'' for the scope ''CAPOThreadingFrameworkTest::ThreadingFrameworkTest'' failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CAPOSettingsFrameworkTest::SettingsFrameworkTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'There are no CAPX APOs to test', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'CapX notification framework test failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Cleanup fixture ''CAPOSettingsFrameworkTest::tearDownMethod'' for the scope ''CAPOSettingsFrameworkTest::SettingsFrameworkTest'' failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CAPONotificationFrameworkTest::NotificationFrameworkTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'There are no CAPX APOs to test', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'CapX notification framework test failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Cleanup fixture ''CAPONotificationFrameworkTest::tearDownMethod'' for the scope ''CAPONotificationFrameworkTest::NotificationFrameworkTest'' failed.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2032-06-15T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 105923 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash tpmperformancetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash tpmperformancetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 105923 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(105923, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM 2.0 Quality Test - TpmPerformanceTest - Arcata sTPM Performance', 'TPM 2.0 Quality Test: The Arcata device is a joint project between MSFT and QCM. It is seeing performance issues on the sTPM that need to be addressed but is difficult due to time constraints.', 'A waiver is granted until 6 months after initial shipping (July 1st, 2022) to allow the team more time to address the performance issues.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TpmPerformanceTest::*', 'TPM Information: MSFT - 7\.0\.1\.0', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=Average Time Per Iteration:*', '.* Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest:Title=TpmPerformanceTest::*', 'TPM Information: MSFT - 7\.0\.1012\.0', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=Average Time Per Iteration:*', '.* Failed!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 106371 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'nvmeshim.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('nvmeshim.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106371 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(106371, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata : NVMe Device Capabilities Test (LOGO) fail; "Failed to send IOCTL to SHIM, GLE = 0x1b1; SV2 OS/HLK (22H2)', 'NVMe Device Capabilities Test (LOGO) fail; "Failed to send IOCTL to SHIM, GLE = 0x1b1', 'Just issuing a filter for affected hw', '2023-06-19T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!End', 'Failed to send IOCTL to SHIM\, GLE \= 0x1b1', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-19T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 106423 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%verifytpmexists.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%verifytpmexists.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106423 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(106423, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '22H2 Approved TPM Filter - Arcata sTPM temporary version', 'This is a filter for the approved Arcata sTPM certifying against the 22H2 HLK. Arcata''s sTPM Firmware passed the 22H2 Certification Requirements but have an issue with their TPM manufacturer version reporting.', 'This filter is granted so the development team can meet their shipping date requirements and will only be suitable for use for 6 months from July 1st, 2022. The expectation is that the TPM manufacturing version reporting will be fixed by then and they will be able to resume using the standard 22H2 Approved TPM Filter.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'MSFT - 7\.0\.1\.0', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 106424 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%verifytpmexists.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%verifytpmexists.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106424 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(106424, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '22H2 Approved TPMs Filter', 'TPMs are expected to meet requirements for n-1 kit.', 'Meet the published TPM device requirements.', '2025-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'WEX::TestExecution::VerifyTpmExists::VerifyTpm20Exists', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'MSFT - 7\.0\.1012\.0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTZ - 7\.56\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 1\.512\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 1\.769\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'STM  - 9\.256\.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'AMD - 6\..*\.0\.7', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTC - 7\.2\.2\.0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTC - 7\.2\.3\.0', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'NTC - 7\.2\.3\.1', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 106741 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %DriverFrameworkValidation%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %DriverFrameworkValidation%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106741 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(106741, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'HLK Errata: XXX-DriverFramework Tests - these tests would up for all Sensor devices, will use Sensor Types as a query condition for mapping ', 'HLK Errata: DriverFramework incorrectly map to sensor device', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Warn', '', 'Setup fixture(.*)for the scope(.*)returned ''false''', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 106851 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestCameraForDShowBridgeEnablement%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestCameraForDShowBridgeEnablement%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106851 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(106851, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Camera Driver DShow Bridge Test fails on MEP systems', 'Test is not accurately checking base camera, but attribute at tail end of DMFTs. MEP does not add attribute, so we believe it is not part of DShow bridge (when it is)', 'Test fixed, Errata Issued', '2024-02-29T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:UserText=SUCCEEDED.*8007064a', 'Camera.*does not enable DShowBridge.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-02-29T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 106984 v4.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%TDRWatch.exe %'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%TDRWatch.exe %')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106984 AND Version = 4
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(106984, 4, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Raytracing TDR because of high workload (TDR Version)', 'A low-end GPU was used to perform the raytracing conformance test. The raytracing test workload was too high, causing a TDR in the GPU.', 'A new conformance test is being deployed that lowers the workload from a 1920x1080 raytraced image to a 100x100 image.', '2023-06-28T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":0,"Values":["10.1.22621.22621","10.1.22000.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', '0A0A1E6F-4D18-4B2C-8851-C2BCAEF3EBDC', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'TDR_Happened', 'Title', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-06-28T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 106989 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash tpmperformancetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash tpmperformancetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106989 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(106989, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM 2.0 Quality Test - TpmPerformanceTest - EvictControlTest', 'In the TPM 2.0 Quality Test, the TpmPerformanceTest::EvictControlTest is failing for almost all new devices running TPM HLK tests concurrently. Evict control is a test that is significantly impacted by NV performance and limitations. 
', 'This filter is a blanket pass to allow all devices to pass the TpmPerformanceTest::EvictControlTest while the team works on determining a more reasonable measurement for the required time.', '2025-01-25T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=TpmPerformanceTest::EvictControlTest', 'TpmPerformanceTest::EvictControlTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=Average Time Per Iteration:*', 'Evict Control Test Failed\!', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-01-25T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 107162 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 107162 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(107162, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Processor Power Management – Test fails due to rounding issues when the OS requests 100% performance', 'Processor Power Management Test fails due to rounding issues when the OS is requesting the processor run at 100% frequency.', 'This filter allows an additional percentage point of rounding tolerance in this scenario.', '2023-07-07T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PpmLogoTests::LogoTests::ProcessAndValidateTrace', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'Delivered performance less than minimum performance.*\n.*\n.*\n.*\nDelivered \(margin: 1%\) = 98%\nMinimum = 100%', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-07T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 107572 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'DMAsplit.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('DMAsplit.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 107572 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(107572, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'DirectX 9 on 12 "Failed to create an I3D object"', 'Certain WDDM tests do not behave as expected with DirectX 9 on 12.', 'This is considered an acceptable test failure.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,"PCI\VEN_8086")])')

IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) >= 17763])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to create an I3D object.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 107905 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %CommonDataFieldsVerificationTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %CommonDataFieldsVerificationTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 107905 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(107905, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Common Data Field verification tests - test would up for all Sensor devices due to error query condition', 'HLK Errata: Common Data Field verification tests incorrectly map to sensor device', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'Required property PKEY_SensorData_Timestamp was not found', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 108016 v5.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% wlkdecdxva.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 108016 AND Version = 5
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(108016, 5, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WMV Direct3D_9 Playback Tests fail; SUCCEEDED(RunTest(test number)) - Value (0x80004005)', 'WMV Direct3D_9 Playback Tests fail due to a limitation in the gatherer where it doesn''t check for dx9 support (only dx11 and dx12).', 'Just issuing a filter for affected hw', '2023-07-11T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_1002&DEV_73F0'') or contains(.,''PCI\VEN_1002&DEV_73A8'') or contains(.,''PCI\VEN_1002&DEV_73BF'') or contains(.,''PCI\VEN_1002&DEV_744C'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x64 Co Full","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x86 Vb Full","Windows v10.0 Client x64 Ni Full","Windows v10.0 Client x86 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CWLKDecDXVATAEF::WMVPlaybackTest.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ERROR>> Test .* Failed: 0x80004005 \(E_FAIL\)', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'SUCCEEDED\(RunTest\(.*\)\) - Value \(0x80004005\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-11T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 108406 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%devfund_dvltest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%devfund_dvltest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 108406 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(108406, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'Static Tools Test fails if vendor product is an INF Only submission', 'The Static Tools Logo Test will fail if the submission is for a product that only has an INF and no .dll or .sys files. For this case manual errata 108406 is avaliable to use but must be listed in a readme file provided with the submission in the supplemental folder. 
', 'Provide Errata 108406 in a readme file with the submission. ', '2030-06-29T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DevfundTests.DvlTest.DvlCheckServer', 'DevfundTests.DvlTest.DvlCheckServer', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: No DVL folder detected', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=DevfundTests.DvlTest.DvlCheck', 'DevfundTests.DvlTest.DvlCheck', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndError:UserText', 'Microsoft.StaticToolsLogo.ObjectModel.DvlException: No DVL folder detected', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-06-29T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 108545 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %CustomSensorTests::DriverFrameworkValidation%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %CustomSensorTests::DriverFrameworkValidation%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 108545 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(108545, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Custom Sensor DriverFramework Validation - A crash with exception code 0xC0000005 occurred in module "WinRTSensors.FuncTests.CppCx.dll"', 'HLK Errata: Custom Sensor DriverFramework Validation - A crash with exception code 0xC0000005 occurred in module "WinRTSensors.FuncTests.CppCx.dll"', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'A crash with exception code 0xC0000005', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 108627 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging% ppmidp.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 108627 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(108627, 1, 1, 1, 1, 1, 1, 0, @TestCommandLineId, 'Processor Power Management – Test cleanup is blocked', 'Processor Power Management Test fails due to a test bug in the test cleanup tasks which results in these tasks being blocked. This failure does not indicate an issue in the system under test.', 'This filter allows the test to pass if this cleanup issue is encountered.', '2023-07-14T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'PpmLogoTests::LogoTests::Cleanup', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-14T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 108947 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %storage.tests.flushtest.dll /name:storage::FlushFUATest::FlushTest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %storage.tests.flushtest.dll /name:storage::FlushFUATest::FlushTest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 108947 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(108947, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Flush test failed due to TAFE can''t notify WTTsvc', 'Test failed after requesting a reboot. TAEF will assume the reboot was not performed and continue executing tests immediately.', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(RUNTIME_BLOCK/BuildNumber[number(.) <= 22621])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', 'Test failed after requesting a reboot. TAEF will assume the reboot was not performed and continue executing tests immediately.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 109172 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 109172 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(109172, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata : NDISTest 6.5 -[2 Machine] - PM_WolPattern fail; "Test adapter did not indicate wake packet!"; SV2 OS/HLK (22H2)', 'NDISTest 6.5 -[2 Machine] - PM_WolPattern fail; "Test adapter did not indicate wake packet!"', 'Just issuing a filter for affected hw', '2023-07-21T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,"PCI\VEN_8086&DEV_15F3") or contains(.,"PCI\VEN_8086&DEV_15F2") or contains(.,"PCI\VEN_8086&DEV_0D9F") or contains(.,"PCI\VEN_8086&DEV_125B") or contains(.,"PCI\VEN_8086&DEV_125C") or contains(.,"PCI\VEN_8086&DEV_125D") or contains(.,"PCI\VEN_8086&DEV_3000") or contains(.,"PCI\VEN_8086&DEV_3101") or contains(.,"PCI\VEN_8086&DEV_5502") or contains(.,"PCI\VEN_8086&DEV_15FC") or contains(.,"PCI\VEN_8086&DEV_15FB") or contains(.,"PCI\VEN_8086&DEV_15BC") or contains(.,"PCI\VEN_8086&DEV_550B") or contains(.,"PCI\VEN_8086&DEV_550A") or contains(.,"PCI\VEN_8086&DEV_75A0") or contains(.,"PCI\VEN_8086&DEV_75A1") or contains(.,"PCI\VEN_8086&DEV_550E") or contains(.,"PCI\VEN_8086&DEV_550F") or contains(.,"PCI\VEN_8086&DEV_550C") or contains(.,"PCI\VEN_8086&DEV_550D") or contains(.,"PCI\VEN_8086&DEV_57B3") or contains(.,"PCI\VEN_8086&DEV_57B4") or contains(.,"PCI\VEN_8086&DEV_57B5") or contains(.,"PCI\VEN_8086&DEV_57B6") or contains(.,"PCI\VEN_8086&DEV_57B7") or contains(.,"PCI\VEN_8086&DEV_57B8")]) ', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x64 Ni Full","Windows v10.0 Client x86 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!End', 'Test adapter did not indicate wake packet!', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-21T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 109229 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb3termination.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash usb3termination.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 109229 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(109229, 2, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'USB3 Termination HLK test failing on QC SC8280XP platforms', 'USB3 termination HLK test fails with a USB SS device is connected to one of the type C ports. The HLK test fails because of the VBUS toggle happening after entering OS which causes a renumeration of the connected USB device on the QC SC8280XP, SC7180, SX7295, SC 8180 chipsets. This failure report was covered in QC 05985250.
', 'Surface and QC have commited this will be resolved in next QC chipset through FR #2092 ', '2023-07-22T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,"URS\VEN_QCOM&DEV_068C&SUBSYS_QRD08280&HOST") or contains(.,''ACPI\VEN_QCOM&DEV_0A24&SUBSYS_CRD07280'') or contains(.,''ACPI\VEN_QCOM&DEV0AA1&SUBSYS_CRD07280'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft::Windows::USB::Usb3Termination::Usb3TerminationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'No Valid SuperSpeed USB Device found after reboot.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-07-22T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 109484 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sensorsv2clx.e2e.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sensorsv2clx.e2e.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 109484 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(109484, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK errata: Human Presence capable Proximity Sensor Attention Detection Data Field Properties Verification Test failed with QC drivers (Vendor Specific)', 'This is an acceptable failure', 'This is an acceptable failure', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[ contains(.,''ACPI\QCOM06D9'') or contains(.,''ACPI\AMDI0080'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DataFieldPropsVerificationTest::PrxAttentionDetectionDataFieldPropsVerificationTest', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End Test', 'Test failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 109870 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sensorsv2clx.e2e.tests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash sensorsv2clx.e2e.tests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 109870 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(109870, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK errata: Human Presence capable Proximity Sensor Dynamic Range Tests failed with PKEY_SensorDataField_RangeMinimum is not of type VT_UI4!', 'This is an acceptable failure', 'This is an acceptable failure', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'End Test', 'Data field property PKEY_SensorDataField_RangeMinimum is not of type VT_UI4!', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 110547 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging %d3dconf_12_video.dll /name:Conf_VideoNative::EncodeHeapSizeCap%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging %d3dconf_12_video.dll /name:Conf_VideoNative::EncodeHeapSizeCap%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 110547 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(110547, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 – EncodeHeapSizeCap: driver only get query caps call of D3D12DDICAPS_TYPE_VIDEO_0080_ENCODER_OUTPUT_RESOLUTION', 'driver only get query caps call of D3D12DDICAPS_TYPE_VIDEO_0080_ENCODER_OUTPUT_RESOLUTION', 'Errata issued, Test updated', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(capHeapSizeData.IsSupported\)', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', 'IsTrue\(capHeapSizeData.MemoryPoolL1Size > 0u\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 110579 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 110579 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(110579, 2, 1, 1, 1, 1, 0, 1, @TestCommandLineId, 'MediaCapture HLK Tests are not AppVerifier Clean', 'MediaCapture tests contain WIL, which has macros that are flagged by AppVerifier as failures. This causes the tests to be flagged incorrectly as app verifier issues', 'AppVerifier will be disabled on the MediaCapture.dll, since all user mode components for camera are now loaded in FrameServer service.', '2023-08-04T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Warn:UserText=.*', 'A crash with exception code 0x80000003 occurred in module .vrfcore.dll. in process .te.processhost.exe.', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-04T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 110602 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll /name:CPlaybackQualityTests::WMVPlaybackQualityTest'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mf.playback.quality.tests.dll /name:CPlaybackQualityTests::WMVPlaybackQualityTest')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 110602 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(110602, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WMV Playback tests (19/11/10) fail due to OS bug', 'Bug in OS WMV video decoder introduced by new PresentAt feature which requires more frame buffers to be allocated.', 'Increase the number of allowable frame buffers in WMV video decoder. Temporarily grant waiver while waiting for OS bug fix.', '2023-05-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''PCI\VEN_8086'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::WMVPlaybackQualityTest10#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '0xc00d36dd', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'End', 'Playback failed with error: 8000ffff', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::WMVPlaybackQualityTest11#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '0xc00d36dd', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'End', 'Playback failed with error: 8000ffff', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'CPlaybackQualityTests::WMVPlaybackQualityTest19#metadataSet0', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', '0xc00d36dd', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Warn', 'End', 'Playback failed with error: 8000ffff', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-05-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 110658 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_11_core.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_11_core.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 110658 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(110658, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Displayable Surfaces and Flexible Presentation', 'The displayable surface feature has been validated to work on the device.', 'Waiver is granted to unblock feature.', '2023-08-04T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_8086")])')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Conf11_Displayable::DisplayableEnablement', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'IsFalse\(m_bDisplayableSupported\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-04T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 110895 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kstoptest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kstoptest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 110895 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(110895, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'SDCA drivers fail KS Topology test because of posture', 'Due to a limitation in the SDCA class driver, some audio posture calls are being failed.', 'The failures caused by this limitation have been reviewed and they will not affect the user experience, so this filter will cover them.', '2023-08-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[starts-with(.,"SOUNDWIRE\SDCA_06&MAN_025D&") and (contains(.,"FUNC_1316") or contains(.,"FUNC_1318"))])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["22000","22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'KsTopTest::TC_CheckAudioPostureOrientation', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'FAIL: Pin.*KSPROPERTY_AUDIOPOSTURE_ORIENTATION set request with valid posture info \(current system posture\) should succeed but failed', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Error', 'AreEqual\(\(DWORD\)FNS_PASS, testResult\) - Values \(0, 1\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-08-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 110896 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash tpmperformancetest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash tpmperformancetest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 110896 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(110896, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'TPM 2.0 Quality Test - TpmPerformanceTest - PCRExtendSHA384Test failure when SHA-384 PCR support is optional', 'The performance test will fail PCRExtendSHA384Test if SHA-384 PCR Extend is not supported. This not a gating requirement until 2025 where it becomes mandatory.', 'The Quality Test needs to be updated to give a warning instead of an error for "SHA 384 is not support". An automatic filter will address this error until a fix is made.', '2025-01-26T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest:Title=TpmPerformanceTest::PCRExtendSHA384Test', 'TpmPerformanceTest::PCRExtendSHA384Test', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error:UserText=SHA 384 is not supported', 'SHA 384 is not supported', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-01-26T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 111473 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%MakeResident.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%MakeResident.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 111473 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(111473, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK test VidMm::MemoryResidency::VerifyStandard crash for VPU compute-only device', 'Test crashed with following log message: TAEF: A crash with exception code 0xC0000005 occurred in module "makeresident.dll" in process "te.processhost.exe".', 'This will be fixed in a future release.', '2030-12-31T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/Driver/GraphicsDriverInfo/Model[contains(text(), ''MCDM'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'VidMm::MemoryResidency::VerifyStandard', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'A crash with exception code 0xC0000005 occurred in module*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-31T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 111676 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash evictiontestcompute.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash evictiontestcompute.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 111676 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(111676, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[HLK] VPU Memory tests failed when Gfx driver not present', 'When the below Memory tests for VPU device are run with Gfx driver not installed (only Basic Renderer available) on target they fail.
EvictionTest::TestEviction
EvictionTest::TestTransfer
EvictionTest::TestDefrag
EvictionTest::MoveTest', 'This will be fixed in a future release. ', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device/Driver/GraphicsDriverInfo/Model[contains(text(), ''MCDM'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Co OneCore","Windows v10.0 Client x86 Co OneCoreUAP","Windows v10.0 Client x86 Co Full","Windows v10.0 Client x64 Co OneCore","Windows v10.0 Client x64 Co OneCoreUAP","Windows v10.0 Client x64 Co Full","Windows v10.0 Server x64 Co OneCore","Windows v10.0 Server x64 Co OneCoreUAP","Windows v10.0 Server x64 Co Full","Windows v10.0 Client ARM Co OneCore","Windows v10.0 Client ARM Co OneCoreUAP","Windows v10.0 Client ARM64 Co OneCore","Windows v10.0 Client ARM64 Co OneCoreUAP","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Server ARM64 Co OneCore","Windows v10.0 Server ARM64 Co OneCoreUAP","Windows v10.0 Server ARM64 Co Full","Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'EvictionTest::.*Test.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', '00000000', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!EndTest', 'Eviction Failed for Texture 3D type Allocation', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 111829 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11Compute.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11Compute.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 111829 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(111829, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WHQL: WGF11Compute schedules inapplicable test groups', 'This errata is in response to a test bug where WGF11Compute tests are deployed on inapplicable platforms. More specifically, on a system with GPU and MCDM device available, tests which require graphics capabilities get launched on the MCDM device.', 'The test is planned to be fixed in a future release.', '2032-08-16T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'ID3D11Device1::OpenSharedResource1\(\) failed. hr = E_INVALIDARG \(0x80070057\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2032-08-16T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 112254 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%DrRobTool.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%DrRobTool.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 112254 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(112254, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HCK Errata: Driver Robustness Test failure with unknown Exception on Win7', 'HCK Errata: Driver Robustness Test failure with unknown Exception on Win7', 'This is an acceptable failure', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''USB\VID_04A9'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows 7 Client x64","Windows 7 Client x86","Windows v6.3 Client x86","Windows v6.3 Client x64"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', '.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 112257 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%haptest%InstanceID%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%haptest%InstanceID%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 112257 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(112257, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, '[Erratum] HAP test fails SNR checks due to glitches caused by DV', 'HAP test''s SNR checks can be affected by glitches caused by Driver Verifier.', 'Please, contact Microsoft to get instructions for disabling Driver Verifier on this particular test.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["19041","22000","22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'IsGreaterThan\(DbFromMagnitude\(magSignal / magNoise\).*40.000000l\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 112463 v12.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11GeometryShader.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11GeometryShader.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 112463 AND Version = 12
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(112463, 12, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WGF11 Geometry Shader - GS with streamout encounters AMD hardware issue', 'There''s a hardware bug limiting use of geometry shaders in conjunction with stream out, causing InstanceID test cases to fail.', 'The bug is to be fixed in a future release.', '2032-08-19T00:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002&DEV_73F0") or contains(.,"PCI\VEN_1002&DEV_73BF") or contains(.,"PCI\VEN_1002&DEV_73C8")  or contains(.,"PCI\VEN_1002&DEV_73DF") or contains(.,"PCI\VEN_1002&DEV_7483")  or contains(.,"PCI\VEN_1002&DEV_7481") or contains(.,"PCI\VEN_1002&DEV_7480") or contains(.,"PCI\VEN_1002&DEV_7489")  or contains(.,"PCI\VEN_1002&DEV_748B")  or contains(.,"PCI\VEN_1002&DEV_749F") or contains(.,"PCI\VEN_1002&DEV_744C") or contains(.,"PCI\VEN_1002&DEV_15BF") or contains(.,"PCI\VEN_1002&DEV_15C8") or contains(.,"PCI\VEN_1002&DEV_7448")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000","10.1.19041","10.1.17763","10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'EndTest', '', 'InstanceID', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2032-08-19T00:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 112565 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 112565 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(112565, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: When installing client OS on server platform, Verify VESA and CEA required display modes/Verify Post Device Supports Display And Render fail if the display adpater on server doesn''t support render DDI', 'When installing client OS on server platform, Verify VESA and CEA required display modes/Verify Post Device Supports Display And Render fail if the display adpater on server doesn''t support render DDI', 'This issue described is an acceptable failure.', '2030-08-22T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('RUNTIME_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'RUNTIME_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//FormFactor[contains(.,''Server'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.19041","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'DevX::GRFX::BaseVideo::WLK::VerifyDeviceDriverSupport::VerifyPostDeviceDriverIsDisplayRender', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Is the post device and did not report support for both Render and Display DDIs', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'EndTest', '!', 'MinimumDisplaySpec.exe  -logname edidcheck.wtl -EdidCheck', 'Repro', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-08-22T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 112686 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_video.dll /name:Conf_VideoNative::EncodeProfileLevelSuggestionsH264#%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_video.dll /name:Conf_VideoNative::EncodeProfileLevelSuggestionsH264#%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 112686 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(112686, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: D3D12 – EncodeProfileLevelSuggestionsH264 failed.', 'D3D12_FEATURE_VIDEO_ENCODER_SUPPORT required basic configuration for H264 is not supported in test case 14', 'Errata issued, Test updated', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_1002")])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', '\[H264 EncodeCaps test\] D3D12_FEATURE_VIDEO_ENCODER_SUPPORT required basic configuration for H264 is not supported in test case 14 - ValidationFlags: 0x10 - SupportFlags: 0x1dbe', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 114078 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'driverassessment.exe /CheckLogo%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('driverassessment.exe /CheckLogo%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 114078 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(114078, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Check logo failures with SV2 installed along with Office ', 'HLK Errata: Check logo failures with SV2 installed along with Office ', 'This is an acceptable failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Failed to get certificate chain data for C:\\Windows\\system32\\CatRoot\\\{F750E6C3-38EE-11D1-85E5-00C04FC295EE\}\\Microsoft-Office-ClickToRun', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 114487 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash kitbiditest.dll /name:PrintBidi::PrintBidiTest'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash kitbiditest.dll /name:PrintBidi::PrintBidiTest')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 114487 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(114487, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Print Bidi Test failures with Microsoft IPP Class Driver', 'HLK Errata: Print Bidi Test failures with Microsoft IPP Class Driver', 'This is acceptable test failure', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''Microsoft IPP Class Driver'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Co Full","Windows v10.0 Client x64 Ni Full","Windows v10.0 Client ARM64 Co Full","Windows v10.0 Client ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Bidi Get Operation to seed the cache.', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'BidiOperation: IBidiSpl2->SendRecvXMLString\(<bidi:Get xmlns:bidi=\''http://schemas.microsoft.com/windows/2005/03/printing/bidi''><Query schema=\''\\\''/></bidi:Get>\) failed!', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Bidi Get Operation failed! HRESULT = 80070057', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'EndTest', 'Win32Succeeded\(hr\) - Value \(0x80070057\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 114921 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WFPLogo.Exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WFPLogo.Exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 114921 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(114921, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: WindowsFilteringPlatform_Tests fail on WFP-based products must support ARP exchanges', 'This is a regression in our test.', 'Failures will be filtered until the test is updated.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Driver/FileName[(.=''vnetwfp.sys'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'NetworkFundamental\\SupportAddressResolution', 'Title', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest', 'HlprTraffic::InboundAddressResolution : SendNeighborSolicitation().*\[expected Peer Traffic error code: 0\]\[actual: 0x274c\]', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 115408 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%win6_4.MBN.SYS.TestPowerStates.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%win6_4.MBN.SYS.TestPowerStates.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 115408 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(115408, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: Win6_4.MB.GSM.Data.TestPowerStates test failure due to not support physical SIM card', 'HLK AutoTriage: Win6_4.MB.GSM.Data.TestPowerStates test failure due to not support physical SIM card', 'Please contact Microsoft CSS team to obtain the private binary', '2023-09-21T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x64 Ni Full","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title', 'Win6_3MBN::TestPowerStates::HibernateSwitchSimAndWake', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'ReadyInfoInitialized received with the same iccid as before! Either modem sent readyStateInitialized with previous iccid or the user did not change the SIM', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-09-21T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 115756 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%INFGate.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%INFGate.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 115756 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(115756, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: INF Syntax Test failures with v4 Printer Driver', 'HLK Errata: INF Syntax Test failures with v4 Printer Driver', 'This is acceptable failures.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v6.3 Client x86","Windows v6.3 Client x64","Windows v6.3 Server x64","Windows 8 Server x64","Windows v10.0 Server x64 RS1 Full","Windows v10.0 Server x64 RS5 Full","Windows v10.0 Client x64 Vb Full","Windows v10.0 Client x86 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'INF contains banned directive ADDSERVICE which is not allowed in this INF', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'Required Pnp Bus enumerator is missing on HW PnpID', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 115994 v6.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash drmtest.dll /name:AVQuality::DRMTest::HardwareDRM_VerifyCodecSupport#*'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash drmtest.dll /name:AVQuality::DRMTest::HardwareDRM_VerifyCodecSupport#*')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 115994 AND Version = 6
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(115994, 6, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Verify Codec Support Test- The decoder itself does not even work correctly with this profile ', 'HW-DRM - Verify Codec Support Test- The decoder itself does not even work correctly with this profile ', 'This is an acceptable failure for now.', '2023-12-31T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode[contains(.,''PCI\VEN_1002&DEV_73BF'') or contains(.,''PCI\VEN_1002&DEV_744C'') or contains(.,''PCI\VEN_1002&DEV_7480'') or contains(.,''PCI\VEN_1002&DEV_7483'') or contains(.,''PCI\VEN_1002&DEV_73C8'') or contains(.,''PCI\VEN_1002&DEV_15C8'') or contains(.,''PCI\VEN_1002&DEV_7448'')])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":2,"Values":["Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'AVQuality::DRMTest::HardwareDRM_VerifyCodecSupport#', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'enumerateAndVerifyDecoderConfigs GetVideoDecoderConfigCount error: 0x80070057', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'SUCCEEDED\(ExecuteVerifyHWDRMCodecSupport\(\)\) - Value \(0x80070057\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-31T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 116007 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash mediacapturecpptest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 116007 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(116007, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Camera TestVideoCapture and TestLowLagVideoCapture HEVC Capture with 4 Channel audio is unsupported', 'Camera Driver System Test - MediaCapture - TestVideoCapture
Camera Driver System Test - MediaCapture - TestLowLagVideoCapture

4 Channel HEVC Audio Encoding is unsupported, test cases related to BasicHEVC are invalid', 'Test fixed, errata issued', '2024-05-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=.*', '.*Basic_HEVC.*', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error:UserText=.*', '.*ChannelCount.*4', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error:UserText=Test failed hr .*', 'Release MediaCapture object', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'Error:UserText=.*Async Error.*80004005.*', '.*Attempting', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', '.*Async Error.*80004005.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-05-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 116251 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%PowerTestHost.exe%LaunchCompatVM.ps1%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%PowerTestHost.exe%LaunchCompatVM.ps1%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 116251 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(116251, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WDDM 3.0 Backwards Compat VM test chooses unsupported number of virtual cores', 'If this test is run on hardware that has fewer than 4 cores, it fails. It assumes at least 4 cores when setting up the VM.', 'This will be fixed in a future release.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'PROCESSOR_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('PROCESSOR_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'PROCESSOR_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//NumberOfProcessors[text() < 4])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error:ErrCode=0x80004005', 'Microsoft\.PowerShell\.Commands\.WriteErrorException,LaunchCompatVM\.ps1', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '', '.*The processor set.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 116385 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'cmck.exe certify'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('cmck.exe certify')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 116385 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(116385, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: SmartCard Minidriver test failure with Non-Repeating Key test on Cards that cannot generate enough keypairs (Device Specific)', 'The Smart Card minidriver certification test may incorrectly fail on a specific device and driver that was validated internally to properly pass these assertions on Win10 HLK. The incorrectly failing assertions that are covered by this errata are: CertSequences, CardChangeAuthenticator, CardAuthenticateEx, CardChangeAuthenticatorEx, and Reconnect.
', 'This is a device specific filter for a specific device. To see if your device can be added to this filter, please contact Microsoft Support through a support case.', '2023-10-06T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/HardwareID[contains(.,"SCFILTER\CID_00640428030231c073f701d0009000")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=NonRepeatingKeys', 'NonRepeatingKeys', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Duplicate public key detected', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-10-06T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 116972 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 116972 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(116972, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[Erratum] Lullaby test loses synchronization with endpoints', 'Lullaby test loses synchronization when endpoints are not ready to stream right after returning from the target power state.', 'This filter overturns failures until the test can be revised.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,"AUCD\VEN_QCOM&DEV_0629")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Lullaby Test\\Hibernate\(SH\)\\WASAPI (Capture|Render(| Offload)) Sync', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Failed.*AUDCLNT_E_UNSUPPORTED_FORMAT.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*AUDCLNT_E_DEVICE_INVALIDATED.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*0x80070002.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', '.*ERROR_FILE_NOT_FOUND.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Failed.*PlaySineWave.*0x84450015.*', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'ERROR: The device with endpoint ID .* is no longer valid and reports state 0x4.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 117171 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash infverifhlk.dll /name:InfVerif::RunInfVerif'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash infverifhlk.dll /name:InfVerif::RunInfVerif')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 117171 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(117171, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: DF - InfVerif INF Verification Fail without AddService directive', 'Starting in Windows 10, version 1809, this has changed from a Warning to an Error. The .Services sections are required for each defined target OS. This is good practice and applies to all INFs and not just 1809.
If you were previously not including this section because you had no services, and were relying on Inbox driver services, then you may need to create a .Services section that references the Inbox INF’s service using a NEEDS and INCLUDES statement.', 'For example: An INF file would have the following .Services section for each OS target to resolve this error.

[XXXXXXXX.Install.NTx86.Services]
Include=filename.inf
Needs=inf-section-name.Services
For devices that do not require a function driver, the NULL driver can be specified as follows:

AddService = ,0x2
Only use this in the case where the INF is installing a non-functional device to specify it does not need a driver.

For example: A device that requires only a filter driver, and not a function driver would have two AddService directives:

AddService = MyFilterDriver,, My-Service-Install-Section 
AddService = ,0x2', '2024-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000","10.1.20348","10.1.19041","10.1.18362","10.1.17763"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'InfVerif::RunInfVerif', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Code 1296', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'does not have an associated service using install section', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 118198 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe%SystemGuardTest.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe%SystemGuardTest.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 118198 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(118198, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'SystemGuard Test - TestTxtOsSinitDataCap doesn''t accept the expected value 0x40E correctly', 'The SystemGuard Test fails because SystemGuardTest::TestTxtOsSinitDataCap doesn''t accept the expected value 0x40E correctly. 
', 'The HLK test has not yet been updated to recognize it so a filter is needed to address this failure.

', '2026-09-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest:Title=SystemGuardTest::TestTxtOsSinitDataCap', 'SystemGuardTest::TestTxtOsSinitDataCap', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!', 'Did not recognize OS/SINIT Capabilities value: 040e.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2026-09-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 118361 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 118361 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(118361, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NDISTest 6.5 - [1 Machine] - OffloadVMMQ test fails in Windows Server 2022', 'HLK Errata: NDISTest 6.5 - [1 Machine] - OffloadVMMQ test fails in Windows Server 2022', 'This is an acceptable failure', '2023-04-26T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode/DeviceID[contains(.,"CHT6BUS")]) ')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Verify HWvRSS support for Default VPort', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Failed to set RSS parameters \(numQueues=16\) for Default VPort, Error Code 16', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'End', 'No more test cases will be executed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-04-26T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 119991 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestSensorOrientation_MediaTypeValidation%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash camerabasics.dll /name:WEX::TestExecution::CameraBasicsHLK::CameraBasicsTest::TestSensorOrientation_MediaTypeValidation%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 119991 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(119991, 1, 0, 1, 1, 1, 0, 0, @TestCommandLineId, 'Sensor Orientation Test on Valkyrie device is non-standard', 'Devices which deliberately mount camera with aspect ratio that does not match the display will fail this test.', 'Contingency created for specific form factor devices', '2024-02-29T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'WEBCAM_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('WEBCAM_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'WEBCAM_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//DeviceID[contains(.,''DISPLAY\INT3480\4&30F6EDC2&0&UID144512'')])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Msg:UserText=.*', 'MediaIndex.*Error.*Landscape mediatype from Driver with 90.270 rotation for PLD', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-02-29T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 119993 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash blink3.dll /name:CBlinkTaefTests::Video_Properties_QueryCurrentVideoCaptureDeviceProperties_Native%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash blink3.dll /name:CBlinkTaefTests::Video_Properties_QueryCurrentVideoCaptureDeviceProperties_Native%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 119993 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(119993, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'MEP Cameras fail DShow Interface tests for IAMCameraControl', 'MEP IAMCameraControl validation fails DShow queries, causing test failure', 'IAMCameraControl query updateds, errata issued', '2024-06-30T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'Error:UserText=VERIFY FAILED hr.*80070002.*The system cannot find the file specified.*', 'Selected Video Device.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-06-30T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 120324 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 120324 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(120324, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '[Erratum] Lullaby test fails due to endpoint IDs changing', 'After sending the system to the target state, some endpoint IDs have been seeing changing, which is flaged as an error by Lullaby test, which expects the same endpoint to be there.', 'Until the failure is fully investigated, this issue will be waived.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.19041","10.1.22000","10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'ERROR: The device with endpoint ID .* is no longer valid and reports state 0x4; state 0x1 \(DEVICE_STATE_ACTIVE\) was expected.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 120591 v2.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'powershell.exe -noprofile -executionpolicy bypass -Command "& {Import-Module (Get-Module Test-NetHLK -ListAvailable | Sort Version -Descending | Select -First 1).Path -Force; Test-NICAdvancedProperties%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('powershell.exe -noprofile -executionpolicy bypass -Command "& {Import-Module (Get-Module Test-NetHLK -ListAvailable | Sort Version -Descending | Select -First 1).Path -Force; Test-NICAdvancedProperties%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 120591 AND Version = 2
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(120591, 2, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'NICStrictPropertyValidation fail due to NDSPI interface for windows but doesn''t define a manageability story for it', 'NICStrictPropertyValidation fail due to NDSPI interface for windows but doesn''t define a manageability story for it
[FAIL] *FlowControl contains the required ValidRegistryValue of 4
[FAIL] *NetworkDirectTechnology DefaultRegistryValue is
[FAIL] *RssOrVmqPreference DisplayParameterType is 5
[FAIL] *RssOrVmqPreference defines none of the required ValidRegistryValue values
[FAIL] *RssOrVmqPreference defines no ValidRegistryValues', 'This is an acceptable failure.', '2025-10-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/DeviceID[contains(.,"PCI\VEN_15B3&DEV_1015") or contains(.,"PCI\VEN_15B3&DEV_101D") or contains(.,"PCI\VEN_15B3&DEV_A2D6")])
', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":1,"Values":["10.1.20348"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'C:\\Program Files\\WindowsPowerShell\\Modules\\Test-NETHLK\\2022.10.*\\Results\\Results.wtl', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', '0x80131500', 'ErrCode', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 120711 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'FPO_Check.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('FPO_Check.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 120711 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(120711, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Driver Layering Check fail due to no samples are being produced', 'No samples are being produced which cause this failure.', ' This issue described is an acceptable failure.', '2025-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!EndTest', 'Not a large enough sampling set, Samples=0', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 120767 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'gdpm_ComponentParams.exe'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('gdpm_ComponentParams.exe')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 120767 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(120767, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, '''Graphics Device Runtime Power Management Component Validation'' fails with ''Root Node/EnableDRTEscape/DPMPowerComponentInfo|||Failed reported State''', 'When a GPU that opts for runtime power management through the OS sets a power component as ActiveInD3, the test will fail. This is a test bug that doesn''t account for this case. ', 'The test will be fixed for SV3, but for SV2 an errata is needed.', '2030-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x86 Ni OneCore","Windows v10.0 Client x86 Ni OneCoreUAP","Windows v10.0 Client x86 Ni Full","Windows v10.0 Client x64 Ni OneCore","Windows v10.0 Client x64 Ni OneCoreUAP","Windows v10.0 Client x64 Ni Full","Windows v10.0 Server x64 Ni OneCore","Windows v10.0 Server x64 Ni OneCoreUAP","Windows v10.0 Server x64 Ni Full","Windows v10.0 Client ARM Ni OneCore","Windows v10.0 Client ARM Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni OneCore","Windows v10.0 Client ARM64 Ni OneCoreUAP","Windows v10.0 Client ARM64 Ni Full","Windows v10.0 Server ARM64 Ni OneCore","Windows v10.0 Server ARM64 Ni OneCoreUAP","Windows v10.0 Server ARM64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '', 'Root Node/EnableDRTEscape/DPMPowerComponentInfo', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', '', 'F-State DESC - Index:1*\n\s*TransitionLatency:0', 'UserText', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '', 'Root Node/EnableDRTEscape/DPMPowerComponentInfo|||Failed reported State validation', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2030-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 121194 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%thirdpartyapo.unittests.dll /name:CTestEffectsList::TestGetEffectsList%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%thirdpartyapo.unittests.dll /name:CTestEffectsList::TestGetEffectsList%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 121194 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(121194, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'https://microsoft.visualstudio.com/DefaultCollection/OS/_workitems/edit/42251908', 'Proxy mode APOs are initialized with the incorrect processing mode (raw) and therefore will not return the effects that are supported by the APO for a supported streaming audio processing mode (e.g. communications, speech, etc). This causes the number of COM effects to be less than WinRT effects.', 'This erratum overturns the failure.', '2023-12-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!Error', 'IsGreaterThanOrEqual\(numEffectsCom, numEffectsWinRT\) - Values \(.*\)', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 121592 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'WGF11SharedResources.exe%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('WGF11SharedResources.exe%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 121592 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(121592, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'WHQL: WGF11SharedResources tests invalid combinations ', 'The test fails when a resource is attempted to be created with the BIND_CAPTURE flag and the MISC_SHARED_DISPLAYABLE flag together. This combination is not expected to be supported.', 'The fix is to skip displayable test cases when there is BIND_CAPTURE flag.
', '2023-12-13T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'ShareFromDX11\\ToDX11', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Msg', 'EndTest', '.*SetupResources.*CreateTexture2D.*0x8007000e.*', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-12-13T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 121807 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash featurecheck.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash featurecheck.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 121807 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(121807, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: WDDM 2.7 Hardware Scheduling Disabled - FeatureCheck::IsHwSchDisabled', 'This is a by design HLK test failure that allows Microsoft to control whether an IHV is allowed to enable HwSch feature. Now that the IHV passed the quality bar, we need to grant a corresponding errata.', 'This is a by design HLK test failure that allows Microsoft to control whether an IHV is allowed to enable HwSch feature. Now that the IHV passed the quality bar, we need to grant a corresponding errata.', '2024-01-30T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_1002")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'IsHwSchDisabled', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 123178 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash thirdpartyapo.unittests.dll%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 123178 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(123178, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'CAPX APO Test failed on inbox APO msapofxproxy.dll', 'APO Test failed on inbox APO msapofxproxy.dll {889C03C8-ABAD-4004-BF0A-BC7BB825E166}', 'This is an acceptable failure ', '2025-10-13T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', '!Msg:UserText=APO Under Test', 'APO Under Test: \{889C03C8-ABAD-4004-BF0A-BC7BB825E166\}', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'CoCreateInstance for IAudioProcessingObjectRT failed', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', 'msapofxproxy.dll - \{889C03C8-ABAD-4004-BF0A-BC7BB825E166\} initialization failed with error: 80070057', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-13T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 124029 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_video.dll /name:Conf_VideoNative::SimpleGOPEncodeH264%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash d3dconf_12_video.dll /name:Conf_VideoNative::SimpleGOPEncodeH264%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 124029 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(124029, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'D3D12 – SimpleGOPEncodeH264 failed when AVC b-frame enabled', 'D3D12 – SimpleGOPEncodeH264 failed when AVC b-frame enabled', 'This is an acceptable failure for SV2 and SV1', '2025-10-14T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621","10.1.22000"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', '!EndTest:Title=Conf_VideoNative::SimpleGOPEncodeH264#metadataSet(.*)#D3D12Driver', 'Conf_VideoNative::SimpleGOPEncodeH264#metadataSet(.*)#D3D12Driver', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', '!Msg', 'SUCCEEDED\(spCommandList->Close\(\)\) - Value \(0x80070057\)', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2025-10-14T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 124820 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%ndistest.net\ndistest.exe /logo /auto /client%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%ndistest.net\ndistest.exe /logo /auto /client%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 124820 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(124820, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: NDISTest 6.5 - [2 Machine] - LinkCheck fail on the driver doesn''t have an ethernet cable', 'NDISTest 6.5 - [2 Machine] - LinkCheck fails to this driver doesn''t have an ethernet cable, so this test isn''t applicable.', 'This is an acceptable failure.', '2024-02-02T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/HardwareID[contains(.,"{B85B7C50-6A01-11d2-B841-00C04FAD5171}\Usb4Net")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Vb Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Disconnect the link for AMD USB4NET & delay for 30 seconds before reconnecting', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed with error NDIS_STATUS_INVALID_DATA while retrieving the events counter from binding on device AMD USB4NET', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Disabling Framework Verifier', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'EndTest', 'Failed to disable DUT NT_STATUS .0xE000020B.', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-02-02T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 125009 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.bluetooth.audio.functionaltests.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash microsoft.bluetooth.audio.functionaltests.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 125009 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(125009, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Errata: Bluetooth - Audio - Sink/Source increase music volume with A2DP offload failed with "Assertion failed: initialSinkVolume.VolumeLeft < currentSinkVolume.VolumeLeft"', 'Test failure for following tests.
Bluetooth - Audio - Sink increase music volume with A2DP offload
Bluetooth - Audio - Source increase music volume with A2DP offload', 'This is an acceptable failure.', '2024-10-07T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Msg', 'EndTest', 'Using sink device named: RN52', 'UserText', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft::Bluetooth::AudioA2dpOffload::FunctionalTests::AudioA2dpOffloadTests::MusicMediaReceiverMeasuredVolumeUpOffloadTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Assertion failed: initialSinkVolume.VolumeLeft < currentSinkVolume.VolumeLeft', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'Microsoft::Bluetooth::AudioA2dpOffload::FunctionalTests::AudioA2dpOffloadTests::MusicMediaSenderMeasuredVolumeUpOffloadTest', 'Title', 0, 0, @ParentLogNodeId)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 2

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 2
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Assertion failed: initialSinkVolume.VolumeLeft < currentSinkVolume.VolumeLeft', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 2

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-07T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 125554 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%haptest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%haptest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 125554 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(125554, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: HAP test fails due to an issue with matching MM devices to driver instances.', 'HAP test fails due to an issue with matching MM devices to driver instances.', 'Please contact Microsoft Support to receive an updated test binary.', '2024-10-07T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/HardwareID[contains(.,"USB\VID_413C&PID_A518&MI_00") or contains(.,"USB\VID_413C&PID_A518&REV_0100&MI_00") or contains(.,"USB\VID_413C&PID_A518&REV_0100&MI_03") or contains(.,"USB\VID_413C&PID_A518&MI_03")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'AreEqual.*', 'UserText', 0, 1)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(hr = DoesDeviceMatchInstanceId.*Value \(0x8000ffff\)', 'UserText', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-07T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 125557 v3.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash infverifhlk.dll /name:InfVerif::RunInfVerif'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash infverifhlk.dll /name:InfVerif::RunInfVerif')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 125557 AND Version = 3
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(125557, 3, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK Delayed Enforcement Errata: DF - InfVerif INF Verification test requirement for Windows 11 22H2', 'HLK Delayed Enforcement Errata: DF - InfVerif INF Verification test requirement for Windows 11 22H2
Code 1300: Found legacy RegisterDlls operation.
Code 1303: Found legacy AddReg operation defining co-installers (CoInstallers32).', 'This is acceptable test failure.', '2023-03-31T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 1, 'boolean(//Devnode[contains(.,''USB\VID_03F0&PID_031B'') or contains(.,''USB\VID_03F0&PID_041B'') or contains(.,''USB\VID_04E8&PID_3975'') or contains(.,''USB\VID_302C&PID_2501'')or contains(.,''USBPRINT\MILASER_PRINTER_K100'') or contains(.,''USB\VID_03F0&PID_051B'')])')

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"LogoOSPlatform","MatchType":0,"Values":["Windows v10.0 Client x64 Ni Full"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'InfVerif::RunInfVerif', 'Title', 0, 0)

	INSERT INTO @ParentNodes(ParentNodeId, Depth) SELECT SCOPE_IDENTITY(), 1

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Code 1300', 'UserText', 0, 0, @ParentLogNodeId)

	SELECT @ParentLogNodeId = ParentNodeId FROM @ParentNodes WHERE Depth = 1
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce, ParentId)
	VALUES(@FilterId, 'Error', 'Error', 'Code 1303', 'UserText', 0, 0, @ParentLogNodeId)

	DELETE FROM @ParentNodes WHERE Depth >= 1

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2023-03-31T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 125623 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%kspos%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%kspos%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 125623 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(125623, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: KS Position test fails due to an issue with matching MM devices to driver instances.', 'KS Position test fails due to an issue with matching MM devices to driver instances.', 'Please contact Microsoft Support to receive an updated test binary.', '2024-10-07T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/HardwareID[contains(.,"USB\VID_413C&PID_A518&MI_00") or contains(.,"USB\VID_413C&PID_A518&REV_0100&MI_00") or contains(.,"USB\VID_413C&PID_A518&REV_0100&MI_03") or contains(.,"USB\VID_413C&PID_A518&MI_03")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'AreEqual.*', 'UserText', 0, 1)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(CheckDeviceInstanceId.*Value \(0x8000ffff\)', 'UserText', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-07T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 125624 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%wavetest%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%wavetest%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 125624 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(125624, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: [Test erratum] Wave test fails a topology walk if the topology has no instance ID', 'Wave test fails due to an issue with matching MM devices to driver instances.', 'Please contact Microsoft Support to receive an updated test binary.', '2024-10-07T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DEVNODE_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DEVNODE_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Devnode/HardwareID[contains(.,"USB\VID_413C&PID_A518&MI_00") or contains(.,"USB\VID_413C&PID_A518&REV_0100&MI_00") or contains(.,"USB\VID_413C&PID_A518&REV_0100&MI_03") or contains(.,"USB\VID_413C&PID_A518&MI_03")])', @GathererTypeId)

	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'AreEqual.*', 'UserText', 0, 1)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', 'Error', 'SUCCEEDED\(CheckDeviceInstanceId.*Value \(0x8000ffff\)', 'UserText', 0, 1)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-07T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 126448 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash featurecheck.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash featurecheck.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 126448 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(126448, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: WDDM 3.0 Hardware Flip Queue Check - FeatureCheck::IsHwFlipQueueStableOrAlwaysOn', 'This is a by design HLK test failure that allows Microsoft to control whether an IHV is allowed to enable HwFlipQueue feature. Now that the IHV passed the quality bar, we need to grant a corresponding errata.', 'This is a by design HLK test failure that allows Microsoft to control whether an IHV is allowed to enable HwFlipQueue feature. Now that the IHV passed the quality bar, we need to grant a corresponding errata.', '2024-11-26T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_10DE")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'IsHwFlipQueueStableOrAlwaysOn', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-11-26T16:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 127433 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = '%lullaby%'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('%lullaby%')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 127433 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(127433, 1, 2, 1, 1, 1, 0, 0, @TestCommandLineId, 'HLK AutoTriage: Audio Codec - Lullaby Test - Certification - Desktop', 'Lullaby test loses synchronization when endpoints are not ready to stream right after returning from the target power state.', 'Please contact CSS to get a private binary which compensates for this limitation.', '2024-10-07T17:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
	INSERT INTO FilterConstraint(FilterId, Type, Query)
	VALUES(@FilterId, 0, '{"Field":"KitVersion","MatchType":2,"Values":["10.1.22621"]}')

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', 'Failed.*AUDCLNT_E_UNSUPPORTED_FORMAT.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', '.*AUDCLNT_E_DEVICE_INVALIDATED.*', 'UserText', 0, 0)

	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'Error', '!', 'ERROR: The device with endpoint ID .* is no longer valid and reports state 0x4.*', 'UserText', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-10-07T17:00:00' WHERE Id = @FilterId AND [Status] = 0

-- Inserting filter 127669 v1.
SET @TestCommandLineId = NULL
SET @FilterId = NULL
SET @GathererTypeId = NULL
SET @ParentLogNodeId = NULL

-- Inserting test command line
SELECT @TestCommandLineId = Id FROM TestCommandLine WHERE CommandLine = 'TE.exe /enablewttlogging /appendwttlogging /errorOnCrash featurecheck.dll'
IF @TestCommandLineId IS NULL
BEGIN
	INSERT INTO TestCommandLine(CommandLine) VALUES('TE.exe /enablewttlogging /appendwttlogging /errorOnCrash featurecheck.dll')
	SELECT @TestCommandLineId = SCOPE_IDENTITY()
END

-- Inserting core filter details
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 127669 AND Version = 1
IF @FilterId IS NULL
BEGIN
	INSERT INTO Filter(FilterNumber, Version, Type, Status, IsLogRequired, IsResultRequired, ShouldFilterNotRuns, ShouldFilterAllZeros, TestCommandLineId, Title, IssueDescription, IssueResolution, ExpirationDate)
	VALUES(127669, 1, 1, 1, 1, 1, 0, 0, @TestCommandLineId, 'Errata Waiver: WDDM 3.0 Hardware Flip Queue Check - FeatureCheck::IsHwFlipQueueStableOrAlwaysOn', 'This is a by design HLK test failure that allows Microsoft to control whether an IHV is allowed to enable HwFlipQueue feature. Now that the IHV passed the quality bar, we need to grant a corresponding errata.', 'This is a by design HLK test failure that allows Microsoft to control whether an IHV is allowed to enable HwFlipQueue feature. Now that the IHV passed the quality bar, we need to grant a corresponding errata.', '2024-11-26T16:00:00')
	SELECT @FilterId = SCOPE_IDENTITY()

-- Inserting filter constraints
IF NOT EXISTS (	SELECT Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK')
		INSERT INTO GathererType([Name]) VALUES ('DISPLAY_BLOCK')
	SELECT @GathererTypeId = Id FROM GathererType WHERE Name = 'DISPLAY_BLOCK'
	INSERT INTO FilterConstraint(FilterId, Type, Query, GathererTypeId)
	VALUES(@FilterId, 2, 'boolean(//Device[starts-with(@HardwareID,"PCI\VEN_8086")])', @GathererTypeId)

-- Inserting filter log nodes
	INSERT INTO FilterLogNode(FilterId, StartTag, EndTag, Regex, Attribute, RequireAllClear, IsMatchOnce)
	VALUES(@FilterId, 'StartTest', 'EndTest', 'IsHwFlipQueueStableOrAlwaysOn', 'Title', 0, 0)

	DELETE FROM @ParentNodes
END
ELSE
UPDATE Filter SET [Status] = 1, ExpirationDate = '2024-11-26T16:00:00' WHERE Id = @FilterId AND [Status] = 0


-- Deprecating filter 6994 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 6994 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-01T11:05:54' WHERE Id = @FilterId

-- Deprecating filter 5993 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5993 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T10:03:28' WHERE Id = @FilterId

-- Deprecating filter 5979 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5979 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5976 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5976 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-01-09T16:37:08' WHERE Id = @FilterId

-- Deprecating filter 5975 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5975 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:17:49' WHERE Id = @FilterId

-- Deprecating filter 5974 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5974 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T11:45:42' WHERE Id = @FilterId

-- Deprecating filter 5972 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5972 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T13:43:28' WHERE Id = @FilterId

-- Deprecating filter 5969 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5969 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T13:09:22' WHERE Id = @FilterId

-- Deprecating filter 5960 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5960 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T13:49:44' WHERE Id = @FilterId

-- Deprecating filter 5959 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5959 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:15:13' WHERE Id = @FilterId

-- Deprecating filter 5954 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5954 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5953 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5953 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:23:06' WHERE Id = @FilterId

-- Deprecating filter 5949 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5949 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5948 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5948 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5935 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5935 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T13:36:38' WHERE Id = @FilterId

-- Deprecating filter 5932 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5932 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T14:22:20' WHERE Id = @FilterId

-- Deprecating filter 5921 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5921 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T12:46:54' WHERE Id = @FilterId

-- Deprecating filter 5831 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5831 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-11-01T17:40:25' WHERE Id = @FilterId

-- Deprecating filter 5802 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5802 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T13:11:27' WHERE Id = @FilterId

-- Deprecating filter 5566 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5566 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 999 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 999 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 996 v8.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 996 AND Version = 8
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T23:00:00' WHERE Id = @FilterId

-- Deprecating filter 992 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 992 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-04-26T14:05:03' WHERE Id = @FilterId

-- Deprecating filter 990 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 990 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T14:22:34' WHERE Id = @FilterId

-- Deprecating filter 974 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 974 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 966 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 966 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 964 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 964 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 960 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 960 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 954 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 954 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-06-30T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 950 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 950 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 949 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 949 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 945 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 945 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T14:20:20' WHERE Id = @FilterId

-- Deprecating filter 944 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 944 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T14:18:34' WHERE Id = @FilterId

-- Deprecating filter 925 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 925 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-31T09:04:35' WHERE Id = @FilterId

-- Deprecating filter 923 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 923 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-31T21:45:14' WHERE Id = @FilterId

-- Deprecating filter 917 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 917 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-30T09:53:25' WHERE Id = @FilterId

-- Deprecating filter 913 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 913 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-31T09:51:51' WHERE Id = @FilterId

-- Deprecating filter 911 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 911 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T16:04:48' WHERE Id = @FilterId

-- Deprecating filter 901 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 901 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 896 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 896 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-30T18:18:04' WHERE Id = @FilterId

-- Deprecating filter 895 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 895 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T14:39:34' WHERE Id = @FilterId

-- Deprecating filter 889 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 889 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-04-01T09:44:30' WHERE Id = @FilterId

-- Deprecating filter 887 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 887 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-22T12:29:54' WHERE Id = @FilterId

-- Deprecating filter 882 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 882 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 876 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 876 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T11:07:55' WHERE Id = @FilterId

-- Deprecating filter 872 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 872 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-07-15T23:53:11' WHERE Id = @FilterId

-- Deprecating filter 864 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 864 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-26T18:23:18' WHERE Id = @FilterId

-- Deprecating filter 863 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 863 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T23:00:00' WHERE Id = @FilterId

-- Deprecating filter 855 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 855 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 853 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 853 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T09:47:52' WHERE Id = @FilterId

-- Deprecating filter 851 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 851 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T14:18:10' WHERE Id = @FilterId

-- Deprecating filter 850 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 850 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-14T17:13:08' WHERE Id = @FilterId

-- Deprecating filter 845 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 845 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 844 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 844 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T08:47:14' WHERE Id = @FilterId

-- Deprecating filter 835 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 835 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 832 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 832 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T11:08:13' WHERE Id = @FilterId

-- Deprecating filter 827 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 827 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 819 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 819 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T13:16:55' WHERE Id = @FilterId

-- Deprecating filter 818 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 818 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T09:21:15' WHERE Id = @FilterId

-- Deprecating filter 815 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 815 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T09:18:01' WHERE Id = @FilterId

-- Deprecating filter 814 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 814 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 813 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 813 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-09T09:44:05' WHERE Id = @FilterId

-- Deprecating filter 812 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 812 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T10:20:26' WHERE Id = @FilterId

-- Deprecating filter 791 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 791 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-26T14:48:19' WHERE Id = @FilterId

-- Deprecating filter 780 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 780 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-01T15:00:58' WHERE Id = @FilterId

-- Deprecating filter 778 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 778 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-12-01T11:25:12' WHERE Id = @FilterId

-- Deprecating filter 777 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 777 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-04-26T09:51:16' WHERE Id = @FilterId

-- Deprecating filter 775 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 775 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-01T15:09:07' WHERE Id = @FilterId

-- Deprecating filter 773 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 773 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-07-05T15:44:29' WHERE Id = @FilterId

-- Deprecating filter 772 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 772 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T11:29:44' WHERE Id = @FilterId

-- Deprecating filter 770 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 770 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-04-26T13:55:28' WHERE Id = @FilterId

-- Deprecating filter 766 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 766 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T16:41:10' WHERE Id = @FilterId

-- Deprecating filter 763 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 763 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-31T13:31:44' WHERE Id = @FilterId

-- Deprecating filter 762 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 762 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-01T16:37:29' WHERE Id = @FilterId

-- Deprecating filter 761 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 761 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-01T16:58:08' WHERE Id = @FilterId

-- Deprecating filter 756 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 756 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T14:22:28' WHERE Id = @FilterId

-- Deprecating filter 749 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 749 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T16:46:17' WHERE Id = @FilterId

-- Deprecating filter 745 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 745 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-30T08:40:47' WHERE Id = @FilterId

-- Deprecating filter 744 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 744 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T16:06:07' WHERE Id = @FilterId

-- Deprecating filter 741 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 741 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-01T16:06:41' WHERE Id = @FilterId

-- Deprecating filter 739 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 739 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 734 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 734 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-01T13:11:04' WHERE Id = @FilterId

-- Deprecating filter 732 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 732 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-01T09:15:27' WHERE Id = @FilterId

-- Deprecating filter 726 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 726 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T14:19:51' WHERE Id = @FilterId

-- Deprecating filter 722 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 722 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-01T16:12:35' WHERE Id = @FilterId

-- Deprecating filter 718 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 718 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-09-30T16:15:51' WHERE Id = @FilterId

-- Deprecating filter 717 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 717 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-06-30T12:10:06' WHERE Id = @FilterId

-- Deprecating filter 713 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 713 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-22T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 712 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 712 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-22T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 711 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 711 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 710 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 710 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-06-30T11:49:36' WHERE Id = @FilterId

-- Deprecating filter 708 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 708 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T09:37:29' WHERE Id = @FilterId

-- Deprecating filter 706 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 706 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 705 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 705 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 704 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 704 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 703 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 703 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 702 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 702 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 701 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 701 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-07-01T14:19:59' WHERE Id = @FilterId

-- Deprecating filter 699 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 699 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T09:11:30' WHERE Id = @FilterId

-- Deprecating filter 696 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 696 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T11:32:34' WHERE Id = @FilterId

-- Deprecating filter 694 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 694 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T09:32:14' WHERE Id = @FilterId

-- Deprecating filter 691 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 691 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T13:47:39' WHERE Id = @FilterId

-- Deprecating filter 685 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 685 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-07-10T16:43:00' WHERE Id = @FilterId

-- Deprecating filter 679 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 679 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 676 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 676 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 675 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 675 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-26T13:51:33' WHERE Id = @FilterId

-- Deprecating filter 673 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 673 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-08-15T14:13:53' WHERE Id = @FilterId

-- Deprecating filter 670 v8.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 670 AND Version = 8
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 669 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 669 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 668 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 668 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-30T14:51:41' WHERE Id = @FilterId

-- Deprecating filter 663 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 663 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 662 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 662 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 661 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 661 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 660 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 660 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 657 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 657 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2022-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 655 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 655 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-12-30T12:12:40' WHERE Id = @FilterId

-- Deprecating filter 654 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 654 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-01T16:37:58' WHERE Id = @FilterId

-- Deprecating filter 645 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 645 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 644 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 644 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 643 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 643 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 642 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 642 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 630 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 630 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 625 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 625 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-07-01T17:05:39' WHERE Id = @FilterId

-- Deprecating filter 623 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 623 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 622 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 622 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 621 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 621 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-01T10:47:41' WHERE Id = @FilterId

-- Deprecating filter 619 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 619 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 618 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 618 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-01T10:45:25' WHERE Id = @FilterId

-- Deprecating filter 614 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 614 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T08:45:31' WHERE Id = @FilterId

-- Deprecating filter 613 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 613 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T15:14:07' WHERE Id = @FilterId

-- Deprecating filter 610 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 610 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 606 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 606 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T09:55:27' WHERE Id = @FilterId

-- Deprecating filter 604 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 604 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-04-27T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 599 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 599 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T22:07:49' WHERE Id = @FilterId

-- Deprecating filter 597 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 597 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 596 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 596 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-06-30T12:15:13' WHERE Id = @FilterId

-- Deprecating filter 592 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 592 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 589 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 589 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T16:30:15' WHERE Id = @FilterId

-- Deprecating filter 587 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 587 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-26T15:09:15' WHERE Id = @FilterId

-- Deprecating filter 586 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 586 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-26T15:07:29' WHERE Id = @FilterId

-- Deprecating filter 580 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 580 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-01T16:57:03' WHERE Id = @FilterId

-- Deprecating filter 576 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 576 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T14:55:08' WHERE Id = @FilterId

-- Deprecating filter 575 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 575 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-01T08:43:10' WHERE Id = @FilterId

-- Deprecating filter 570 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 570 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T16:22:49' WHERE Id = @FilterId

-- Deprecating filter 564 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 564 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-02T16:03:40' WHERE Id = @FilterId

-- Deprecating filter 563 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 563 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T13:49:02' WHERE Id = @FilterId

-- Deprecating filter 562 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 562 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 561 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 561 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T13:46:35' WHERE Id = @FilterId

-- Deprecating filter 560 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 560 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-26T14:47:52' WHERE Id = @FilterId

-- Deprecating filter 557 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 557 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-09-15T10:54:00' WHERE Id = @FilterId

-- Deprecating filter 550 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 550 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T12:55:27' WHERE Id = @FilterId

-- Deprecating filter 546 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 546 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T16:43:04' WHERE Id = @FilterId

-- Deprecating filter 539 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 539 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-15T10:07:22' WHERE Id = @FilterId

-- Deprecating filter 536 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 536 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-08-17T17:56:48' WHERE Id = @FilterId

-- Deprecating filter 535 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 535 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-06-30T10:17:36' WHERE Id = @FilterId

-- Deprecating filter 525 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 525 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-15T14:14:37' WHERE Id = @FilterId

-- Deprecating filter 520 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 520 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 516 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 516 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 512 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 512 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 507 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 507 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-01T15:25:37' WHERE Id = @FilterId

-- Deprecating filter 506 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 506 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 505 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 505 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 504 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 504 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 503 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 503 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 502 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 502 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 501 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 501 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 500 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 500 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 497 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 497 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T17:39:57' WHERE Id = @FilterId

-- Deprecating filter 494 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 494 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 493 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 493 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-01T17:02:38' WHERE Id = @FilterId

-- Deprecating filter 490 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 490 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T11:51:01' WHERE Id = @FilterId

-- Deprecating filter 489 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 489 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-03-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 483 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 483 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T16:00:59' WHERE Id = @FilterId

-- Deprecating filter 482 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 482 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T13:55:59' WHERE Id = @FilterId

-- Deprecating filter 478 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 478 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-04-15T10:58:59' WHERE Id = @FilterId

-- Deprecating filter 477 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 477 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T10:02:55' WHERE Id = @FilterId

-- Deprecating filter 476 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 476 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 475 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 475 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 463 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 463 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-01T16:28:59' WHERE Id = @FilterId

-- Deprecating filter 461 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 461 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 459 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 459 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T15:25:06' WHERE Id = @FilterId

-- Deprecating filter 455 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 455 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-01T16:46:22' WHERE Id = @FilterId

-- Deprecating filter 436 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 436 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T12:26:15' WHERE Id = @FilterId

-- Deprecating filter 435 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 435 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T17:33:37' WHERE Id = @FilterId

-- Deprecating filter 429 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 429 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T14:32:07' WHERE Id = @FilterId

-- Deprecating filter 426 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 426 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 424 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 424 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-01T15:48:29' WHERE Id = @FilterId

-- Deprecating filter 422 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 422 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-01T20:15:04' WHERE Id = @FilterId

-- Deprecating filter 419 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 419 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 418 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 418 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-15T09:41:38' WHERE Id = @FilterId

-- Deprecating filter 416 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 416 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 415 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 415 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T11:08:07' WHERE Id = @FilterId

-- Deprecating filter 414 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 414 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T09:19:10' WHERE Id = @FilterId

-- Deprecating filter 412 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 412 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T13:29:19' WHERE Id = @FilterId

-- Deprecating filter 411 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 411 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T16:26:12' WHERE Id = @FilterId

-- Deprecating filter 410 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 410 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-08-22T15:50:28' WHERE Id = @FilterId

-- Deprecating filter 408 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 408 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 404 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 404 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T17:26:34' WHERE Id = @FilterId

-- Deprecating filter 396 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 396 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 395 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 395 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 393 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 393 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-01-31T10:48:49' WHERE Id = @FilterId

-- Deprecating filter 391 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 391 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T12:17:52' WHERE Id = @FilterId

-- Deprecating filter 390 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 390 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-03-31T10:30:58' WHERE Id = @FilterId

-- Deprecating filter 388 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 388 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 382 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 382 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T13:18:41' WHERE Id = @FilterId

-- Deprecating filter 379 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 379 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T13:38:24' WHERE Id = @FilterId

-- Deprecating filter 371 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 371 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-01T14:03:13' WHERE Id = @FilterId

-- Deprecating filter 368 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 368 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 366 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 366 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-03-31T12:06:03' WHERE Id = @FilterId

-- Deprecating filter 363 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 363 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-08-23T13:26:55' WHERE Id = @FilterId

-- Deprecating filter 362 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 362 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 360 v9.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 360 AND Version = 9
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 359 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 359 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T17:12:38' WHERE Id = @FilterId

-- Deprecating filter 358 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 358 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-01-31T10:57:32' WHERE Id = @FilterId

-- Deprecating filter 356 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 356 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 352 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 352 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 349 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 349 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-01T13:39:15' WHERE Id = @FilterId

-- Deprecating filter 348 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 348 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 341 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 341 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-30T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 339 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 339 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-06-30T14:46:02' WHERE Id = @FilterId

-- Deprecating filter 338 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 338 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T16:47:02' WHERE Id = @FilterId

-- Deprecating filter 329 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 329 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-15T08:48:50' WHERE Id = @FilterId

-- Deprecating filter 327 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 327 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T07:05:19' WHERE Id = @FilterId

-- Deprecating filter 324 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 324 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-07-31T13:15:13' WHERE Id = @FilterId

-- Deprecating filter 322 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 322 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 321 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 321 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-07-01T15:19:31' WHERE Id = @FilterId

-- Deprecating filter 320 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 320 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-07-01T11:15:31' WHERE Id = @FilterId

-- Deprecating filter 319 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 319 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T15:22:08' WHERE Id = @FilterId

-- Deprecating filter 318 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 318 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 317 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 317 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 316 v9.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 316 AND Version = 9
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 314 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 314 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T15:27:04' WHERE Id = @FilterId

-- Deprecating filter 310 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 310 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 309 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 309 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-30T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 308 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 308 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T16:18:56' WHERE Id = @FilterId

-- Deprecating filter 307 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 307 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T22:13:32' WHERE Id = @FilterId

-- Deprecating filter 300 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 300 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 293 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 293 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:06:22' WHERE Id = @FilterId

-- Deprecating filter 292 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 292 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:01:51' WHERE Id = @FilterId

-- Deprecating filter 291 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 291 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-01T13:55:01' WHERE Id = @FilterId

-- Deprecating filter 289 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 289 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 288 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 288 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 287 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 287 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 286 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 286 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 285 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 285 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 282 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 282 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-01-31T07:28:59' WHERE Id = @FilterId

-- Deprecating filter 275 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 275 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T10:02:55' WHERE Id = @FilterId

-- Deprecating filter 267 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 267 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T09:42:21' WHERE Id = @FilterId

-- Deprecating filter 262 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 262 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T14:04:55' WHERE Id = @FilterId

-- Deprecating filter 260 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 260 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-08-31T15:32:27' WHERE Id = @FilterId

-- Deprecating filter 257 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 257 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 256 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 256 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 255 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 255 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 251 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 251 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T12:55:13' WHERE Id = @FilterId

-- Deprecating filter 248 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 248 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-01T17:21:37' WHERE Id = @FilterId

-- Deprecating filter 247 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 247 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 239 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 239 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-31T10:55:47' WHERE Id = @FilterId

-- Deprecating filter 238 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 238 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 237 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 237 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-01T14:15:43' WHERE Id = @FilterId

-- Deprecating filter 235 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 235 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T22:17:20' WHERE Id = @FilterId

-- Deprecating filter 231 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 231 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T22:38:03' WHERE Id = @FilterId

-- Deprecating filter 220 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 220 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T13:02:50' WHERE Id = @FilterId

-- Deprecating filter 219 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 219 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 218 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 218 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-15T09:07:54' WHERE Id = @FilterId

-- Deprecating filter 215 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 215 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T19:27:55' WHERE Id = @FilterId

-- Deprecating filter 213 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 213 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 212 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 212 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 210 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 210 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 208 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 208 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-15T21:29:11' WHERE Id = @FilterId

-- Deprecating filter 207 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 207 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-15T21:25:12' WHERE Id = @FilterId

-- Deprecating filter 206 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 206 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-15T21:19:53' WHERE Id = @FilterId

-- Deprecating filter 205 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 205 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T10:09:19' WHERE Id = @FilterId

-- Deprecating filter 203 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 203 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 202 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 202 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T09:38:55' WHERE Id = @FilterId

-- Deprecating filter 200 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 200 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 198 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 198 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-08-31T10:40:52' WHERE Id = @FilterId

-- Deprecating filter 194 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 194 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 193 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 193 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 192 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 192 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 191 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 191 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 188 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 188 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-07-06T15:07:53' WHERE Id = @FilterId

-- Deprecating filter 183 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 183 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 182 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 182 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-01-01T09:26:43' WHERE Id = @FilterId

-- Deprecating filter 173 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 173 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 171 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 171 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 168 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 168 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-06-05T22:32:08' WHERE Id = @FilterId

-- Deprecating filter 167 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 167 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-06-05T22:33:20' WHERE Id = @FilterId

-- Deprecating filter 163 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 163 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 160 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 160 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T13:54:29' WHERE Id = @FilterId

-- Deprecating filter 152 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 152 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-01-29T22:10:39' WHERE Id = @FilterId

-- Deprecating filter 145 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 145 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T12:36:05' WHERE Id = @FilterId

-- Deprecating filter 143 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 143 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-12-01T11:23:47' WHERE Id = @FilterId

-- Deprecating filter 133 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 133 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 131 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 131 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-02T15:58:38' WHERE Id = @FilterId

-- Deprecating filter 120 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 120 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T21:51:18' WHERE Id = @FilterId

-- Deprecating filter 119 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 119 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T10:02:05' WHERE Id = @FilterId

-- Deprecating filter 106 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 106 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-01T12:41:22' WHERE Id = @FilterId

-- Deprecating filter 103 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 102 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 102 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-06-01T11:42:43' WHERE Id = @FilterId

-- Deprecating filter 95 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 95 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-06-01T10:38:39' WHERE Id = @FilterId

-- Deprecating filter 90 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 90 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T10:27:53' WHERE Id = @FilterId

-- Deprecating filter 83 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 83 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 76 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 76 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 75 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 75 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-16T08:49:42' WHERE Id = @FilterId

-- Deprecating filter 68 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 68 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T09:18:54' WHERE Id = @FilterId

-- Deprecating filter 63 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 63 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T12:41:38' WHERE Id = @FilterId

-- Deprecating filter 62 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 62 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-03-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 54 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 54 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T11:17:37' WHERE Id = @FilterId

-- Deprecating filter 53 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 53 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-12-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 52 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 52 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-12-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 51 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 51 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2020-12-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 46 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 46 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2020-12-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 38 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 38 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2020-12-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 35 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 35 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-12-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 34 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 34 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2020-12-01T10:19:46' WHERE Id = @FilterId

-- Deprecating filter 33 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 33 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2020-12-01T10:18:41' WHERE Id = @FilterId

-- Deprecating filter 32 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2020-12-01T10:17:07' WHERE Id = @FilterId

-- Deprecating filter 31 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-02T00:33:08' WHERE Id = @FilterId

-- Deprecating filter 30 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 30 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-02T00:30:23' WHERE Id = @FilterId

-- Deprecating filter 29 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-02T00:25:43' WHERE Id = @FilterId

-- Deprecating filter 28 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 28 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-02T00:23:07' WHERE Id = @FilterId

-- Deprecating filter 27 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-02T00:20:34' WHERE Id = @FilterId

-- Deprecating filter 26 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-02T00:18:25' WHERE Id = @FilterId

-- Deprecating filter 25 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 25 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-02T00:11:51' WHERE Id = @FilterId

-- Deprecating filter 24 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T23:08:53' WHERE Id = @FilterId

-- Deprecating filter 23 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T23:07:16' WHERE Id = @FilterId

-- Deprecating filter 22 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 21 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-31T22:54:31' WHERE Id = @FilterId

-- Deprecating filter 20 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:39:36' WHERE Id = @FilterId

-- Deprecating filter 19 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:36:24' WHERE Id = @FilterId

-- Deprecating filter 18 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:34:28' WHERE Id = @FilterId

-- Deprecating filter 17 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 17 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-12-01T22:28:00' WHERE Id = @FilterId

-- Deprecating filter 16 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 16 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:25:55' WHERE Id = @FilterId

-- Deprecating filter 15 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 15 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:23:23' WHERE Id = @FilterId

-- Deprecating filter 14 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 14 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T22:17:22' WHERE Id = @FilterId

-- Deprecating filter 12 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 12 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T16:04:43' WHERE Id = @FilterId

-- Deprecating filter 11 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 11 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T16:02:56' WHERE Id = @FilterId

-- Deprecating filter 10 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T16:00:49' WHERE Id = @FilterId

-- Deprecating filter 9 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 9 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T15:58:39' WHERE Id = @FilterId

-- Deprecating filter 8 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T15:56:56' WHERE Id = @FilterId

-- Deprecating filter 6 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 6 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T15:50:22' WHERE Id = @FilterId

-- Deprecating filter 5 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T15:47:08' WHERE Id = @FilterId

-- Deprecating filter 4 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T17:36:20' WHERE Id = @FilterId

-- Deprecating filter 3 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T17:31:41' WHERE Id = @FilterId

-- Deprecating filter 5548 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5548 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5440 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5440 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5439 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5439 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5438 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5438 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5437 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5437 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5433 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5433 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2997 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2997 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-07-31T16:35:51' WHERE Id = @FilterId

-- Deprecating filter 2995 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2995 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 2967 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2967 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 2966 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2966 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T12:39:55' WHERE Id = @FilterId

-- Deprecating filter 2962 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2962 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2956 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2956 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2954 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2954 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2938 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2938 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T09:23:12' WHERE Id = @FilterId

-- Deprecating filter 2935 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2935 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T12:38:31' WHERE Id = @FilterId

-- Deprecating filter 2931 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2931 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 2930 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2930 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2916 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2916 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2907 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2907 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2904 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2904 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T11:29:36' WHERE Id = @FilterId

-- Deprecating filter 2902 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2902 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-30T15:10:27' WHERE Id = @FilterId

-- Deprecating filter 2897 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2897 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2896 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2896 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T16:58:23' WHERE Id = @FilterId

-- Deprecating filter 2890 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2890 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-30T12:04:53' WHERE Id = @FilterId

-- Deprecating filter 2889 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2889 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-30T15:06:22' WHERE Id = @FilterId

-- Deprecating filter 2888 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2888 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2887 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2887 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2885 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2885 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '1899-12-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 2884 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2884 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T15:41:59' WHERE Id = @FilterId

-- Deprecating filter 2877 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2877 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2876 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2876 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-07-23T15:55:20' WHERE Id = @FilterId

-- Deprecating filter 2875 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2875 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T11:58:19' WHERE Id = @FilterId

-- Deprecating filter 2871 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2871 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-08-31T15:25:45' WHERE Id = @FilterId

-- Deprecating filter 2863 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2863 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T11:08:02' WHERE Id = @FilterId

-- Deprecating filter 2862 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2862 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-10T08:42:20' WHERE Id = @FilterId

-- Deprecating filter 2861 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2861 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T08:41:28' WHERE Id = @FilterId

-- Deprecating filter 2860 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2860 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-10T08:40:07' WHERE Id = @FilterId

-- Deprecating filter 2849 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2849 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:27:40' WHERE Id = @FilterId

-- Deprecating filter 2848 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2848 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:24:01' WHERE Id = @FilterId

-- Deprecating filter 2847 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2847 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:21:48' WHERE Id = @FilterId

-- Deprecating filter 2846 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2846 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T13:59:17' WHERE Id = @FilterId

-- Deprecating filter 2844 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2844 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T13:14:14' WHERE Id = @FilterId

-- Deprecating filter 2842 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2842 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T12:24:18' WHERE Id = @FilterId

-- Deprecating filter 2839 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2839 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T11:13:03' WHERE Id = @FilterId

-- Deprecating filter 2832 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2832 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2821 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2821 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-01T09:21:03' WHERE Id = @FilterId

-- Deprecating filter 2816 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2816 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T16:10:48' WHERE Id = @FilterId

-- Deprecating filter 2812 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2812 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T16:24:51' WHERE Id = @FilterId

-- Deprecating filter 2806 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2806 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2796 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2796 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T08:30:02' WHERE Id = @FilterId

-- Deprecating filter 2789 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2789 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T12:42:30' WHERE Id = @FilterId

-- Deprecating filter 2785 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2785 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-03-31T12:46:02' WHERE Id = @FilterId

-- Deprecating filter 2782 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2782 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T11:18:10' WHERE Id = @FilterId

-- Deprecating filter 2781 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2781 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T11:23:09' WHERE Id = @FilterId

-- Deprecating filter 2779 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2779 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T11:31:04' WHERE Id = @FilterId

-- Deprecating filter 2775 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2775 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2769 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2769 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2758 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2758 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T12:18:46' WHERE Id = @FilterId

-- Deprecating filter 2757 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2757 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T12:16:36' WHERE Id = @FilterId

-- Deprecating filter 2752 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2752 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2751 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2751 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T16:27:02' WHERE Id = @FilterId

-- Deprecating filter 2750 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2750 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T16:34:38' WHERE Id = @FilterId

-- Deprecating filter 2749 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2749 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T14:01:34' WHERE Id = @FilterId

-- Deprecating filter 2727 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2727 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T18:55:17' WHERE Id = @FilterId

-- Deprecating filter 2726 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2726 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-01T11:59:01' WHERE Id = @FilterId

-- Deprecating filter 2723 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2723 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2709 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2709 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T22:21:46' WHERE Id = @FilterId

-- Deprecating filter 2704 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2704 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 2703 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2703 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-11-29T23:00:00' WHERE Id = @FilterId

-- Deprecating filter 2697 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2697 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T14:11:10' WHERE Id = @FilterId

-- Deprecating filter 2695 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2695 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T08:35:26' WHERE Id = @FilterId

-- Deprecating filter 2677 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2677 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T20:29:19' WHERE Id = @FilterId

-- Deprecating filter 2676 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2676 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T20:28:00' WHERE Id = @FilterId

-- Deprecating filter 2675 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2675 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T16:37:43' WHERE Id = @FilterId

-- Deprecating filter 2673 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2673 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T19:57:16' WHERE Id = @FilterId

-- Deprecating filter 2669 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2669 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T14:04:31' WHERE Id = @FilterId

-- Deprecating filter 2668 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2668 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T13:56:00' WHERE Id = @FilterId

-- Deprecating filter 2667 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2667 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T13:45:09' WHERE Id = @FilterId

-- Deprecating filter 2664 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 2664 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1654 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1654 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-07-01T09:35:11' WHERE Id = @FilterId

-- Deprecating filter 1627 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1627 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1603 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1603 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T18:03:19' WHERE Id = @FilterId

-- Deprecating filter 1596 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1596 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-01T12:48:18' WHERE Id = @FilterId

-- Deprecating filter 1594 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1594 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-01T15:59:38' WHERE Id = @FilterId

-- Deprecating filter 1592 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1592 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-01T14:47:00' WHERE Id = @FilterId

-- Deprecating filter 1586 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1586 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T08:12:42' WHERE Id = @FilterId

-- Deprecating filter 1578 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1578 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1574 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1574 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T13:55:10' WHERE Id = @FilterId

-- Deprecating filter 1570 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1570 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1565 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1565 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1563 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1563 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T07:50:14' WHERE Id = @FilterId

-- Deprecating filter 1550 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1550 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T12:36:39' WHERE Id = @FilterId

-- Deprecating filter 1549 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1549 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-01T16:34:28' WHERE Id = @FilterId

-- Deprecating filter 1547 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1547 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1544 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1544 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-01T13:57:54' WHERE Id = @FilterId

-- Deprecating filter 1542 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1542 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1536 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1536 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-05-01T12:50:29' WHERE Id = @FilterId

-- Deprecating filter 1527 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1527 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1522 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1522 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T11:16:54' WHERE Id = @FilterId

-- Deprecating filter 1519 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1519 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1512 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1512 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T10:07:36' WHERE Id = @FilterId

-- Deprecating filter 1510 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1510 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T10:08:22' WHERE Id = @FilterId

-- Deprecating filter 1509 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1509 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T10:06:11' WHERE Id = @FilterId

-- Deprecating filter 1498 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1498 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T09:11:44' WHERE Id = @FilterId

-- Deprecating filter 1489 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1489 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-04-01T12:11:09' WHERE Id = @FilterId

-- Deprecating filter 1484 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1484 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1463 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1463 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T11:29:51' WHERE Id = @FilterId

-- Deprecating filter 1459 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1459 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-11-30T11:35:48' WHERE Id = @FilterId

-- Deprecating filter 1444 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1444 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1439 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1439 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1419 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1419 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-04-30T12:10:21' WHERE Id = @FilterId

-- Deprecating filter 1418 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1418 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-06T11:21:29' WHERE Id = @FilterId

-- Deprecating filter 1413 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1413 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-04-01T14:18:17' WHERE Id = @FilterId

-- Deprecating filter 1412 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1412 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-01T17:31:20' WHERE Id = @FilterId

-- Deprecating filter 1410 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1410 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-22T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 1396 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1396 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1360 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1360 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-01T17:27:39' WHERE Id = @FilterId

-- Deprecating filter 1355 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1355 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-04-03T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 1354 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1354 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-04-01T13:35:08' WHERE Id = @FilterId

-- Deprecating filter 1342 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1342 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1335 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1335 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1334 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1334 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1330 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1330 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1326 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1326 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1322 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1322 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1321 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1321 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:13:08' WHERE Id = @FilterId

-- Deprecating filter 1320 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1320 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-30T16:14:05' WHERE Id = @FilterId

-- Deprecating filter 1317 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1317 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1298 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1298 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1294 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1294 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-31T14:36:59' WHERE Id = @FilterId

-- Deprecating filter 1293 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1293 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1289 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1289 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-03-18T11:51:47' WHERE Id = @FilterId

-- Deprecating filter 1278 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1278 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1275 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1275 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1269 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1269 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1267 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1267 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1266 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1266 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-01T10:53:41' WHERE Id = @FilterId

-- Deprecating filter 1257 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1257 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-18T11:47:15' WHERE Id = @FilterId

-- Deprecating filter 1253 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1253 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1244 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1244 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1239 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1239 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1236 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1236 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1204 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1204 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-31T18:08:50' WHERE Id = @FilterId

-- Deprecating filter 1194 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1194 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1187 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1187 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1168 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1168 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1141 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1141 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T16:31:55' WHERE Id = @FilterId

-- Deprecating filter 1136 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1136 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T13:23:06' WHERE Id = @FilterId

-- Deprecating filter 1133 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1133 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1129 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1129 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T17:39:53' WHERE Id = @FilterId

-- Deprecating filter 1114 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1114 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1097 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1097 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-06-30T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 1096 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1096 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-01T06:44:49' WHERE Id = @FilterId

-- Deprecating filter 1095 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1095 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T16:35:18' WHERE Id = @FilterId

-- Deprecating filter 1094 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1094 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T08:55:06' WHERE Id = @FilterId

-- Deprecating filter 1092 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1092 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-01-15T09:44:17' WHERE Id = @FilterId

-- Deprecating filter 1077 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1077 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1076 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1076 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1062 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1062 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 1039 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1039 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T15:12:50' WHERE Id = @FilterId

-- Deprecating filter 1037 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1037 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-01T11:44:37' WHERE Id = @FilterId

-- Deprecating filter 1029 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1029 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-12-01T12:36:26' WHERE Id = @FilterId

-- Deprecating filter 1027 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1027 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-12-01T12:52:23' WHERE Id = @FilterId

-- Deprecating filter 1013 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1013 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T14:07:24' WHERE Id = @FilterId

-- Deprecating filter 1006 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 1006 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-10-26T17:22:14' WHERE Id = @FilterId

-- Deprecating filter 902 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 902 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 862 v9.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 862 AND Version = 9
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T23:00:00' WHERE Id = @FilterId

-- Deprecating filter 861 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 861 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-04-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 747 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 747 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-30T15:39:12' WHERE Id = @FilterId

-- Deprecating filter 746 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 746 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2012-11-30T15:33:11' WHERE Id = @FilterId

-- Deprecating filter 735 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 735 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T14:41:20' WHERE Id = @FilterId

-- Deprecating filter 616 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 616 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 583 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 583 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-01T11:16:45' WHERE Id = @FilterId

-- Deprecating filter 402 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 402 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T16:21:40' WHERE Id = @FilterId

-- Deprecating filter 369 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 369 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 254 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 254 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 178 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 178 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 176 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 176 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 130 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 130 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-03-01T12:13:31' WHERE Id = @FilterId

-- Deprecating filter 88 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 88 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-11-30T11:09:20' WHERE Id = @FilterId

-- Deprecating filter 7025 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7025 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:57:41' WHERE Id = @FilterId

-- Deprecating filter 7028 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7028 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:53:10' WHERE Id = @FilterId

-- Deprecating filter 7021 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7021 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T13:49:52' WHERE Id = @FilterId

-- Deprecating filter 7004 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7004 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-01T10:34:28' WHERE Id = @FilterId

-- Deprecating filter 7003 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7003 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-01T17:25:40' WHERE Id = @FilterId

-- Deprecating filter 7002 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7002 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:10:17' WHERE Id = @FilterId

-- Deprecating filter 7000 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7000 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T12:47:51' WHERE Id = @FilterId

-- Deprecating filter 5992 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5992 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T09:55:57' WHERE Id = @FilterId

-- Deprecating filter 5937 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5937 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:42:03' WHERE Id = @FilterId

-- Deprecating filter 5936 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5936 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T11:12:51' WHERE Id = @FilterId

-- Deprecating filter 5931 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5931 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:33:37' WHERE Id = @FilterId

-- Deprecating filter 5926 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5926 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T13:47:19' WHERE Id = @FilterId

-- Deprecating filter 5922 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5922 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5910 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5910 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T14:55:09' WHERE Id = @FilterId

-- Deprecating filter 5905 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5905 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:31:32' WHERE Id = @FilterId

-- Deprecating filter 5902 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5902 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:07:16' WHERE Id = @FilterId

-- Deprecating filter 5891 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5891 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:18:57' WHERE Id = @FilterId

-- Deprecating filter 5890 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5890 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:45:26' WHERE Id = @FilterId

-- Deprecating filter 5888 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5888 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T12:46:59' WHERE Id = @FilterId

-- Deprecating filter 5887 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5887 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:56:17' WHERE Id = @FilterId

-- Deprecating filter 5884 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5884 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T19:11:06' WHERE Id = @FilterId

-- Deprecating filter 5883 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5883 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T17:00:05' WHERE Id = @FilterId

-- Deprecating filter 5882 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5882 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:55:24' WHERE Id = @FilterId

-- Deprecating filter 5877 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5877 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T10:11:33' WHERE Id = @FilterId

-- Deprecating filter 5872 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5872 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T10:08:40' WHERE Id = @FilterId

-- Deprecating filter 5863 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5863 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5861 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5861 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T17:21:23' WHERE Id = @FilterId

-- Deprecating filter 5860 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5860 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T17:12:14' WHERE Id = @FilterId

-- Deprecating filter 5859 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5859 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T17:05:34' WHERE Id = @FilterId

-- Deprecating filter 5856 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5856 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 5854 v8.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5854 AND Version = 8
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T15:54:51' WHERE Id = @FilterId

-- Deprecating filter 5853 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5853 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T10:49:10' WHERE Id = @FilterId

-- Deprecating filter 5845 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5845 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-01T22:14:42' WHERE Id = @FilterId

-- Deprecating filter 5838 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5838 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T10:59:18' WHERE Id = @FilterId

-- Deprecating filter 5836 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5836 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:36:06' WHERE Id = @FilterId

-- Deprecating filter 5834 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5834 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-11-01T15:22:09' WHERE Id = @FilterId

-- Deprecating filter 5833 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5833 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T18:47:39' WHERE Id = @FilterId

-- Deprecating filter 5832 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5832 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:42:36' WHERE Id = @FilterId

-- Deprecating filter 5830 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5830 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T11:36:07' WHERE Id = @FilterId

-- Deprecating filter 5823 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5823 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5821 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5821 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T15:35:04' WHERE Id = @FilterId

-- Deprecating filter 5817 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5817 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5816 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5816 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5815 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5815 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5810 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5810 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T10:07:26' WHERE Id = @FilterId

-- Deprecating filter 5808 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5808 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5807 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5807 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5806 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5806 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5803 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5803 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5801 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5801 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5793 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5793 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5792 v8.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5792 AND Version = 8
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-02-27T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 5790 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5790 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5789 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5789 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5788 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5788 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5781 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5781 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-07-01T14:44:15' WHERE Id = @FilterId

-- Deprecating filter 5773 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5773 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-30T12:47:16' WHERE Id = @FilterId

-- Deprecating filter 5766 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5766 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5760 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5760 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5751 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5751 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5750 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5750 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5748 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5748 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5746 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5746 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5745 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5745 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5740 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5740 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5728 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5728 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5727 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5727 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-30T12:45:59' WHERE Id = @FilterId

-- Deprecating filter 5721 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5721 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5720 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5720 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5709 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5709 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5706 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5706 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T13:14:15' WHERE Id = @FilterId

-- Deprecating filter 5703 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5703 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5699 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5699 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5694 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5694 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5693 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5693 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5688 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5688 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-30T13:29:14' WHERE Id = @FilterId

-- Deprecating filter 5687 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5687 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5683 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5683 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5681 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5681 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5679 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5679 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5678 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5678 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-11-11T11:51:03' WHERE Id = @FilterId

-- Deprecating filter 5674 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5674 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5670 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5670 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5667 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5667 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T17:12:00' WHERE Id = @FilterId

-- Deprecating filter 5666 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5666 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T17:10:42' WHERE Id = @FilterId

-- Deprecating filter 5663 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5663 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5657 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5657 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5656 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5656 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5653 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5653 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5650 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5650 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5649 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5649 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5648 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5648 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T11:53:33' WHERE Id = @FilterId

-- Deprecating filter 5647 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5647 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5644 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5644 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5643 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5643 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5639 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5639 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5637 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5637 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5636 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5636 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5635 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5635 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5633 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5633 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5632 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5632 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5631 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5631 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5624 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5624 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5623 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5623 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-07-22T16:28:52' WHERE Id = @FilterId

-- Deprecating filter 5620 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5620 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5619 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5619 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5618 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5618 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5617 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5617 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5616 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5616 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5613 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5613 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5605 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5605 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5603 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5603 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5602 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5602 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5601 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5601 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5599 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5599 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5597 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5597 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5584 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5584 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-08-31T17:44:02' WHERE Id = @FilterId

-- Deprecating filter 5582 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5582 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5581 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5581 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5580 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5580 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-01-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5578 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5578 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5575 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5575 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5574 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5574 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5573 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5573 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5570 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5570 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5552 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5552 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5550 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5550 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5549 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5549 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5547 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5547 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5546 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5546 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5544 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5544 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5540 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5540 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5532 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5532 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5530 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5530 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5526 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5526 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5525 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5525 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5524 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5524 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5522 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5522 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5519 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5519 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5515 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5515 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-10-30T14:34:46' WHERE Id = @FilterId

-- Deprecating filter 5514 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5514 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5512 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5512 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5511 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5511 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5495 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5495 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5493 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5493 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5467 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5467 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5462 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5462 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5461 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5461 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5452 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5452 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T14:22:05' WHERE Id = @FilterId

-- Deprecating filter 5450 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5450 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5449 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5449 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5447 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5447 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5446 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5446 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5425 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5425 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-14T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5424 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5424 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-14T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5423 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5423 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-14T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5422 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5422 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-14T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5421 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5421 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-14T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5420 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5420 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-04-14T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5418 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5418 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5417 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5417 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5410 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5410 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5398 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5398 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5390 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5390 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5377 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5377 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5366 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5366 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-02-10T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5357 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5357 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5353 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5353 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5351 v6.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5351 AND Version = 6
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5349 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5349 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T12:55:57' WHERE Id = @FilterId

-- Deprecating filter 5348 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5348 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T12:57:08' WHERE Id = @FilterId

-- Deprecating filter 5347 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5347 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-10-30T14:10:20' WHERE Id = @FilterId

-- Deprecating filter 5344 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5344 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 5336 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5336 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-01-09T11:45:56' WHERE Id = @FilterId

-- Deprecating filter 5324 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5324 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-10-31T11:54:21' WHERE Id = @FilterId

-- Deprecating filter 5292 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5292 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-01-04T09:40:04' WHERE Id = @FilterId

-- Deprecating filter 5275 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5275 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T10:28:41' WHERE Id = @FilterId

-- Deprecating filter 5257 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5257 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-07-01T10:52:58' WHERE Id = @FilterId

-- Deprecating filter 5256 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5256 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-07-01T10:51:30' WHERE Id = @FilterId

-- Deprecating filter 5192 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5192 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T09:13:18' WHERE Id = @FilterId

-- Deprecating filter 5186 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5186 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T09:12:34' WHERE Id = @FilterId

-- Deprecating filter 5162 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5162 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T08:36:25' WHERE Id = @FilterId

-- Deprecating filter 5160 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5160 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 5153 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5153 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T08:35:28' WHERE Id = @FilterId

-- Deprecating filter 5143 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5143 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-03-31T13:58:33' WHERE Id = @FilterId

-- Deprecating filter 5136 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5136 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T10:26:45' WHERE Id = @FilterId

-- Deprecating filter 5086 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5086 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T09:17:01' WHERE Id = @FilterId

-- Deprecating filter 5077 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5077 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T13:39:16' WHERE Id = @FilterId

-- Deprecating filter 5072 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5072 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T13:54:30' WHERE Id = @FilterId

-- Deprecating filter 5071 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5071 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T13:58:25' WHERE Id = @FilterId

-- Deprecating filter 5069 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5069 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T10:36:41' WHERE Id = @FilterId

-- Deprecating filter 5036 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5036 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T12:31:19' WHERE Id = @FilterId

-- Deprecating filter 5028 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5028 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-03-31T15:08:01' WHERE Id = @FilterId

-- Deprecating filter 5004 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5004 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T12:26:49' WHERE Id = @FilterId

-- Deprecating filter 4996 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4996 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T15:42:59' WHERE Id = @FilterId

-- Deprecating filter 4992 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4992 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T13:46:54' WHERE Id = @FilterId

-- Deprecating filter 4990 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4990 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2023-01-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 4974 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4974 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:15:08' WHERE Id = @FilterId

-- Deprecating filter 4964 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4964 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T15:31:34' WHERE Id = @FilterId

-- Deprecating filter 4956 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4956 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T16:33:24' WHERE Id = @FilterId

-- Deprecating filter 4955 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4955 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T12:05:43' WHERE Id = @FilterId

-- Deprecating filter 4952 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4952 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T11:13:33' WHERE Id = @FilterId

-- Deprecating filter 4934 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4934 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-30T23:15:06' WHERE Id = @FilterId

-- Deprecating filter 4926 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4926 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-04-01T16:05:56' WHERE Id = @FilterId

-- Deprecating filter 4922 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4922 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T14:18:26' WHERE Id = @FilterId

-- Deprecating filter 4893 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4893 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T11:59:29' WHERE Id = @FilterId

-- Deprecating filter 4873 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4873 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T09:01:58' WHERE Id = @FilterId

-- Deprecating filter 4864 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4864 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T15:38:59' WHERE Id = @FilterId

-- Deprecating filter 4862 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4862 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2023-01-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 4861 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4861 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2023-01-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 4856 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4856 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2023-01-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 4855 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4855 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2023-01-31T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 4842 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4842 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-05-31T09:54:55' WHERE Id = @FilterId

-- Deprecating filter 4841 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4841 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-05-31T09:57:31' WHERE Id = @FilterId

-- Deprecating filter 4824 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4824 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T11:54:24' WHERE Id = @FilterId

-- Deprecating filter 4821 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4821 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T12:17:06' WHERE Id = @FilterId

-- Deprecating filter 4818 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4818 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T12:00:38' WHERE Id = @FilterId

-- Deprecating filter 4807 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4807 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T14:46:02' WHERE Id = @FilterId

-- Deprecating filter 4782 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4782 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-06-30T16:27:35' WHERE Id = @FilterId

-- Deprecating filter 4780 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4780 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T14:34:14' WHERE Id = @FilterId

-- Deprecating filter 4733 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4733 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T10:03:07' WHERE Id = @FilterId

-- Deprecating filter 4728 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4728 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T12:46:07' WHERE Id = @FilterId

-- Deprecating filter 4702 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4702 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T13:13:57' WHERE Id = @FilterId

-- Deprecating filter 4673 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4673 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-04-02T17:08:06' WHERE Id = @FilterId

-- Deprecating filter 4664 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4664 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T10:16:06' WHERE Id = @FilterId

-- Deprecating filter 4663 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4663 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T10:15:44' WHERE Id = @FilterId

-- Deprecating filter 4654 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4654 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:30:53' WHERE Id = @FilterId

-- Deprecating filter 4650 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4650 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:41:18' WHERE Id = @FilterId

-- Deprecating filter 4625 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4625 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T15:30:11' WHERE Id = @FilterId

-- Deprecating filter 4600 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4600 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T18:27:15' WHERE Id = @FilterId

-- Deprecating filter 4573 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4573 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T10:13:56' WHERE Id = @FilterId

-- Deprecating filter 4571 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4571 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T11:32:36' WHERE Id = @FilterId

-- Deprecating filter 4539 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4539 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T12:40:14' WHERE Id = @FilterId

-- Deprecating filter 4532 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4532 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T10:47:48' WHERE Id = @FilterId

-- Deprecating filter 4527 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 4527 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T12:50:38' WHERE Id = @FilterId

-- Deprecating filter 3504 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3504 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T19:38:43' WHERE Id = @FilterId

-- Deprecating filter 3483 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3483 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-30T13:34:07' WHERE Id = @FilterId

-- Deprecating filter 3480 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3480 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T14:54:55' WHERE Id = @FilterId

-- Deprecating filter 3467 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3467 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T09:20:35' WHERE Id = @FilterId

-- Deprecating filter 3456 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3456 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T11:47:03' WHERE Id = @FilterId

-- Deprecating filter 3436 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3436 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T10:05:55' WHERE Id = @FilterId

-- Deprecating filter 3397 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3397 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-06-01T11:02:19' WHERE Id = @FilterId

-- Deprecating filter 3396 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3396 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-08-31T14:00:49' WHERE Id = @FilterId

-- Deprecating filter 3394 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3394 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3376 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3376 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3365 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3365 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T10:20:17' WHERE Id = @FilterId

-- Deprecating filter 3364 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3364 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T10:21:23' WHERE Id = @FilterId

-- Deprecating filter 3357 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3357 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-06-30T13:40:24' WHERE Id = @FilterId

-- Deprecating filter 3348 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3348 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3337 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3337 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T10:06:19' WHERE Id = @FilterId

-- Deprecating filter 3333 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3333 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3306 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3306 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-06-30T01:00:00' WHERE Id = @FilterId

-- Deprecating filter 3288 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3288 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3279 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3279 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T13:33:06' WHERE Id = @FilterId

-- Deprecating filter 3274 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3274 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T16:03:19' WHERE Id = @FilterId

-- Deprecating filter 3260 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3260 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T00:22:03' WHERE Id = @FilterId

-- Deprecating filter 3257 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3257 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-11-29T23:00:00' WHERE Id = @FilterId

-- Deprecating filter 3238 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3238 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T14:17:40' WHERE Id = @FilterId

-- Deprecating filter 3234 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3234 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-07-31T16:47:13' WHERE Id = @FilterId

-- Deprecating filter 3225 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3225 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3224 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3224 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3221 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3221 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T15:40:18' WHERE Id = @FilterId

-- Deprecating filter 3212 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3212 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-30T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3199 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3199 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-14T17:16:35' WHERE Id = @FilterId

-- Deprecating filter 3193 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3193 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-30T22:01:05' WHERE Id = @FilterId

-- Deprecating filter 3192 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3192 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T08:21:03' WHERE Id = @FilterId

-- Deprecating filter 3191 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3191 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T15:45:40' WHERE Id = @FilterId

-- Deprecating filter 3190 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3190 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T15:02:38' WHERE Id = @FilterId

-- Deprecating filter 3189 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3189 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T14:57:59' WHERE Id = @FilterId

-- Deprecating filter 3188 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3188 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3187 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3187 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-07-01T14:40:15' WHERE Id = @FilterId

-- Deprecating filter 3186 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3186 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T13:35:20' WHERE Id = @FilterId

-- Deprecating filter 3185 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3185 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-15T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3184 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3184 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-07-31T14:20:24' WHERE Id = @FilterId

-- Deprecating filter 3182 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3182 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T14:10:43' WHERE Id = @FilterId

-- Deprecating filter 3181 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3181 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-03-31T14:00:00' WHERE Id = @FilterId

-- Deprecating filter 3180 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3180 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T08:13:14' WHERE Id = @FilterId

-- Deprecating filter 3177 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3177 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:38:51' WHERE Id = @FilterId

-- Deprecating filter 3176 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3176 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T15:09:11' WHERE Id = @FilterId

-- Deprecating filter 3175 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3175 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T17:24:53' WHERE Id = @FilterId

-- Deprecating filter 3161 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3161 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T08:39:42' WHERE Id = @FilterId

-- Deprecating filter 3155 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3155 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-11-29T23:00:00' WHERE Id = @FilterId

-- Deprecating filter 3146 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3146 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T16:06:33' WHERE Id = @FilterId

-- Deprecating filter 3143 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3143 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T13:49:44' WHERE Id = @FilterId

-- Deprecating filter 3140 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3140 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-27T15:11:20' WHERE Id = @FilterId

-- Deprecating filter 3124 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3124 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T15:26:55' WHERE Id = @FilterId

-- Deprecating filter 3123 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3123 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-08-31T09:21:40' WHERE Id = @FilterId

-- Deprecating filter 3121 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3121 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T17:54:03' WHERE Id = @FilterId

-- Deprecating filter 3118 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3118 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-15T10:43:05' WHERE Id = @FilterId

-- Deprecating filter 3110 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3110 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-31T17:04:28' WHERE Id = @FilterId

-- Deprecating filter 3100 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3100 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-10-14T17:52:42' WHERE Id = @FilterId

-- Deprecating filter 3099 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3099 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-10-29T17:50:15' WHERE Id = @FilterId

-- Deprecating filter 3097 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3097 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2023-01-31T18:30:00' WHERE Id = @FilterId

-- Deprecating filter 3096 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3096 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-04-11T17:44:45' WHERE Id = @FilterId

-- Deprecating filter 3095 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3095 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T16:40:05' WHERE Id = @FilterId

-- Deprecating filter 3089 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3089 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T09:20:27' WHERE Id = @FilterId

-- Deprecating filter 3085 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3085 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T16:02:37' WHERE Id = @FilterId

-- Deprecating filter 3082 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3082 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-27T08:31:56' WHERE Id = @FilterId

-- Deprecating filter 3081 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3081 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-27T18:28:45' WHERE Id = @FilterId

-- Deprecating filter 3080 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3080 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-19T18:28:01' WHERE Id = @FilterId

-- Deprecating filter 3079 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3079 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-27T18:26:53' WHERE Id = @FilterId

-- Deprecating filter 3078 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3078 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2013-09-27T18:25:46' WHERE Id = @FilterId

-- Deprecating filter 3066 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3066 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-06-30T14:23:14' WHERE Id = @FilterId

-- Deprecating filter 3065 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3065 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T13:33:16' WHERE Id = @FilterId

-- Deprecating filter 3062 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3062 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-02-28T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 3042 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3042 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-31T12:16:15' WHERE Id = @FilterId

-- Deprecating filter 3035 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3035 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T16:20:31' WHERE Id = @FilterId

-- Deprecating filter 3034 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3034 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2015-12-31T13:38:43' WHERE Id = @FilterId

-- Deprecating filter 3033 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3033 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-01-31T11:09:54' WHERE Id = @FilterId

-- Deprecating filter 3019 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3019 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-12-31T15:45:51' WHERE Id = @FilterId

-- Deprecating filter 3009 v8.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3009 AND Version = 8
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-12-31T11:58:45' WHERE Id = @FilterId

-- Deprecating filter 3008 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 3008 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2014-09-30T19:29:46' WHERE Id = @FilterId

-- Deprecating filter 5350 v7.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 5350 AND Version = 7
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T17:49:40' WHERE Id = @FilterId

-- Deprecating filter 7051 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7051 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-10-31T15:29:17' WHERE Id = @FilterId

-- Deprecating filter 7056 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 7056 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-31T16:04:19' WHERE Id = @FilterId

-- Deprecating filter 8051 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 8051 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-09-30T16:02:10' WHERE Id = @FilterId

-- Deprecating filter 10688 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10688 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 10709 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10709 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 10711 v4.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10711 AND Version = 4
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 10713 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10713 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-29T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 10726 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10726 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-10-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 10744 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10744 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2016-09-21T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 10753 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 10753 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-02T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 18029 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18029 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2021-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 18213 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18213 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-01-30T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 18222 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18222 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 18294 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 18294 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 19432 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 19432 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 20505 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 20505 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-29T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 21071 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21071 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 21218 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21218 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-30T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 21434 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21434 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 21549 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21549 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 21552 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 21552 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-04-01T00:00:00' WHERE Id = @FilterId

-- Deprecating filter 22829 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 22829 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 23057 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23057 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-04-29T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 23160 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23160 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-06-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 23520 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 23520 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-08-31T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 24465 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24465 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-09-29T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 24729 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24729 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-31T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 24731 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24731 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-31T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 24761 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 24761 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-07-19T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 25183 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 25183 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-08-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 25741 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 25741 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-01-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 26518 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26518 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2017-12-03T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 26874 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 26874 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-01-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 27264 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27264 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 27268 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 27268 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2019-01-06T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 29154 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 29154 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-01-31T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 31830 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 31830 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-03-10T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 32919 v5.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 32919 AND Version = 5
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2018-10-30T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 44086 v2.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 44086 AND Version = 2
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2019-10-31T17:00:00' WHERE Id = @FilterId

-- Deprecating filter 84411 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 84411 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2024-01-30T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 92664 v1.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 92664 AND Version = 1
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2023-12-30T16:00:00' WHERE Id = @FilterId

-- Deprecating filter 103874 v3.
SET @FilterId = NULL
SELECT @FilterId = Id FROM Filter WHERE FilterNumber = 103874 AND Version = 3
IF @FilterId IS NOT NULL
	UPDATE Filter SET [Status] = '0', ExpirationDate = '2022-11-22T16:00:00' WHERE Id = @FilterId
